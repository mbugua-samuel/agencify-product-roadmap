WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'confluence.web.resources:dictionary', location = 'includes/js/api/dictionary.js' */
define("confluence/api/dictionary",[],function(){return function(){var a={};return{get:function(b){return a[b]},put:function(b,c){return a[b]=c},reset:function(){a={}},elements:function(){return a}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:macro-js-overrides', location = 'includes/js/macro-js-overrides.js' */
define("confluence/macro-js-overrides",["confluence/api/dictionary","underscore"],function(e,d){var b=new e;return d.extend(b,{getFunction:function(a,c){if((a=b.get(a))&&"function"===typeof a[c])return a[c]},assignFunction:function(a,c){b.put(a,d.extend({},b.get(a),c))}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:legacy-message-queue', location = 'includes/js/legacy-message-queue.js' */
define("confluence/legacy-message-queue",["window"],function(b){b.legacyMessageQueue||(b.legacyMessageQueue=[]);return{push:function(a){var c;c="string"!==typeof a.type?!1:a.hasOwnProperty("type")&&a.hasOwnProperty("payload")?!0:!1;if(!c)throw Error("legacyMessageQueue: received Invalid Message: "+JSON.stringify(a));b.legacyMessageQueue.push(a)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:confluence-templates', location = 'includes/js/amd/shim/confluence-templates-amd.js' */
define("confluence/templates",[],function(){"undefined"===typeof Confluence&&(Confluence={});"undefined"===typeof Confluence.Templates&&(Confluence.Templates={});return Confluence.Templates});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:dom-filter-field', location = 'includes/js/dom-filter-field.js' */
define("confluence/dom-filter-field",["ajs","confluence/templates","jquery"],function(f,m,e){return function(c){function k(){g=e(c.items)}function h(){return e.trim(b.filter(":not(.blank-search)").val())}function l(){c.searcher(g,h());c.postSearch(g.filter(":visible"))}var d={items:null,matcher:function(a,c){return-1<a.text().toLowerCase().indexOf(c)},searcher:function(a,b){""!==b?(b=b.toLowerCase(),a.each(function(){var a=e(this),d=c.matcher(a,b);a.toggleClass("hidden",!d)})):a.removeClass("hidden")},
postSearch:function(a){},placeholderText:"Search",submitCallback:function(a,b){f.debug("DomFilterField submitted with "+a.length+" item(s) for search text \x3e"+b+"\x3c")}};c=e.extend(d,c);var g;k();var d=e(m.DomFilterField.form()),b=d.find("input");b.keyup(function(a){l();return f.stopEvent(a)}).keyup(function(a){return f.stopEvent(a)}).focus(function(a){b.hasClass("blank-search")&&b.removeClass("blank-search").val("");a.target.select()}).blur(function(a){""===h()&&b.addClass("blank-search").val(c.placeholderText)}).blur();
c.formId&&d.attr("id",c.formId);c.inputId&&b.attr("id",c.inputId);d.submit(function(a){f.stopEvent(a);a=g.filter(":visible");a.length&&c.submitCallback(a,h());return!1});return{form:d,reset:function(){""!==h()&&(b.val("").blur(),c.searcher(g,""))},refreshItems:k,filter:l,focus:function(){b.focus()},focusAndSearch:function(a){a=e.trim(a);b.val(a).keyup();a&&b.removeClass("blank-search");b.focus()}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence/dom-filter-field","Confluence.DomFilterField");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:dom-filter-field', location = 'includes/soy/dom-filter-field.soy' */
// This file was automatically generated from dom-filter-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.DomFilterField.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.DomFilterField == 'undefined') { Confluence.Templates.DomFilterField = {}; }


Confluence.Templates.DomFilterField.form = function(opt_data, opt_ignored) {
  return '<form class="aui dom-filter-field-form"><input type="text" class="text"/></form>';
};
if (goog.DEBUG) {
  Confluence.Templates.DomFilterField.form.soyTemplateName = 'Confluence.Templates.DomFilterField.form';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/namespace.js' */
window.Confluence||(window.Confluence={});window.Confluence.UI||(window.Confluence.UI={});window.Confluence.UI.Components||(window.Confluence.UI.Components={});window.Confluence.UI.Components.Pagination||(window.Confluence.UI.Components.Pagination={});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/internal/dark-features.js' */
define("confluence-ui-components/dark-features",["ajs"],function(a){return a.DarkFeatures});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-resolver.js' */
define("confluence-ui-components/js/internal/space-resolver",["underscore","jquery","ajs"],function(i,b,h){var g={conf_all:"All spaces",conf_current:"Current space",conf_favorites:"Favourite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces"};function e(j){var k=i.map(j,function(l){return"spaceKey="+encodeURI(l)});return k.join("&")}function f(k,l){var j=typeof l==="undefined";var m=i.escape(j?k:l);return{id:k,text:m,idOnly:j}}function a(m,p){var n={};var o=[];i.each(m,function(r){var q=d(r);if(q){n[r]=f(r,q)}else{o.push(r)}});var k;if(o.length){var l=h.contextPath()+"/rest/api/space?"+e(o);k=b.getJSON(l)}else{k=new b.Deferred();k.resolve({results:[]})}function j(r){var q=r.results;i.each(q,function(t){n[t.key]=f(t.key,t.name)});var s=i.map(m,function(t){return n[t]||f(t)});p(s)}k.done(j)}function d(j){return g[j]}var c=["conf_favorites","conf_global","conf_personal"];return{getSpaceDisplayItems:a,getSpaceCategoryDisplayName:d,getSpaceTypeKeys:function(){return c}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/space-picker.js' */
define("confluence-ui-components/js/space-picker",["underscore","ajs","jquery","confluence-ui-components/js/internal/space-resolver"],function(r,f,b,d){var a={data:null,suggestCategories:null};var p=function(s){return function(t){var u={id:t.spaceKey,text:t.spaceName};if(typeof s==="function"){return s(u)}return u}};var k;var c=function(s){return function(t,x){var w=b(t).val();if(w===""){return}var u=w.split(",");function v(y){if(!s.multiple){y=y[0]}x(y)}d.getSpaceDisplayItems(u,v)}};var e=function(t){var s;if(t.suggestCategories){var u={text:"Select a suggestion or type to search",children:r.map(t.suggestCategories,function(v){return{id:v,text:d.getSpaceCategoryDisplayName(v)}})}}return function(w){if(s){w.callback(s);return}function v(x){var y={results:[]};if(u){y.results.push(u)}if(x.length>0){y.results.push({text:"Suggested spaces",children:r.map(x,function(z){return{id:z.key,text:r.escape(z.name)}})})}s=y;w.callback(s)}b.getJSON(f.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(v).fail(function(){f.log("Couldn't fetch recent spaces");var x={results:[]};if(u){x.results.push(u)}w.callback(x)})}};var n=function(){return window.Select2.query.ajax({url:f.contextPath()+"/rest/quicknav/1/search?type=spacedesc&type=personalspacedesc",data:function(s){return{query:s,maxPerCategory:25}},quietMillis:250,results:function(u){var t=u.contentNameMatches;if(t.length<=1){return{results:[]}}else{var s=r.map(t[0],k);return{results:[{text:"Search results",children:s}]}}}})};function g(t){var s=n();var u=e(t);return function(v,x,w){if(v.term.length<2){return u(v)}else{if(typeof x==="function"){v.term=x(v.term)}k=p(w);return s(v)}}}function h(){var s=b(".select2-container-active").next("input");var t=s.val().trim();return(t!=="")?t.split(","):[]}function i(s){var t=r.intersection(s,d.getSpaceTypeKeys());return t.length>0}function j(s){return(typeof s.id!=="undefined")&&r.contains(d.getSpaceTypeKeys(),s.id)}function q(t,u,v){var s=[];t.forEach(function(w){if(w.children){var x=q(w.children,u,v);if(x.length){s.push(b.extend({},w,{children:x}))}}else{var y=j(w);if((u&&y)||(!u&&!y)){if(!r.contains(v,w.id)){s.push(w)}}}});return s}function m(t,v){if(!t.length||!v.length){return t}var u=i(v);var s=q(t,u,v);if(!s.length){s.push({text:"Can\'t filter by space types AND spaces",disabled:true})}return s}function o(s){var t=h();return m(s,t)}function l(t){t=r.extend({},a,t);var s={placeholder:"Select a space",formatResult:function(u,v,w){v.attr("title",b("<div/>").html(u.text).text());return b.fn.select2.defaults.formatResult.apply(this,arguments)},escapeMarkup:function(u){return u},multiple:t.multiple===true};if(t.disableMixedSpaceTypes){s.sortResults=o}if(t.data){return r.extend(s,{data:t.data})}else{return r.extend(s,{initSelection:c(t),query:g(t)})}}return{build:l,filterMixedTypesForValues:m}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-picker-legacy.js' */
window.Confluence.UI.Components.SpacePicker=require("confluence-ui-components/js/space-picker");AJS.deprecate.prop(window.Confluence.UI.Components.SpacePicker,"build",{sinceVersion:"1.4.22",extraInfo:"Use require('confluence-ui-components/js/space-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-jquery-ui-jquery-ui-datepicker', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
("undefined"===typeof window?global:window).__2e0b5101fd18243cca56edebec70ca4a=function(){(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",
function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);
this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),
e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==
a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),
height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&
a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=
a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,
b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,
d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);
this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},
_selectMonthYear:function(a,b,c){var a=d(a),e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,
f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==
a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&
a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+
1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);
c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},
ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,
c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},
f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=
this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==
typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,
e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+
x].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),
f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),
n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+
n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-date-picker', location = 'src/js/aui/date-picker.js' */
("undefined"===typeof window?global:window).__f4d489150775a0b308f0b66bb4cfb52f=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function g(a,c){var d=void 0,h=void 0,b=void 0,i=void 0,e={},d={},i=x++,b=(0,f.default)(a);b.attr("data-aui-dp-uuid",i);d.getField=function(){return b};d.getOptions=function(){return e};h=function(){var a=void 0,c=void 0,k=void 0,h=void 0,t=void 0,j=void 0,v=void 0,q=void 0,r=void 0,l=void 0,n=void 0,o=void 0;d.hide=function(){l.hide()};d.show=function(){l.show()};
d.setDate=function(b){"undefined"!==typeof a&&a.datepicker("setDate",b)};d.getDate=function(){if("undefined"!==typeof a)return a.datepicker("getDate")};d.setMin=function(b){if("undefined"!==typeof a)return a.datepicker("option","minDate",b)};d.setMax=function(b){if("undefined"!==typeof a)return a.datepicker("option","maxDate",b)};v=function(g){o.off();if(e.hint){var m=(0,f.default)("<div/>").addClass("aui-datepicker-hint");m.append("<span/>").text(e.hint);o.append(m)}a=(0,f.default)("<div/>");a.attr("data-aui-dp-popup-uuid",
i);o.append(a);m={dateFormat:e.dateFormat,defaultDate:b.val(),maxDate:b.attr("max"),minDate:b.attr("min"),nextText:">",onSelect:function(a){b.val(a);b.trigger("change");d.hide();q=!0;b.focus();e.onSelect&&e.onSelect.call(this,a)},onChangeMonthYear:function(){setTimeout(l.refresh,0)},prevText:"<"};f.default.extend(m,g);-1<e.firstDay&&(m.firstDay=e.firstDay);"undefined"!==typeof b.attr("step")&&u.log("WARNING: The date picker polyfill currently does not support the step attribute!");a.datepicker(m);
(0,f.default)("body").on("keydown",k);b.on("focusout keydown",h);b.on("propertychange keyup input paste",j);c=new MutationObserver(function(a){a.forEach(function(a){a.attributeName==="min"?d.setMin(a.target.getAttribute("min")):a.attributeName==="max"&&d.setMax(a.target.getAttribute("max"))})});c.observe(b[0],{attributes:!0})};k=function(a){var c=(0,f.default)(a.target),k=c.closest(o).length||c.is(b),e=c.closest(".ui-datepicker-header").length;!k&&!e||a.keyCode===y.default.ESCAPE?d.hide():c[0]!==
b[0]&&a.preventDefault()};h=function(){r||((0,f.default)("body").on("focus blur click mousedown","*",k),r=!0)};t=function(){q?q=!1:d.show()};j=function(){(0,f.default)(this).val()&&a.datepicker("setDate",b.val())};d.destroyPolyfill=function(){d.hide();c&&(c.disconnect(),c=null);b.attr("placeholder",null);b.off("propertychange keyup input paste",j);b.off("focus click",t);b.off("focusout keydown",h);(0,f.default)("body").off("keydown",h);(0,f.default)("body").off("focus blur click mousedown keydown",
k);g.prototype.browserSupportsDateField&&(b[0].type="date");"undefined"!==typeof a&&a.datepicker("destroy");delete d.destroyPolyfill;delete d.show;delete d.hide};r=q=!1;e.languageCode in g.prototype.localisations||(e.languageCode="");var w=g.prototype.localisations,s="",p=240;"large"===w.size&&(p=325,s="aui-datepicker-dialog-large");p={hideCallback:function(){(0,f.default)("body").off("focus blur click mousedown","*",k);r=false;n&&n._datePickerPopup&&delete n._datePickerPopup},hideDelay:null,noBind:!0,
persistent:!0,closeOthers:!1,width:p};e.position&&(p.calculatePositions=function(a,b){var d=(0,f.default)(a[0]);return e.position.call(this,d,b)});l=(0,z.default)(b,void 0,function(b,d,c){if(typeof a==="undefined"){o=b;v(w)}if(n=(0,f.default)(d).closest(".aui-inline-dialog").get(0))n._datePickerPopup=l;c()},p);l.addClass("aui-datepicker-dialog");l.addClass(s);b.on("focus click",t);b.attr("placeholder",e.dateFormat);if(e.overrideBrowserDefault&&g.prototype.browserSupportsDateField&&(b[0].type="text",
s=b[0].getAttribute("value")))b[0].value=s};d.reset=function(){"function"===typeof d.destroyPolyfill&&d.destroyPolyfill();(!g.prototype.browserSupportsDateField||e.overrideBrowserDefault)&&h()};d.reconfigure=function(a){e=f.default.extend(void 0,g.prototype.defaultOptions,a);d.reset()};d.reconfigure(c);return d}var j={};"use strict";Object.defineProperty(j,"__esModule",{value:!0});var A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=h(__fb409c432b53d81bad1e174061f6886c);__2e0b5101fd18243cca56edebec70ca4a;var u;var c=__56f99f629e22233a92f5a2b763037a87;if(c&&c.__esModule)u=c;else{var a={};if(null!=c)for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&(a[i]=c[i]);a.default=c;u=a}i=__ac4b25bb9b3c22ec7c045898c699fde1;var c=h(__a96071e28d103a38ba4dff141c560d4f),z=h(__e995555a4d229e180023cc021543d303),y=h(__f64d3cd498337ca9bb808ad279537d9c),
a=h(__51474667125a5bfeb6e78ef22f02f983),x=0;g.prototype.browserSupportsDateField=(0,i.supportsDateField)();g.prototype.defaultOptions={overrideBrowserDefault:!1,firstDay:-1,languageCode:(0,f.default)("html").attr("lang")||"en-AU",dateFormat:f.default.datepicker.W3C};g.prototype.localisations={dayNames:[a.default.getText("ajs.datepicker.localisations.day-names.sunday"),a.default.getText("ajs.datepicker.localisations.day-names.monday"),a.default.getText("ajs.datepicker.localisations.day-names.tuesday"),
a.default.getText("ajs.datepicker.localisations.day-names.wednesday"),a.default.getText("ajs.datepicker.localisations.day-names.thursday"),a.default.getText("ajs.datepicker.localisations.day-names.friday"),a.default.getText("ajs.datepicker.localisations.day-names.saturday")],dayNamesMin:[a.default.getText("ajs.datepicker.localisations.day-names-min.sunday"),a.default.getText("ajs.datepicker.localisations.day-names-min.monday"),a.default.getText("ajs.datepicker.localisations.day-names-min.tuesday"),
a.default.getText("ajs.datepicker.localisations.day-names-min.wednesday"),a.default.getText("ajs.datepicker.localisations.day-names-min.thursday"),a.default.getText("ajs.datepicker.localisations.day-names-min.friday"),a.default.getText("ajs.datepicker.localisations.day-names-min.saturday")],firstDay:a.default.getText("ajs.datepicker.localisations.first-day"),isRTL:"true"===a.default.getText("ajs.datepicker.localisations.is-RTL")?!0:!1,monthNames:[a.default.getText("ajs.datepicker.localisations.month-names.january"),
a.default.getText("ajs.datepicker.localisations.month-names.february"),a.default.getText("ajs.datepicker.localisations.month-names.march"),a.default.getText("ajs.datepicker.localisations.month-names.april"),a.default.getText("ajs.datepicker.localisations.month-names.may"),a.default.getText("ajs.datepicker.localisations.month-names.june"),a.default.getText("ajs.datepicker.localisations.month-names.july"),a.default.getText("ajs.datepicker.localisations.month-names.august"),a.default.getText("ajs.datepicker.localisations.month-names.september"),
a.default.getText("ajs.datepicker.localisations.month-names.october"),a.default.getText("ajs.datepicker.localisations.month-names.november"),a.default.getText("ajs.datepicker.localisations.month-names.december")],showMonthAfterYear:"true"===a.default.getText("ajs.datepicker.localisations.show-month-after-year")?!0:!1,yearSuffix:a.default.getText("ajs.datepicker.localisations.year-suffix")};f.default.fn.datePicker=function(a){var c=this.data("aui-datepicker");c?"object"===("undefined"===typeof a?"undefined":
A(a))&&c.reconfigure(a):(c=new g(this,a),this.data("aui-datepicker",c));return c};(0,c.default)("DatePicker",g);j.default=g;return j=j["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-datepicker', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
("undefined"===typeof window?global:window).__2e0b5101fd18243cca56edebec70ca4a=function(){(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",
function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);
this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),
e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==
a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),
height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&
a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=
a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,
b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,
d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);
this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},
_selectMonthYear:function(a,b,c){var a=d(a),e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,
f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==
a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&
a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+
1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);
c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},
ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,
c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},
f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=
this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==
typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,
e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+
x].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),
f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),
n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+
n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-select2', location = 'src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__8d41b5456e4c15b2ede9f1077d5c1a84=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-select2', location = 'src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__80baa2484dadc4ad4c61e3508d74abf7=function(){"use strict";var b=__fb409c432b53d81bad1e174061f6886c,d=b&&b.__esModule?b:{"default":b};__8d41b5456e4c15b2ede9f1077d5c1a84;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/space-page-picker.js' */
define("confluence-ui-components/js/space-page-picker",["underscore","ajs","jquery"],function(J,s,y){var H={conf_all:"All spaces",conf_favorites:"Favourite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces",conf_current:"Current space"};var i={"currentContent()":"Current page"};var A={data:null,suggestCategories:null};var r="SPACE-PAGE-TRIGGER-VALUE";var m={placeholder:"Select a space or page",multiple:true,formatInputTooShort:function(){return "Start typing to search"},formatResult:function(M,O,R){if(M.children){O.addClass("space-page-picker-result-category");return y.fn.select2.defaults.formatResult.apply(this,arguments)}else{if(M.id){O.attr("title",M.text);O.addClass("space-page-picker-result-label-with-icon");var L=y("<span/>").addClass(M.className+" item-text").html(y.fn.select2.defaults.formatResult.apply(this,arguments));var Q=(M.subText)?y("<span/>").addClass("space-name").html(M.subText):y("");var N=y("<span/>").attr(e(M.id),M.id).append(L).append(Q);var P=y("<span/>").append(N);return P}else{O.addClass(M.className);return y.fn.select2.defaults.formatResult.apply(this,arguments)}}},formatSelection:function(M,N){N.addClass("space-page-picker-selected-item");N.attr("title",M.text);var L=y("<span/>").attr(e(M.id),M.id).addClass(M.className+" item-text").html(y.fn.select2.defaults.formatSelection.apply(this,arguments));N.append(L)},escapeMarkup:function(L){return L},formatResultCssClass:function(L){return(L.children||L.id)?"":"select2-result-space-page-separator"},containerCssClass:"space-page-picker-container",dropdownCssClass:"space-page-picker-drop"};var p=function(L,N){var M=L.data("select2").opts.manualInit;if(M===true){return}C(L.val(),L,N)};function K(N,M,L){var O=J.map(N,function(P){return M[P]});return(L)?O:((O.length>0)?O[0]:null)}var q=function(L){var N;if(L.suggestCategories){var O={text:"Suggested categories",children:J.map(L.suggestCategories,function(P){return g(P)})}}if(L.suggestedContentFunctions){var M=J.map(L.suggestedContentFunctions,function(P){return x(P)})}return function(Q){if(N){Q.callback(N);return}var P=[];N={results:[]};if(a(L)){var S=y.getJSON(s.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(T){var U=(O)?[O]:[];(T.length>0)&&U.push({text:"Suggested spaces",children:J.map(T,function(V){return z(V.key,J.escape(V.name),null,true)})});(U.length>0)&&(N.results=N.results.concat(U))}).fail(function(){s.debug("Couldn't fetch recent spaces");var T=(O)?[O]:[];(T.length>0)&&(N.results=N.results.concat(T))});P.push(S)}if(n(L)){var R=y.getJSON(s.contextPath()+"/rest/recentlyviewed/1.0/recent/pages",{noTrashedContent:true}).done(function(T){if(T.length>0||M){var U=[];if(M){U=U.concat(M)}if(T.length>0){U=U.concat(J.map(T,function(V){return t(V.id,J.escape(V.title),J.escape(V.space),"content-type-page",true)}))}N.results.push({text:"Suggested pages",children:U})}}).fail(function(){s.debug("Couldn't fetch recent pages")});P.push(R)}y.when.apply(y,J.map(P,function(U){var T=y.Deferred();U.always(function(){T.resolve()});return T})).done(function(){if(N.results.length===0){N.results=[{text:"",children:[]}]}Q.callback(N)})}};var u=function(L){var M="";if(!L||L.length===2&&L.indexOf("space")>=0&&L.indexOf("page")>=0){M="type=spacedesc&type=personalspacedesc&type=page"}else{if(L.length===1&&L[0]==="space"){M="type=spacedesc&type=personalspacedesc"}else{if(L.length===1&&L[0]==="page"){M="type=page"}else{return}}}return window.Select2.query.ajax({url:s.contextPath()+"/rest/quicknav/1/search?"+M,data:function(N,O){return{query:N,maxPerCategory:25}},quietMillis:250,results:function(Q,U){var T=Q.contentNameMatches;if(T.length<=1){return{results:[]}}else{var V=[];var O=function(W){return G(W.spaceKey,W.spaceName,W.id,W.name,W.className)};for(var R=0;R<T.length-1;R++){var S=[];for(var P=0;P<T[R].length;P++){var N=O(T[R][P]);if(N){S.push(N)}}if(S.length>0){V=V.concat(S);V.push({id:"",text:"",subText:"",className:"",disabled:true})}}return{results:[{text:"Search results",children:V}]}}}})};var I=function(M){var L=u(M.contentType);var N=q(M);return function(O){if(O.term.length<2){N(O)}else{L(O)}}};function e(L){return(L.indexOf("page:")===0)?"data-item-id":"data-item-key"}function z(L,O,M,N){M=(M)?M:((L.indexOf("~")===0)?"content-type-personalspacedesc":"content-type-spacedesc");return h("space",L,O,"",M,N)}function g(L){var M=H[L];return h("space-cat",L,M,"","content-type-space-category",M)}function x(L){var M=i[L];return h("content-function",L,M,"","content-type-page",M)}function t(P,O,L,M,N){return h("page",P,O,L,M,N)}function h(R,O,Q,N,M,P){var L=f(R,O);Q=(!Q)?O:Q;M=(P)?M:(M+" content-not-found");return{id:L,text:Q,subText:N,className:M,disabled:(P?false:true)}}function k(L){return"space-cat:"+L}function j(L){return"content-function:"+L}function v(L){return"space:"+L}function w(L){return"page:"+L}function G(P,M,Q,N,O){var L;if(O==="content-type-spacedesc"||O==="content-type-personalspacedesc"){L=z(P,M,O,true)}else{if(O==="content-type-page"){L=t(Q,N,M,O,true)}}return L}function f(){var L=Array.prototype.slice.apply(arguments);return L.join(":")}function a(L){return((!L.contentType||L.contentType.length===0||L.contentType.indexOf("space")>=0)&&L.showRecentlyViewedSpaces!==false)}function n(L){return((!L.contentType||L.contentType.length===0||L.contentType.indexOf("page")>=0)&&L.showRecentlyViewedPages!==false)}function E(M,L){var N=c("SpaceCat",M,L.inputSpaceCatId,(L.inputSpaceCatName)?L.inputSpaceCatName:L.inputSpaceCatId);return B(M,N.id,N.name)}function F(M,L){var O=L.inputContentFunctionId||"legacy-macro-param-content-funcs";var N=c("ContentFunction",M,O,L.inputContentFunctionName||O);return B(M,N.id,N.name)}function l(M,L){var N=c("Space",M,L.inputSpaceId,(L.inputSpaceName)?L.inputSpaceName:L.inputSpaceId);return B(M,N.id,N.name)}function o(M,L){var N=c("Page",M,L.inputPageId,(L.inputPageName)?L.inputPageName:L.inputPageId);return B(M,N.id,N.name)}function c(P,N,Q,M){var L;if(!Q){L=N.attr("id");if(!L){return null}Q=L+P}if(!M){var O=N.attr("name")||L;M=O+P}return{id:Q,name:M}}function B(M,O,L){var N=y("#"+O);if(N.length===0){N=y(Confluence.UI.Components.templates.hiddenField({id:O,name:L}));M.after(N)}return N}function b(M,O,N){if(!M){return}var L=J.filter(O,function(P){return P.indexOf(N)===0});L=J.map(L,function(P){return P.substring(N.length,P.length)});M.val(L.join(","))}function d(S,N,O,L){O=(O)?(J.isArray(O)?O:O.split(",")):[];L=(L)?L.split(","):[];var R=J.union(O,L);var M=J.map(R,function(U){return N+U});var P=S.val();var T=P?P.split(","):[];var Q=J.union(T,M);if(Q.length>0){S.val(Q.join(","))}}function D(M){var L=J.extend({},A,m,M);if(!M.data){L=J.extend({},{initSelection:p,query:I(L)},L)}var N=y(L.orgElement);if(!N||N.length!==1){return L}if(!N.val()&&!L.manualInit){N.val(r)}N.addClass("select2-input");return L}function C(R,U,N){var M=U.data("select2").opts;var P=M.placeholder||U.data("placeholder");var T=E(U,M);var W=F(U,M);var L=l(U,M);var X=o(U,M);U.on("change",function(ad){b(T,ad.val,"space-cat:");b(W,ad.val,"content-function:");b(L,ad.val,"space:");b(X,ad.val,"page:")});U.val("");var ab=(U["0"].tagName==="SELECT")?(U.context.multiple):(M.multiple);var V=[];var Y=[];var ac=[];var O=[];var aa={};var Q=(R)?R.split(","):[];Q=J.filter(Q,function(ad){var ae=ad.split(":");if(ae.length===2){return true}else{if(ae.length<0||ae.length>=3||(ae.length===1&&(ae[0]!==r&&ae[0]!==P))){s.debug("Error value: "+ae)}}});R=Q.join(",");U.val(R);d(U,"space-cat:",M.spaceCatKeys,(T)?T.val():"");d(U,"content-function:",M.pageCatKeys,(W)?W.val():"");d(U,"space:",M.spaceKeys,(L)?L.val():"");d(U,"page:",M.pageIds,(X)?X.val():"");R=U.val();Q=(R)?R.split(","):[];b(T,Q,"space-cat:");b(W,Q,"content-function:");b(L,Q,"space:");b(X,Q,"page:");if(Q.length===0){return}J.each(Q,function(ad,ae){var ah=ad.split(":");if(ah.length===2){var ag=ah[0];var af=ah[1];if(ag==="space-cat"){V.push(af)}else{if(ag==="content-function"){ac.push(af)}else{if(ag==="space"){Y.push(af)}else{if(ag==="page"){O.push(af)}}}}}});J.each(V,function(ad){aa[k(ad)]=g(ad)});J.each(ac,function(ad){aa[j(ad)]=x(ad)});var Z=[];if(Y.length>0){var S=y.getJSON(s.contextPath()+"/rest/prototype/1/space",{spaceKey:Y}).done(function(af){var ad=[];J.each(af.space,function(ag){aa[v(ag.key)]=z(ag.key,J.escape(ag.name),null,true);ad.push(ag.key)});var ae=J.difference(Y,ad);J.each(ae,function(ag){aa[v(ag)]=z(ag,ag,null,false)})}).fail(function(){s.debug("Couldn't resolve spaceKeys:",Y);J.each(Y,function(ad){aa[v(ad)]=z(ad,ad,null,false)})});Z.push(S)}J.each(O,function(ad){var ae=y.getJSON(s.contextPath()+"/rest/api/content/"+ad,{expand:"space"}).done(function(af){aa[w(af.id)]=t(af.id,J.escape(af.title),J.escape(af.space.name),"content-type-page",true)}).fail(function(){s.debug("Couldn't resolve pageId:",ad);aa[w(ad)]=t(ad,ad,"","content-type-page",false)});Z.push(ae)});y.when.apply(y,J.map(Z,function(ae){var ad=new y.Deferred();ae.always(function(){ad.resolve()});return ad.promise()})).done(function(){N(K(Q,aa,ab))})}return{build:D,setValue:function(M,L){C(M,L,function(N){L.auiSelect2("data",N)})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/internal/space-page-picker-legacy.js' */
window.Confluence.UI.Components.SpacePagePicker=require("confluence-ui-components/js/space-page-picker");AJS.deprecate.prop(window.Confluence.UI.Components.SpacePagePicker,"build",{sinceVersion:"1.4.34",extraInfo:"Use require('confluence-ui-components/js/space-page-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/soy/space-page-picker.soy' */
// This file was automatically generated from space-page-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.templates == 'undefined') { Confluence.UI.Components.templates = {}; }


Confluence.UI.Components.templates.hiddenField = function(opt_data, opt_ignored) {
  return '<input type="hidden" id="' + soy.$$escapeHtml(opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" />';
};
if (goog.DEBUG) {
  Confluence.UI.Components.templates.hiddenField.soyTemplateName = 'Confluence.UI.Components.templates.hiddenField';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:page-picker', location = '/js/page-picker.js' */
define("confluence-ui-components/js/page-picker",["ajs","confluence-ui-components/js/space-page-picker"],function(a,b){return{build:function(c){c.placeholder="Select a page";c.contentType=["page"];c.showRecentlyViewedSpaces=false;c.spaceCatKeys=[];c.spaceKeys=[];return b.build(c)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:page-picker', location = '/js/internal/page-picker-legacy.js' */
window.Confluence.UI.Components.PagePicker=require("confluence-ui-components/js/page-picker");AJS.deprecate.prop(window.Confluence.UI.Components.PagePicker,"build",{sinceVersion:"1.4.34",extraInfo:"Use require('confluence-ui-components/js/page-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker.js' */
define("confluence-ui-components/js/label-picker",["ajs","confluence/legacy","jquery","underscore"],function(g,i,e,j){var a=/[;,\.\?&\[\(\)#\^\*@!<>\]]/g;function l(m){var n=j.uniq(m.match(a));return n.join(" ")}function b(m){return{id:m.name,text:m.name}}function c(m){if(!m||!m.length){return null}var n=j.map(m,b);return j.sortBy(n,function(o){return o.text.toLowerCase()})}function k(o){var n=o.contentNameMatches;var p=c(n[0]);var m=c(n[1]);if(p&&m){return[{text:"Suggested",children:p},{text:"Other",children:m}]}return p||m||[]}function f(m){return function(n){return e.extend({query:n,ignoreRelated:true,maxResults:10},m)}}var d={placeholder:"Add labels",multiple:true,minimumInputLength:1,maximumSelectionSize:20,tokenSeparators:[" ",","],formatInputTooShort:function(n,m){return "Start typing to search for a label"},formatSelectionTooBig:function(m){return g.format("You can only input {0} labels",m)},formatResult:function(m){return i.UI.Components.LabelPicker.templates.labelResult({label:{labelName:m.text,isNew:m.isNew}})},formatNoMatches:function(n){var m=l(n);if(m){return i.UI.Components.LabelPicker.templates.labelInvalid({inputValue:n,invalidCharacters:m})}return this.noMatches},createSearchChoice:function(n){if(!n){return null}var m=l(n);if(m){return null}return{id:n,text:n,isNew:true}},ajax:{data:f(),dataType:"json",url:i.getContextPath()+"/labels/autocompletelabel.action",results:function(m){return{results:k(m)}},quietMillis:300},dropdownCssClass:"labels-dropdown",containerCssClass:"labels-autocomplete",initSelection:function(m,p){var o=m.val().split(",");var n=j.map(o,function(q){return{id:q,text:q}});p(n)}};function h(n){var m=e.extend({},d,n);if(n&&n.queryOpts){m.ajax.data=f(n.queryOpts);delete m.queryOpts}if(!n||!n.noMatches){m.noMatches=m.placeholder}return m}return{build:h}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker-legacy.js' */
window.Confluence.UI.Components.LabelPicker=require("confluence-ui-components/js/label-picker");AJS.deprecate.prop(window.Confluence.UI.Components.LabelPicker,"build",{sinceVersion:"1.4.18",extraInfo:"Use require('confluence-ui-components/js/label-picker')"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/soy/label-picker.soy' */
// This file was automatically generated from label-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.LabelPicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.LabelPicker == 'undefined') { Confluence.UI.Components.LabelPicker = {}; }
if (typeof Confluence.UI.Components.LabelPicker.templates == 'undefined') { Confluence.UI.Components.LabelPicker.templates = {}; }


Confluence.UI.Components.LabelPicker.templates.labelResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format('\x22{0}\x22 - add a new label',opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  Confluence.UI.Components.LabelPicker.templates.labelResult.soyTemplateName = 'Confluence.UI.Components.LabelPicker.templates.labelResult';
}


Confluence.UI.Components.LabelPicker.templates.labelInvalid = function(opt_data, opt_ignored) {
  var output = '';
  var inputValueHtml__soy9 = '<b>' + soy.$$escapeHtml(opt_data.inputValue) + '</b>';
  var invalidCharactersHtml__soy13 = '<b>' + soy.$$escapeHtml(opt_data.invalidCharacters) + '</b>';
  output += soy.$$filterNoAutoescape(AJS.format('{0} contains invalid characters {1}',inputValueHtml__soy9,invalidCharactersHtml__soy13));
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.LabelPicker.templates.labelInvalid.soyTemplateName = 'Confluence.UI.Components.LabelPicker.templates.labelInvalid';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:include-exclude-picker', location = '/js/include-exclude-picker.js' */
define("confluence-ui-components/js/include-exclude-picker",["jquery","underscore"],function(d,j){var e="";function c(k){var l=k.charAt(0);if(j.contains(["-"],l)){e=l;k=k.substring(1)}else{e=""}return k}function h(k){var l=d.extend({},k);if(l.children){l.children=j.map(l.children,h)}else{l.id=e+l.id;l.text=e+l.text}return l}function b(k){return function(l){l=c(l);return k(l)}}function f(k){return function(m){var l=k?k(m):m;if(e){l.results=j.map(l.results,h)}return l}}function a(k){return function(l){return k(l,c,h)}}function g(k){var l=k.text.charAt(0);if(l==="-"){return"select2-search-choice-subtle"}return}function i(l){var k=d.extend({formatSelectionCssClass:g},l);if(k.query){k.query=a(k.query);return k}else{k.ajax=d.extend({},k.ajax);k.ajax.data=b(k.ajax.data);k.ajax.results=f(k.ajax.results);return k}}return{build:i}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:avatar-with-name', location = '/soy/avatar-with-name.soy' */
// This file was automatically generated from avatar-with-name.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.UserGroupSelect2.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.UserGroupSelect2 == 'undefined') { Confluence.UI.Components.UserGroupSelect2 = {}; }


Confluence.UI.Components.UserGroupSelect2.avatarWithName = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-username': opt_data.userId}}) + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  Confluence.UI.Components.UserGroupSelect2.avatarWithName.soyTemplateName = 'Confluence.UI.Components.UserGroupSelect2.avatarWithName';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:avatar-with-name-account-id', location = '/soy/avatar-with-name-account-id.soy' */
// This file was automatically generated from avatar-with-name-account-id.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.UserSelect2.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.UserSelect2 == 'undefined') { Confluence.UI.Components.UserSelect2 = {}; }


Confluence.UI.Components.UserSelect2.avatarWithNameAccountId = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-account-id': opt_data.userId}}) + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  Confluence.UI.Components.UserSelect2.avatarWithNameAccountId.soyTemplateName = 'Confluence.UI.Components.UserSelect2.avatarWithNameAccountId';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:user-group-select2', location = '/js/user-group-select2.js' */
define("confluence-ui-components/js/user-group-select2",["ajs","confluence/legacy","jquery","confluence/api/constants"],function(b,e,c,a){function d(g){g=g||document.body;var f=function(){var h=c(".select2-drop-active > .select2-results");if(h.children(".select2-result-selectable").length===0&&h.children(".select2-disabled").length){h.append('<li class="select2-no-results">'+b.escapeHtml("No matches found")+"</li>")}};c("input.autocomplete-multiusergroup[data-autocomplete-bound != 'true']",g).each(function(){var h=c(this);h.attr("data-autocomplete-bound","true");var j=h.attr("data-include-groups");var i=a.CONTEXT_PATH+"/images/icons/profilepics/default.png";h.auiSelect2({multiple:true,minimumInputLength:2,formatInputTooShort:function(){return j?"Start typing to search for a user or group":"Start typing to search for a user"},ajax:{transport:function(n){var o=n.success;delete n.success;return c.ajax.apply(c.ajax,arguments).done(o).done(f)},data:function(n){return{"max-results":6,query:n}},dataType:"json",url:e.getContextPath()+"/rest/prototype/1/search/user"+(j?"-or-group":"")+".json",results:function(o){var n=[];c.each(o.result,function(){if(this.type==="user"&&j&&this.accountId){n.push({id:this.accountId,accountId:this.accountId,text:this.title,imgSrc:this.thumbnailLink&&this.thumbnailLink.href?this.thumbnailLink.href:i,entity:this})}else{if(this.type==="user"){n.push({id:this.username,text:this.title,imgSrc:this.thumbnailLink&&this.thumbnailLink.href?this.thumbnailLink.href:i,entity:this})}else{n.push({id:this.name,text:this.name,imgSrc:a.CONTEXT_PATH+"/images/icons/avatar_group_48.png",entity:this})}}});return{results:n}},quietMillis:300},formatResult:function(n){if(n.accountId){return e.UI.Components.UserSelect2.avatarWithNameAccountId({size:"xsmall",displayName:n.text,userId:n.accountId,avatarImageUrl:n.imgSrc})}return e.UI.Components.UserGroupSelect2.avatarWithName({size:"xsmall",displayName:n.text,userId:n.id,avatarImageUrl:n.imgSrc})},escapeMarkup:function(n){return n},formatSelection:function(n){if(n.accountId){return e.UI.Components.UserSelect2.avatarWithNameAccountId({size:"xsmall",displayName:n.text,userId:n.accountId,avatarImageUrl:n.imgSrc})}return e.UI.Components.UserGroupSelect2.avatarWithName({size:"xsmall",displayName:n.text,userId:n.id,avatarImageUrl:n.imgSrc})},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!h.data("autofill-user")){return}var m=b.Meta.get("remote-user"),l=b.Meta.get("current-user-fullname"),k=b.Meta.get("current-user-avatar-uri-reference");if(m&&l&&k){h.auiSelect2("data",[{id:m,accountId:b.Meta.get("atlassian-account-id"),text:l,imgSrc:k}])}})}return{bind:d}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:user-select2', location = '/js/user-select2.js' */
define("confluence-ui-components/js/user-select2",["ajs","confluence/legacy","jquery","confluence/api/constants"],function(b,e,c,a){function d(g){g=g||document.body;var f=function(){var h=c(".select2-drop-active > .select2-results");if(h.children(".select2-result-selectable").length===0&&h.children(".select2-disabled").length){h.append('<li class="select2-no-results">'+b.escapeHtml("No matches found")+"</li>")}};c("input.autocomplete-multiuser[data-autocomplete-bound != 'true']",g).each(function(){var h=c(this);h.attr("data-autocomplete-bound","true");var j=h.attr("data-include-groups");var k=h.attr("data-search-external");var i=a.CONTEXT_PATH+"/images/icons/profilepics/default.png";h.auiSelect2({multiple:true,minimumInputLength:2,formatInputTooShort:function(){return j?"Start typing to search for a user or group":"Start typing to search for a user"},ajax:{transport:function(o){var p=o.success;delete o.success;return c.ajax.apply(c.ajax,arguments).done(p).done(f)},data:function(o){return{limit:6,cql:'user.fullname~"'+o+'"',sitePermissionTypeFilter:k?"externalCollaborator":"none"}},dataType:"json",url:e.getContextPath()+"/rest/api/search/user",results:function(p){var o=[];c.each(p.results,function(){o.push({id:this.user.accountId,text:this.user.displayName,imgSrc:this.user.profilePicture.path||i,entity:this})});return{results:o}},quietMillis:300},formatResult:function(o){return e.UI.Components.UserSelect2.avatarWithNameAccountId({size:"small",displayName:o.text,userId:o.id,avatarImageUrl:o.imgSrc})},escapeMarkup:function(o){return o},formatSelection:function(o){return e.UI.Components.UserSelect2.avatarWithNameAccountId({size:"xsmall",displayName:o.text,userId:o.id,avatarImageUrl:o.imgSrc})},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!h.data("autofill-user")){return}var n=b.Meta.get("atlassian-account-id"),m=b.Meta.get("current-user-fullname"),l=b.Meta.get("current-user-avatar-uri-reference");if(n&&m&&l){h.auiSelect2("data",[{id:n,text:m,imgSrc:l}])}})}return{bind:d}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-component.soy' */
// This file was automatically generated from cql-component.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.Templates == 'undefined') { Confluence.UI.Components.CQL.Templates = {}; }


Confluence.UI.Components.CQL.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="cql-container"><div class="cql-error-container"></div><div class="cql-fields"></div></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.Templates.container.soyTemplateName = 'Confluence.UI.Components.CQL.Templates.container';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-field.soy' */
// This file was automatically generated from cql-filter-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQLFilters.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQLFilters == 'undefined') { Confluence.UI.Components.CQLFilters = {}; }
if (typeof Confluence.UI.Components.CQLFilters.Templates == 'undefined') { Confluence.UI.Components.CQLFilters.Templates = {}; }


Confluence.UI.Components.CQLFilters.Templates.baseFilterField = function(opt_data, opt_ignored) {
  var output = '<div class="cql-filter cql-field-' + soy.$$escapeHtml(opt_data.field.fieldName) + ' cql-type-' + soy.$$escapeHtml(opt_data.field.uiSupport.valueType) + '">';
  var id__soy8 = 'cql-field-' + soy.$$escapeHtml(opt_data.field.fieldName) + '-' + soy.$$escapeHtml(opt_data.counter);
  output += '<div class=\'cql-field-heading\'><label for="' + soy.$$escapeHtml(id__soy8) + '">' + soy.$$escapeHtml(opt_data.label) + ((! opt_data.field.fixed) ? '<span class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove filter') + '"></span>' : '') + '</label></div><div class=\'cql-filter-field-input-container\'><input type="text" class="cql-field-input text" id="' + soy.$$escapeHtml(id__soy8) + '"></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQLFilters.Templates.baseFilterField.soyTemplateName = 'Confluence.UI.Components.CQLFilters.Templates.baseFilterField';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-filter-select.soy' */
// This file was automatically generated from cql-filter-select.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.FilterSelect.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect == 'undefined') { Confluence.UI.Components.CQL.FilterSelect = {}; }
if (typeof Confluence.UI.Components.CQL.FilterSelect.Templates == 'undefined') { Confluence.UI.Components.CQL.FilterSelect.Templates = {}; }


Confluence.UI.Components.CQL.FilterSelect.Templates.container = function(opt_data, opt_ignored) {
  return '<div class="cql-add-filter-container"><button type="button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Add a filter') + '</button><div class="input-wrapper hidden"><input class="select2-input" type="text" /></div></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.FilterSelect.Templates.container.soyTemplateName = 'Confluence.UI.Components.CQL.FilterSelect.Templates.container';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/date-picker.soy' */
// This file was automatically generated from date-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.DatePicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.DatePicker == 'undefined') { Confluence.UI.Components.DatePicker = {}; }
if (typeof Confluence.UI.Components.DatePicker.templates == 'undefined') { Confluence.UI.Components.DatePicker.templates = {}; }


Confluence.UI.Components.DatePicker.templates.input = function(opt_data, opt_ignored) {
  return '<div class="aui-navgroup-vertical"><ul class="aui-nav"><li class="aui-nav-selected"><a data-value="">' + soy.$$escapeHtml('Any date') + '</a></li><li><a data-value="now(\'-1d\')">' + soy.$$escapeHtml('Last 24 hours') + '</a></li><li><a data-value="now(\'-1w\')">' + soy.$$escapeHtml('Last week') + '</a></li><li><a data-value="now(\'-1M\')">' + soy.$$escapeHtml('Last month') + '</a></li><li><a data-value="now(\'-1y\')">' + soy.$$escapeHtml('Last year') + '</a></li><li><a data-value="custom">' + soy.$$escapeHtml('Custom') + '</a><span class="absolute-date-pickers"><input class="from-date-picker text" type="date" /><span>&ndash;</span><input class="to-date-picker text" type="date" /></span></li></ul></div>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.DatePicker.templates.input.soyTemplateName = 'Confluence.UI.Components.DatePicker.templates.input';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-type-picker.soy' */
// This file was automatically generated from cql-type-picker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.TypePicker.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.TypePicker == 'undefined') { Confluence.UI.Components.CQL.TypePicker = {}; }
if (typeof Confluence.UI.Components.CQL.TypePicker.templates == 'undefined') { Confluence.UI.Components.CQL.TypePicker.templates = {}; }


Confluence.UI.Components.CQL.TypePicker.templates.suggestions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-navgroup-vertical"><ul class="aui-nav">';
  var typeList4 = opt_data.types;
  var typeListLen4 = typeList4.length;
  for (var typeIndex4 = 0; typeIndex4 < typeListLen4; typeIndex4++) {
    var typeData4 = typeList4[typeIndex4];
    output += '<li ' + ((typeIndex4 == 0) ? ' class="aui-nav-selected"' : '') + '><a data-value="' + soy.$$escapeHtml(typeData4.type) + '">' + soy.$$escapeHtml(typeData4.label) + '</a></li>';
  }
  output += '<li><a data-value="custom">' + soy.$$escapeHtml('Custom') + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.TypePicker.templates.suggestions.soyTemplateName = 'Confluence.UI.Components.CQL.TypePicker.templates.suggestions';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'soy/cql/cql-space-field.soy' */
// This file was automatically generated from cql-space-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.UI.Components.CQL.SpaceField.templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.CQL == 'undefined') { Confluence.UI.Components.CQL = {}; }
if (typeof Confluence.UI.Components.CQL.SpaceField == 'undefined') { Confluence.UI.Components.CQL.SpaceField = {}; }
if (typeof Confluence.UI.Components.CQL.SpaceField.templates == 'undefined') { Confluence.UI.Components.CQL.SpaceField.templates = {}; }


Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption = function(opt_data, opt_ignored) {
  return '<span><input type="checkbox" value="true" id="search-filter-include-archived" name="includeArchivedSpaces"><label for="search-filter-include-archived">Search archived spaces</label></span>';
};
if (goog.DEBUG) {
  Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption.soyTemplateName = 'Confluence.UI.Components.CQL.SpaceField.templates.archivedSpacesOption';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-special-spaces.js' */
define("confluence-ui-components/js/cql/internal/cql-special-spaces",["underscore"],function(c){var b={conf_current:"currentSpace()",conf_favorites:"favourite",conf_global:"global",conf_personal:"personal"};var f=c.invert(b);function d(g){if(g==="search-screen"){return c.omit(b,"conf_current")}return b}function a(g){return c.keys(d(g))}function e(g){return f[g]}return{getMap:d,getKeys:a,getUIValue:e}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-ajax.js' */
define("confluence-ui-components/js/cql/internal/cql-ajax",["jquery","underscore","ajs"],function(d,c,b){var g;function f(){if(!g){g=d.Deferred();var j=function(l){var m=c.values(l);if(!m.length){throw Error("Unknown CQL field data returned from server - cannot initialise CQL fields.")}var k=c.union.apply(c,m);k=c.sortBy(k,"fieldName");g.resolve(k)};var i=function(){g.reject()};d.getJSON(b.contextPath()+"/rest/cql/fields?filter=withUiSupport").done(j).fail(i)}return g.promise()}function e(i){return d.getJSON(b.contextPath()+"/rest/cql/expressions?cql="+encodeURIComponent(i))}function a(){return d.getJSON(b.contextPath()+"/rest/cql/contenttypes?category=content")}function h(){return d.getJSON(b.contextPath()+"/rest/cql/contenttypes?category=all")}return{getFields:f,parseClauses:e,getTypes:h,getContentTypes:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-date-picker.js' */
define("confluence-ui-components/js/cql/internal/cql-date-picker",["ajs","jquery"],function(a,b){function c(k){var h=b(Confluence.UI.Components.DatePicker.templates.input());var d=h.find(".aui-nav li");var g=h.find(".absolute-date-pickers").hide();var f=h.find(".from-date-picker");var i=h.find(".to-date-picker");var e=function(){};this.onChange=function(l){e=l;f.change(l);i.change(l)};h.on("click",".aui-nav a",function(){var l=d.filter("li.aui-nav-selected");var m=b(this).closest("li");if(l[0]!=m[0]){d.not(m).removeClass("aui-nav-selected");m.addClass("aui-nav-selected");e()}if(b(this).data("value")==="custom"){g.slideDown("fast")}else{g.slideUp("fast")}});var j={overrideBrowserDefault:true};a.DatePicker(f,j);a.DatePicker(i,j);f.attr("placeholder","From");i.attr("placeholder","To");k.replaceWith(h);return{getSelectedOption:function(){var l=d.filter(".aui-nav-selected").find("a");return l.data("value")},selectOption:function(m){var l=d.find('a[data-value="'+m+'"]');l.click()},getFromDate:function(){return f.val()},getToDate:function(){return i.val()},setFromDate:function(l){f.val(l);d.find("a[data-value='custom']").click()},setToDate:function(l){i.val(l);d.find("a[data-value='custom']").click()}}}return{build:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-type-picker.js' */
define("confluence-ui-components/js/cql/internal/cql-type-picker",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-ajax","confluence-ui-components/js/include-exclude-picker","confluence/legacy","confluence-ui-components/js/cql/internal/cql-set-value-helper"],function(e,k,g,a,c,j,f){var b;var d=[];function m(n){d=k.map(n,function(o){return{id:o.type,text:o.label}})}function l(){b=null;d=[]}function h(o,n){if(o.length===0){return""}if(o.length==1&&k.contains(k.pluck(n,"type"),o[0])){return o[0]}return"custom"}function i(o,s){var u,n,q,t=[];if(!b){b=s?a.getContentTypes():a.getTypes();b.done(m)}b.done(function(){if(o.length){var v=k.pluck(d,"id");t=[].concat(d);o.forEach(function(w){if(w.type!==""&&!k.contains(v,w.type)){t.push({id:w.type,text:w.label})}})}else{t=d}});var r={query:function(v,x,w){b.done(function(){x(v.term);var y=window.Select2.query.local({results:k.map(t,w)});y(v)})},initSelection:function(w,z){var v=w.val().split(",");var y="";var x=k.map(v,function(A){var B=A.charAt(0);if(B==="-"){y="-";return A.substring(1)}return A});b.done(function(){var A=k.filter(t,function(B){return k.contains(x,B.id)});z(k.map(A,function(B){return{id:y+B.id,text:y+B.text}}))})},multiple:true,placeholder:"All content types"};function p(v){u=v;if(g.trace){u.on("change",function(){g.trace("type.field.changed")})}if(o.length){var w=e(j.UI.Components.CQL.TypePicker.templates.suggestions({types:o}));n=w.find(".aui-nav li");u.before(w);w.on("click",".aui-nav a",function(){var A=e(this).closest("li");var z=n.filter(".aui-nav-selected");if(A[0]===z[0]){return}z.removeClass("aui-nav-selected");A.addClass("aui-nav-selected");var y=e(this).attr("data-value");if(y=="custom"){q.slideDown("fast")}else{q.hide()}var x=true;u.select2("val",[y],x)})}u.auiSelect2(c.build(r));if(o.length){q=u.closest(".cql-filter").find(".select2-container");q.hide()}}return{setupInput:p,setValues:function(v){if(n){var w=h(v,o);var y=n.find('[data-value="'+w+'"]').parent();n.not(y).removeClass("aui-nav-selected");y.addClass("aui-nav-selected");if(w==="custom"){q.show()}}var x=e.Deferred();b.done(function(){f.setValues(u,v).done(function(){x.resolve()})});return x}}}return{build:i,_clearCache:l,_getPicklistKey:h}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-field-model.js' */
define("confluence-ui-components/js/cql/internal/cql-field-model",[],function(){function a(b){return b.uiSupport.label.translation}return{getLabel:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-adjuster.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-adjuster",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(c,a){function b(f){var e=f.functionValues;if(!e||!e.length){return f}var d=[];c.each(e,function(g){if(g.functionName==="currentSpace"){d.push(a.getUIValue("currentSpace()"))}else{throw new Error(g.functionName+" is not a known function")}});f.values=d.concat(f.values);return f}return{convertFunctionValues:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-autocomplete-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-autocomplete-filter-field",["jquery","ajs","confluence/legacy","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/cql-set-value-helper"],function(d,h,j,b,f){function k(m){var n=m.suggestedResults;var l=m.searchResults;if(!n.length){return l}if(!l.length){return n}return[{text:"Suggestions",children:n},{text:"Search results",children:l}]}function a(l){return{query:l,searchContext:JSON.stringify({spaceKey:h.Meta.get("space-key"),contentId:h.Meta.get("content-id")})}}var c={placeholder:"Start typing to search",multiple:true,tokenSeparators:[" ",","],createSearchChoice:function(l){if(!l){return null}return{id:l,text:"New result: "+l,isNew:true}},createSearchChoicePosition:"bottom",ajax:{data:a,results:function(l){return{results:k(l)}},quietMillis:300},initSelection:function(l,o){var n=l.val().split(",");var m=n.map(function(p){return{id:p,text:p}});o(m)}};function e(l){return l.indexOf("http://")===0||l.indexOf("https://")===0}function g(l){if(e(l)){return l}else{return j.getContextPath()+l}}function i(l){var m;return{setupInput:function(n){m=n;var p=d.extend({},c.ajax,{url:g(l.uiSupport.dataUri)});var o=d.extend({},c,{ajax:p});n.auiSelect2(o)},asCqlFunc:function(){var n=this.input.val().trim();if(!n){return undefined}return b.buildEqualityExpressionFromValuesString(this.fieldName,n)},setValues:function(n){return f.setValues(m,n.values)}}}return{build:i,_getUrl:g,_ajaxData:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-content-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-content-filter-field",["jquery","confluence-ui-components/js/page-picker","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/cql-set-value-helper"],function(d,h,a,b){function e(i){return"page:"+i}function c(i){return"content-function:"+i.functionName+"()"}function g(i){return i.values.map(e).concat(i.functionValues.map(c))}function f(){var i;return{setupInput:function(j){i=j;var k={multiple:this.fieldName!=="parent",suggestedContentFunctions:["currentContent()"]};j.auiSelect2(h.build(k))},asCqlFunc:function(){var k=this.input.val().trim();if(!k){return undefined}var j=k.replace(/[a-z\-]+:/g,"");return a.buildEqualityExpressionFromValuesString(this.fieldName,j)},_addValuePrefixes:g,setValues:function(k){var j=g(k);return b.setValues(i,j)}}}return{build:f}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-type-suggestions.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-type-suggestions",["ajs"],function(b){var c=[{type:"",label:"All content"},{type:"page",label:"Pages"},{type:"blogpost",label:"Blog Posts"},{type:"attachment",label:"Attachments"},{type:"space",label:"Spaces"}];function a(){return c}return{getList:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-type-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-type-filter-field",["confluence-ui-components/js/cql/internal/cql-type-picker","confluence-ui-components/dark-features","confluence-ui-components/js/cql/internal/filterfields/cql-type-suggestions"],function(a,b,c){function d(f){var e;return{setupInput:function(g,h){var j=[];var i=true;if((h.environment==="search-screen"&&h.searchType=="all")||b.isEnabled("cql.force.full.search.mode")){j=c.getList();i=false}e=a.build(j,i);e.setupInput(g)},setValues:function(g){return e.setValues(g.values)}}}return{build:d}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-date-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-date-filter-field",["ajs","underscore","confluence-ui-components/js/cql/internal/cql-date-picker"],function(b,c,a){function d(g){var h=g.fieldName;var f;function e(){var j=f.getFromDate();var i=f.getToDate();var l,k;if(j){l=h+' >= "'+j+'"'}if(i){k=h+' <= "'+i+'"'}if(l&&k){return l+" and "+k}return l||k||""}return{setupInput:function(i){f=a.build.call(this,i)},setValues:function(k){if(!f){b.warn("DatePicker not set yet, can't set values");return}var j=k.expressions;if(j.length<1||j.length>2){b.warn("Can't set date value with expressions.length: "+j.length);return}if(j.length===1&&j[0].functionValues.length===1&&j[0].functionValues[0].functionName==="now"){if(j[0].operator!==">="){b.warn("Unsupported date picker relative date operator: "+j[0].operator);return}var i=j[0].functionValues[0].parameters[0];f.selectOption("now('"+i+"')")}else{c.each(j,function(m){if(m.values.length===1){var l=m.values[0];if(m.operator===">="){f.setFromDate(l)}else{if(m.operator==="<="){f.setToDate(l)}}}})}},asCqlFunc:function(){if(!f){b.warn("DatePicker not set yet, can't get CQL");return}var i=f.getSelectedOption();if(!i){return""}if(i==="custom"){return e()}return h+" >= "+i}}}return{build:d}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-label-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-label-filter-field",["jquery","ajs","confluence-ui-components/js/label-picker","confluence-ui-components/js/include-exclude-picker","confluence-ui-components/js/cql/internal/cql-set-value-helper"],function(d,c,a,e,b){function f(){var g;return{setupInput:function(h){g=h;h.auiSelect2(e.build(a.build({noMatches:"No matching labels found"})))},setValues:function(h){return b.setValues(g,h.values)}}}return{build:f}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-space-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-space-filter-field",["jquery","confluence-ui-components/js/space-picker","confluence-ui-components/js/include-exclude-picker","confluence-ui-components/js/cql/internal/cql-special-spaces","confluence-ui-components/js/cql/internal/cql-space-expression-adjuster","confluence-ui-components/js/cql/internal/cql-space-expression-builder","confluence-ui-components/js/cql/internal/cql-set-value-helper","confluence/legacy"],function(b,e,a,d,i,f,c,h){function g(){var j;return{setupInput:function(k,l){j=k;k.auiSelect2(a.build(e.build({multiple:true,suggestCategories:d.getKeys(l.environment),disableMixedSpaceTypes:true})));if(l.environment==="search-screen"){var m=b(h.UI.Components.CQL.SpaceField.templates.archivedSpacesOption());j.after(m);this.onChange=function(o){var n=m.find("#search-filter-include-archived");n.change(o);j.change(o)}}},asCqlFunc:function(){return f.buildExpressionFromValuesString(this.input.val())},setValues:function(k){i.convertFunctionValues(k);return c.setValues(j,k.values)}}}return{build:g}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-user-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-user-filter-field",["underscore","jquery","ajs","confluence/api/constants","confluence-ui-components/js/user-group-select2"],function(d,e,c,b,a){function f(){var g;return{setupInput:function(h){g=h;h.addClass("select2-input autocomplete-multiusergroup");a.bind(h.parent())},setValues:function(n){var h=n.values;if(!h||!h[0]){return}function j(i){return{id:i,text:"Former user",imgSrc:b.CONTEXT_PATH+"/images/icons/profilepics/default.png"}}var p=[];var o=[];var l=b.CONTEXT_PATH+"/images/icons/profilepics/default.png";for(var k=0;k<h.length;k++){var m=function(i){return e.getJSON(b.CONTEXT_PATH+"/rest/api/user?username="+i).done(function(q){if(q&&q.accountId){o.push({id:q.username,text:q.displayName,imgSrc:q.profilePicture.path||l})}else{o.push(j(i))}}).fail(function(){o.push(j(i))})};p.push(m(h[k]))}return e.when.apply(e,d.map(p,function(q){var i=e.Deferred();q.always(function(){i.resolve()});return i.promise()})).done(function(){if(o.length){g.auiSelect2("data",o)}})}}}return{build:f}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-account-id-filter-field.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-account-id-filter-field",["underscore","jquery","ajs","confluence/api/constants","confluence-ui-components/js/user-select2"],function(d,e,c,b,a){function f(){var g;return{setupInput:function(h){g=h;h.addClass("select2-input autocomplete-multiuser");a.bind(h.parent())},setValues:function(n){var h=n.values;if(!h||!h[0]){return}var l=b.CONTEXT_PATH+"/images/icons/profilepics/default.png";function j(i){return{id:i,text:"Former user",imgSrc:l}}var p=[];var o=[];for(var k=0;k<h.length;k++){var m=function(i){return e.getJSON(b.CONTEXT_PATH+"/rest/api/user?accountId="+i).done(function(q){if(q&&q.accountId){o.push({id:q.accountId,text:q.displayName,imgSrc:q.profilePicture.path||l})}else{o.push(j(i))}}).fail(function(){o.push(j(i))})};p.push(m(h[k]))}return e.when.apply(e,d.map(p,function(q){var i=e.Deferred();q.always(function(){i.resolve()});return i.promise()})).done(function(){if(o.length){g.auiSelect2("data",o)}})}}}return{build:f}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/filterfields/cql-filter-field-configs.js' */
define("confluence-ui-components/js/cql/internal/filterfields/cql-filter-field-configs",["confluence-ui-components/js/cql/internal/filterfields/cql-autocomplete-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-content-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-type-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-date-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-label-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-space-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-user-filter-field","confluence-ui-components/js/cql/internal/filterfields/cql-account-id-filter-field"],function(a,e,g,f,b,c,i,h){var d={contentId:e,contentType:g,date:f,label:b,space:c,user:i,accountId:h};return{getConfig:function(k){var j=k.uiSupport;if(j.dataUri){return a.build(k)}if(d[j.valueType]){return d[j.valueType].build(k)}return{}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-field.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-field",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-field-model","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/filterfields/cql-filter-field-configs"],function(d,j,h,g,c,a){var e=window.Confluence.UI.Components.CQLFilters.Templates;var f=0;function b(n){var l=g.getLabel(n);var m=d(e.baseFilterField({label:l,field:n,counter:f++}));var k=m.find("input");m.data("fieldName",n.fieldName);return d.extend({input:k,element:m,onChange:function(o){k.change(o)}},n)}function i(p,o){var n=p.uiSupport;var r=n.valueType;var q=p.fieldName;if(!r){throw new Error("Can't create filter without valueType.")}if(!q){throw new Error("Can't create filter without fieldName.")}var m=a.getConfig(p);var k=b(p);k.asCql=j.bind(m.asCqlFunc||function(){return c.buildExpression(k,this.input.val())},k);var l=k.element.find("input");if(typeof m.setupInput==="function"){k.setupInput=m.setupInput;k.setupInput(l,o.context)}k.setValues=m.setValues||function(s){l.val(s.values.join(","))};k.element.find(".aui-iconfont-remove").click(function(){k.element.remove();o.removeField(k)});return k}return{build:i}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-filter-select.js' */
define("confluence-ui-components/js/cql/internal/cql-filter-select",["jquery","underscore","ajs","confluence-ui-components/dark-features","confluence-ui-components/js/cql/internal/cql-ajax","confluence-ui-components/js/cql/internal/cql-field-model"],function(g,d,a,c,f,b){var e=window.Confluence.UI.Components.CQL.FilterSelect.Templates;function h(u){var s=u.cqlContainer;var n=s.find(".cql-fields");var j=u.onSelection;if(!j){throw Error("An onSelection callback must be provided to the FilterSelect.")}var t=g(e.container());var o=t.children("button");var r=t.find(".input-wrapper");var q=t.find("input");function k(v){v.preventDefault();r.removeClass("hidden");o.hide();t.find(".select2-choice").mousedown()}o.click(k);function i(){r.addClass("hidden");o.show()}q.bind("select2-close",function(){a.debug("CQL Field selector closed");i();setTimeout(function(){a.log("Checking CQL Field selector focus");if(!g(document.activeElement).closest(".cql-filter").length){a.debug("Setting CQL Field selector focus");o.focus()}},1)});s.append(t);function p(v){if(!v.added){return}q.auiSelect2("val","");j(v.added);a.debug("CQL Field selection made");i()}function l(y){var w=y;if(u.context.environment!=="search-screen"&&!c.isEnabled("cql.search.screen")){w=d.reject(w,function(z){return z.type==="date"})}w=d.reject(w,function(z){return d.contains(u.ignoredFields,z.fieldName)});function v(z,A){return d.contains(z,A)}function x(){if(!n[0]){throw new Error("Why no cql-container?")}var A=n.find(".cql-filter").map(function(){return g(this).data("fieldName")});var B=w.filter(function(C){if(C.uiSupport.valueType==="user"&&v(A,C.fieldName+".accountid")){return false}if(C.uiSupport.valueType==="accountId"&&v(A,C.fieldName.slice(0,C.fieldName.length-".accountid".length))){return false}return true});B=B.filter(function(D){var C=v(A,D.fieldName);if(C){return true}return D.uiSupport.valueType!=="user"});var z=d.reject(B,function(C){return v(A,C.fieldName)&&!d.contains(["label"],C.fieldName)});return{results:z,text:b.getLabel}}q.auiSelect2({id:"fieldName",data:x,formatResult:b.getLabel,formatSelection:b.getLabel,placeholder:"Add a filter"}).change(p)}function m(){a.log("Couldn't fetch CQL fields - unable to initialise CQL field picker")}f.getFields().done(l).fail(m);return q}return{build:h}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-builder",["jquery","underscore","confluence-ui-components/js/cql/internal/cql-special-spaces","confluence-ui-components/js/cql/internal/cql-expression-builder"],function(d,c,b,a){function e(k){var l=k.trim();if(!l){return undefined}var g=l.split(",");var m=b.getKeys();var f=[];var j=[];c.each(g,function(n){if(n==="conf_current"){f.push("currentSpace()")}else{if(c.contains(m,n)){j.push(n)}else{f.push(n)}}});var h=[];if(j.length){var i=b.getMap();j=c.map(j,function(n){return i[n]});if(j.indexOf("global")!==-1){h.push(a.buildEqualityExpressionFromValuesString("space.type","-personal"));j=c.filter(j,function(n){return n!=="global"})}if(j.length>0){h.push(a.buildEqualityExpressionFromValuesArray("space.type",j))}}if(f.length){h.push(a.buildEqualityExpressionFromValuesArray("space",f))}if(h.length===1){return h[0]}return"("+h.join(" or ")+")"}return{buildExpressionFromValuesString:e}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-expression-builder.js' */
define("confluence-ui-components/js/cql/internal/cql-expression-builder",["jquery","underscore"],function(e,j){function c(n){if(j.contains(["currentContent()","currentSpace()"],n)){return n}return'"'+a(n)+'"'}function a(n){return n.replace(/"/g,'\\"')}function i(n,p){var o=p.trim();if(!o){return undefined}if(n==="title"||n==="text"){if(o.length>1&&o.charAt(0)==="-"){return n+" !~ "+c(o.substr(1))}}return n+" ~ "+c(o)}function f(n){var o={"+":[],"-":[],"":[]};j.each(n,function(q){var p=q.charAt(0);if(p==="+"){o["+"].push(q.substring(1))}else{if(p==="-"){o["-"].push(q.substring(1))}else{o[""].push(q)}}});return o}function d(p,n){var o=j.map(n,function(q){return p+" = "+c(q)});return o.join(" AND ")}function m(s,p,n){if(p.length===0){return""}var q=j.map(p,c);var o;if(q.length===1){o=n?" = ":" != ";return s+o+q[0]}var r=q.join(",");o=n?" in ":" not in ";return s+o+"("+r+")"}function l(o,n){return m(o,n,false)}function h(o,n){return m(o,n,true)}function k(t,q){var r=f(q);var n=[];var s=d(t,r["+"]);if(s){n.push(s)}var o=h(t,r[""]);if(o){n.push(o)}var p=l(t,r["-"]);if(p){n.push(p)}return n.join(" AND ")}function b(q,o){var p=o.trim();if(!p){return undefined}var n=p.split(",");n=j.map(n,function(r){return r.trim()});return k(q,n)}function g(o,n){if(o.type==="equality"){return b(o.fieldName,n)}if(o.type==="text"){return i(o.fieldName,n)}throw new Error("buildExpression does not yet support type: "+o.type)}return{buildExpression:g,buildEqualityExpressionFromValuesString:b,buildEqualityExpressionFromValuesArray:k,makeValueMap:f,makePlusCql:d,makeMinusCql:l,makeRegularCql:h}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-type-expression-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-space-type-expression-converter",["underscore","confluence-ui-components/js/cql/internal/cql-special-spaces"],function(b,a){function c(h,d){var f=b.clone(d);var g=b.map(h.values,a.getUIValue);var e=h.negate&&g.length==1&&g[0]==="conf_personal";return{field:f,values:e?["conf_global"]:g,negate:e?false:h.negate}}return{convert:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-space-expression-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-space-expression-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-space-type-expression-converter"],function(b,d){function c(h,f){var g=b.filter(h,function(j){return j.field.fieldName==="space.type"});if(g.length===0){return h}if(g.length>1){throw Error("Only a single space.type expression is supported.")}var e=d.convert(g[0],f);var i=b.filter(h,function(j){return j.field.fieldName==="space"});h=b.difference(h,g);if(i.length){i[0]=a(i[0],e)}else{h.push(e)}return h}function a(f,e){f.values=f.values.concat(e.values);return f}return{aggregate:c,combineSpaceExpressions:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-set-value-helper.js' */
define("confluence-ui-components/js/cql/internal/cql-set-value-helper",["jquery"],function(b){function a(f,c){var e=b.Deferred();f.on("change",function(){e.resolve()});c=c.map(function(g){return b("<div/>").text(g).html()});var d=true;f.select2("val",c,d);return e}return{setValues:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-date-expression-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-date-expression-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-space-type-expression-converter"],function(a){function c(d){return{field:d.field,expressions:[d]}}function b(f){var d=[];var e={};f.forEach(function(h){var i=h.field.fieldName;if(h.field.type!=="date"){d.push(h)}else{if(!e[i]){var g=c(h);e[i]=g;d.push(g)}else{e[i].expressions.push(h)}}});return d}return{aggregate:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-converter",["underscore"],function(a){function b(d){d.values=a.map(d.values,function(e){return"-"+e})}function c(e){var d=$.extend({},e);if(d.field.type==="equality"){if(d.operator==="!="){d.operator="=";b(d)}else{if(d.operator==="notin"){d.operator="in";b(d)}}}return d}return{convert:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-negation-aggregator.js' */
define("confluence-ui-components/js/cql/internal/cql-negation-aggregator",["underscore","confluence-ui-components/js/cql/internal/cql-negation-converter"],function(a,d){function b(i){var h=[];var g={};var f={};i.forEach(function(k){var l=k.field.fieldName;if(!a.contains(h,l)){h.push(l);g[l]=[];f[l]=[]}var j=d.convert(k);if(j.operator!==k.operator){f[l].push(j)}else{g[l].push(j)}});var e=[];h.forEach(function(k){var j=c(g[k],f[k]);e=e.concat(j)});return e}function c(g,e){if(!e.length){return g}var f=g[0];if(!f){f=e[0];e=a.rest(e)}e.forEach(function(h){f.values=f.values.concat(h.values)});if(f.operator==="="&&f.values.length>1){f.operator="in"}return[f].concat(a.rest(g))}return{aggregate:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/internal/cql-ignored-field-expression-converter.js' */
define("confluence-ui-components/js/cql/internal/cql-ignored-field-expression-converter",[],function(){function a(f,e,d){if(e){f=f.filter(function(g){if(e.indexOf(g.field.fieldName)>-1){return d}return !d})}return f}function c(e,d){return a(e,d,true)}function b(e,d){return a(e,d,false)}return{removeFieldsByName:b,getFieldsByName:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:cql', location = 'js/cql/cql-component.js' */
define("confluence-ui-components/js/cql/cql-component",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-ajax","confluence-ui-components/js/cql/internal/cql-filter-field","confluence-ui-components/js/cql/internal/cql-filter-select","confluence-ui-components/js/cql/internal/cql-space-expression-aggregator","confluence-ui-components/js/cql/internal/cql-date-expression-aggregator","confluence-ui-components/js/cql/internal/cql-negation-aggregator","confluence-ui-components/js/cql/internal/cql-ignored-field-expression-converter"],function(c,m,i,a,f,n,d,b,h,l){var j=window.Confluence.UI.Components.CQL.Templates;function e(o){var p=[];m.each(o,function(q){q.forEach(function(s){if(!s){return}var r=s.asCql();if(r){p.push(r)}})});return p.join(" and ")}function g(o,p){return m.find(o,function(q){return q.fieldName===p})}function k(s){var p=s.context||{environment:"macro-browser"};var F=s.defaultFieldNames;if(!F){F=s.defaultFields?s.defaultFields.split(","):[]}var x=c(j.container());if(s.container){c(s.container).append(x)}var G=x.find(".cql-fields");var C;var H=s.value||s.defaultValue;if(H){C=a.parseClauses(H)}else{C=new c.Deferred();C.resolve()}var v={};var w={};var u=new c.Deferred();var I=s.onChange||function(){};function o(t){var K=t.fieldName;v[K]=m.without(v[K],t);if(v[K].length===0){delete v[K];I()}}var B={element:x,loading:u,context:s.context||{environment:"macro-browser",searchType:"content"},getValue:function(){return e(v)},getIgnoredFields:function(){return w},removeField:o,fieldArrays:v,fieldRegistry:v};function A(L){var K=f.build(L,B);K.onChange(I);var M=L.fieldName;v[M]=v[M]||[];v[M].push(K);x.trigger("cql-field-adding",K);var t=G.find(".cql-field-"+M+":last");if(t.length){t.after(K.element)}else{G.append(K.element)}return K}function E(K,t){t=t||0;var L=K.fieldName;return v[L]&&v[L][t]}var D;function z(O){var K=c.Deferred();if(!O){K.resolve();return K}var N={};function L(Q){var P=N[Q];if(typeof P==="number"){N[Q]=P+1}else{N[Q]=0}return N[Q]}var t=m.findWhere(D,{fieldName:"space"});O=d.aggregate(O,t);O=b.aggregate(O);O=h.aggregate(O);w=l.getFieldsByName(O,s.ignoredFields);O=l.removeFieldsByName(O,s.ignoredFields);var M=[];m.each(O,function(T){var U=T.field.fieldName;var S=g(D,U);var Q=L(U);var P=E(S,Q)||A(S);var R=P.setValues(T);if(R){M.push(R)}});c.when.apply(c,M).then(function(){K.resolve()});return K}function r(K){var L,t;if(K){var M=m.escape(K);L="We can\'t load your filters";t=i.format("Curses! We had trouble with \"{0}\". Try refreshing the page, but you may need to re-enter your macro parameters.",M)}else{L="We couldn\'t load the macro";t="If you refresh your page, we\'ll give it another shot."}i.messages.error(".cql-error-container",{title:L,body:t,closeable:true})}function J(t){var K;if(t.element.find(".aui-nav-selected").length!==0){return}if(t.element.find(".select2-container-multi").length!==0){K=t.element.find("input.select2-input");K.focus().click()}else{K=t.element.find("a.select2-choice.select2-default");if(!K.length){K=c(":input:visible",t.element).first()}if(!K.length){i.log("Unable to focus CQL field: "+t.fieldName)}K.focus().mousedown()}}function y(L){var K=c.extend({},L,{fixed:false});var t=A(K);J(t)}function q(t){D=t;F.forEach(function(M){var L=g(D,M);if(!L){throw Error("Unknown fieldname: "+M)}var K=c.extend({fixed:true},L);A(K)});n.build({onSelection:y,cqlContainer:x,context:p,ignoredFields:s.ignoredFields});C.done(function(K){z(K).done(function(){u.resolve()})}).fail(function(){if(p.environment==="search-screen"){i.log("Error parsing CQL param from search screen URL: "+s.value)}else{r(s.value)}u.resolve()})}a.getFields().done(q).fail(function(){r()});return B}return{build:k}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:avatar2', location = 'user-select2/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CreateContent.avatar.
 */

if (typeof CreateContent == 'undefined') { var CreateContent = {}; }
if (typeof CreateContent.avatar == 'undefined') { CreateContent.avatar = {}; }


CreateContent.avatar.avatarWithName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.accountId) ? aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-account-id': opt_data.accountId}}) : (opt_data.userId) ? aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-account-id': opt_data.userId}}) : '') + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  CreateContent.avatar.avatarWithName.soyTemplateName = 'CreateContent.avatar.avatarWithName';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:avatar-account-id', location = 'user-select2/avatar-account-id.soy' */
// This file was automatically generated from avatar-account-id.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace CreateContent.avatar.
 */

if (typeof CreateContent == 'undefined') { var CreateContent = {}; }
if (typeof CreateContent.avatar == 'undefined') { CreateContent.avatar = {}; }


CreateContent.avatar.avatarWithNameAccountId = function(opt_data, opt_ignored) {
  return '' + ((opt_data.accountId) ? aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-account-id': opt_data.accountId}}) : (opt_data.userId) ? aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.avatarImageUrl, accessibilityText: opt_data.displayName, title: opt_data.displayName, extraAttributes: {'data-account-id': opt_data.userId}}) : '') + soy.$$escapeHtml(opt_data.displayName);
};
if (goog.DEBUG) {
  CreateContent.avatar.avatarWithNameAccountId.soyTemplateName = 'CreateContent.avatar.avatarWithNameAccountId';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-multiselect2', location = 'user-select2/user-multiselect.js' */
define("confluence-create-content-plugin/plugin/user-select2/user-multiselect",["jquery","ajs","document","confluence/meta","confluence/api/constants"],function(e,c,a,d,b){return function(i,j){i=i||a.body;var g=(typeof j!=="undefined")?j:true;var f=function(){var k=e(".select2-drop-active > .select2-results");if(k.children(".select2-result-selectable").length===0&&k.children(".select2-disabled").length){k.append('<li class="select2-no-results">'+c.escapeHtml("No matches found")+"</li>")}};var h=g?".autocomplete-multiuser":".autocomplete-singleuser";e("input"+h+"[data-autocomplete-bound != 'true']",i).each(function(){var l=e(this);l.auiSelect2({multiple:g,minimumInputLength:2,formatInputTooShort:function(){return "Start typing to search for a user"},ajax:{transport:function(q){var r=q.success;delete q.success;return e.ajax.apply(e.ajax,arguments).done(r).done(f)},data:function(q){return{limit:6,cql:'user.fullname~"'+q+'"'}},dataType:"json",url:Confluence.getContextPath()+"/rest/api/search",results:function(r){var q=[];e.each(r.results,function(){q.push({accountId:this.user.accountId,id:this.user.accountId,text:this.user.displayName,imgSrc:this.user.profilePicture.path||b.CONTEXT_PATH+"/images/icons/profilepics/default.png"})});return{results:q}},quietMillis:300},formatResult:function(q){var r={size:"small",displayName:q.text,userId:q.id,avatarImageUrl:q.imgSrc,accountId:q.accountId};return CreateContent.avatar.avatarWithNameAccountId(r)},escapeMarkup:function(q){return q},formatSelection:function(q){var r={size:"xsmall",displayName:q.text,userId:q.id,avatarImageUrl:q.imgSrc,accountId:q.accountId};return CreateContent.avatar.avatarWithNameAccountId(r)},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!l.data("autofill-user")){return}var o=d.get("remote-user"),p=d.get("atlassian-account-id"),n=d.get("current-user-fullname"),m=d.get("current-user-avatar-url");if(p&&n&&m){var k={accountId:p,id:p,text:n,imgSrc:b.CONTEXT_PATH+m};l.auiSelect2("data",g?[k]:k)}})}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-create-content-plugin/plugin/user-select2/user-multiselect","Confluence.Binder.autocompleteMultiUser",function(a){Confluence.Binder.autocompleteMultiUser=a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-parameter-serializer.js' */
define("confluence-macro-browser/macro-parameter-serializer",["jquery"],function(h){function g(c){return c.replace(/\\/g,"\\\\").replace(/=/g,"\\\x3d").replace(/[|]/g,"\\|")}return{serialize:function(c){var d=[],a;for(a in c)d.push(g(a)+"\x3d"+g(c[a]));return d.join("|")},deserialize:function(c){function d(b,c){var a=[],d=[],e;b=b||"";for(var f=0,g=b.length;f<g;f++)e=b[f],"\\"==e?a.push(e+(f+1!=b.length?b[++f]:"")):e==c?(d.push(a.join("")),a=[]):a.push(e);d.push(a.join(""));return d}var a={};h.each(d(c||
"","|"),function(b,c){b=d(c,"\x3d");2===b.length&&b[0]&&(a[b[0].replace(/\\(.)/g,"$1")]=b[1].replace(/\\(.)/g,"$1"))});return a}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-macro-browser/macro-parameter-serializer","Confluence.MacroParameterSerializer");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-fields.js' */
define("confluence-macro-browser/macro-browser-fields","ajs jquery underscore confluence/legacy confluence/templates confluence/autocomplete-content confluence/api/logger confluence/api/constants confluence/meta confluence/dark-features confluence-create-content-plugin/plugin/user-select2/user-multiselect".split(" "),function(q,e,y,A,n,r,t,u,v,B,w){function x(m,k,p){return function(f,b){if(f.multiple)return m.string(f,b);f=e(n.MacroBrowser.macroParameterSelect());var a=e("select",f);b=b||{};b.setValue=
b.setValue||function(b){var d=!1;a.find("option").each(function(){if(this.value==b)return d=!0,!1});d?delete a.tempValue:(a.append(e("\x3coption/\x3e").attr("value",b).text(b+" ("+"Not found"+")")),a.tempValue=b);try{a.val(b)}catch(g){t.logError(g)}a.change()};f=k(f,a,b);f.updateDependencies=p;f.getData=function(c,d){if(c.title&&c.spaceKey||c.pageId){var g=a.tempValue||a.val();b.fileTypes&&(c.fileTypes=b.fileTypes);e.getJSON(u.CONTEXT_PATH+"/json/attachmentsearch.action",
c,function(c){if(!c.error){e("option",a).remove();if((c=c.attachments)&&c.length){for(var h=0,z=c.length;h<z;h++)a.append(e("\x3coption/\x3e").attr("value",c[h].name).text(c[h].name));g=g||a.tempValue;b.setValue(g||c[0].name)}else a.append(e("\x3coption/\x3e").attr("value","").html("No appropriate attachments")),a.tempValue&&b.setValue(a.tempValue);a.attr("style","");d&&d()}})}else t.log("Not enough parameters to send attachmentsearch request")};return f}}return function(m){var k=
function(b,a,c){c=c||{};var d=c.setValue||function(b){a.val(b)},e=c.getValue||function(){return a.val()};a.change(c.onchange||m.paramChanged);return{paramDiv:b,input:a,setValue:d,getValue:e}},p=function(b,a,c){if(a&&a.length)for(var d=0,e=a.length;d<e;d++)m.fields[a[d]]&&m.fields[a[d]].dependencyUpdated(b,c)},f={updateDependencies:p,username:function(b,a){function c(a){return{id:a,text:"Former user",imgSrc:d}}a=a||{};var d=u.CONTEXT_PATH+"/images/icons/profilepics/default.png",g=b.multiple?"autocomplete-multiuser":
"autocomplete-singleuser",h=e(n.MacroBrowser.macroParameter()),l=e("input[type\x3d'text']",h);l.addClass(g).attr("data-none-message","Not found");b.required&&l.keyup(m.processRequiredParameters);b.multiple?(w(h,!0),a.setValue=function(a){l.val(a);a=a.split(",");for(var b=[],h=[],g=0,f=a.length;g<f;g++)b.push(function(a){return e.getJSON(u.CONTEXT_PATH+"/rest/api/user?accountId\x3d"+a).done(function(b){b&&b.accountId?h.push({id:b.accountId,text:b.displayName,
imgSrc:b.profilePicture.path||d}):h.push(c(a))}).fail(function(b){t.logError("Cannot parse user data for macro browser field with: "+b);h.push(c(a))})}(a[g]));e.when.apply(e,y.map(b,function(a){var b=e.Deferred();a.always(function(){b.resolve()});return b.promise()})).done(function(){h.length&&l.auiSelect2("data",h)})}):(w(h,!1),a.setValue=function(a){l.val(a);e.getJSON(u.CONTEXT_PATH+"/rest/api/user?accountId\x3d"+a).done(function(b){b&&b.accountId?l.auiSelect2("data",{id:b.accountId,text:b.displayName,
imgSrc:b.profilePicture.path||d}):l.auiSelect2("data",c(a))}).fail(function(b){t.logError("Cannot parse user data for macro browser field with: "+b);l.auiSelect2("data",c(a))})},l.bind("selected.autocomplete-content",function(c,d){if(a.onselect)a.onselect(d.selection);else p(b.name,a.dependencies,l.val()),"function"===typeof a.onchange&&a.onchange.apply(l)}));return k(h,l,a)},spacekey:function(b,a){if(b.multiple)return f.string(b,a);a=a||{};var c=e(n.MacroBrowser.macroParameter()),d=e("input[type\x3d'text']",
c);d.addClass("autocomplete-space").attr("data-template","{key}").attr("data-none-message","Not found");b.required&&d.keyup(m.processRequiredParameters);d.bind("selected.autocomplete-content",function(c,h){if(a.onselect)a.onselect(h.selection);else a.setValue?a.setValue(h.content.key):(p(b.name,a.dependencies,d.val()),"function"===typeof a.onchange&&a.onchange.apply(d))});r.autocompleteSpace(c);return k(c,d)},attachment:x(f,k,p),full_attachment:x(f,k,p),"confluence-content":function(b,
a){if(b.multiple)return f.string(b,a);a=a||{};b.options=b.options||{};var c=e(n.MacroBrowser.macroParameter()),d=e("input[type\x3d'text']",c).attr("data-none-message","Not found").attr("data-template","");b.required&&d.keyup(m.processRequiredParameters);a.onchange=a.onchange||function(c){c=d.val();p(b.name,a.dependencies,c)};a.setValue=a.setValue||function(b){d.val(b);"function"===typeof a.onchange&&a.onchange.apply(d)};d.bind("selected.autocomplete-content",
function(c,e){c="";"true"==b.options.includeDatePath&&"blogpost"===e.content.type&&(c=e.content.createdDate.date.split("-"),c="/"+c[0]+"/"+c[1]+"/"+c[2].substring(0,2)+"/");var g=e.content.space&&e.content.space.key,f=g&&g!=v.get("space-key");-1!==e.content.title.indexOf(":")&&(f=!0);c=(f?g+":":"")+c+e.content.title;d.val(c);if(a.onselect)a.onselect(e.selection);else a.setValue(c,d)});b.options.spaceKey&&("@self"===b.options.spaceKey.toLowerCase()&&(b.options.spaceKey=v.get("space-key")),d.attr("data-spacekey",
b.options.spaceKey));null!=a.truncateTitle&&d.attr("data-truncate",a.truncateTitle);var g=b.options.type;if("string"===typeof g)if("page"===g)d.addClass("autocomplete-page"),r.autocompletePage(c);else if("blogpost"===g)d.addClass("autocomplete-blogpost"),r.autocompleteBlogpost(c);else{if("attachment"===g||"full_attachment"===g)d.addClass("autocomplete-attachment"),r.autocompleteAttachment(c)}else d.addClass("autocomplete-confluence-content"),r.autocompleteConfluenceContent(c);return k(c,d,a)},string:function(b,
a){var c=e(n.MacroBrowser.macroParameter()),d=e("input",c);b.required&&d.keyup(m.processRequiredParameters);return k(c,d,a)},"boolean":function(b,a){var c=e(n.MacroBrowser.macroParameterBoolean()),d=e("input",c);a=a||{};a.setValue=a.setValue||function(a){(/true/i.test(a)||/true/i.test(b.defaultValue)&&!/false/i.test(a))&&d.prop("checked",!0)};return k(c,d,a)},"enum":function(b,a){if(b.multiple)return f.string(b,a);var c=e(n.MacroBrowser.macroParameterSelect()),d=e("select",c);b.required||b.defaultValue||
d.append(e("\x3coption/\x3e").attr("value",""));e(b.enumValues).each(function(){d.append(e("\x3coption/\x3e").attr("value",this).html(""+this))});return k(c,d,a)},_hidden:function(b,a){b=e(n.MacroBrowser.macroParameterHidden()).hide();var c=e("input",b);return k(b,c,a)}};return{Field:k,ParameterFields:f}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-fields");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-smartfields.js' */
define("confluence-macro-browser/macro-browser-smartfields",["ajs","confluence/macro-js-overrides"],function(c,g){return function(h,f){var d=function(a){this.fileTypes=a};d.prototype.beforeParamsSet=function(a,b){a.page||a.date||a.space||("page"==c.params.contentType||"blogpost"==c.params.contentType?a.page=c.Editor.getCurrentTitle():"comment"==c.params.contentType&&(a.page=c.params.pageTitle));a.date&&(b=a.date.split("/"),a.page=["",b[2],b[0],b[1],a.page].join("/"));a.space&&(a.page=a.space+":"+
a.page);return a};d.prototype.beforeParamsRetrieved=function(a){if(a.page){var b=a.page.split(":");1<b.length&&(a.space=b[0],a.page=b[1]);b=a.page.split("/");1<b.length&&(a.date=[b[2],b[3],b[1]].join("/"),a.page=b[4]);(("page"==c.params.contentType||"blogpost"==c.params.contentType)&&a.page==c.Editor.getCurrentTitle()||"comment"==c.params.contentType&&a.page==c.params.pageTitle)&&delete a.page}return a};d.prototype.fields={attachment:function(a){a=f.attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=
function(a,e){c.debug("attachment:dependencyUpdated called: "+a+", "+e);a=d.prototype.fields._parsePageLink(e);this.getData(a)};return a},full_attachment:function(a){a=f.full_attachment(a,{fileTypes:this.fileTypes});a.dependencyUpdated=function(a,e){c.debug("attachment:dependencyUpdated called: "+a+", "+e);a=d.prototype.fields._parsePageLink(e);this.getData(a)};return a},"confluence-content":function(a){return f["confluence-content"](a,{dependencies:["name"]})},_parsePageLink:function(a){var b={};
a=a.split(":",2);b.spaceKey=2===a.length&&a[0]||c.Meta.get("space-key");b.title=a[a.length-1];0===b.title.indexOf("/")&&(b.postingDay=b.title.substr(1,10),b.title=b.title.substr(12));b.title===c.Editor.getCurrentTitle()&&(b.title="");b.title||(b.pageId=c.Meta.get("content-id"));return b}};h.activateSmartFieldsAttachmentsOnPage=function(a,b){g.put(a,new d(b))}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-smartfields");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-utils.js' */
define("confluence-macro-browser/macro-browser-utils",["jquery"],function(a){return{makeDefaultKey:function(){return a.makeArray(arguments).join(".")}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-utils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-cql.js' */
define("confluence-macro-browser/macro-browser-cql",["ajs","underscore","confluence/templates","confluence-ui-components/js/cql/cql-component","jquery"],function(k,h,m,n,d){function e(b){var a=b.param;return d.extend({},b,a.options,{defaultValue:a.defaultValue||a.options.defaultValue})}function p(b){b=e(b);return n.build(b)}function l(b){return d(m.MacroBrowser.CQL.sections({hasRenderParameters:0<b.renderParams.length}))}return{build:function(b){var a=l(b),f=b.container;f.append(a);f.bind("cql-field-adding",
function(b,c){c.element.addClass("macro-param-div");c.element.find(".cql-field-input").addClass("macro-param-input")});f.addClass("loading");a.filter(".cql-render-heading").find("button").click(function(){var b=d(this),c=b.closest(".cql-render-heading").next(),a=c.is(":visible");a?c.slideUp(300):(c.removeClass("hidden").show(),c=d(".cql-render-heading").position().top,d(".macro-input-fields").animate({scrollTop:c},300));a=a?"Show":"Hide";
b.text(a)});var g=p({param:b.cqlParam,value:b.cqlValue,container:a.filter(".cql-filter-fields")});f.data("cqlComponent",g);var e=d.Deferred();g.loading.done(function(){var a=b.cqlParam.options.requiredFields;if(a){var c=a.split(",");h.each(g.fieldRegistry||g.fieldArrays,function(a){var d=!1;h.each(a,function(a){!d&&h.contains(c,a.fieldName)&&(b.flagRequiredParam(a.element),d=!0,a.onChange(b.paramChanged))})})}f.removeClass("loading");e.resolve()});return{elements:a,loading:e}},_makeCqlComponentOptions:e,
_renderCqlSections:l}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser-cql.soy' */
// This file was automatically generated from macro-browser-cql.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.MacroBrowser.CQL.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }
if (typeof Confluence.Templates.MacroBrowser.CQL == 'undefined') { Confluence.Templates.MacroBrowser.CQL = {}; }


Confluence.Templates.MacroBrowser.CQL.sections = function(opt_data, opt_ignored) {
  return '<div class="cql-filter-fields"></div>' + ((opt_data.hasRenderParameters) ? '<h4 class="cql-render-heading"><span>' + soy.$$escapeHtml('Options') + '</span>' + aui.buttons.button({type: 'link', text: 'Show', extraAttributes: {type: 'button'}}) + '</h4><div class="cql-render-fields hidden"></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.CQL.sections.soyTemplateName = 'Confluence.Templates.MacroBrowser.CQL.sections';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-editor.js' */
define("confluence-macro-browser/macro-browser-editor","window ajs jquery confluence/templates confluence-macro-browser/macro-browser-cql confluence/macro-js-overrides underscore".split(" "),function(u,r,d,t,y,v,w){return function(c){function q(e){var a=d("#macro-insert-container").find(".macro-name").val(),b,h={},g=e.formDetails,f;f={};for(var n=0,p=e.formDetails.parameters.length;n<p;n++){var k=e.formDetails.parameters[n],l;if(k.type&&"cql"===k.type.name)l=d(".macro-input-fields form").data("cqlComponent").getValue();
else{l=d("#macro-param-"+k.name);var m=l.val();"checkbox"==l.attr("type")&&(m=""+l.prop("checked"));l=m}l&&(k.shared&&(h[k.name]=l),k.hidden||!k.defaultValue||k.defaultValue!=l)&&(f[k.name]=l)}f[""]&&(b=f[""]);d.extend(f,c.unknownParams);c.isInFabricEditor()&&g.body&&"PLAIN_TEXT"===g.body.bodyType&&(f.__bodyContent=c.getMacroBody());g=f;(f=v.getFunction(a,"beforeParamsRetrieved"))&&(g=f(g,e,h));f=g;return{name:a,bodyHtml:c.getMacroBody(),params:f,schemaVersion:e.formDetails.schemaVersion?e.formDetails.schemaVersion:
"",defaultParameterValue:b}}function z(e,a){var b=d(t.MacroBrowser.macroBody());a=a?a.body:c.settings.selectedText;d("textarea",b).val(a||"");e.label&&d("label",b).text(e.label);e.description&&b.append(t.MacroBrowser.macroParameterDesc({description:e.description}));e.hidden&&b.hide();return b}function A(e,a,b){var h,g=a.type.name;if(b){var f=b.fields&&b.fields[g];f&&"function"!==typeof f&&(f=f[a.name]);"function"===typeof f&&(h=f.call(b,a))}h||(g in c.ParameterFields&&"function"===typeof c.ParameterFields[g]||
(g="string"),h=c.ParameterFields[g](a));c.fields[a.name]=h;b=h.paramDiv;g=h.input;h="macro-param-"+a.name;b.attr("id","macro-param-div-"+a.name);g.addClass("macro-param-input").attr("id",h);a.hidden&&b.hide();g=e.pluginKey;a.displayName==c.Utils.makeDefaultKey(g,e.macroName,"param",a.name,"label")&&(a.displayName=a.name);a.description==c.Utils.makeDefaultKey(g,e.macroName,"param",a.name,"desc")&&(a.description="");d("label",b).attr("for",h).text(a.displayName);a.required&&x(b);a.description&&b.append(t.MacroBrowser.macroParameterDesc({description:a.description}));
return b}function x(c){var a=c.find("label"),b=a.text()+" *";a.text(b);c.addClass("required")}return{loadMacroInBrowser:function(e,a){if(e&&e.formDetails){var b;b=e.formDetails;var h=b.macroName,g=v.get(h),f=c.settings.selectedMacro,n=(a=u.tinymce)&&a.confluence&&a.confluence.macrobrowser&&a.confluence.macrobrowser.editedMacroDiv;if(g&&"function"===typeof g.opener)c.close(),g.opener({name:h});else{a=b.parameters;var p=w.find(a,function(a){return"cql"===a.type.name});d("#save-warning-span").addClass("hidden");
d("#macro-insert-container .macro-name").val(h);var k=d("#macro-insert-container .macro-input-fields form");k.empty();var l=e.extendedDescription||e.description;b.documentationLink&&c.UI.setHelpLink(c.dialog,{href:b.documentationLink});l&&(l=d(t.MacroBrowser.macroDescription({descriptionHtml:l})),k.append(l));d("#macro-insert-container").data("macro-detail",b);c.isInFabricEditor()&&b.body&&"PLAIN_TEXT"===b.body.bodyType?(d("#macro-insert-container #macro-preview-container").hide(),d("#macro-insert-container #macro-body-editor-container").show(),
b=f&&f.params&&"string"===typeof f.params.__bodyContent?f.params.__bodyContent:"",d("#macro-insert-container #macro-body-editor-container textarea").val(b)):(d("#macro-insert-container #macro-preview-container").show(),d("#macro-insert-container #macro-body-editor-container").hide(),b.body&&"NONE"!=b.body.bodyType&&n&&d(n).hasClass("editor-inline-macro")&&(n=e.pluginKey,b.body.label==c.Utils.makeDefaultKey(n,h,"body","label")&&(b.body.label=""),b.body.description==c.Utils.makeDefaultKey(n,h,"body",
"desc")&&(b.body.description=""),(b=z(b.body,c.selectedMacroDefinition))&&k.append(b)));var m=f?d.extend({},f.params):{},q=k;p&&(a=w.without(a,p),p=y.build({cqlParam:p,renderParams:a,cqlValue:m.cql,container:k,flagRequiredParam:x,paramChanged:c.paramChanged}),delete m.cql,q=p.elements.filter(".cql-render-fields"),p.loading.done(function(){c.paramChanged();c.Preview.previewMacro(e,f)}));d(a).each(function(){q.append(A(e,this,g))});g&&"function"===typeof g.beforeParamsSet&&(m=g.beforeParamsSet(m,!f));
d(a).each(function(a,b){a=function(){var a;a=""==b.name?c.selectedMacroDefinition?c.selectedMacroDefinition.defaultParameterValue:b.defaultValue:m[b.name];null!=a?delete m[b.name]:d(b.aliases).each(function(){m[this]&&(a=m[this],delete m[this])});null==a&&(a=b.defaultValue);null!=a&&c.fields[b.name].setValue(a)};if("attachment"===b.type.name){var e=c.fields&&c.fields[b.name]&&c.fields[b.name].getData;e&&e({spaceKey:r.params.spaceKey,pageId:r.params.pageId},a)}else a()});c.unknownParams=m;d("a",k).click(function(){u.open(this.href,
"_blank").focus();return!1});d("#macro-browser-dialog:visible").length||c.showBrowserDialog();a={};d.extend(!0,a,e);a.formDetails||(a.formDetails={});a.formDetails.body||(a.formDetails.body={});c.dialog.activeMetadata=a;c.settings.selectedMacro?a.formDetails.body.content=c.settings.selectedMacro.body:a.formDetails.body.bodyType&&"plain_text"===a.formDetails.body.bodyType.toLowerCase()?a.formDetails.body.content=c.settings.selectedText:a.formDetails.body.content=c.settings.selectedHtml}}else alert("Could not load unknown macro in the macro browser.")},
getMacroParametersFromForm:function(c){return q(c).params},getMacroDefinitionFromForm:q,processRequiredParameters:function(){if(d(".macro-input-fields form").is(".loading"))return r.log("Form still loading - cannot processRequiredParameters"),!1;var c=0===d("#macro-insert-container .macro-param-div.required .macro-param-input").not(".select2-container").filter(function(){var a=d(this).val();return null===a||""===a}).length,a=c?"":"disabled",b=a?"addClass":"removeClass";d("#macro-browser-dialog button.ok").prop("disabled",
a);d("#macro-browser-dialog .macro-preview-header .refresh-link").prop("disabled",a)[b]("disabled");return c}}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-editor");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preview.js' */
define("confluence-macro-browser/macro-browser-preview",["jquery","ajs","confluence/macro-js-overrides","confluence/get-content-id"],function(e,f,k,n){return function(b){function g(){return e("#macro-insert-container .macro-preview")}function p(){var a=f.params.staticResourceUrlPrefix+"/blank.html";g().html('\x3ciframe src\x3d"'+a+'" frameborder\x3d"0" name\x3d"macro-browser-preview-frame" id\x3d"macro-preview-iframe"\x3e\x3c/iframe\x3e')}function l(){g().html("")}function q(a,c){var d=g().find("iframe")[0],
b=k.getFunction(a.macroName,"updateMacroPreviewIframe");b&&b(a,d,c)||(a=d.contentDocument||d.contentWindow.document,a.write(c),a.close(),e(a).ready(function(){f.trigger("macro-browser.preview-ready")}),e("div.error span.error",a).length&&f.logError("Error rendering macro definition : "))}function h(a){a?(b.UI.showPreviewSpinner(!0),m.disable()):(b.UI.showPreviewSpinner(!1),m.enable())}var m={disable:function(){e("#macro-browser-preview-link").attr("disabled",!0).addClass("disabled")},enable:function(){e("#macro-browser-preview-link").removeAttr("disabled").removeClass("disabled")}};
return{previewMacro:function(a,c){l();if(!b.Editor.processRequiredParameters())return f.log("previewMacro: missing required params"),!1;"object"!==typeof c&&(c=b.Editor.getMacroDefinitionFromForm(a));var d=c.params,e=k.getFunction(a.macroName,"updateMacroParametersForPreview");e&&(d=e(d));d[""]&&delete d[""];c={contentId:n(),macroName:a.macroName,params:d,body:b.getMacroBody(),defaultParameterValue:c.defaultParameterValue,successCallback:function(b){q(a,b);setTimeout(function(){h(!1)},1E3)},errorCallback:function(a){f.logError(a);
h(!1)}};p();h(!0);b.Rest.fetchMacroPreviewData(c)},removePreviewContainer:l}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-preview");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-model.js' */
define("confluence-macro-browser/macro-browser-model",["underscore"],function(h){return function(b){function e(a){a.title==b.Utils.makeDefaultKey(a.pluginKey,a.macroName,"label")&&(a.title=a.macroName.charAt(0).toUpperCase()+a.macroName.substring(1).replace(/-/g," "));a.description==b.Utils.makeDefaultKey(a.pluginKey,a.macroName,"desc")&&(a.description="");a.id="macro-"+(a.alternateId||a.macroName);var c=[a.macroName,a.title].concat(a.aliases||[]);a.keywordsNoDesc=c.join(",");var f=a.description&&
a.description.replace(/,/g," ")||"";c.push(f);a.keywords=c.join(",");return a}function g(a,c){if(c.aliases)for(var b=0,d=c.aliases.length;b<d;b++)c.aliases[b]=c.aliases[b].toLowerCase(),a[c.aliases[b]]=c.macroName.toLowerCase()}return{loadMacros:function(a){if(a){b.metadataList=[];b.aliasMap={};for(var c=0,f=a.length;c<f;c++){var d=a[c],d=e(d);g(b.aliasMap,d);b.metadataList.push(d)}b.metadataList.sort(function(a,b){return a.title.toLowerCase()>b.title.toLowerCase()?1:-1})}else console.log("AJS.MacroBrowser.loadModel - no macro data, aborting")},
addMacro:function(a){if(a){var c=e(a);g(b.aliasMap,c);(a=h.find(b.metadataList,function(a){return a.macroName===c.macroName}))?(a=b.metadataList.indexOf(a),b.metadataList[a]=c):b.metadataList.push(c);b.metadataList.sort(function(a,b){return a.title.toLowerCase()>b.title.toLowerCase()?1:-1})}else console.log("AJS.MacroBrowser.addModel - no macro data, aborting")},transformMetaDataDefault:e}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-model");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-rest.js' */
define("confluence-macro-browser/macro-browser-rest",["jquery","ajs","wrm","confluence/api/constants"],function(c,d,g,e){function b(a){d.logError(a)}return{loadMacroMetadata:function(a){a.data=a.data||{};a.data.t="12";a.data.spaceKey=d.Meta.get("space-key");return c.ajax({type:"GET",timeout:a.timeout||3E4,dataType:"json",url:(a.context||e.CONTEXT_PATH)+"/plugins/macrobrowser/browse-macros.action",data:a.data,headers:a.forceUpdateCache?{"Cache-Control":"no-cache"}:{},success:a.successCallback,error:a.errorCallback||
b}).promise()},fetchMacroMetadataDetails:function(a){var f={id:a.id,spaceKey:d.Meta.get("space-key")};a.alternateId&&(f.alternateId=a.alternateId);c.ajax({type:"GET",dataType:"json",url:(a.context||e.CONTEXT_PATH)+"/plugins/macrobrowser/browse-macros-details.action",data:f,success:a.successCallback,error:a.errorCallback||b})},fetchMacroPreviewData:function(a){if(!a.contentId||!a.macroName)return(a.errorCallback||b)("invalid parameters");c.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",
url:(a.context||e.CONTEXT_PATH)+"/rest/tinymce/1/macro/preview",data:JSON.stringify({contentId:a.contentId,macro:{name:a.macroName,body:a.body,params:a.params,defaultParameterValue:a.defaultParameterValue}}),dataType:"html",success:a.successCallback,error:a.errorCallback||b})}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-rest");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-UI.js' */
define("confluence-macro-browser/macro-browser-UI","jquery ajs confluence/templates confluence/api/constants confluence/dom-filter-field confluence/meta confluence/dialog".split(" "),function(d,e,k,r,t,u,v){return function(l){function p(a){return d(k.MacroBrowser.macroSummaryList({category:a}))}function n(a,c){var b=d(k.MacroBrowser.macroSummaryItem());if(a.icon){var g=(a.icon.relative?e.params.staticResourceUrlPrefix:"")+a.icon.location;!a.icon.relative&&d.browser.msie&&!window.location.href.indexOf("https")&&
g.indexOf("https")?b.prepend("\x3cspan class\x3d'macro-icon-holder icon-"+a.macroName+"'\x3e\x3c/span\x3e"):b.prepend("\x3cimg src\x3d'"+g+"' alt\x3d'icon' width\x3d'"+a.icon.width+"' height\x3d'"+a.icon.height+"' title\x3d'"+a.title+"'/\x3e")}else b.prepend("\x3cspan class\x3d'macro-icon-holder icon-"+a.macroName+"'\x3e\x3c/span\x3e");d(".macro-title",b).text(a.title);d(".macro-desc",b).prepend(a.description);"gadget"==a.macroName&&(g=a.gadgetUrl)&&(g.match("^https?://.*")||(g=r.CONTEXT_PATH+"/"+
g),d(".macro-title",b).after(k.MacroBrowser.gadgetLink({url:g})));b.click(function(b){c(b,a)});return b}function w(a,c){for(var b={all:p("all")},d=0,e=a.length;d<e;d++){var f=a[d];if(f.hidden)if(l.isHiddenMacroShown(f))f.categories.push("hidden-macros");else continue;b.all.append(n(f,c).attr("id",f.id));for(var h=0,x=f.categories.length;h<x;h++){var m=f.categories[h];b[m]=b[m]||p(m);b[m].append(n(f,c).attr("id",m+"-"+f.id))}}return b}function q(a,c){c=c?k.Dialog.helpLink(c):k.MacroBrowser.helpLink();
a.getPage(a.curpage).header.append(c)}return{createDialog:function(a){var c=w(a.macros,a.onClickMacroSummary),b=v.component({width:a.width||865,height:a.height||530,id:"macro-browser-dialog",onSubmit:a.onSubmit,onCancel:a.onCancel});b.popup.element.on("keydown",".aui-button",function(a){a.stopPropagation()});b.getPage(0).element.attr("id","select-macro-page");b.addHeader(a.title);b.addPanel("All",c.all,"all","category-button-all").getPanel(0).setPadding(0);for(var g=
0,n=a.categories.length;g<n;g++){var f=a.categories[g];b.addPanel(f.displayName,c[f.name]||p(f.name),f.name,"category-button-"+f.name).getPanel(g+1).setPadding(0)}b.addCancel("Cancel",a.onCancel);b.searcher=t({items:"#macro-browser-dialog .dialog-panel-body #category-all .macro-list-item",formId:"macro-browser-search-form",inputId:"macro-browser-search",searcher:function(a,c){var h=null;""!=c&&(b.getCurrentPanel()!=b.getPanel(0)&&b.gotoPanel(0),c=l.searchSummaries(c),h={},d.each(c,
function(){h[this.id]=this}));a.each(function(){!h||this.id in h?d(this).show():d(this).hide()})},submitCallback:function(a,b){""!=b&&1===a.length&&a.click()}});b.page[0].header.append(b.searcher.form);b.page[0].ontabchange=function(a,c){a!=b.getPanel(0,0)&&b.searcher.reset()};q(b);c=d(k.MacroBrowser.insertMacroPanel());c.find("form").submit(function(a){l.complete();return e.stopEvent(a)});d("#macro-browser-preview-link",c).click(function(a){d(this).prop("disabled")||l.previewMacro(b.activeMetadata);
return e.stopEvent(a)});b.addPage().addPanel("X",c,"macro-input-panel").addCancel("Cancel",function(){return a.onCancel()}).addButton("Insert",function(){l.complete()},"ok").getPanel(0).setPadding(0);l.isInFabricEditor()||b.addLink("Select macro",function(a){a.prevPage()},"dialog-back-link");b.getPage(1).element.attr("id","macro-details-page");d("#macro-browser-dialog .dialog-button-panel .ok").before("\x3cspan id\x3d'save-warning-span' class\x3d'hidden'/\x3e");
c=d(k.MacroBrowser.missingUserMacroMetadataPanel({showAdminMessage:u.getBoolean("is-admin")}));b.addPage().addPanel("No macro metadata",c,"missing-metadata-panel").addLink("Back",function(a){a.gotoPage(0);a.searcher.focus()},"dialog-back-link").addCancel("Cancel",function(){return a.onCancel()});b.gotoPage(2);b.addHeader("No macro metadata");b.gotoPanel(0,0);b.ready=!0;return b},
showBrowserSpinner:function(a){var c=d("#macro-browser-dialog");a?c.spin("large"):c.spinStop()},showPreviewSpinner:function(a){var c=d("#macro-browser-preview");a?c.spin("large"):c.spinStop()},updateButtonText:function(a){var c=d("#macro-browser-dialog .dialog-button-panel .ok");"edit"==a?c.text("Save"):c.text("Insert")},enableSaveButton:function(a){d("#macro-browser-dialog .dialog-button-panel .ok").prop("disabled",!a)},setHelpLink:q}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-UI");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser.js' */
define("confluence-macro-browser/macro-browser","window jquery ajs confluence-macro-browser/macro-browser-utils confluence-macro-browser/macro-browser-editor confluence-macro-browser/macro-browser-fields confluence-macro-browser/macro-browser-model confluence-macro-browser/macro-browser-preview confluence-macro-browser/macro-browser-rest confluence-macro-browser/macro-browser-UI confluence-macro-browser/macro-browser-smartfields confluence-macro-browser/macro-parameter-serializer confluence/macro-js-overrides confluence/api/logger confluence/dark-features underscore confluence/legacy-message-queue".split(" "),
function(n,f,k,r,t,p,u,v,w,x,y,z,h,l,A,B,q){var a={};p=p(a);a.ParameterFields=p.ParameterFields;a.Field=p.Field;y(a,a.ParameterFields);a.Utils=r;a.Editor=t(a);a.Preview=v(a);a.Model=u(a);a.Rest=w;a.UI=x(a);var g,m=function(b,c){var d={id:b.macroName,successCallback:function(b){b&&b.details&&(b.details=a.Model.transformMetaDataDefault(b.details));a.Editor.loadMacroInBrowser(b.details,c);m.displayDetails();a.Preview.previewMacro(b.details)},errorCallback:function(a){n.alert("There has been an error loading the macro browser. Please try again or see your system administrator.");
m.displayDetails()}};b.alternateId&&(d.alternateId=b.alternateId);m.setUI(c,b.title,b.macroName);a.Rest.fetchMacroMetadataDetails(d)};m.setUI=function(b,c,d){var e="edit"==b?a.editTitle:a.insertTitle;f("#macro-insert-container").hide();a.UI.enableSaveButton(!1);a.UI.updateButtonText(b);a.dialog.gotoPage(1).addHeader(e.replace(/\{0\}/,c));(b=h.getFunction(d,"beforeDialogShow"))&&b(c);a.dialog.show();a.UI.showBrowserSpinner(!0)};m.displayDetails=function(){a.UI.showBrowserSpinner(!1);a.UI.enableSaveButton(!1);
f("#macro-insert-container").show()};a.isOpen=!1;a.isInTinyMceEditor=function(){return n.tinymce&&!!n.tinymce.activeEditor};a.isInFabricEditor=function(){return!a.isInTinyMceEditor()};a.reset=function(){g&&g.resolve&&g.resolve();g=null;a.initMacroBrowserAfterRequest=null;a.initData=null;a.hasInit=!1;a.metadataList=[];a.aliasMap={};a.fields={};h.reset();a.Macros=h.elements()};a.getMacroJsOverride=h.get;a.setMacroJsOverride=h.put;a.Macros=h.elements();a.hasInit=!1;a.metadataList=[];a.aliasMap={};a.fields=
{};a.processRequiredParameters=function(){return a.Editor.processRequiredParameters()};a.paramChanged=function(){a.Editor.processRequiredParameters()};a.loadMacroInBrowser=function(b,c){a.Editor.loadMacroInBrowser(b,c)};a.getMacroDefinitionFromForm=function(b){a.Editor.getMacroDefinitionFromForm(b)};a.getMacroParametersFromForm=function(b){a.Editor.getMacroParametersFromForm(b)};a.previewMacro=function(b){a.Preview.previewMacro(b)};a.previewOnload=function(b){var c=a.dialog&&a.dialog.activeMetadata&&
a.dialog.activeMetadata.macroName||null;c&&((c=h.getFunction(c,"postPreview"))&&c(f("#macro-preview-iframe")[0],a.dialog.activeMetadata),k.Editor.disableFrame(b),f(b).click(function(a){if("a"===a.target.tagName.toLowerCase())return(a=f(a.target).attr("href"))&&0!=a.indexOf("#")&&-1==a.indexOf(n.location)&&n.open(a,"_blank").focus(),!1}))};a.getMacroMetadata=function(b){for(var c=0,d=a.metadataList.length;c<d;c++){var e=a.metadataList[c];if(e.macroName==b)return e}return null};a.getMetadataPromise=
function(){return g};a.open=function(b){b||(b={},l.log("No settings to open the macro browser."));var c=b.selectedMacro;!c&&b.presetMacroMetadata&&(c={name:b.presetMacroMetadata.macroName,productContext:b.presetMacroMetadata.productContext||{}});if(c&&c.name){var d=h.getFunction(c.name,"opener");if(d){a.isInFabricEditor()&&c.params&&"string"===typeof c.params.__bodyContent&&(c.body=c.params.__bodyContent);b&&(a.settings=b);d(c);return}}a.hasInit?a.openMacroBrowser(b):(l.debug("init macro browser"),
a.UI.showBrowserSpinner(!0),null!==a.initData&&f.isEmptyObject(a.initData)?(l.error("Macro browser preload failed. Trying again..."),a.initMacroBrowserAfterRequest=b,a.preLoadMacro()):a.initData?(a.initBrowser(),a.openMacroBrowser(b)):(l.debug("Waiting for macro browser preloading..."),a.initMacroBrowserAfterRequest=b))};a.openMacroBrowser=function(b){a.settings=b;a.selectedMacroDefinition=b.selectedMacro;var c=a.selectedMacroDefinition&&a.selectedMacroDefinition.name||b.presetMacroName;b.presetMacroName&&
(b.presetMacroMetadata=a.getMacroMetadata(b.presetMacroName));var d=b.presetMacroMetadata;if(!d){var e=b.selectedMacro;if(e){var c=e.name.toLowerCase(),c=a.aliasMap[c]||c,g=h.getFunction(c,"updateSelectedMacro"),k=h.getFunction(c,"getMacroDetailsFromSelectedMacro");g&&g(e);k&&(d=k(a.metadataList,e));d||(d=a.getMacroMetadata(e.name))}}e=f("#macro-browser-dialog").find("button.back");d?(l.debug("Open macro browser to edit macro: "+d.macroName),e.hide(),a.replicateSelectMacro(d,b.mode||"edit")):(c?(e.show(),
a.dialog.overrideLastTab(),a.dialog.gotoPage(2)):(e.show(),b.selectedCategory?(b=f("#select-macro-page .dialog-page-menu button").index(f("#category-button-"+b.selectedCategory)),0>b&&(b=0),a.dialog.overrideLastTab(),a.dialog.gotoPanel(0,b)):a.dialog.gotoPage(0)),a.showBrowserDialog());a.isOpen=!0};a.showBrowserDialog=function(){a.dialog.show();a.UI.showBrowserSpinner(!1)};a.complete=function(b){if(f("#macro-browser-dialog .dialog-button-panel .ok").is(":visible:not(:disabled)")){b=a.dialog.activeMetadata;
var c=h.getFunction(b.macroName,"manipulateMarkup");c&&c(b);var c=a.Editor.getMacroDefinitionFromForm(b),d=a.settings.selectedMacro;d?q.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macroBrowser",action:"edited",actionSubject:"macro",actionSubjectId:d.name}}):q.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macroBrowser",action:"inserted",actionSubject:"macro",actionSubjectId:c.name}});a.afterComplete(c,b)}};a.insertUpdatedMacro=function(b,c){a.settings&&
"function"===typeof a.settings.insertUpdatedMacro&&a.settings.insertUpdatedMacro(b,c)};a.afterComplete=function(b,c){a.settings&&!1!==a.settings.autoClose&&a.close();if(a.settings&&"function"===typeof a.settings.onComplete)a.settings.onComplete(b,c)};a.cancel=function(){a.close();if(a.settings&&"function"===typeof a.settings.onCancel)a.settings.onCancel();return!1};a.close=function(){this.unknownParams={};this.fields={};a.Preview.removePreviewContainer();this.dialog&&this.dialog.hide();a.isOpen=!1};
a.replicateSelectMacro=function(a,c){m(a,c)};a.initBrowser=function(){var b=a.initData;if(!b.categories||!a.metadataList.length)return n.alert("There has been an error loading the macro browser. Please try again or see your system administrator."),a.UI.showBrowserSpinner(!1),!1;a.editTitle=b.editTitle;a.insertTitle=b.insertTitle;var c;b.categories=f.map(b.categories,function(a){return"hidden-macros"==a.name?(c=a,null):a});b.categories.sort(function(a,b){return a.displayName.toLowerCase()>b.displayName.toLowerCase()?1:-1});c&&k.params.showHiddenUserMacros&&
b.categories.push(c);a.dialog=a.UI.createDialog({title:b.title,categories:b.categories,macros:a.metadataList,onClickMacroSummary:function(a,b){a.preventDefault();m(b,"insert")},onSubmit:a.complete,onCancel:a.cancel});return a.hasInit=!0};a.searchSummaries=function(b,c){c=f.extend({splitRegex:/[\s\-]+/},c);return k.filterBySearch(a.metadataList,b,c)};a.getMacroBody=function(){if(k.DarkFeatures.isEnabled("macro.fix-get-macro-body")&&!a.isOpen)throw Error("confluence-macro-browser/macro-browser is not open");
var b="",c=f("#macro-insert-container").data("macro-detail"),d=f("#macro-insert-container .macro-body-editor textarea"),e=f("#macro-insert-container .macro-body-div textarea");a.isInFabricEditor()&&c&&c.body&&"PLAIN_TEXT"===c.body.bodyType&&d.length?b=d.val():e.length?b=e.val():a.selectedMacroDefinition?a.selectedMacroDefinition.body&&(b=a.selectedMacroDefinition.body):a.dialog.activeMetadata&&(b=a.dialog.activeMetadata.formDetails.body.content);return b};a.getMacroParams=function(a){return z.deserialize(a.getAttribute("data-macro-parameters"))};
a.getMacroName=function(a){if(a&&a.hasAttribute("data-macro-name"))return a.getAttribute("data-macro-name")};a.isHiddenMacroShown=function(a){return k.params.showHiddenUserMacros&&"_-user-macro-_"==a.pluginKey};a.hasRequiredParameters=function(a){return a.anyParameterRequired};a.setWhitelist=function(b){a.whitelist=b};a.updateCacheInBackground=function(){a.Rest.loadMacroMetadata({data:a.whitelist?{whitelist:a.whitelist}:{detailed:!1},forceUpdateCache:!0,errorCallback:function(a){l.error("Error updating cached macro browser metadata:");
l.error(a)}})};a.preLoadMacro=function(b){b=b||{};a.initData=null;return g&&"pending"===g.state()&&!b.forceUpdateCache?g:g=a.Rest.loadMacroMetadata({data:a.whitelist?{whitelist:a.whitelist}:{detailed:!1},forceUpdateCache:b.forceUpdateCache,successCallback:function(b){a.initData=b;a.Model.loadMacros(b.macros);a.initMacroBrowserAfterRequest&&(a.initBrowser(),a.openMacroBrowser(a.initMacroBrowserAfterRequest))},errorCallback:function(b){l.error("Error requesting macro browser metadata:");l.error(b);
a.initData={}}})};return a});require("confluence/module-exporter").exportModuleAsGlobal("confluence-macro-browser/macro-browser","AJS.MacroBrowser");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser.soy' */
// This file was automatically generated from macro-browser.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.MacroBrowser.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }


Confluence.Templates.MacroBrowser.macroSummaryList = function(opt_data, opt_ignored) {
  return '<ol id="category-' + soy.$$escapeHtml(opt_data.category) + '" class="macro-list"></ol>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroSummaryList.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroSummaryList';
}


Confluence.Templates.MacroBrowser.macroSummaryItem = function(opt_data, opt_ignored) {
  return '<li class="macro-list-item" tabindex="0" role="button"><h4 class="macro-title"></h4>' + Confluence.Templates.MacroBrowser.macroDescription({description: ''}) + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroSummaryItem.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroSummaryItem';
}


Confluence.Templates.MacroBrowser.macroDescription = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="macro-desc">' + ((opt_data.descriptionHtml) ? soy.$$filterNoAutoescape(opt_data.descriptionHtml) : '') + ((opt_data.documentationLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.documentationLink) + '" class="macro-doco-link">' + soy.$$escapeHtml('Documentation') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroDescription.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroDescription';
}


Confluence.Templates.MacroBrowser.insertMacroPanel = function(opt_data, opt_ignored) {
  return '<div id="macro-insert-container"><input class="macro-name" type="hidden"/><div class="macro-input-fields dialog-panel"><form action="#" class="aui"></form></div><div id="macro-preview-container" class="macro-preview-container dialog-panel"><div class="macro-preview-header"><ul class="macro-preview-links"><li><a id="macro-browser-preview-link" class="refresh-link icon icon-refresh" href="#">' + soy.$$escapeHtml('Refresh') + '</a></li></ul><span>' + soy.$$escapeHtml('Preview') + '</span></div><div id="macro-browser-preview" class="macro-preview"></div></div><div id="macro-body-editor-container" class="macro-body-editor-container dialog-panel"><div class="macro-body-editor-header"><span>' + soy.$$escapeHtml('Content') + '</span></div><div class="macro-body-editor-wrapper"><div class="macro-body-editor-label">' + soy.$$escapeHtml('Insert text') + '</div><div class="macro-body-editor"><textarea placeholder="' + soy.$$escapeHtml('Type here') + '"></textarea></div></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.insertMacroPanel.soyTemplateName = 'Confluence.Templates.MacroBrowser.insertMacroPanel';
}


Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel = function(opt_data, opt_ignored) {
  return '<div id="macro-missing-metadata-container"><p>' + 'There is no metadata configured for this macro which means no configuration screen can be presented here.' + '</p>' + ((opt_data.showAdminMessage) ? '<p>' + AJS.format('If this is a user macro then you can add metadata to the template using the \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eUser Macro Administration\x3c/a\x3e console.',"/wiki" + '/admin/usermacros.action') + '</p>' : '<p>' + 'You must contact an administrator to configure metadata for this macro.' + '</p>') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel.soyTemplateName = 'Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel';
}


Confluence.Templates.MacroBrowser.macroParameter = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><label></label><input type="text" class="text"/></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameter.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameter';
}


Confluence.Templates.MacroBrowser.macroParameterBoolean = function(opt_data, opt_ignored) {
  return '<div class="checkbox macro-param-div boolean-param"><input class="checkbox" type="checkbox" value="true"/><label></label></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterBoolean.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterBoolean';
}


Confluence.Templates.MacroBrowser.macroParameterSelect = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><label></label><select class="select"></select></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterSelect.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterSelect';
}


Confluence.Templates.MacroBrowser.macroParameterHidden = function(opt_data, opt_ignored) {
  return '<div class="macro-param-div"><input type="hidden"/></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterHidden.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterHidden';
}


Confluence.Templates.MacroBrowser.macroParameterDesc = function(opt_data, opt_ignored) {
  return '<div class="macro-param-desc">' + soy.$$filterNoAutoescape(opt_data.description) + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroParameterDesc.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroParameterDesc';
}


Confluence.Templates.MacroBrowser.macroBody = function(opt_data, opt_ignored) {
  return '<div class="macro-body-div"><label>' + soy.$$escapeHtml('Body text') + '</label><textarea class="monospaceInput textarea" type="text" rows="10"></textarea></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.macroBody.soyTemplateName = 'Confluence.Templates.MacroBrowser.macroBody';
}


Confluence.Templates.MacroBrowser.helpLink = function(opt_data, opt_ignored) {
  return '' + Confluence.Templates.Dialog.helpLink({href: "https://confluence.atlassian.com/display/ConfCloud/Macros"});
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.helpLink.soyTemplateName = 'Confluence.Templates.MacroBrowser.helpLink';
}


Confluence.Templates.MacroBrowser.gadgetLink = function(opt_data, opt_ignored) {
  return '<a class=\'macro-uri\' href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.url) + '" target=\'_blank\'>' + soy.$$escapeHtml('Gadget URL') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.MacroBrowser.gadgetLink.soyTemplateName = 'Confluence.Templates.MacroBrowser.gadgetLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-facade.js' */
define("confluence-macro-browser/macro-browser-facade",["confluence-macro-browser/macro-browser","window"],function(b,c){var a=c.tinymce;return{getTinyMceMacroBrowser:function(){return a&&a.confluence&&a.confluence.macrobrowser||null},isInTinyMceEditor:function(){return a&&!!a.activeEditor},insert:function(a){if(this.isInTinyMceEditor())return this.getTinyMceMacroBrowser().macroBrowserComplete(a);b.afterComplete&&b.afterComplete(a)},saveMacro:function(a){this.isInTinyMceEditor()||b.insertUpdatedMacro&&
b.insertUpdatedMacro(a)},cancel:function(){if(this.isInTinyMceEditor())return this.getTinyMceMacroBrowser().macroBrowserCancel();b.cancel&&b.cancel()},getTinyMceMacroBrowserIfHave:function(){return this.isInTinyMceEditor()?this.getTinyMceMacroBrowser():null}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preload.js' */
define("confluence-macro-browser/macro-browser-preload",["jquery","ajs","window"],function(a,b,c){return{macroBrowserPreload:function(){a(c).bind("render-content-loaded",function(c,d){a("#macro-preview-iframe").contents().find("body")[0]==d&&b.MacroBrowser.previewOnload(d)});b.MacroBrowser.preLoadMacro()}}});require("confluence/module-exporter").safeRequire("confluence-macro-browser/macro-browser-preload",function(a){require("ajs").toInit(a.macroBrowserPreload)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:querystring', location = 'includes/js/api/querystring.js' */
define("confluence/api/querystring",[],function(){return{stringify:function(a){var d="",b;for(b in a)for(var c=0;c<a[b].length;c++)d+="\x26"+b,a[b][c]&&(d+="\x3d"+a[b][c]);return d.substring(1)},parse:function(a){var d={};if(a){"?"===a.substr(0,1)&&(a=a.substr(1));a=a.split("\x26");for(var b=0;b<a.length;b++){var c=a[b].split("\x3d");d[c[0]]||(d[c[0]]=[]);d[c[0]].push(a[b].substring(c[0].length+1))}}return d}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:url', location = 'includes/js/api/url.js' */
define("confluence/api/url",["confluence/api/querystring","jquery"],function(d,e){var g=/([^\?|#]+)[\?]?([^#]*)[#]?(.*)/,f=["source","urlPath","queryParams","anchor"];return{parse:function(a){var b={};if(a=g.exec(a)){for(var c=0;c<f.length;c++)b[f[c]]=a[c];b.queryParams=d.parse(b.queryParams)}return b},format:function(a){return e.isEmptyObject(a)?"":(a.urlPath?a.urlPath:"")+(e.isEmptyObject(a.queryParams)?"":"?"+d.stringify(a.queryParams))+(a.anchor?"#"+a.anchor:"")}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:analytics-support', location = 'includes/js/analytics-support.js' */
define("confluence/analytics-support","jquery ajs confluence/meta window document confluence/api/url".split(" "),function(d,q,n,k,l,e){var b={},m;b.analyticsHandlerExists=function(){if("undefined"===typeof m){var a=d._data(k,"events");m=a&&a.analytics&&0<a.analytics.length}return m};b.setAnalyticsSource=function(a,f){b.analyticsHandlerExists()&&a.attr("href",function(a,c){a=encodeURIComponent(f);c=e.parse(c);d.isEmptyObject(c)||(c.queryParams.src=[a]);return e.format(c)})};b.srcRemovedUrl=function(a){a=
e.parse(a);delete a.queryParams.src;for(var f=Object.keys(a.queryParams),b=0;b<f.length;b++){var c=f[b],g=c.split(".");3===g.length&&"src"===g[0]&&delete a.queryParams[c];"jwt"===c&&delete a.queryParams[c]}return e.format(a)};b.srcParamValues=function(a){return(a=e.parse(a).queryParams)&&a.src?a.src:[]};b.srcAttrParamValues=function(a){a=e.parse(a).queryParams;for(var b=Object.create(null),p=Object.keys(a),c=0;c<p.length;c++){var g=p[c],h=g.split(".");if(3===h.length&&"src"===h[0]){var d=h[1],h=h[2];
b[d]=b[d]||{};b[d][h]=decodeURIComponent(a[g][0])}}return b};b.extractAnalyticsData=function(a){var f=[],d=b.srcParamValues(a);a=b.srcAttrParamValues(a);for(var c=0;c<d.length;c++){var g=d[c];f.push({src:g,attr:a[g]||{}})}return f};b.publish=function(a,b){q.trigger("analytics",{name:a,data:b||{}})};b.init=function(){var a=b.extractAnalyticsData(l.URL),f={userKey:n.get("remote-user-key"),pageID:n.get("page-id")};if(0<a.length){for(var e=0;e<a.length;e++){var c=a[e],g=d.extend({},f,c.attr);b.publish("confluence.viewpage.src."+
c.src,g)}k.history&&k.history.replaceState&&(a=b.srcRemovedUrl(l.URL),l.URL!==a&&k.history.replaceState(null,"",a))}else b.publish("confluence.viewpage.src.empty",f)};return b});require("confluence/module-exporter").exportModuleAsGlobal("confluence/analytics-support","AJS.Confluence.Analytics",function(d){require("ajs").toInit(d.init)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:amd-support', location = 'amd/confluence-shim.js' */
define("confluence/jim/confluence-shim",function(){return window.Confluence});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:amd-support', location = 'amd/amd-exporter.js' */
define("confluence/jim/amd/module-exporter",[],function(){var a={};a.namespace=function(e,f,d){var g=e.split(".");d=d||window;for(var c=0,h=g.length-1;c<h;c++){var b=d[g[c]];d=(b!=null)?b:d[g[c]]={}}if(d[g[c]]){if(window.console&&window.console.warn){window.console.warn('Value of "'+e+'" was overridden')}}d[g[c]]=f||d[g[c]]||{};return d[g[c]]};a.safeRequire=function(c,b){if(define&&define.amd===undefined){var d=require(c);if(b){b(d)}}};a.exportModuleAsGlobal=function(c,d,b){a.safeRequire(c,function(e){a.namespace(d,e);if(b){b(e)}})};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:macro-browser-resources', location = 'templates/extra/jira/view-in-jira.js' */
AJS.bind("add-handler.property-panel",function(b,a){AJS.log("add-handler.property-panel: panel name = "+a.name);if(a.name!="macro"){return}a.registerButtonHandler("view-in-jira",function(d,j){if(AJS.Editor.JiraConnector.servers){var s=AJS.Editor.JiraConnector.servers;var l=AJS.$(j);var g=l.attr("data-macro-default-parameter");var k=l.attr("data-macro-parameters")||"";var t=Confluence.MacroParameterSerializer.deserialize(k);var n=/=|!=|~|>|<|!~| is | in /i;var h=function(u){var i=u.indexOf("|");if(i>=0){return u.substring(0,i)}return u};var f=g||t.jqlQuery||t.key||h(k);var c=t.server;var q=t.serverId;var p=f.match(n);var m=null;for(var o=0;o<s.length;o++){if((q&&s[o].id==q)){m=s[o];break}if((c&&s[o].name==c)||(!c&&s[o].selected)){m=s[o];break}}if(m!=null){var e=(typeof m.displayUrl!=="undefined")?m.displayUrl:m.url;if(e.charAt(e.length-1)=="/"){e=e.substr(0,e.length-1)}var r=tinymce.isIE?"_blank":"confluence-goto-jiralink-"+AJS.params.pageId;if(!p){window.open(e+"/browse/"+encodeURIComponent(f),r)}else{window.open(e+"/secure/IssueNavigator.jspa?reset=true&jqlQuery="+encodeURIComponent(f),r)}}}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:macro-browser-resources', location = 'templates/extra/jira/show-summary.js' */
AJS.bind("init.rte",function(){if(!AJS.Confluence&&!AJS.Confluence.PropertyPanel&&!AJS.Confluence.PropertyPanel.Macro){AJS.logError("JIRA Issues Macro : can't register property panel init handler since AJS.Confluence.PropertyPanel.Macro is undefined");return}var a="showSummary";var f="jira";var e="jiraissues";var d="show-summary";AJS.Confluence.PropertyPanel.Macro.registerInitHandler(c,f);AJS.Confluence.PropertyPanel.Macro.registerInitHandler(c,e);function c(g,m,j){var l=AJS.$.grep(m,function(i){return i.parameterName==d})[0];if(!l){AJS.logError("JIRA Issues Macro - Show-summary : The system cannot find SummaryButton, all buttons are: ");for(var k in m){AJS.logError(m[k].text)}return}if(b(g)){var h=AJS.SummaryHelper.getParam(g,a);if(h=="false"){l.text="Show summary"}else{l.text="Hide summary"}}else{l.className+=" hidden"}}function b(g){var i=AJS.$(g);var j=i.attr("src");if(!j){return true}var h=AJS.SummaryHelper.getParam(g,"count");if(j.indexOf("confluence.extra.jira/jira-table")==-1&&h!="true"){return true}return false}});AJS.bind("add-handler.property-panel",function(b,a){if(a.name!="macro"){return}a.registerButtonHandler("show-summary",function(e,c){var d=AJS.SummaryHelper.getParam(c,"showSummary");AJS.SummaryHelper.updateMacro("jira",c,"showSummary",d=="false"?"true":"false")})});AJS.SummaryHelper=(function(){return{getCurrentParams:function(a){return Confluence.MacroParameterSerializer.deserialize(a.attr("data-macro-parameters"))},getParam:function(a,d){var c=AJS.$(a);var b=AJS.SummaryHelper.getCurrentParams(c);return b[d]},updateMacro:function(b,a,c,g){var e=AJS.$(a);AJS.Rte.getEditor().selection.select(e[0]);AJS.Rte.BookmarkManager.storeBookmark();var d=AJS.SummaryHelper.getCurrentParams(e);d[c]=g;var f={contentId:Confluence.Editor.getContentId(),macro:{name:b,params:d,defaultParameterValue:e.attr("data-macro-default-parameter")}};tinymce.confluence.MacroUtils.insertMacro(f)}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-dialog2', location = 'src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__8e2b9598d39bbcb399462a662bcb6efa=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__fb409c432b53d81bad1e174061f6886c),j=f(__1f10abc98a3cd10182350043fad370a4),k=f(__a96071e28d103a38ba4dff141c560d4f),
b=f(__f0d4aa95850a2ae4149235bd35e6184a),l=f(__e50024e98902e443b4a4d9886bd9a31e),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-progress-indicator', location = 'src/js/aui/progress-indicator.js' */
("undefined"===typeof window?global:window).__68f80d0c0781d8869bd96e6520696e9f=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function s(a,b,d){(0,t.recomputeStyle)(a);a.css("width",100*d+"%");b.attr("data-value",d)}function u(a,b,d){var e=d.currentProgress,c=d.value,a=(0,k.default)(a),f=(0,k.default)(b);"number"===typeof c&&(1>=c&&0<=c)&&(f.trigger(x,[e,c]),(0,y.supportsCssTransition)()?(a.one(z,function(){f.trigger(v,[e,c])}),s(a,f,c)):(s(a,f,c),f.trigger(v,[e,c])))}function w(a){var a=
(0,k.default)(a).first(),b=a.children(".aui-progress-indicator-value");a.removeAttr("data-value");(0,t.recomputeStyle)(a);b.css("width","")}function q(a){return l.default.isNumber(a)&&l.default.isFinite(a)&&!l.default.isNaN(a)}function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d=parseFloat(a);return q(d)?d:Number(b)}function m(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return Number(parseFloat(a).toFixed(b))}function n(a){var b=a.max,b=0<b?b:f.max,
a=Math.max(0,Math.min(a.val,b)),d=m(a/b,6),e=m(100*d,2);return{max:b,val:a,valAsFraction:d,valAsPercent:e}}function h(a){var b=n(a._data),d=b.val,e=b.valAsFraction,b=b.max,c=a.querySelector(".aui-progress-indicator"),f=c.getAttribute("data-value");a.indeterminate?(c.removeAttribute("aria-valuenow"),w(c)):(c.setAttribute("aria-valuenow",d),c.setAttribute("aria-valuemax",b),u(c.querySelector(".aui-progress-indicator-value"),c,{currentProgress:f,value:e}))}var o={};"use strict";Object.defineProperty(o,
"__esModule",{value:!0});var k=j(__fb409c432b53d81bad1e174061f6886c),l=j(__94836917f25cd6985dba837233d3b857),p=j(__4e48666adde7348532bec900d8746a35),t=__ab0bbf63af28826336f58e93f54499f8,y=__ac4b25bb9b3c22ec7c045898c699fde1,e;e=__dc3494b595b6cf86534cbde834ab95b6;if(!e||!e.__esModule){var r={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);r.default=e;e=r}i=j(__a96071e28d103a38ba4dff141c560d4f);var v="aui-progress-indicator-after-update",x="aui-progress-indicator-before-update",
z="transitionend webkitTransitionEnd",f={indeterminate:!1,max:1,val:0};(0,p.default)("aui-progressbar",{template:function(a){a._data.max=g(a.getAttribute("max"),f.max);a._data.val=g(a.getAttribute("value"),f.val);a._data.indeterminate=a.hasAttribute("indeterminate");var b=n(a._data),d=b.valAsFraction;a.innerHTML='<div class="aui-progress-indicator"\n         '+(a._data.indeterminate?"":'data-value="'+d+'"')+'\n         role="progressbar"\n         aria-valuemin="0"\n         aria-valuenow="'+b.val+
'"\n         aria-valuemax="'+b.max+'"\n         tabindex="0"\n     >\n        <span class="aui-progress-indicator-value" style="width: '+b.valAsPercent+'%"></span>\n    </div>'},attached:function(a){h(a)},attributes:{indeterminate:{created:function(a){a.indeterminate=!0},removed:function(a){a.indeterminate=!1}},value:{value:f.val,fallback:function(a,b){if(a._updating)return!1;a._data.val=g(b.newValue,b.oldValue||f.val);h(a)}},max:{value:f.max,fallback:function(a,b){if(a._updating)return!1;a._data.max=
g(b.newValue,b.oldValue||f.max);h(a)}}},prototype:{get _data(){return this.__data||(this._data=l.default.defaults({},f))},set _data(a){return this.__data=a},get indeterminate(){return this._data.indeterminate},set indeterminate(a){this._data.indeterminate=!!a;h(this)},get value(){return n(this._data).val},set value(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("value",a.newValue);this._updating=!1;this._data.val=g(a.newValue,a.oldValue||f.val);h(this)},get max(){return n(this._data).max},
set max(a){if(!q(a))return!1;a={newValue:m(a,6)};this._updating=!0;this.setAttribute("max",a.newValue);this._updating=!1;this._data.max=g(a.newValue,a.oldValue||f.max);h(this)}}});p={update:e.fn(function(a,b){if("string"===typeof a){var d=document.getElementById(a);d&&(a=d)}var d=(0,k.default)(a).first(),e=d.children(".aui-progress-indicator-value"),c=d.attr("data-value"),f=!c,g=parseFloat(c)||0;if(c=c&&g===b)c=parseFloat(e.get(0).style.width)||0,c=g===100*c;if(!c)return f&&e.css("width",0),u(e,d,
{currentProgress:g,value:b}),d},"AJS.progressBars.update",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"}),setIndeterminate:e.fn(w,"AJS.progressBars.setIndeterminate",{sinceVersion:"7.7.0",extraInfo:"Use the <aui-progressbar> web component instead"})};(0,i.default)("progressBars",p);o.default=p;return o=o["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/templates/validator/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Jim.Validator.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Jim == 'undefined') { Confluence.Templates.Jim = {}; }
if (typeof Confluence.Templates.Jim.Validator == 'undefined') { Confluence.Templates.Jim.Validator = {}; }


Confluence.Templates.Jim.Validator.configDialog = function(opt_data, opt_ignored) {
  var param6 = '<p>' + soy.$$escapeHtml('Please let us know which new instances correspond to your old instances so we can update the JIRA links.') + '</p>';
  var param11 = '<table class="aui"><thead><tr><th id="old">' + soy.$$escapeHtml('Existing JIRA instance link') + '</th><th id="arrow"></th><th id="new">' + soy.$$escapeHtml('New JIRA instance link') + '</th></tr></thead><tbody>';
  var baList17 = opt_data.brokenAppLinks;
  var baListLen17 = baList17.length;
  for (var baIndex17 = 0; baIndex17 < baListLen17; baIndex17++) {
    var baData17 = baList17[baIndex17];
    param11 += '<tr><td headers="old">' + soy.$$escapeHtml(baData17.server) + '</td><td headers="arrow"><span class="aui-icon aui-icon-small aui-iconfont-devtools-arrow-right"></span></td><td headers="new"><select name="' + soy.$$escapeHtml(baData17.serverId) + '" id="' + soy.$$escapeHtml(baData17.serverId) + '" class="select select-applink-config" data-placeholder="' + soy.$$escapeHtml('Select an Application Link') + '" required><option value="">' + soy.$$escapeHtml('Select an Application Link') + '</option>';
    var eaList29 = opt_data.existingApplinks;
    var eaListLen29 = eaList29.length;
    for (var eaIndex29 = 0; eaIndex29 < eaListLen29; eaIndex29++) {
      var eaData29 = eaList29[eaIndex29];
      param11 += '<option value="' + soy.$$escapeHtml(eaData29.serverId) + '">' + soy.$$escapeHtml(eaData29.server) + '</option>';
    }
    param11 += '</select></td></tr>';
  }
  param11 += '</tbody></table>';
  param6 += aui.form.form({action: '#', content: param11});
  param6 += '<br><p>' + soy.$$filterNoAutoescape('\x3cstrong\x3ePlease note:\x3c/strong\x3e The broken macros won\x27t work until you complete this step.') + '</p>';
  var output = '' + aui.dialog.dialog2({id: opt_data.dialogId, modal: true, titleText: 'Choose JIRA instance links', content: param6, footerActionContent: '<div class="button-spinner"></div>' + aui.form.submit({id: 'validator-done', type: 'primary', text: 'Finish'}) + aui.buttons.button({id: 'validator-cancel', type: 'link', text: 'Cancel'})});
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Jim.Validator.configDialog.soyTemplateName = 'Confluence.Templates.Jim.Validator.configDialog';
}


Confluence.Templates.Jim.Validator.warningFlagContent = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml('We\x27ve found some broken JIRA issue macros on your instance.') + '</div><div><button class="aui-button aui-button-link show-prompt-dialog">' + soy.$$escapeHtml('Click here to fix.') + '</button></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Jim.Validator.warningFlagContent.soyTemplateName = 'Confluence.Templates.Jim.Validator.warningFlagContent';
}


Confluence.Templates.Jim.Validator.error = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.message) + '</div><ul class="aui-nav-actions-list"><li><button class="aui-button aui-button-link dismissed-applink">' + soy.$$escapeHtml('Dismiss') + '</button></li></ul>';
};
if (goog.DEBUG) {
  Confluence.Templates.Jim.Validator.error.soyTemplateName = 'Confluence.Templates.Jim.Validator.error';
}


Confluence.Templates.Jim.Validator.warningNoApplink = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml('Your Confluence instance has JIRA macros in it but isn\x27t linked to a JIRA instance. Please link an instance so these macros can work.') + '</div><ul class="aui-nav-actions-list"><li><button class="aui-button aui-button-link add-new-applink">' + soy.$$escapeHtml('Link a JIRA instance') + '</button></li><li><button class="aui-button aui-button-link dismissed-applink">' + soy.$$escapeHtml('Dismiss') + '</button></li></ul>';
};
if (goog.DEBUG) {
  Confluence.Templates.Jim.Validator.warningNoApplink.soyTemplateName = 'Confluence.Templates.Jim.Validator.warningNoApplink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/validator/js/resource.js' */
define("confluence/jim/validator/js/resource",["jquery","underscore","ajs","confluence/api/logger",],function(e,d,b,c){var a=function(){};a.prototype.getValidationStatus=function(){var f=b.contextPath()+"/rest/jiraanywhere/1.0/jim-validator/get-scanning-status";return e.getJSON(f,{}).fail(this.onError)};a.prototype.start=function(){var f=b.contextPath()+"/rest/jiraanywhere/1.0/jim-validator/scan-broken-applink-in-background";return e.ajax({type:"POST",url:f,contentType:"application/json"}).fail(this.onError)};a.prototype.resetStatus=function(){var f=b.contextPath()+"/rest/jiraanywhere/1.0/jim-validator/reset-status";return e.ajax({type:"POST",url:f,contentType:"application/json"}).fail(this.onError)};a.prototype.onError=function(g){try{if(g.status===401){c.logError("Unauthenticated exception during JIM validation request");return}else{if(g.responseText){var f=JSON.parse(g.responseText);if(f.message&&!!f.message.trim()){c.logError("Unexpected exception during JIM validation request: ",f.message);return}}}c.logError("Unexpected exception during JIM validation request: ",g.statusText)}catch(h){c.logError("Unhandled exception during JIM validation request: ",h)}};a.prototype.fixApplink=function(h,f){b.trigger("analyticsEvent",{name:"jim.validator.start.fixing",data:{numberOfMapping:h.length}});var g=b.contextPath()+"/rest/jiraanywhere/1.0/jim-validator/fix-applink";return e.ajax({type:"POST",url:g,data:JSON.stringify({appLinkMappingList:h,contentIds:f}),contentType:"application/json"}).fail(this.onError)};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/validator/js/progress-bar.js' */
define("confluence/jim/validator/js/progress-bar",["jquery","ajs"],function(b,a){var c=function(){this.$el=b(".progress-bar-section");this.$label=this.$el.find(".progress-bar-label")};c.prototype.show=function(){this.$el.show()};c.prototype.hide=function(){this.$el.hide()};c.prototype.update=function(d,e){this.$label.text(d);a.progressBars.update("#validator-progress-bar",e);this.show()};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/validator/js/prompt-dialog.js' */
define("confluence/jim/validator/js/prompt-dialog",["jquery","underscore","ajs","confluence/jim/validator/js/resource"],function(d,c,b,e){var a=function(f){this.promptDialogId="jim-validator-config-dialog";this.data=f;this.brokenAppLinks=f.problems.brokenAppLinks;this.existingAppLinks=f.problems.existingAppLinks;this.resource=new e();this.deferred=d.Deferred();this.$dialog=d(Confluence.Templates.Jim.Validator.configDialog({dialogId:this.promptDialogId,brokenAppLinks:this.brokenAppLinks,existingApplinks:this.existingAppLinks}))};a.prototype.show=function(){this.$dialog.appendTo("body");this.$dialog.find(".select-applink-config").auiSelect2({minimumResultsForSearch:-1,placeholder:"Select an Application Link"});b.dialog2("#"+this.promptDialogId).show();this.addEvent();return this.deferred.promise()};a.prototype.addEvent=function(){this.$dialog.find("#validator-done").on("click",c.bind(this.onDoneClick,this));this.$dialog.find("#validator-cancel").on("click",c.bind(this.onCancelButtonClick,this))};a.prototype.onDoneClick=function(){if(!this.isFormValid()){return}var f=[];c.each(this.brokenAppLinks,function(g){var h=d("select#"+g.serverId).auiSelect2("data");f.push({oldAppLink:g,newAppLink:{serverId:h.id,server:h.text}})});this.resource.fixApplink(f,this.data.problems.contentIds).done(c.bind(function(){b.dialog2("#"+this.promptDialogId).remove();this.deferred.resolve()},this)).fail(c.bind(function(){this.deferred.fail(arguments)},this))};a.prototype.onCancelButtonClick=function(f){b.dialog2("#"+this.promptDialogId).remove();this.deferred.reject()};a.prototype.isFormValid=function(){var f=true;d(".select-applink-config").each(function(){var g=d(this).auiSelect2("val");d(this).toggleClass("invalid",!!!g);if(!g){f=false;return false}});return f};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/validator/js/notify.js' */
define("confluence/jim/validator/js/notify",["jquery","ajs"],function(d,a){function c(e,f){return a.flag({type:e,body:f})}var b=function(){};b.prototype.showWarning=function(f,g){var h=Confluence.Templates.Jim.Validator.warningFlagContent();var e=c("warning",h);d(e).find(".show-prompt-dialog").on("click",function(i){a.trigger("analyticsEvent",{name:"jim.validator.space.import.show.prompt.dialog"});g&&g();e.close()});d(e).find(".icon-close").on("click",function(j){var i=a.contextPath()+"/rest/jiraanywhere/1.0/jim-validator/reset-status";return d.ajax({type:"POST",url:i,contentType:"application/json"}).fail(this.onError)});return e};b.prototype.showError=function(g,e){var h=Confluence.Templates.Jim.Validator.error({message:g});var f=c("error",h);d(f).find(".dismissed-applink").on("click",function(){a.trigger("analyticsEvent",{name:"jim.validator.space.import.error.dismissed"});e&&e();f.close()});return f};b.prototype.showNoAppLink=function(g,e){var h=Confluence.Templates.Jim.Validator.warningNoApplink();var f=c("warning",h);d(f).find(".add-new-applink").on("click",function(){a.trigger("analyticsEvent",{name:"jim.validator.space.import.add.new.applink"});g&&g();f.close()});d(f).find(".dismissed-applink").on("click",function(){a.trigger("analyticsEvent",{name:"jim.validator.space.import.no.applink.dismissed"});e&&e();f.close()});return f};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-validator-page', location = '/validator/js/validator.js' */
define("confluence/jim/validator/js/validator",["jquery","underscore","ajs","confluence/jim/validator/js/resource","confluence/jim/validator/js/notify","confluence/jim/validator/js/progress-bar","confluence/jim/validator/js/prompt-dialog"],function(g,e,c,h,d,b,a){var f=function(){this.STATUS={NOT_STARTED:"NOT_STARTED",IN_PROGRESS:"IN_PROGRESS",WAIT_FOR_CONFIG:"WAIT_FOR_CONFIG",FIXING:"FIXING",NO_APPLINK:"NO_APPLINK",DONE:"DONE",ERROR:"ERROR"};this.INTERVAL=30000;this.resource=new h();this.notify=new d();this.getProgressBar=function(){if(!this.progressBar){this.progressBar=new b()}return this.progressBar};this.timeout=null;this.startRequested=false};f.prototype.init=function(){this.getProgressBar().hide();if(this.isForceStart()){this.start()}else{this.startCheckingStatus()}};f.prototype.start=function(){this.startRequested=true;this.getProgressBar().show();this.resource.start().done(e.bind(this.startCheckingStatus,this))};f.prototype.isForceStart=function(){var i=window.location.href;return i.indexOf("/admin/jim-validator/view.action?forcestart=true")>0};f.prototype.startCheckingStatus=function(){this.resource.getValidationStatus().done(e.bind(this.processStatusCallback,this))};f.prototype.processStatusCallback=function(j){if(this.timeout!==null){clearTimeout(this.timeout);this.timeout=null}switch(j.status){case this.STATUS.IN_PROGRESS:case this.STATUS.FIXING:this.getProgressBar().show();setTimeout(e.bind(this.startCheckingStatus,this),this.INTERVAL);break;case this.STATUS.DONE:c.trigger("analyticsEvent",{name:"jim.validator.space.import.status.done"});this.getProgressBar().update("All done!",1);var k=!!g(".section.applink-validator-main").length;if(k){this.resetStatus()}break;case this.STATUS.ERROR:c.trigger("analyticsEvent",{name:"jim.validator.space.import.status.error",data:{msg:j.additionalMessage}});this.notify.showError(j.additionalMessage,e.bind(this.resetStatus,this));this.getProgressBar().hide();g("#jira-macro-repair-start-button").enable();g("#jira-macro-repair-skip-button").enable();break;case this.STATUS.NO_APPLINK:c.trigger("analyticsEvent",{name:"jim.validator.space.import.status.no.applink"});this.notify.showNoAppLink(e.bind(function(){this.resetStatus().done(this.onGoToAppLinkClick)},this),e.bind(function(){this.resetStatus();this.getProgressBar().hide()},this));break;case this.STATUS.WAIT_FOR_CONFIG:c.trigger("analyticsEvent",{name:"jim.validator.space.import.status.config"});this.notify.showWarning(j,e.bind(this.onWarningClick,this,j));break;case this.STATUS.NOT_STARTED:if(this.startRequested){var i=this;this.timeout=setTimeout(function(){i.start()},1000)}else{this.getProgressBar().hide()}break}};f.prototype.onWarningClick=function(j){var i=new a(j);i.show().done(e.bind(function(){this.getProgressBar().show();setTimeout(e.bind(this.startCheckingStatus,this),this.INTERVAL)},this))};f.prototype.onGoToAppLinkClick=function(){window.location=c.contextPath()+"/plugins/servlet/applinks/listApplicationLinks"};f.prototype.resetStatus=function(){this.startRequested=false;if(this.timeout!==null){clearTimeout(this.timeout);this.timeout=null}return this.resource.resetStatus()};return f});require("confluence/jim/amd/module-exporter").safeRequire("confluence/jim/validator/js/validator",function(c){var a=require("ajs");var b=require("jquery");a.toInit(function(){(new c).init();var e=b("#jira-macro-repair-start-button");var d=b("#jira-macro-repair-skip-button");e.on("click",function(){e.disable();d.disable();(new c).start()});d.on("click",function(){a.trigger("analyticsEvent",{name:"jim.validator.skip"});window.location.href=a.contextPath()+"/admin/importspace/importconfluencespace.action"})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.fields.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.stringField.soyTemplateName = 'jiraIntegration.templates.fields.stringField';
}


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea rows="10" id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" class="textarea long-field">' + soy.$$escapeHtml(opt_data.value) + '</textarea>';
  if (opt_data.errorTexts) {
    var errorList37 = opt_data.errorTexts;
    var errorListLen37 = errorList37.length;
    for (var errorIndex37 = 0; errorIndex37 < errorListLen37; errorIndex37++) {
      var errorData37 = errorList37[errorIndex37];
      output += '<div class="error">' + soy.$$escapeHtml(errorData37) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.textareaField.soyTemplateName = 'jiraIntegration.templates.fields.textareaField';
}


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.arrayField.soyTemplateName = 'jiraIntegration.templates.fields.arrayField';
}


jiraIntegration.templates.fields.numberField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.numberField.soyTemplateName = 'jiraIntegration.templates.fields.numberField';
}


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options.length) ? aui.form.selectField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}) : aui.form.valueField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: 'None', isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.allowedValuesField.soyTemplateName = 'jiraIntegration.templates.fields.allowedValuesField';
}


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.timeTrackingField.soyTemplateName = 'jiraIntegration.templates.fields.timeTrackingField';
}


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field jira-field-unrenderable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><label>' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>' + aui.form.value({content: opt_data.reasonContent});
  if (opt_data.errorTexts) {
    var errorList117 = opt_data.errorTexts;
    var errorListLen117 = errorList117.length;
    for (var errorIndex117 = 0; errorIndex117 < errorListLen117; errorIndex117++) {
      var errorData117 = errorList117[errorIndex117];
      output += '<div class="error">' + soy.$$escapeHtml(errorData117) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.unrenderableTypeField.soyTemplateName = 'jiraIntegration.templates.fields.unrenderableTypeField';
}


jiraIntegration.templates.fields.dateField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.dateField.soyTemplateName = 'jiraIntegration.templates.fields.dateField';
}


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><select id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '">';
  var optionList154 = opt_data.options;
  var optionListLen154 = optionList154.length;
  for (var optionIndex154 = 0; optionIndex154 < optionListLen154; optionIndex154++) {
    var optionData154 = optionList154[optionIndex154];
    output += '<option value="' + soy.$$escapeHtml(optionData154.value) + '" ' + ((optionData154.selected) ? 'selected' : '') + 'data-icon-url="' + soy.$$escapeHtml(optionData154.iconUrl) + '">' + soy.$$escapeHtml(optionData154.text) + '</option>';
  }
  output += '</select>';
  if (opt_data.errorTexts) {
    var errorList170 = opt_data.errorTexts;
    var errorListLen170 = errorList170.length;
    for (var errorIndex170 = 0; errorIndex170 < errorListLen170; errorIndex170++) {
      var errorData170 = errorList170[errorIndex170];
      output += '<div class="error">' + soy.$$escapeHtml(errorData170) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconField.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconField';
}


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_ignored) {
  return ((opt_data.iconUrl) ? aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}) : '') + '<span class="select-option" title="' + soy.$$escapeHtml(opt_data.optionValue) + '">' + soy.$$escapeHtml(opt_data.optionValue) + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconOption.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconOption';
}


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format('\x22{0}\x22 - (New label)',opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.labelFieldResult.soyTemplateName = 'jiraIntegration.templates.fields.labelFieldResult';
}


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_ignored) {
  var output = '';
  var userOption__soy197 = soy.$$escapeHtml(opt_data.displayName) + ' - (' + soy.$$escapeHtml(opt_data.name) + ')';
  output += '<span title="' + soy.$$filterNoAutoescape(userOption__soy197) + '">' + soy.$$filterNoAutoescape(userOption__soy197) + '</span>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.userOptionSelect.soyTemplateName = 'jiraIntegration.templates.fields.userOptionSelect';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
var jiraIntegration=window.jiraIntegration||{};
jiraIntegration.fields=function(i,e){function l(a,b,c,d){b=a.name;a.value=(i.isPlainObject(d[b])?d[b].name:d[b])||c&&c.fields[b]||"";return a}function r(a){return a.val()}function s(a,b,c,d){b=a.name;a.value=d[b]&&d[b].join(",")||c&&c.fields[b]&&c.fields[b].join(",");return a}function t(a){return e.map(a.val().split(","),i.trim)}function u(a,b,c,d){var g=a.name,d=d[g],c=c&&c.fields[g],f;f=d?i.isArray(d)?e.pluck(d,"name"):[d.name]:c?i.isArray(c)?e.pluck(c,"name"):[c.name]:[];a.options=e.map(b.allowedValues,
function(a){return{value:a.id,text:a.name||a.value,selected:e.contains(f,a.name||a.id)}});a.isMultiple=e.contains(b.operations,"add");return a}function n(a,b){var c=b.val(),d=function(b){var c={};c[a]=b;return c};return b.attr("multiple")?i.isArray(c)?e.map(c,d):[d(c)]:d(c)}function v(a,b,c,d){a=i.extend({restType:b,issueKey:d&&d.key||"",term:c},a);return i.ajax({type:"POST",timeout:0,contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",
data:JSON.stringify(a)})}function w(a){var b;a.id&&(b=i(a.element).attr("data-icon-url"));return jiraIntegration.templates.fields.select2WithIconOption({optionValue:a.text,iconUrl:b})}function o(a){return a.schema?a.schema.system||a.schema.custom||a.schema.customId:a}function p(a){return j[o(a)]}function x(a){return a.closest(".jira-field").attr("data-jira-type")}var k={template:jiraIntegration.templates.fields.stringField,getContext:l,getValue:r},y={template:jiraIntegration.templates.fields.stringField,
getContext:function(a,b,c,d){b=a.name;a.value=d[b]&&d[b].name||c&&c.fields[b]&&c.fields[b].name||"";return a},getValue:function(a){return{name:a.val()}},behavior:function(a,b,c,d){var g=a.find("input"),f=a.attr("name");g.removeClass("text");g.auiSelect2(i.extend({minimumInputLength:1,id:f,name:f,query:function(a){v(b,c,a.term,d).done(function(b){a.callback({results:b})})}},{formatInputTooShort:function(){return "Find users..."},formatResult:function(a){return jiraIntegration.templates.fields.userOptionSelect({name:a.id,
displayName:a.text})}}));a.find("div.aui-select2-container").addClass("jira-select2-drop-box")}},C={template:jiraIntegration.templates.fields.arrayField,getContext:s,getValue:t,behavior:function(a,b,c,d){a=a.find("input");jiraIntegration.fields._labelPicker.build(a,function(a){return v(b,c,a,d)})}},q={template:jiraIntegration.templates.fields.textareaField,getContext:l,getValue:r},D={template:jiraIntegration.templates.fields.numberField,getContext:l,getValue:function(a){a=a.val();return/\d/.test(a)&&
/^-?\d*\.?\d*$/.test(a)?Number(a):a||null}},z={template:jiraIntegration.templates.fields.arrayField,getContext:s,getValue:t},h={template:jiraIntegration.templates.fields.allowedValuesField,getContext:u,getValue:e.bind(n,null,"id"),behavior:function(a){a.find("select[multiple]").auiSelect2()}},A={template:jiraIntegration.templates.fields.allowedValuesField,getContext:u,getValue:e.bind(n,null,"id")},E={template:jiraIntegration.templates.fields.timeTrackingField,getContext:function(a,b,c,d){b=a.name;
a.value=d[b]&&d[b].remainingEstimate||c&&c.fields[b]&&c.fields[b].remainingEstimate||"";return a},getValue:function(a){return{remainingEstimate:a.val()}}},B={template:jiraIntegration.templates.fields.dateField,getContext:l,getValue:function(a){a=a.val();return""===a?null:a},behavior:function(a){var b=a.find("input");if(navigator.userAgent.match(/Trident/)&&"5.3.5">AJS.version)a="placeholder"in document.createElement("input"),b.attr("placeholder","YYYY-MM-DD"),a||b.on("focus",function(){b.val()===
b.attr("placeholder")&&b.val("")}).on("blur",function(){""===b.val()&&b.val(b.attr("placeholder"))}).blur();else{b.datePicker({overrideBrowserDefault:!0});b.attr("placeholder","YYYY-MM-DD");var c=b.attr("data-aui-dp-uuid");b.on("click",function(){i("[data-aui-dp-popup-uuid="+c+"]").parents(".aui-inline-dialog").addClass("jira-create-issue-datepicker-dialog")})}}},F={template:jiraIntegration.templates.fields.select2WithIconField,getContext:function(a,b,c,d){var g=a.name,f=d[g]&&d[g].name||c&&c.fields&&
c.fields[g]&&c.fields[g].name||"";a.options=e.map(b.allowedValues,function(a){return{value:a.id,text:a.name,selected:f===a.name,iconUrl:a.iconUrl}});return a},getValue:e.bind(n,null,"id"),behavior:function(a){i.fn.auiSelect2?(a=a.find("select"),a.addClass("jira-select2-drop-box"),a.auiSelect2({hasAvatar:!0,minimumResultsForSearch:-1,formatSelection:w,formatResult:w})):AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.")}},j={"com.pyxis.greenhopper.jira:gh-epic-label":k,
string:k,summary:k,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":k,"com.atlassian.jira.plugin.system.customfieldtypes:url":k,environment:q,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":q,description:q,"com.atlassian.jira.plugin.system.customfieldtypes:float":D,array:z,labels:C,"com.atlassian.jira.plugin.system.customfieldtypes:labels":z,resolution:h,fixVersions:h,priority:F,versions:h,components:h,security:h,"com.atlassian.jira.plugin.system.customfieldtypes:version":h,
"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":h,"com.atlassian.jira.plugin.system.customfieldtypes:project":h,assignee:y,reporter:y,timetracking:E,duedate:B,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":B,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":A,"com.atlassian.jira.plugin.system.customfieldtypes:select":A},G={ignoreFieldsWithDefaultValue:!1};return{addFieldHandler:function(a,b){e.has(j,a)&&(console&&console.warn)&&console.warn("Redefining handler for type "+
a+".");j[a]=b},getFieldHandler:p,canRender:function(a){var b=o(a),b=j[b];return!b?!1:a.operations&&a.operations.length&&(!b.canRender||b.canRender(a))},renderField:function(a,b,c,d){var g=b.schema.system||b.schema.custom||b.schema.customId,f=j[g],e=b.schema.system||"customfield_"+b.schema.customId,d={labelText:b.name,name:e,isRequired:b.required,errorTexts:(d||{})[e],jiraType:g},g=!f||f.canRender&&!f.canRender(b),e=!b.operations||!b.operations.length;if(g||e){d.reasonContent=g?AJS.format("{0}Edit{1} this field in JIRA",
'<a href="'+(a?a.url:"#")+'">',"</a>"):e?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(a?a.url:"#")+'">',"</a>"):null;if(!d.reasonContent)throw Error("Invalid unrenderable reason.");return jiraIntegration.templates.fields.unrenderableTypeField(d)}return f.template(f.getContext(d,b,a,c||{}))},getJSON:function(a){var b;return(b=(b=x(a))&&p(b))&&b.getValue&&b.getValue(a)},attachFieldBehaviors:function(a,b,c){a.find(".jira-field").each(function(a,e){var f=i(e),h=x(f),m=h&&p(h);(m=m&&m.behavior)&&
m(f,b,h,c)})},renderCreateRequiredFields:function(a,b,c,d,g){function f(b){d.ignoreFieldsWithDefaultValue&&(b=e.filter(b,function(a){return!a.hasDefaultValue}));var f=e.filter(b,function(a){return!jiraIntegration.fields.canRender(a)});f.length?g&&g(f):(a.html(e.map(b,function(a){return jiraIntegration.fields.renderField(null,a,null,null)}).join("")),jiraIntegration.fields.attachFieldBehaviors(a,{serverId:c.serverId,projectKey:c.projectKey},null))}d=e.extend({},G,d);if(d.requiredFields)f(d.requiredFields);
else{var b=c,h=d;i.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+b.serverId+"/projects/"+b.projectKey+"/issue-types/"+b.issueType+"/fields-meta"}).pipe(function(a){var b=[];e.each(a.fields,function(a){var c=o(a);a.required&&!e.contains(h.excludedFields,c)&&b.push(a)});return b}).done(f)}}}}(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(){return{build:function(b,c){b.auiSelect2({tags:!0,multiple:!0,tokenSeparators:[","," "],createSearchChoice:function(a){return!a?null:{id:a,text:a,isNew:!0}},query:function(a){c(a.term).done(function(b){a.callback({results:b})})},formatResult:function(a){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:a.text,isNew:a.isNew}})}})}}}(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'libs/underscore/1.5.2/underscore-1.5.2.js' */
(function(l){define("atlassian/libs/underscore-1.5.2",function(){var o={};l.call(o);return o._.noConflict()})})(function(){(function(){var l=this,o=l._,p={},k=Array.prototype,q=Object.prototype,t=k.push,i=k.slice,r=k.concat,m=q.toString,L=q.hasOwnProperty,A=k.forEach,B=k.map,C=k.reduce,D=k.reduceRight,E=k.filter,F=k.every,G=k.some,s=k.indexOf,H=k.lastIndexOf,q=Array.isArray,M=Object.keys,u=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=
a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):l._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(A&&a.forEach===A)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===p)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===p)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(B&&a.map===B)return a.map(c,b);
j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(C&&a.reduce===C){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,N){if(f)d=c.call(e,d,a,b,N);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(D&&a.reduceRight===D){e&&(c=b.bind(c,e));return f?a.reduceRight(c,
d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;j(a,function(b,i,j){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,j);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;I(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(E&&a.filter===E)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};
b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(F&&a.every===F)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return p});return!!e};var I=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(G&&a.some===G)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return p});return!!e};b.contains=b.include=function(a,c){return a==
null?false:s&&a.indexOf===s?a.indexOf(c)!=-1:I(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&
a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};
b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var v=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=v(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<
d||d===void 0)return-1}return a.index-c.index}),"value")};var w=function(a){return function(c,d,e){var f={},g=d==null?b.identity:v(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=w(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=w(function(a,c,b){a[c]=b});b.countBy=w(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:v(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};
b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,
b==null||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var J=function(a,c,d){if(c&&b.every(a,b.isArray))return r.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?t.apply(d,a):J(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return J(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,
d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=r.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};
b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(s&&a.indexOf===s)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(H&&a.lastIndexOf===H)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);
for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var x=function(){};b.bind=function(a,c){var d,e;if(u&&a.bind===u)return u.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));x.prototype=a.prototype;var b=
new x;x.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=
a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var k=new Date;!i&&d.leading===false&&(i=k);var K=b-(k-i);e=this;f=arguments;if(K<=0){clearTimeout(h);h=null;i=k;g=a.apply(e,f)}else!h&&d.trailing!==
false&&(h=setTimeout(j,K));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=new Date;var j=function(){var k=new Date-h;if(k<b)e=setTimeout(j,b-k);else{e=null;d||(i=a.apply(g,f))}},k=d&&!e;e||(e=setTimeout(j,b));k&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];t.apply(d,arguments);return b.apply(this,d)}};b.compose=
function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<
d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=r.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=r.apply(k,i.call(arguments,1)),
e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var y=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=m.call(a);if(f!=m.call(c))return false;switch(f){case "[object String]":return a==
String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);
g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=y(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,i)){g++;if(!(h=b.has(c,i)&&y(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return y(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===
1)};b.isArray=q||function(a){return m.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&
a!=+a};b.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return L.call(a,b)};b.noConflict=function(){l._=o;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var n={escape:{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}};n.unescape=b.invert(n.escape);var O={escape:RegExp("["+b.keys(n.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(n.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(O[a],function(b){return n[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];
t.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var P=0;b.uniqueId=function(a){var b=++P+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||z).source,(d.interpolate||z).source,(d.evaluate||
z).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(R,function(a){return"\\"+Q[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj",
"_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=
function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-jslibs.js' */
define('applinks/lib/lodash', ['atlassian/libs/underscore-1.5.2'], function(lodash) {
        return lodash;
    });
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
// NOTE: this is in "lib" because it's required by aui-amd.js. This module _cannot_ have any dependencies on non-lib
// modules (like "common")
define('applinks/lib/version', [
    'applinks/lib/lodash'
], function(
    _
) {

    function checkIntValue(value, desc) {
        if (_.isUndefined(value)) {
            return 0;
        } else if (typeof value !== 'number' || isNaN(value)) {
            throw new Error(desc + ': expected a number, was: <' + value + '>');
        } else {
            return Math.floor(value);
        }
    }

    function checkVersionObject(object, desc) {
        if (!object || !(object instanceof Version)) {
            throw new Error(desc + ': expected a Version object, was: <' + object + '>');
        }
        return object;
    }

    function compareInt(intOne, intTwo) {
        return intOne > intTwo ? 1 : intOne == intTwo ? 0 : -1;
    }

    /**
     * Constructs a version object that contains version information and can be compared with other version objects.
     *
     * @param major major version component
     * @param minor minor version component
     * @param bugfix bugfix version component
     * @constructor
     */
    function Version(major, minor, bugfix) {
        this.major = checkIntValue(major, 'major');
        this.minor = checkIntValue(minor, 'minor');
        this.bugfix = checkIntValue(bugfix, 'bugfix');
    }

    /**
     * Constructs a Version by parsing a version string.
     *
     * @param versionString version string to parse, expected to be in the form of <major>.<minor>.<bugfix>
     * @param versionDesc what version does the `versionString` represent
     */
    Version.parse = function(versionString, versionDesc) {
        versionDesc = versionDesc || 'versionString';
        if (!versionString) {
            throw new Error(versionDesc + ': expected a non-empty string');
        }
        var versionSplit = versionString.split('.');
        if (versionSplit.length !== 3) {
            throw new Error(versionDesc + ': expected <major>.<minor>.<bugfix> string, was: <' + versionString + '>');
        }
        return new Version(parseInt(versionSplit[0]), parseInt(versionSplit[1]), parseInt(versionSplit[2]));
    };

    /**
     * Comparator function to sort Version objects.
     *
     * @param versionOne first version object
     * @param versionTwo second version object
     * @returns {Number} comparison result
     * @see Version.compareTo(that)
     */
    Version.comparator = function(versionOne, versionTwo) {
        return checkVersionObject(versionOne, 'versionOne').compareTo(checkVersionObject(versionTwo, 'versionTwo'));
    };

    /**
     * Return -1, 0 or 1 as this Version object represents a version less than, equal to, or greater than `that`.
     *
     * @param that the other version to compare to
     * @returns {Number} comparison result
     */
    Version.prototype.compareTo = function(that) {
        checkVersionObject(that, 'that');
        var majorResult = compareInt(this.major, that.major);
        if (majorResult != 0) {
            return majorResult;
        }
        var minorResult = compareInt(this.minor, that.minor);
        if (minorResult != 0) {
            return minorResult;
        }
        return compareInt(this.bugfix, that.bugfix);
    };

    Version.prototype.greaterThan = function(that) {
        return this.compareTo(that) > 0;
    };

    Version.prototype.greaterThanOrEqual = function(that) {
        return this.compareTo(that) >= 0;
    };

    Version.prototype.lessThan = function(that) {
        return this.compareTo(that) < 0;
    };

    Version.prototype.lessThanOrEqual = function(that) {
        return this.compareTo(that) <= 0;
    };

    Version.prototype.equals = function(that) {
        return this.compareTo(that) == 0;
    };

    Version.prototype.toMinor = function() {
        return new Version(this.major, this.minor);
    };

    Version.prototype.toMajor = function() {
        return new Version(this.major);
    };

    Version.prototype.toString = function() {
        return this.major + '.' + this.minor + '.' + this.bugfix;
    };

    return Version;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define('applinks/lib/aui-version-details', [
    'applinks/lib/version'
], function(
    Version
) {
    // minimum 5.8.x and 5.9.x AUI versions - lower versions ship with bugs that break some of the Applinks functionality
    var MINIMUM_58_VERSION = new Version(5, 8, 15);
    var MINIMUM_59_VERSION = new Version(5, 9, 13);
    var VERSION_58 = new Version(5, 8);
    var VERSION_59 = new Version(5, 9);

    function checkVersion(version) {
        // must be >= the minimum required 5.8.x version
        if (version.lessThan(MINIMUM_58_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_58_VERSION +
                ' or ' + MINIMUM_59_VERSION + ' for Applinks to work');
        }
        // if 5.9, must be >= the minimum required 5.9.x version
        if (version.greaterThanOrEqual(VERSION_59) && version.lessThan(MINIMUM_59_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_59_VERSION +
                ' for Applinks to work');
        }
    }

    function addVersionDetails(AJS) {
        var ajsVersion = Version.parse(AJS.version, 'AUI version');
        checkVersion(ajsVersion);

        AJS.versionDetails = ajsVersion;
        AJS.versionDetails.is58 = ajsVersion.toMinor().equals(VERSION_58);
        AJS.versionDetails.is59 = ajsVersion.toMinor().equals(VERSION_59);

        return AJS;
    }

    return  {
        /**
         * Check AUI version for compatibility with Applinks and add `versionDetails` field.
         */
        addVersionDetails: addVersionDetails
    };
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define('applinks/lib/console', function() {
    return window.console;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define('applinks/lib/jquery', function() {
   return window.jQuery;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define('applinks/lib/aui', [
    'applinks/lib/window',
    'applinks/lib/aui-version-details'
], function(
    window,
    VersionDetails
) {
    var AJS = window.AJS;
    if (!AJS) {
        throw new Error('window.AJS not defined, cannot load AUI');
    }

    return VersionDetails.addVersionDetails(AJS);
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
/**
 * Define Web resource manager as an AMD dependency. This should also be present in apps using Atlassian Plugins Web
 * Resources framework.
 */
define('applinks/lib/wrm', function() {
   return window.WRM;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define('applinks/lib/skate', function() {
   // window.skate is not exposed as a global from AUI 5.9, this will return undefined with that version or later
   return window.skate;
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
/**
 * Define window as AMD module to facilitate unit testing of some modules
 */
define('applinks/lib/window', function() {
    return window;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/events.js' */
define('applinks/common/events', [
    'applinks/lib/jquery',
    'applinks/lib/lodash',
    'applinks/lib/window',
    'applinks/common/preconditions'
], function(
    $,
    _,
    window,
    Preconditions
) {
    var PREFIX = 'applinks.event.';

    function applinksEvent(eventId) {
        return PREFIX + Preconditions.nonEmptyString(eventId, 'eventId');
    }

    /**
     * Provides common Applinks event IDs and a simple event system facade API. This is a preferred way to subscribe to
     * and raise Applinks-specific events as it does not depend on a specific event bus or event target (such as
     * `document`), as well as facilitates unit testing.
     */
    return {
        PREREADY: applinksEvent('preready'),
        READY: applinksEvent('ready'),

        /**
         * Raised when applinks list is first loaded
         */
        APPLINKS_LOADED: applinksEvent('loaded'),
        /**
         * Raised when applinks list is updated
         */
        APPLINKS_UPDATED: applinksEvent('updated'),

        /**
         * This event is only raised when linking to Atlassian applications
         * Can be consumed by other plugins
         */
        NEW_APPLINK_CREATED: applinksEvent('created'),

        // legacy events
        Legacy: {
            MESSAGE_BOX_DISPLAYED: applinksEvent('message-box-displayed')
        },

        applinksEvent: applinksEvent,

        on: function(events, handler, context) {
            var handlerWithContext = context ? _.bind(handler, context) : handler;
            $(window.document).on(events, handlerWithContext);
        },

        off: function(events, handler) {
            $(window.document).off(events, handler);
        },

        trigger: function(event, data) {
            $(window.document).trigger(event, data);
        }
    }
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/i18n.js' */
define('applinks/common/i18n', [
    'applinks/lib/lodash',
    'applinks/lib/jquery',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions',
    'applinks/common/products'
], function(
    _,
    $,
    WRM,
    ApplinksModules,
    Preconditions,
    ApplinksProducts
) {
    var getAllEntityTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'entity-types'));
        return Preconditions.hasValue(val, 'entity-types', 'Entity Types data not found');
    });

    var getAllAuthTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'authentication-types'));
        return Preconditions.hasValue(val, 'authentication-types', 'Authentication Types data not found');
    });

    return {
        
        /**
         * @param typeId ID of the application type to resolve
         * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
         */
        getApplicationTypeName: function(typeId) {
            return ApplinksProducts.getTypeName(typeId);
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed singular entity type name, or the original `typeId` if there is no mapping
         */
        getEntityTypeName: function(typeId) {
            return getAllEntityTypes().singular[typeId] || typeId;
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed plural entity type name, or the original `typeId` if there is no mapping
         */
        getPluralizedEntityTypeName: function(typeId) {
            return getAllEntityTypes().plural[typeId] || typeId;
        },

        /**
         * @param type ID of the authentication type to resolve (usually in a form of full class name)
         * @returns {string} resolved i18n-ed authentication type name, or the original `type` if there is no mapping
         */
        getAuthenticationTypeName: function(type) {
            return getAllAuthTypes()[type] || type;
        }
    };
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/modules.js' */
/**
 * Applinks plugin modules core constants and definitions.
 */
define('applinks/common/modules', function() {
    return {
        /**
         * Applinks plugin key
         */
        PLUGIN_KEY: 'com.atlassian.applinks.applinks-plugin',

        // key web resource keys
        COMMON_EXPORTED: 'applinks-common-exported',
        COMMON: 'applinks-common',

        /**
         * Fully qualifies a module name using the plugin key.
         *
         * @param {string} moduleName module name to qualify
         * @returns {string} fully qualified name
         */
        fqn: function(moduleName) {
            return this.PLUGIN_KEY + ':' + moduleName;
        },

        /**
         * Fully qualifies web-resource data using module name and data key.
         *
         * @param {string} moduleName module name
         * @param {string} dataKey key of the data element
         * @returns {string} fully qualified name
         */
        dataFqn: function(moduleName, dataKey) {
            return this.fqn(moduleName) + '.' + dataKey;
        }
    };
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/preconditions.js' */
define('applinks/common/preconditions', [
    'applinks/lib/lodash'
], function(
    _
) {
    function nonEmptyString(value, varName, customMessage) {
        return _checkArgument(
            _.isString(value) && !_.isEmpty(value),
            customMessage,
            _withVarName(varName, ': expected a non-empty string, was: <' + value + '>'),
            value
        );
    }

    function isFunction(value, varName, customMessage) {
        return _checkArgument(
            _.isFunction(value),
            customMessage,
            _withVarName(varName, ': expected a function, was: ' + value),
            value
        );
    }

    function isArray(value, varName, customMessage) {
        return _checkArgument(
            _.isArray(value),
            customMessage,
            _withVarName(varName, ': expected an array, was: ' + value),
            value
        );
    }

    function hasValue(value, varName, customMessage) {
        return _checkArgument(
            value,
            customMessage,
            _withVarName(varName, ': expected a value'),
            value
        );
    }

    function _checkArgument(test, message, defaultMessage, actualValue) {
        var actualMessage = message ? message : defaultMessage;
        if (!test) {
            throw new Error(actualMessage)
        }
        return actualValue || test;
    }

    function _withVarName(varName, msg) {
        return (varName || '[unspecified]') + msg;
    }

    return {
        checkArgument: _.partial(_checkArgument, _, _, '', _),
        nonEmptyString: nonEmptyString,
        isArray: isArray,
        isFunction: isFunction,
        hasValue: hasValue
    };
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/products.js' */
define('applinks/common/products', [
    'applinks/lib/lodash',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions'
], function(
    _,
    WRM,
    ApplinksModules,
    Preconditions
) {
    var getAllTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'applinks-types'));
        return Preconditions.hasValue(val, 'types', 'Application Types data not found');
    });

    /**
     * @param typeId ID of the application type to resolve
     * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
     */
    function getTypeName(typeId) {
        return getAllTypes()[typeId] || typeId;
    }

    /**
     * Map of Atlassian product keys to application type IDs
     */
    return {
        BAMBOO: 'bamboo',
        BITBUCKET: 'stash', // special case, see java class com.atlassian.applinks.application.bitbucket.BitbucketApplicationTypeImpl.TYPE_ID
        CONFLUENCE: 'confluence',
        FECRU: 'fecru',
        JIRA: 'jira',
        REFAPP: 'refapp',
        STASH: 'stash',
        getTypeName: getTypeName
    };
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/rest-service.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

(function(AppLinksI18n, ApplinksEvents) {
    /**
     * The triggering of AppLinks initialisation can be customised by setting a function on
     * AJS.AppLinksInitialisationBinder. The binder function should take a single argument which is a zero-arg function to
     * run and should execute this function when appropriate.
     */
    AppLinks = AJS.$.extend(window.AppLinks || {}, {
        Event: {
            NAMESPACE: 'applinks'
        },
        I18n: AppLinksI18n
    });
    AppLinks.Event = AJS.$.extend(window.AppLinks.Event, ApplinksEvents);

    // Is there an overridden initialisation binder?
    if (AJS.AppLinksInitialisationBinder) {
        AppLinks.initialisationBinder = AJS.AppLinksInitialisationBinder;
    } else {
        // The default bind if no specific binder is specified
        AppLinks.initialisationBinder = function(f) {
            AJS.toInit(f);
        }
    }

    AppLinks.initialisationBinder(function() {
        //$ is passed in by AJS.toInit but initilizationBinder can be over loaded by products so that $ is unsafe.
        var $ = AJS.$;
        AppLinks = $.extend(window.AppLinks || {}, {
            failure: function(data) {
                if (data.status == 401) {
                    window.location.reload();
                } else {
                    var message = AppLinks.parseError(data);
                    var errorDivs = $('.page-error');

                    if (errorDivs.length > 0) {
                        errorDivs.html(message).fadeIn('slow');
                    } else {
                        alert('REST request failed: ' + message);
                    }
                }
            },
            jsonRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error,
                    jsonp: false
                });
            },
            xmlRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'xml',
                    contentType: "application/xml; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error
                });
            },
            parseError: function(errorData) {
                var error;
                try {
                    error = JSON.parse(errorData.responseText);
                } catch (e) {
                    if (errorData.statusText) {
                        return error = errorData.statusText;
                    } else {
                        return errorData;
                    }
                }
                if (error.message) {
                    if ($.isArray(error.message)) {
                        return error.message.join(' ');
                    }
                    return error.message;
                }
                else {
                    return errorData.statusText;
                }
            },
            put: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'PUT', data, success, error);
            },
            post: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'POST', data, success, error);
            },
            update: function(data, success, error) {
                AppLinks.put(AppLinks.self_link(data), data, success, error);
            },
            get: function(url, success, error) {
                return AppLinks.jsonRequest(url, 'GET', null, success, error);
            },
            getXml: function(url, success, error) {
                return AppLinks.xmlRequest(url, 'GET', null, success, error);
            },
            self_link: function(item) {
                for (var i = 0, _i = item.link.length; i < _i; i++) {
                    var link = item.link[i];
                    if (link.rel == "self") return link.href;
                }

                throw "No self-link found";
            },
            del: function(urlOrObject, success, error) {
                var url;
                if (typeof(urlOrObject) == 'string') url = urlOrObject;
                else url = AppLinks.self_link(urlOrObject);
                return AppLinks.jsonRequest(url, 'DELETE', null, success, error);
            },
            SPI: $.extend({}, {
                API_VERSION: "1.0",
                REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks/",
                BASE_URL: AJS.contextPath() + "/rest/applinks/1.0",
                OAUTH_REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks-oauth/",
                OAUTH_BASE_URL: AJS.contextPath() + "/rest/applinks-oauth/1.0",
                APPLICATION_TUNNELS_BASE_URL: AJS.contextPath().substring(0, AJS.contextPath().lastIndexOf('/')) +
                    "/gateway/api/admin/private/api/v1/workspace/confluence/site/",
                APPLICATION_TUNNELS_URL_SUFFIX: "/tunnels?limit=100&offset=1&sortOder=ASC&excludeToken=true",

                /**
                 * Update the API version and associated urls.
                 * @param version
                 */
                setApiVersion: function(version){
                    AppLinks.SPI.API_VERSION = version;
                    AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL + AppLinks.SPI.API_VERSION);
                },
                setBaseUrl: function(url){
                    AppLinks.SPI.BASE_URL = url;
                },
                setOAuthBaseUrl: function(url){
                    AppLinks.SPI.OAUTH_BASE_URL = url;
                },
                setApplicationTunnelsBaseUrl: function(url){
                    AppLinks.SPI.APPLICATION_TUNNELS_BASE_URL = url;
                },
                /**
                 * Build a base URL for rest calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemoteRestBaseUrl: function(baseUrl) {
                    return baseUrl + "/rest/applinks/" + AppLinks.SPI.API_VERSION;
                },
                /**
                 * Build a base URL for plugin servlet calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemotePluginServletBaseUrl: function(baseUrl) {
                    return baseUrl + "/plugins/servlet";
                },
                getAllLinks: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink";
                    return AppLinks.get(url, success, failure);
                },
                getAllLinksWithAuthInfo: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinks";
                    return AppLinks.get(url, success, failure);
                },
                getApplicationLinkState: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinkstates/id/" + id;
                    return AppLinks.get(url, success, failure);
                },
                getLinksOfType: function(typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/type/" + typeId;
                    return AppLinks.get(url, success, failure);
                },
                tryToFetchManifest: function(url, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/manifest.json?url=' + encodeURIComponent(url);
                    return AppLinks.get(restUrl, success, failure);
                },
                getManifestFor: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/manifest/' + id + ".json";
                    return AppLinks.get(url, success, failure);
                },
                getLocalManifest: function(success, failure){
                    var url = AppLinks.SPI.BASE_URL + '/manifest.json';
                    return AppLinks.get(url, success, failure);
                },
                /**
                 * Attempt to get the Manifest of the remote application, via a direct REST call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteManifest: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemoteRestBaseUrl(remoteBaseUrl) + '/manifest.json';
                    return AppLinks.get(remoteManifestUrl, success, failure);
                },
                /**
                 * Attempt to get the OAuth Consumer Info of the remote application, via a direct call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteOAuthConsumerInfo: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemotePluginServletBaseUrl(remoteBaseUrl) + '/oauth/consumer-info';
                    return AppLinks.getXml(remoteManifestUrl, success, failure);
                },
                getApplinkStatus: function (applinkId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/status/' + applinkId;
                    return AppLinks.get(url, success, failure);
                },
                getApplicationTunnels: function (siteId, success, failure) {
                    var url = AppLinks.SPI.APPLICATION_TUNNELS_BASE_URL + siteId + AppLinks.SPI.APPLICATION_TUNNELS_URL_SUFFIX;
                    return AppLinks.get(url, success, failure);
                },
                createStaticUrlAppLink: function(applicationType, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/createStaticUrlAppLink?typeId=' + applicationType;
                    return AppLinks.post(restUrl, null, success, failure);
                },
                getApplicationLinkInfo: function (appId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlinkInfo/id/" + appId;
                    return AppLinks.get(url, success, error);
                },
                deleteLink: function(applicationLink, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/" + applicationLink.id;
                    if (reciprocate) url += "?reciprocate=true";
                    return AppLinks.del(url, success, error);
                },
                makePrimary: function(applicationLink, success) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/primary/" + applicationLink.id;
                    return AppLinks.post(url, null, success);
                },
                relocate: function(applicationLink, newUrl, suppressWarnings, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/relocateApplicationlink/" + applicationLink.id + "?newUrl=" + encodeURIComponent(newUrl) +
                        "&nowarning=" + (suppressWarnings ? "true" : "false");
                    return AppLinks.post(url, null, success, error);
                },
                getEntityTypesForApplicationType: function(applicationType, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/type/entity/" + applicationType;
                    return AppLinks.get(url, success, error);
                },
                getEntityLinksForApplication: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/" + applicationLinkId + ".json";
                    AppLinks.get(url, success, error);
                },
                getEntityLinksForApplicationUsingAnonymousAccess: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/anonymous/" + applicationLinkId + ".json";
                    return AppLinks.get(url, success, error);
                },
                createNonUalEntityLink: function(localType, localKey, applicationId, remoteTypeId, remoteKey, name, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=false";
                    var data = {
                        applicationId: applicationId,
                        typeId: remoteTypeId,
                        key: remoteKey,
                        name: name,
                        isPrimary: false
                    };
                    return AppLinks.put(url, data, success, error);
                },
                createEntityLink: function(localType, localKey, entity, reciprocate, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=";
                    url += (reciprocate ? "true" : "false");
                    return AppLinks.put(url, entity, success, failure);
                },
                getConfiguredEntityLinks: function(localType, localKey, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primaryLinks/" + localType + "/" + localKey + ".json";
                    return AppLinks.get(url, success, error);
                },
                deleteEntityLink: function(localTypeId, localKey, entity, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localTypeId + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + encodeURIComponent(entity.key) + "&applicationId=" + entity.applicationId + "&reciprocate=" + reciprocate;
                    return AppLinks.del(url, success, error);
                },
                makePrimaryEntityLink: function(localTypeID, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primary/" + localTypeID + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + encodeURIComponent(entity.key) + "&applicationId=" + entity.applicationId;
                    return AppLinks.post(url, null, success, error);
                },
                canDeleteAppLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-application-delete/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                canDeleteEntityLink: function(localTypeId, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-delete/" + entity.applicationId + "/" + localTypeId + "/" + localKey + "/" + entity.typeId + "/" + encodeURIComponent(entity.key);
                    return AppLinks.get(url, success, error);
                },
                canCreateReciprocateEntityLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-create/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                processPermissionCode: function(settings) {
                    var config = {
                        noPermission: function() {},
                        missing: function() {},
                        credentialsRequired: function(authUrl) {},
                        authenticationFailed: function(authUrl) {},
                        noAuthentication: function(authUrl) {},
                        noAuthenticationConfigured: function() {},
                        noConnection: function() {},
                        allowed: function() {},
                        unrecognisedCode: function(code) {},
                        updateView: function(message, icon, button) {}
                    };

                    if (!settings) settings = {};

                    settings = $.extend(config, settings);

                    return function(data) {
                        var url = data.url;
                        if (url && !url.startsWith("http://") && !url.startsWith("https://")) {
                            throw "url '" + url + "' is not an http/https url.";
                        }

                        var code = data.code;
                        if (code == "NO_PERMISSION") {
                            settings.noPermission();
                        } else if (code == "MISSING") {
                            settings.missing();
                        } else if (code == "CREDENTIALS_REQUIRED") {
                            settings.credentialsRequired(url);
                        } else if (code == "AUTHENTICATION_FAILED") {
                            settings.authenticationFailed(url);
                        } else if (code == "NO_AUTHENTICATION") {
                            settings.noAuthentication(url);
                        } else if (code == "NO_AUTHENTICATION_CONFIGURED") {
                            settings.noAuthenticationConfigured();
                        } else if (code == "NO_CONNECTION") {
                            settings.noConnection();
                        } else if (code == "ALLOWED") {
                            settings.allowed();
                        } else {
                            settings.unrecognisedCode(data.code);
                        }
                    };
                },
                addAuthenticationTrigger: function(target, authUrl, callbacks) {
                    if (!callbacks) {
                        callbacks = {};
                    }

                    if (typeof callbacks.onSuccess == "undefined") {
                        callbacks.onSuccess = function() {
                            location.reload();
                        }
                    }

                    if (typeof callbacks.onFailure == "undefined") {
                        callbacks.onFailure = function() {
                            return true;
                        }
                    }
                    //Unbind previous click listener, otherwise we might end up opening multiple windows.
                    $(target).unbind('click');
                    $(target).click(function() {
                        if (callbacks.before) {
                            callbacks.before();
                        }
                        AppLinks.authenticateRemoteCredentials(authUrl, callbacks.onSuccess, callbacks.onFailure);
                    });
                },
                showCreateEntityLinkSuggestion: function() {
                    return true;
                },
                getApplicationLink: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id;
                    return AppLinks.get(url, success, failure);
                },
                createApplicationLink: function(id, name, rpcUrl, displayUrl, typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink';
                    var data = {
                        id: id,
                        name: name,
                        rpcUrl: rpcUrl,
                        displayUrl: displayUrl,
                        typeId: typeId
                    };
                    return AppLinks.put(url, data, success, failure);
                },
// TODO APLDEV-3 extract OAuth creation code into OAuth specific js files in the Oauth plugin.
                createConsumer: function(id, key, name, description, sharedSecret, publicKey, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, outgoing, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer';
                    var data = {
                        key: key,
                        name: name,
                        description: description,
                        sharedSecret: sharedSecret,
                        publicKey: publicKey,
                        outgoing: outgoing,
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                createConsumerAutoConfigure: function(id, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer?autoConfigure=true';
                    var data = {
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                registerProvider: function(id, provider, config, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id + '/authentication/provider';
                    var data = {
                        config : config,
                        provider : provider
                    };
                    return AppLinks.put(url, data, success, failure);
                }
            }, (window.AppLinks && window.AppLinks.SPI) || {})
        });

        AppLinks.UI = {
            showInfoBox: function(message) {
                $('.aui-message.success').remove();
                AppLinks.UI.createMessage('success', message, 'page-info');
            },
            hideInfoBox: function() {
                $('.aui-message.success').remove();
            },
            showErrorBox: function(message) {
                AppLinks.UI.createMessage('error', message, 'page-error');
            },
            hideErrorBox: function() {
                $('.aui-message.error').remove();
            },
            showWarningBox: function(messages) {
                if ($.isArray(messages) && messages.length > 0) {
                    var ulEl = $("<ul></ul>");
                    $(messages).each(function(index) {
                        ulEl.append($("<li/>", {
                            text: messages[index]
                        }));
                    });
                    var messageEl = $('<div class="page-warning"></div>').append(ulEl);
                    AppLinks.UI.createMessage('warning', messageEl.html(), 'page-warning');
                } else {
                    AppLinks.UI.createMessage('warning', messages, 'page-warning');
                }
            },
            hideWarningBox: function() {
                $('.aui-message.warning').remove();
            },
            shortenString: function(message, maxLength) {
                if (message.length  > maxLength) {
                    message = message.substring(0, maxLength) + "...";
                }
                return message;
            },
            createMessage: function(type, message, cssClass) {
                if ($('#ual.applinks-admin-with-tunnels').length > 0) {
                    this.createMessageFlag(type, message, cssClass);
                } else {
                    var messageEl = $('<div class="' + cssClass + '">');
                    messageEl.html(message);
                    AJS.messages[type](".applinks-message-bar", {
                        title: "",
                        body: messageEl.wrap('<div></div>').parent().html(),
                        closeable: true
                    });
                    $(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED);
                }
            },
            createMessageFlag: function(type, message, cssClass) {
                var messageEl = $('<div class="' + cssClass + '">');
                messageEl.html(message);
                AJS.flag({
                    type,
                    body: messageEl.wrap('<div></div>').parent().html(),
                });
                $(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED);
            },
            displayValidationErrorMessages: function (errorClass, rootEl, messages) {
                if ($.isArray(messages)) {
                    $(messages).each(function(i,v) {
                        var d = $('<div class="error applinks-error">');
                        d.text(v);
                        $(rootEl).find("." + errorClass).append(d);
                    });
                } else if(typeof messages != 'undefined'){
                    var d = $('<div class="error applinks-error">');
                    d.text(messages.toString());
                    $(rootEl).find("." + errorClass).append(d);
                }
            },
            displayValidationError: function(errorClass, rootEl, errorFn) {
                return function(xhr) {
                    if (xhr.status == 401) {
                        window.location.reload();
                        return;
                    }

                    $('.applinks-error').remove();
                    $('.loading').remove();
                    var respJSON = xhr.responseText;
                    var respObj = $.parseJSON(respJSON);
                    var messages = respObj.message;
                    if (typeof respObj.fields == "undefined") {
                        AppLinks.UI.displayValidationErrorMessages(errorClass, rootEl, messages);
                    } else {
                        var fields = respObj.fields;
                        $(fields).each(function(index) {
                            var d = $('<div class="error applinks-error" id="' + fields[index] + '-error">');
                            d.text(messages[index]);
                            if ($(rootEl).find('.' + fields[index]).length > 0) {
                                d.insertAfter($(rootEl).find('.' + fields[index]));
                            } else {
                                d.insertAfter($(rootEl).find('.' + errorClass).append(d));
                            }
                        });
                    }
                    $(rootEl).find('.' + errorClass).addClass("fully-populated-errors");
                    if (errorFn) {
                        errorFn();
                    }
                }
            },
            addProtocolToURL : function(url) {
                var newUrl = $.trim(url);
                var tempURL = newUrl.toLowerCase();
                var hasProtocol = false;
                if (tempURL.length >= 7) {
                    if (tempURL.substring(0,7).indexOf('http') != -1) {
                        hasProtocol = true;
                    }
                }
                //default protocol is http
                if (!hasProtocol) {
                    newUrl = 'http://' + newUrl;
                }
                return newUrl;
            },
            /**
             * Similar to the standard Javascript join() method, but nicer in that
             * it uses a different delimiter for the last node (by default "and"),
             * so that:
             * {code}
             * "1, 2 and 3" == prettyJoin(['1', '2', '3'], function(value) {return value;});
             * {code}
             *
             * @param inputArray
             * @param resolveFn
             * @param finalDelimiter
             */
            prettyJoin : function(inputArray, resolveFn, finalDelimiter) {
                if (!finalDelimiter) {
                    finalDelimiter = "and";
                }
                var maxLength = inputArray.length;
                var message = "";
                $.each(inputArray, function(index, value) {
                    if (index == (maxLength - 1) && maxLength > 1) {
                        message += " " + finalDelimiter + "  " + resolveFn(value);
                    } else {
                        message += resolveFn(value);
                        if (index + 2 < maxLength) {
                            message += ", ";
                        }
                    }
                });
                return message;
            },
            showLoadingIcon: function(element) {
                $('<span class="loading">&nbsp;</span>').insertAfter(element);
            },
            hideLoadingIcon: function(element) {
                $(element).next('.loading').remove();
            },
            findUrl: function(text) {
                var url = undefined;
                var lcText = text.toLowerCase();
                var startOfUrl = lcText.indexOf('http:');
                if (startOfUrl == -1) {
                    startOfUrl = lcText.indexOf('https:');
                }
                if (startOfUrl > -1) {
                    var endOfUrl = lcText.indexOf(' ', startOfUrl);
                    if (endOfUrl == -1) {
                        endOfUrl = lcText.length;
                    }
                    url = text.substring(startOfUrl, endOfUrl); // use _case-sensitive_ version to retrieve the actual URL
                }
                return url;
            },
            findApplicationType : function(id) {
                id = id.toLowerCase();
                if (id.indexOf("jira") != -1) {
                    return "jira";
                } else if (id.indexOf("fisheye") != -1) {
                    return "fecru";
                } else if (id.indexOf("confluence") != -1) {
                    return "confluence";
                } else if (id.indexOf("refapp") != -1) {
                    return "refapp";
                } else {
                    return undefined;
                }
            },
            escapeSelector: function(selector) {
                // based on http://samuelsjoberg.com/archive/2009/09/escape-jquery-selectors
                return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1");
            },
            sanitiseHTML: function(input) {
                var replacements = {
                    "<": "&lt;",
                    '"': "&quot;",
                    "&": "&amp;"
                };
                return input.replace(/[<"&]/g, function(match) {
                    return replacements[match];
                });
            },
            removeCssClass: function(element, prefix) {
                $(element).removeClass( function(index, className) {
                    var classes = className.split(' ');
                    var classToRemove = "";
                    $.each(classes, function(index, value) {
                        if (value.indexOf(prefix) != -1) {
                            classToRemove = value;
                        }
                    });
                    return classToRemove;
                } );
            }
        };

        /**
         * Add jQuery event system to AppLinks.UI namespace.
         */
        (function(){
            var eventBus = $({});
            $.each(['bind', 'unbind', 'trigger'], function(i, current){
                AppLinks.UI[current] = function(){
                    return eventBus[current].apply(eventBus, arguments);
                }
            });
        })();

        $(document).trigger(AppLinks.Event.PREREADY);
        $(document).trigger(AppLinks.Event.READY);
    });
})(require('applinks/common/i18n'), require('applinks/common/events'));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/autocomplete.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

AJS.$(document).bind(AppLinks.Event.READY, function() {
/**
 * TODO: THIS CODE IS COPIED FROM CONFLUENCE and should be part of AUI/AJS.
 * IF AUI comes with the InputDrivenDropDown when can remove this file.
 * https://studio.atlassian.com/browse/AJS-471
 *
 * A simple cache manager that supports a
 * FIFO cache invalidation strategy.
 *
 * @class cacheManager
 * @namespace AJS.Confluence
 * @constructor
 * @param cacheSize the size of the cache before keys are invalidated
 */
AppLinks.autoComplete = {
        cacheManager : function (cacheSize) {
    var cache = {},
        cacheStack = [],
        cacheSize = cacheSize || 30;

    return {
        /**
         * Return the value stored in the cache for the given key
         * @method get
         * @param key {String}
         */
        get: function(key) {
            return cache[key];
        },
        /**
         * Put the given key, value in the cache
         * @method put
         * @param key {String}
         * @param value {Object}
         */
        put: function(key, value) {
            cache[key] = value;
            cacheStack.push(key);
            if (cacheStack.length > cacheSize) {
                delete cache[cacheStack.shift()];
            }
        },
        /**
         * Clear the cache.
         */
        clear : function() {
            cache = {};
            cacheStack = [];
        }
    };
}};


(function($){
    /**
     * Check that all items in the drop down can be displayed - show ellipses at the end of any that
     * are too long. Also remove any unused properties that the dropDown may have stored for each
     * item in the list.
     *
     * @method truncateText
     * @private
     */
    var truncateText = function (dd) {
        AJS.log("InputDrivenDropDown: truncating text");
        var width = dd.$.closest(".aui-dropdown").width(),
            rightPadding = 20; // add some padding so the ellipsis doesn't run over the edge of the box

        $("a span:not(.icon)", dd.$).each(function () {
            var $a = $(this),
                elpss = AJS("var", "&#8230;"),
                elwidth = elpss.width(),
                isLong = false;

            $a.wrapInner($("<em>"));
            $("em", $a).each(function () {
                var $label = $(this);

                $label.show();
                if (this.offsetLeft + this.offsetWidth > width) {
                    var childNodes = this.childNodes,
                        success = false;

                    for (var j = childNodes.length - 1; j >= 0; j--) {
                        var childNode = childNodes[j],
                            truncatedChars = 1,
                            valueAttr = (childNode.nodeType == 3) ? "nodeValue" : "innerHTML",
                            nodeText = childNode[valueAttr];

                        do {
                            if (truncatedChars <= nodeText.length) {
                                childNode[valueAttr] = nodeText.substr(0, nodeText.length - truncatedChars++);
                            } else { // if we cannot fit even one character of the next word, then try truncating the node just previous to this
                                break;
                            }
                        } while (this.offsetLeft + this.offsetWidth + elwidth > width - rightPadding);

                        if (truncatedChars <= nodeText.length) {
                            // we've managed truncate part of the word and fit it in
                            success = true;
                            break;
                        }
                    }

                    if (success) {
                        isLong = true;
                    } else {
                        $label.hide();
                    }
                }
            });
            if (isLong) {
                $a.append(elpss);
                this.elpss = elpss;
            }
        });
    };

    var highlightTokens = function(dd, tokens) {
        if (!tokens.length || !tokens[0]) return;

        AJS.log("InputDrivenDropDown: highlighting tokens");

        // escape regex chars .*+?|()[]{}\ first
        for (var i = 0, ii = tokens.length; i < ii; i++) {
            var token = tokens[i];
            tokens[i] = token ? token.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g, "\\$") : "";
        }

        var regex = new RegExp("(" + tokens.join("|") + ")", "gi");

        $("li a:not(.dropdown-prevent-highlight) span", dd.$).each(function() {
            var span = $(this),
                html = span.html().replace(regex, "<strong>$1</strong>");
            span.html(html);
        });
    };

    /**
     * Builds and shows the dropdown.
     *
     * @param idd the InputDrivenDropdown
     * @param dropdownData in the form { matrix, query, queryTokens }
     * @private
     */
    var makeDropdown = function (idd, dropdownData) {
        var options = idd.options,
            old_dd = idd.dd;

        if (old_dd) {
            old_dd.hide();
            old_dd.$.remove();
        }

        options.ajsDropDownOptions = options.ajsDropDownOptions || {};
        if (options.ajsDropDownOptions && !options.ajsDropDownOptions.alignment) { // default to left alignment
            options.ajsDropDownOptions.alignment = "left";
        }
        //this needs to be moved into aui
        options.ajsDropDownOptions.selectionHandler = options.ajsDropDownOptions.selectionHandler || function(e, element) {
            if(e.type != "click") {
                e.preventDefault();
                $("a",element).click();
                document.location = $("a",element).attr("href");
            }
        };

        /* Fixing an AUI bug in here:  AJS.dropdown puts the raw 'matrix[i].name' as html, without escaping it !
           The solution is to override their displayHandler
         */
        /**
         * Escape obj.name and return it
         */
        options.ajsDropDownOptions.displayHandler = function (obj) {
            return AJS.escapeHtml(obj.name);
        }

        var dd = idd.dd = new AJS.dropDown(dropdownData.matrix, options.ajsDropDownOptions)[0];

        // could move into dropdown.js in AUI
        if (options.ajsDropDownOptions && options.ajsDropDownOptions.className) {
            dd.$.addClass(options.ajsDropDownOptions.className);
        }

        // place the created drop down using the configured dropdownPlacement function
        // if there is none then use a default behaviour
        if (options.dropdownPlacement) {
            options.dropdownPlacement(dd.$);
        } else {
            AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");
            $("body").append(dd.$);
        }

        highlightTokens(dd, dropdownData.queryTokens || [dropdownData.query]);
        truncateText(dd);

        if (options.dropdownPostprocess) {
            options.dropdownPostprocess(dd.$);
        }
        dd.show(idd._effect);

        if (typeof options.onShow == "function") {
            options.onShow.call(dd, dd.$);
        }

        return dd;
    };

    /**
     * Provides a controller-agnostic object that listens for controller changes and populates a dropdown
     * via a callback. Most aspects can be customized via the options object parameter.
     * <br>
     * Options are:
     * <li>
     *   getDataAndRunCallback - (required) callback method used to provide data for the dropdown. It must take
     *                          two parameters, user input value and the callback function to execute.
     * </li>
     * <li>
     *   onShow - function to call when the drop-down is displayed
     * </li>
     * <li>
     *   dropdownPlacement - a function that will be called with the drop down and which should place it in the
     *                          correct place on the page. The supplied arguments are 1) the input that issued the
     *                          search, 2) the dropDown to be placed.
     * </li>
     * <li>
     *   ajsDropDownOptions - any options the underlying dropDown component can handle expects
     * </li>
     * <li>
     *   onDeath - callback to run when dropdown dies
     * </li>
     * @class InputDrivenDropDown
     * @namespace AJS
     */
    function InputDrivenDropDown(id, options) {
        this._effect = "appear";
        this._timer = null;

        this.id = id;
        this.options = options;
        this.inactive = false;
        this.busy = false;
        this.cacheManager = AppLinks.autoComplete.cacheManager();
    }

    /**
     * Clears the cache.
     */
    InputDrivenDropDown.prototype.clearCache = function () {
        this.cacheManager.clear();
    };

    /**
     * This method should be called when the user input for this dropdown has changed.
     * It will check the cache before fetching data (via options.getDataAndRunCallback)
     * and displaying the dropdown.
     *
     * @param value {String} the new value of the user input
     * @param force {Boolean} force a change to occur regardless of user input
     */
    InputDrivenDropDown.prototype.change = function (value, force) {
        var t = this;
        if (value != t._value || force) {
            t._value = value;
            t.busy = false;

            clearTimeout(t._timer);

            if (force || (/\S{0,}/).test(value)) {
                var cachedVal = t.cacheManager.get(value);
                if (cachedVal) {
                    makeDropdown(t, cachedVal);
                } else {
                    t.busy = true;
                    t._timer = setTimeout(function () { // delay sending a request to give the user a chance to finish typing their search term(s)
                        t.options.getDataAndRunCallback.call(t, value, t.show);
                    }, 200);
                }
            } else {
                t.dd && t.dd.hide();
            }
        }
    };

    /**
     * Gets the number of visible options in the dropdown.
     */
    InputDrivenDropDown.prototype.dropDownLength = function () {
        return this.dd.links ? this.dd.links.length : 0;
    };
    
    /**
     * Gets the specified menu item from the dropdown list.
     * 
     * @param index {Integer} the 0-based index of the dropdown option list
     */
    InputDrivenDropDown.prototype.dropDownItem = function (index) {
        return this.dropDownLength() > index ? this.dd.links[index] : null;
    };
    
    /**
     * Hides the drop down
     */
    InputDrivenDropDown.prototype.hide = function () {
        this.dd && this.dd.hide();
    };

    /**
     * Hides and removes the drop down from the DOM.
     */
    InputDrivenDropDown.prototype.remove = function () {
        var dd = this.dd;
        if (dd) {
            this.hide();
            dd.$.remove();
        }
        this.inactive = true;
        this.options.onDeath && this.options.onDeath();
    };

    /**
     * Shows the drop down with the given matrix data and query.
     * <br>
     * Matrix property should be an array of arrays, where the sub-arrays represent the different
     * search categories.
     *
     * Expected properties of category sub-array objects are:
     *  - href
     *  - name
     *  - className
     *  - html (optional, replaces href and name)
     *  - icon (optional)
     *
     *
     * @param matrix {Array} matrix to populate the drop down from
     * @param query {String} the user input string that triggered this show
     * @param queryTokens {Array} an array of strings of the query tokens. Use for highlighting search terms.
     */
    InputDrivenDropDown.prototype.show = function (matrix, query, queryTokens) {
        if (this.inactive) {
            AJS.log("Quick search abandoned before server response received, ignoring. " + this);
            return;
        }

        var dropdownData = {
            matrix: matrix,
            query: query,
            queryTokens: queryTokens
        };
        this.cacheManager.put(query, dropdownData);

        makeDropdown(this, dropdownData);
        this.busy = false;
    };

    /**
     * Returns an InputDrivenDropDown. See InputDrivenDropDown for more documentation.
     * @param options {Object} options for the InputDrivenDropDown
     * @constructor
     */
    AppLinks.inputDrivenDropdown = function (options) {
        return new InputDrivenDropDown("inputdriven-dropdown", options);
    };

})(jQuery);
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form.js' */
var jiraIntegration=window.jiraIntegration||{};
jiraIntegration.JiraCreateIssueForm=function(c,f){function d(a){this.configuration=f.extend({},d.defaults,a);this.configuration.renderSummaryAndDescription&&this.configuration.excludedField.push("summary","description");this._init()}d.defaults={formClass:"jira-interation-create-issue-form",ignoreFieldsWithDefaultValue:!0,excludedField:["project","issuetype","reporter"],renderSummaryAndDescription:!1,get$unsupportedFieldMessage:function(a,b){return c(jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage({unsupportedFields:a,createIssueUrl:b}))},
get$unexpectedError:function(a){return c(aui.message.error({content:AJS.escapeHtml(a)}))},get$unauthorizeMessage:function(a){return c(jiraIntegration.templates.jiraCreateIssueForm.authorize({extraClasses:"jira-oauth-dialog",applicationName:a}))},get$unsupportedServerMessage:function(a){return c(jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage({serverUrl:a}))}};d.prototype._trigger=function(a,b){var e=this.configuration[a];e&&e.apply(this,Array.prototype.slice.call(arguments,
1))};d.prototype._bindEventListener=function(){var a=this;this.defaultFields.server.on("change",function(){a.resetForm();var b=this.value;(a.currentServerId=b)?(c('option[value=""]',a.defaultFields.server).remove(),a.formIsLoading(a.defaultFields.server),jiraIntegration.JiraCreateIssueForm.Data.isIssueCreationSupported(b).done(function(e){e?(a._loadProjectData(b),a.formLoadingCompleted(a.defaultFields.server)):(e=jiraIntegration.JiraCreateIssueForm.Data.getServerById(b).displayUrl,a._handleUnsupportedServer(e))}).fail(function(e){a._handleAjaxError(e)})):
(jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(a.defaultFields.project),a.defaultFields.project.trigger("change"));a._trigger("onServerChanged",this.value)});this.defaultFields.project.on("change",function(){this.value?(c('option[value=""]',a.defaultFields.project).remove(),a._loadIssueType(a.defaultFields.server.val(),this.value).then(function(){a._handleFormAfterProjectChange(this.value)})):(jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(a.defaultFields.issueType),
a._handleFormAfterProjectChange(this.value))});this.defaultFields.issueType.on("change",function(){a.resetForm();this.value?a._loadRequireFields():(a.$containerRequireField&&a.$containerRequireField.html(""),c(".aui-message",this.formEl).remove());a._trigger("onTypeChanged",this.value)})};d.prototype._init=function(){this.container=c(this.configuration.container);if(this.container.length)this._renderForm(),this._bindEventListener(),this._loadServerData();else throw Error("container property should be defined.");
};d.prototype._renderForm=function(){this.formEl=c(jiraIntegration.templates.jiraCreateIssueForm.form({formClass:this.configuration.formClass}));this.configuration.renderSummaryAndDescription&&this._renderSummaryAndDescription();this.container.append(this.formEl);this.defaultFields=this._getDefaultFields();f.each(this.defaultFields,f.bind(function(a){this.createSelect2WithIcon(c(a))},this));this.$containerRequireField=c(".create-issue-required-fields",this.container);this._trigger("onFormRendered")};
d.prototype._renderSummaryAndDescription=function(){var a=c(".create-issue-default-fields",this.formEl);a.append(aui.form.textField({id:"create-issue-summary-input",labelContent:"Summary",isRequired:!0,name:"summary"}));a.append(aui.form.textareaField({id:"create-issue-description-input",labelContent:"Description",name:"description"}))};d.prototype._getDefaultFields=function(){var a=c("."+this.configuration.formClass,
this.configuration.container);return{server:c(".server-select",a),project:c(".project-select",a),issueType:c(".issuetype-select",a)}};d.prototype._loadServerData=function(){var a=this;this.formIsLoading(this.defaultFields.server);c.when(jiraIntegration.JiraCreateIssueForm.Data.loadServers()).then(function(b){a.formLoadingCompleted(a.defaultFields.server);a._loadServerDataComplete(b)})};d.prototype._loadRequireFields=function(){var a=this,b={serverId:this.defaultFields.server.val(),projectKey:this.defaultFields.project.val(),
issueType:this.defaultFields.issueType.val()};this.formIsLoading(this.defaultFields.issueType);jiraIntegration.JiraCreateIssueForm.Data.getFieldMetadata(b).done(function(e){var c=a._getValidRequiredFields(e);a.configuration.renderSummaryAndDescription&&(e=e.fields.description,a._setDescriptionAsRequiredField(!(!e||!e.required)));a._renderRequireFields(c,b);a.formLoadingCompleted(a.defaultFields.issueType)}).fail(f.bind(a._handleAjaxError,this))};d.prototype._loadServerDataComplete=function(a){a.length?
(jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(this.defaultFields.server,a),this._hasMultiServer=1<a.length):this._handlerUnexpectedError("Don\'t have any JIRA server, please check the application link configuration.")};d.prototype._loadProjectData=function(a){var b=this;this.formIsLoading(this.defaultFields.project);jiraIntegration.JiraCreateIssueForm.Data.loadProjects(a).then(function(a){a.errors&&a.errors.length?(a=a.errors[0],a.authenticationUri?b._handleAuthorizeError(a):b._handlerUnexpectedError(a.message)):
a.length?(jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(b.defaultFields.project,a),jiraIntegration.JiraCreateIssueForm.FieldHelper.resetSelectField(b.defaultFields.issueType)):b._handlerUnexpectedError("You do not have permission to create issues on this JIRA server.");b.formLoadingCompleted(b.defaultFields.project)},f.bind(b._handleAjaxError,this))};d.prototype._loadIssueType=function(a,b){var e=c.Deferred(),d=this.defaultFields.issueType;jiraIntegration.JiraCreateIssueForm.Data.getIssueTypes(a,
b).then(function(a){jiraIntegration.JiraCreateIssueForm.FieldHelper.fillSelectData(d,a,!0);e.resolve()},f.bind(this._handleAjaxError,this));return e.promise()};d.prototype._handleFormAfterProjectChange=function(a){this.resetForm();this.defaultFields.issueType.trigger("change");this._trigger("onProjectChanged",a)};d.prototype._renderRequireFields=function(a,b){this.$containerRequireField.html("");var e=f.reject(a,jiraIntegration.fields.canRender);e.length?this._handleUnsupportedFields(e):(this.$containerRequireField.html(f.map(a,
function(a){return jiraIntegration.fields.renderField(null,a,null,null)}).join("")),jiraIntegration.fields.attachFieldBehaviors(this.$containerRequireField,{serverId:b.serverId,projectKey:b.projectKey},null),this._trigger("onRequiredFieldsRendered",a,e))};d.prototype._handlerUnexpectedError=function(a){a=this.configuration.get$unexpectedError(a);c(".aui-message",this.formEl).remove();this.formEl.prepend(a);this.formLoadingCompleted();this.formHasError()};d.prototype._handleUnsupportedFields=function(a){a=
f.map(a,function(a){return AJS.escapeHtml(a.name)});a=this.configuration.get$unsupportedFieldMessage(a,this._getCreateJiraIssueUrl());c(".aui-message",this.formEl).remove();this.formEl.prepend(a);this._trigger("onError");this.formLoadingCompleted()};d.prototype._handleUnsupportedServer=function(a){a=this.configuration.get$unsupportedServerMessage(a);c(".aui-message",this.formEl).remove();this.formEl.prepend(a);this.formLoadingCompleted();this.formHasError()};d.prototype._handleAjaxError=function(a){500<=
a.status&&600>a.status&&this._handlerUnexpectedError("Received the following HTTP error code from the server"+":"+a.status);this.formHasError()};d.prototype._handleAuthorizeError=function(a){var b=this;this.formHasError();var e=this.configuration.get$unauthorizeMessage(a.applicationName);this.formEl.append(e);c(".oauth-init",e).on("click",function(e){AppLinks.authenticateRemoteCredentials(a.authenticationUri,function(){b.resetForm();b._loadProjectData(b.currentServerId)},function(){b._handlerUnexpectedError(AJS.format("You have refused to permit access to {0}.",
a.applicationName))});e.preventDefault()})};d.prototype._getCreateJiraIssueUrl=function(){var a=this.defaultFields.project.find("option:selected").val(),b=this.defaultFields.issueType.find("option:selected").val(),e=jiraIntegration.JiraCreateIssueForm.Data.getServerById(this.currentServerId).displayUrl,e=e+"/secure/CreateIssueDetails!Init.jspa?pid="+a+"&issuetype="+b,a=this._getFieldValue("summary");a.length&&(e=e+"&summary="+encodeURIComponent(a));a=this._getFieldValue("description");a.length&&(e=
e+"&description="+encodeURIComponent(a));return e};d.prototype._getValidRequiredFields=function(a){var b=this;return f.filter(a.fields,function(a){var c=f.contains(b.configuration.excludedField,a.schema?a.schema.system||a.schema.custom||a.schema.customId:a);return a.required&&!c&&!a.hasDefaultValue})};d.prototype._getFieldValue=function(a){return(a=c("[name='"+a+"']",this.formEl))?c.trim(a.val()):""};d.prototype._setDescriptionAsRequiredField=function(a){var b=c('.field-group [name="description"]',
this.formEl).prev("label");b.find(".aui-icon.aui-icon-required").remove();a&&b.append(aui.icons.icon({icon:"required"}))};d.prototype.resetForm=function(){c(".aui-message",this.formEl).remove();c(".field-group",this.formEl).show();this.configuration.renderSummaryAndDescription&&this._setDescriptionAsRequiredField(!1);this.$containerRequireField.html("")};d.prototype.formHasError=function(){c(".field-group",this.formEl).hide();this.$containerRequireField.html("");jiraIntegration.JiraCreateIssueForm.FieldHelper.showField(this.defaultFields.server);
jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(c(".insert-issue-button"),!0);this._trigger("onError");this.formLoadingCompleted()};d.prototype.getCurrentServer=function(){return jiraIntegration.JiraCreateIssueForm.Data.getServerById(this.currentServerId)};d.prototype.formIsLoading=function(a){a&&jiraIntegration.JiraCreateIssueForm.FieldHelper.setIsLoading(a,!0);a=c(":input",c(this.formEl));jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(a,!0)};d.prototype.formLoadingCompleted=
function(a){a?jiraIntegration.JiraCreateIssueForm.FieldHelper.setIsLoading(a,!1):c(".aui-icon.aui-icon-wait",this.formEl).remove();a=c(":input",c(this.formEl));jiraIntegration.JiraCreateIssueForm.FieldHelper.setFieldDisabled(a,!1)};d.prototype.createSelect2WithIcon=function(a){if(a.is(".server-select"))a.auiSelect2({minimumResultsForSearch:-1});else{var b=a.is(".project-select")?{formatSelection:this.projectSelectFormat,formatResult:this.projectSelectFormat,extraAttributes:this.defaultFields}:{formatSelection:this.issueTypeSelectFormat,
formatResult:this.issueTypeSelectFormat,minimumResultsForSearch:-1,extraAttributes:this.defaultFields};a.auiSelect2(b)}a.auiSelect2("val","")};d.prototype.projectSelectFormat=function(a){var b=this.extraAttributes.server.find("option:selected").val(),b=jiraIntegration.JiraCreateIssueForm.Data.getProjectIconUrl(b,a.id);return jiraIntegration.templates.fields.select2WithIconOption({optionValue:a.text,iconUrl:b,isProject:!0})};d.prototype.issueTypeSelectFormat=function(a){var b=this.extraAttributes.server.find("option:selected").val(),
c=this.extraAttributes.project.find("option:selected").val(),b=jiraIntegration.JiraCreateIssueForm.Data.getIssueTypeIconUrl(b,c,a.id);return jiraIntegration.templates.fields.select2WithIconOption({optionValue:a.text,iconUrl:b,isProject:!1})};return d}(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form-data.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraCreateIssueForm=jiraIntegration.JiraCreateIssueForm||{};
jiraIntegration.JiraCreateIssueForm.Data=function(e){function j(a){return b&&b[a]?b[a].projects:[]}function f(a,d,c){return a+(d?"-"+d:"")+(c?"-"+c:"")}var b={},g={},k=AJS.contextPath()+"/plugins/servlet/jira-integration/icons?serverId={0}&iconType={1}&{2}",h=[],i=function(a,d){return e.ajax({dataType:"json",timeout:0,url:a,success:d})};return{loadServers:function(){return i(AJS.contextPath()+"/rest/jira-integration/1.0/servers",function(a){a.length&&e.each(a,function(a,c){b[c.id]=c})})},loadProjects:function(a){var d=
b[a]?b[a].projects:void 0;return d?e.Deferred().resolve(d):i(AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+a+"/projects",function(d){d.length&&(e.each(d,function(d,b){var c=_.filter(b.issuetypes,function(a){return!a.subtask});b.issueTypes=c;var e=[];_.each(c,function(a){e[a.id]=a.iconUrl});(c=b.avatarUrls["16x16"].split("/secure/projectavatar?")[1])&&-1===c.indexOf("pid=")&&(c+="&pid="+b.id);c={iconUrl:AJS.format(k,a,"project",c),issueTypes:e};h[f(a,b.id)]=c}),b[a]||(b[a]={}),b[a].projects=
d)})},getIssueTypes:function(a,d){var c=e.Deferred(),b=_.find(j(a),function(a){return a.id===d});b&&(!b.issueTypes||!b.issueTypes.length)?i(AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+a+"/projects/"+d+"/issueTypes",function(a){if(a&&a.length)return a=_.filter(a,function(a){return!a.subtask}),b.issueTypes=a,e.Deferred().resolve()}).then(function(){c.resolve(b.issueTypes)}):c.resolve(b?b.issueTypes:[]);return c.promise()},getFieldMetadata:function(a){var b=f(a.serverId,a.projectKey,a.issueType);
return _.has(g,b)?e.Deferred().resolve(g[b]):e.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+a.serverId+"/projects/"+a.projectKey+"/issue-types/"+a.issueType+"/fields-meta"}).pipe(function(a){g[b]=a;return g[b]})},getServerById:function(a){return b?b[a]:{}},getProjectIconUrl:function(a,b){var c=f(a,b);return h[c]?h[c].iconUrl:""},getIssueTypeIconUrl:function(a,b,c){a=f(a,b);return(a=h[a])&&a.issueTypes[c]?a.issueTypes[c]:""},getProjects:j,isIssueCreationSupported:function(a){return!b||
!b[a]?!1:void 0!==b[a].isSupported?e.Deferred().resolve(b[a].issueCreationSupported):e.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+a+"/features"}).pipe(function(d){if(d!==void 0)b[a].issueCreationSupported=_.contains(d,"CREATE_ISSUE");return b[a].issueCreationSupported})}}}(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form-field-helper.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraCreateIssueForm=jiraIntegration.JiraCreateIssueForm||{};
jiraIntegration.JiraCreateIssueForm.FieldHelper=function(g){function d(a){a=a.attr("data-placeholder");return aui.form.optionOrOptgroup({value:"",text:a,iconUrl:""})}return{fillSelectData:function(a,b,e){var f=e?[]:[d(a)];g.each(b,function(a,c){var b={value:c.id,text:c.name,iconUrl:c.iconUrl?c.iconUrl:c.avatarUrls?c.avatarUrls["16x16"]:""};e&&0===a&&(b.selected=!0);f.push(aui.form.optionOrOptgroup(b))});a.html(f.join(""));a.auiSelect2("val","")},resetSelectField:function(a){a.html(d(a));a.auiSelect2("val",
"")},hideField:function(a){a.parent().hide()},showField:function(a){a.parent().show()},setFieldDisabled:function(a,b){b?a.disable():a.enable()},setIsLoading:function(a,b){return b?a.after(aui.icons.icon({icon:"wait"})):a.next(".aui-icon.aui-icon-wait").remove()}}}(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-create-issue-form', location = '/jira-create-issue-form/jira-create-issue-form.soy' */
// This file was automatically generated from jira-create-issue-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.jiraCreateIssueForm.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.jiraCreateIssueForm == 'undefined') { jiraIntegration.templates.jiraCreateIssueForm = {}; }


jiraIntegration.templates.jiraCreateIssueForm.form = function(opt_data, opt_ignored) {
  return '' + aui.form.form({id: 'jira-create-form', extraClasses: opt_data.formClass, method: 'post', action: '#', content: '<fieldset class="create-issue-default-fields"><div class="field-group"><label for="create-issue-server-input">' + soy.$$escapeHtml('Server') + '<span class="aui-icon icon-required"> required</span></label><select id="create-issue-server-input" class="jira-select2-drop-box server-select" name="server" data-placeholder="' + soy.$$escapeHtml('Select a server') + '"><option disabled selected value="">' + soy.$$escapeHtml('Select a server') + '</option></select></div><div class="field-group"><label for="create-issue-project-input">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"> required</span></label><select id="create-issue-project-input" class="jira-select2-drop-box project-select" name="project" data-placeholder="' + soy.$$escapeHtml('Select a project') + '"><option disabled selected value="">' + soy.$$escapeHtml('Select a project') + '</option></select></div><div class="field-group"><label for="create-issue-type-input">' + soy.$$escapeHtml('Issue Type') + '<span class="aui-icon icon-required"> required</span></label><select id="create-issue-type-input" class="jira-select2-drop-box issuetype-select" name="issue-type" data-placeholder="' + soy.$$escapeHtml('Select an issue type') + '"><option disabled selected value="">' + soy.$$escapeHtml('Select an issue type') + '</option></select></div></fieldset><fieldset class="create-issue-required-fields"></fieldset>'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.jiraCreateIssueForm.form.soyTemplateName = 'jiraIntegration.templates.jiraCreateIssueForm.form';
}


jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage = function(opt_data, opt_ignored) {
  var param29 = '';
  if (opt_data.unsupportedFields.length == 1) {
    var field__soy32 = '<strong>' + soy.$$escapeHtml(opt_data.unsupportedFields) + '</strong>';
    param29 += soy.$$filterNoAutoescape(AJS.format('The required field {0} is not available in this form. You will need to',field__soy32));
  } else {
    var fieldList__soy39 = '' + jiraIntegration.templates.jiraCreateIssueForm.buildFieldList({fields: opt_data.unsupportedFields});
    param29 += soy.$$filterNoAutoescape(AJS.format('The required fields {0} are not available in this form. You will need to',fieldList__soy39));
  }
  param29 += ' <a href="' + soy.$$escapeHtml(opt_data.createIssueUrl) + '" target="_blank">' + soy.$$escapeHtml('create your issue directly in JIRA') + '</a>.';
  var output = '' + aui.message.warning({content: param29});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage.soyTemplateName = 'jiraIntegration.templates.jiraCreateIssueForm.unsupportedFieldsMessage';
}


jiraIntegration.templates.jiraCreateIssueForm.buildFieldList = function(opt_data, opt_ignored) {
  var output = '';
  var joinText__soy51 = '' + ((opt_data.fields.length == 2) ? ' ' + soy.$$escapeHtml('and') + ' ' : ', ');
  var fieldList59 = opt_data.fields;
  var fieldListLen59 = fieldList59.length;
  for (var fieldIndex59 = 0; fieldIndex59 < fieldListLen59; fieldIndex59++) {
    var fieldData59 = fieldList59[fieldIndex59];
    output += ((! (fieldIndex59 == 0)) ? soy.$$escapeHtml(joinText__soy51) : '') + '<strong>' + soy.$$escapeHtml(fieldData59) + '</strong>';
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.jiraCreateIssueForm.buildFieldList.soyTemplateName = 'jiraIntegration.templates.jiraCreateIssueForm.buildFieldList';
}


jiraIntegration.templates.jiraCreateIssueForm.authorize = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var applicationNameEscaped__soy68 = '' + soy.$$escapeHtml(opt_data.applicationName);
  output += aui.message.info({content: '' + soy.$$filterNoAutoescape(AJS.format('{0}Log in and approve{1} to retrieve data from {2}','<a class="oauth-init" href="#">','</a>',applicationNameEscaped__soy68))});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.jiraCreateIssueForm.authorize.soyTemplateName = 'jiraIntegration.templates.jiraCreateIssueForm.authorize';
}


jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + soy.$$filterNoAutoescape(AJS.format('The version of selected JIRA server is not supported. You may want to upgrade to at least version 5.x or {0}create issue in JIRA{1}.','<a href="' + opt_data.serverUrl + '" target="_blank">','</a>'))});
};
if (goog.DEBUG) {
  jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage.soyTemplateName = 'jiraIntegration.templates.jiraCreateIssueForm.unsupportedServerMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-callback.js' */
define('applinks/feature/oauth-callback', [
    'applinks/lib/window',
    'applinks/lib/lodash',
    'applinks/common/preconditions'
], function(
    window,
    _,
    Preconditions
) {
    function OAuthCallback(url) {
        Preconditions.nonEmptyString(url, 'url');
        this._url = url;
    }

    OAuthCallback.prototype.source = function(source) {
        Preconditions.hasValue(source, 'source');
        this._source = source;
        return this;
    };

    OAuthCallback.prototype.onSuccess = function(callback) {
        Preconditions.isFunction(callback, 'onSuccess');
        this._onSuccess = callback;
        return this;
    };

    OAuthCallback.prototype.onFailure = function(callback) {
        Preconditions.isFunction(callback, 'onFailure');
        this._onFailure = callback;
        return this;
    };

    // API for OAuth to invoke callbacks
    OAuthCallback.prototype.success = function() {
        this.oauthWindow.close();
        if (this._onSuccess) {
            this._onSuccess(this._source);
        }
        // free up the oauthCallback object
        delete window.oauthCallback;
    };

    OAuthCallback.prototype.failure = function() {
        this.oauthWindow.close();
        if (this._onFailure) {
            this._onFailure(this._source);
        }
        // free up the oauthCallback object
        delete window.oauthCallback;
    };

    // start the dance
    OAuthCallback.prototype.open = function() {
        // required for OAuth callbacks to fire
        window.oauthCallback = this;
        this.oauthWindow = window.open(this._url, 'com_atlassian_applinks_authentication');
    };

    return OAuthCallback;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:feature-oauth-dance', location = 'applinks/internal/feature/oauth/oauth-dance.js' */
define('applinks/feature/oauth-dance', [
    'applinks/lib/console',
    'applinks/lib/jquery',
    'applinks/lib/lodash',
    'applinks/lib/window',
    'applinks/common/events',
    'applinks/common/preconditions',
    'applinks/feature/oauth-callback'
], function(
    console,
    $,
    _,
    window,
    ApplinksEvents,
    Preconditions,
    OAuthCallback
) {
    /**
     * Creates a new OAuth Dance. This initializes elements found by `selector` within `scope` to initiate the OAuth
     * dance on click. The elements need to have a `data-authorisation-uri` attribute that points to the authorisation
     * page to open.
     *
     * @param scope {string} optional selector for scope, if not defined then global `document` will be used
     * @param selector {string} selector for the DOM elements to initialize OAuth dance for. If not defined then scope will be used
     * @constructor
     */
    function OAuthDance(scope, selector) {
        this._scope = scope || window.document;
        this._selector = selector;
    }

    OAuthDance.prototype.onSuccess = function(callback) {
        Preconditions.isFunction(callback, 'onSuccess');
        this._onSuccess = callback;
        return this;
    };

    OAuthDance.prototype.onFailure = function(callback) {
        Preconditions.isFunction(callback, 'onFailure');
        this._onFailure = callback;
        return this;
    };

    OAuthDance.prototype.defaultSuccess = function() {
        return this.onSuccess(function() {
            window.location.reload()
        });
    };

    OAuthDance.prototype.defaultFailure = function() {
        return this.onFailure(function() { return true });
    };

    /**
     * Wire up click events for the selected elements to initiate OAuth dance.
     */
    OAuthDance.prototype.initialize = function() {
        var that = this;
        if (this._selector) {
            $(this._scope).on('click', this._selector, function(e) {
                e.preventDefault();
                that._open($(this));
            });
        } else {
            $(this._scope).on('click', function(e) {
                e.preventDefault();
                that._open($(this));
            });
        }
    };

    /**
     * Start the OAuth dance for the given selector/scope.
     */
    OAuthDance.prototype.start = function() {
        var $scope = $(this._scope);
        var $element = this._selector ? $scope.find(this._selector) : $scope;
        this._open($element);
    };

    OAuthDance.prototype._open = function(element) {
        if (element.length !== 1) {
            console.warn('Could not trigger OAuth dance, the source is not a single HTML element: ' + element);
            return;
        }
        
        var authorisationUri = element.attr('data-authorisation-uri');

        if (authorisationUri) {
            this._onSuccess || this.defaultSuccess();
            this._onFailure || this.defaultFailure();
            new OAuthCallback(authorisationUri)
                .source(element)
                .onSuccess(this._onSuccess)
                .onFailure(this._onFailure)
                .open();
        } else {
            console.warn('Could not trigger OAuth dance, data-authorisation-uri missing for: ' + element);
        }
    };

    return OAuthDance;
});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-oauth-ui', location = 'js/oauth-dialog.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

/**
 * @deprecated use applinks/feature/oauth-callback and applinks/feature/oauth-dance AMD module
 */
(function($, ApplinksEvents, OAuthCallback) {
    // rest-service.js will load the AppLinks name space
    AppLinks.authenticateRemoteCredentials = function (url, onSuccess, onFailure) {
        $('.applinks-error').remove();
        new OAuthCallback(url).onSuccess(onSuccess).onFailure(onFailure).open();
    };
})(require('applinks/lib/jquery'), require('applinks/common/events'), require('applinks/feature/oauth-callback'));

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:proxy-js', location = '/jira/proxy.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{makeRequest:function(a){var b=contextPath||AJS.contextPath();if(a.appId){a.data=AJS.$.extend(a.data||{},{appId:a.appId})}else{if(a.appType){a.data=AJS.$.extend(a.data||{},{appType:a.appType})}}a.data=AJS.$.extend(a.data||{},{path:a.url});a=AJS.$.extend(a,{url:b+"/plugins/servlet/applinks/proxy"});return AJS.$.ajax(a)},createProxyGetUrl:function(b){var c="";if(b.includeContext){c=contextPath||AJS.contextPath()}var a=c+"/plugins/servlet/applinks/proxy";if(b.appId){a+="?appId="+encodeURIComponent(b.appId)}else{if(b.appType){a+="?appType="+encodeURIComponent(b.appType)}else{AJS.log("You need to specify an appType or appId");return""}}if(b.path){a+="&path="+encodeURIComponent(b.path)}return a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jqlHelper', location = '/jira/jqlhelper.js' */
AJS.JQLHelper=(function(){var a=/^\s*((key|issuekey)\s*=\s*)?"*([A-Z]+)([0-9]+)?([A-Z]+)?-([0-9]+)"*\s*$/i;var e=/\s*([A-Z][A-Z]+)-[0-9]+\s*/;var j=/(issue|searchrequest)-xml/i;var g=/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/i;var i=/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//;var c=/(jqlQuery|jql)\s*\=([^&]+)/i;var h=/(\?|&)(requestId|filter)\=([^&]+)/i;var b=/(searchrequest-xml\/)([0-9]+)\/SearchRequest/i;var k=/(requestId|filter)\=([^&]+)/i;var d=/=|!=|~|>|<|!~| is | in | was | changed /i;var f=function(p){var m="";var q=g.exec(p);if(q){m="key="+q[2]}else{var n=c.exec(p);if(n){m=n[2]}else{var o=e.exec(p);if(o){m="key="+o[0]}}}m=m.replace(/\+/g," ");return m};var l=function(n,p){var m;var o=decodeURIComponent(n);var q=function(r){if(r.jql){m=r.jql}};AJS.JQLHelper.getJqlQueryFromJiraFilter(o,p,q);return m};return{isSingleKeyJQLExp:function(m){return a.exec(m)},isMultipleSingleKeyJQLExp:function(p){var o=p.split(",");for(var n in o){var m=AJS.$.trim(o[n]);if(!AJS.JQLHelper.isSingleKeyJQLExp(m)){return false}}return true},isIssueUrlOrXmlUrl:function(m){if(g.test(m)||j.test(m)||c.test(m)||i.test(m)){return true}return false},isFilterUrl:function(m){return h.test(m)||b.test(m)},getFilterFromFilterUrl:function(m){if(h.test(m)){var n=h.exec(m);return n[2]+"="+n[3]}else{if(b.test(m)){return"filter="+b.exec(m)[2]}}},getJqlQueryFromJiraFilter:function(p,q,r,o){var m=(h.exec(p)||b.exec(p))[2];var n="/rest/jiraanywhere/1.0/jira/appLink/"+q+"/filter/"+m;AJS.$.ajax({async:false,dataType:"json",url:Confluence.getContextPath()+n,success:r,error:o})},findServerIndexFromUrl:function(m,p){if(typeof(p)!=="undefined"||p.length>0){var o=m.toLowerCase();for(var n=0;n<p.length;n++){if(o.indexOf(p[n].url.toLowerCase())==0){if(m.charAt(p[n].url.length)=="/"){return n}}}}return -1},getJqlQueryFromUrl:f,getJqlAndServerIndexFromUrl:function(n,o){var m={};m.serverIndex=this.findServerIndexFromUrl(n,o);m.jqlQuery=f(n);return m},checkQueryType:function(m){if(!AJS.Editor.JiraAnalytics){return undefined}if(!m||AJS.$.trim(m).length==0){return}if(m.indexOf("http")!=0){return AJS.Editor.JiraAnalytics.linkTypes.jqlDirect}else{if(m.indexOf("jira.issueviews:searchrequest-xml")!=-1||m.indexOf("jira.issueviews:issue-xml")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.xml}else{if(m.indexOf("jira.issueviews:searchrequest-rss")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.rss}else{if(m.indexOf("filter=")!=-1||m.indexOf("filter\\=")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.filter}else{return AJS.Editor.JiraAnalytics.linkTypes.jql}}}}},convertToJQL:function(n,p){var o;if(AJS.$.trim(n)!==""){if(n.indexOf("http")===0&&this.isFilterUrl(n)){o=l(n,p)}else{if(n.indexOf("http")===0&&this.isIssueUrlOrXmlUrl(n)){var m=f(decodeURIComponent(n));if(m.length>0){o=m}}else{if(n.indexOf("http")!==0&&n.match(d)){o=n}else{if(n.match(e)){o="key="+n}else{o='summary ~ "'+n+'" OR description ~ "'+n+'"'}}}}}return o}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-spin', location = 'src/js/aui/spin.js' */
("undefined"===typeof window?global:window).__32e2adcaa559420967a219c84a6f5dcf=function(){"use strict";var f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=__fb409c432b53d81bad1e174061f6886c,c=b&&b.__esModule?b:{"default":b};__18561bb4c99d4777e6a5a9fec71bb775;var g=(b=__925085afe37c9c6789b788cc0b7c856e)&&b.__esModule?b:{"default":b},b=__dc3494b595b6cf86534cbde834ab95b6;
c.default.fn.spin=(0,b.fn)(function(a,b){var d={size:"small"};if("object"===("undefined"===typeof b?"undefined":f(b)))d=c.default.extend(d,b);if("object"===("undefined"===typeof a?"undefined":f(a)))d=c.default.extend(d,a);"string"===typeof a&&(d.size=a);return"boolean"===typeof a&&!1===a?this.spinStop():this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this),b=a.data();if(b){var e=(0,c.default)("<aui-spinner filled></aui-spinner>");e.attr("size",d.size);e.css("color",d.color);a.spinStop();
a.append(e);g.default.init(this);b.spinner=e}}})},"jQuery.fn.spin",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});c.default.fn.spinStop=(0,b.fn)(function(){return this.each(function(){if(this&&this.nodeType){var a=(0,c.default)(this).data();a&&a.spinner&&(a.spinner.remove(),delete a.spinner)}})},"jQuery.fn.spinStop",{sinceVersion:"7.9.4",removeInVersion:"9",alternativeName:"<aui-spinner>"});return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:raphael', location = 'includes/js/third-party/raphael-spinner.js' */
var Raphael=Raphael||{};Raphael.spinner=function(d,a,e){var b=30*a/60;a={color:e||"#fff",width:13*a/60,radius:b,length:a-b,top:0,left:0,zIndex:0,speed:1.042};var c=$(d);c.spin(a);return function(){c.spinStop()}};Raphael.spinner=AJS.deprecate.fn(Raphael.spinner,"Raphael spinner",{alternativeName:"aui-spinner"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:raphael', location = 'includes/js/amd/shim/raphael-amd.js' */
define("raphael",function(){return Raphael});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:applinks-bridge', location = '/jira/applinks-bridge-for-spa.js' */
define("confluence/jim/jira/applinks-bridge-for-spa",["ajs"],function(a){var b="atlassian.net";var d="jira-dev.com";var c=function(e){var g=null;if(a.Editor&&a.Editor.JiraConnector&&a.Editor.JiraConnector.servers){var f=a.Editor.JiraConnector.servers.filter(function(h){return h.id===e});if(f[0]){g=f[0]}}return g};return{isCloudAppLink:function(f){var e=c(f).url;if(e){return e.indexOf(b)!==-1||e.indexOf(d)!==-1}return false},isCloudAppLinkFromUrl:function(e){return e.indexOf(b)!==-1||e.indexOf(d)!==-1},isCloudAppLinkFromServerId:function(f){var e=c(f);if(e){var h=e.displayUrl||e.url;var g=e.rpcUrl;return h.indexOf(b)!==-1||g.indexOf(b)!==-1||h.indexOf(d)!==-1||g.indexOf(d)!==-1}return false},getUrlForKey:function(e,g){var f=c(g);if(f){return f.url+"/browse/"+e}return null}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jira-analytics-helper', location = '/jira/analytics-helper.js' */
define("confluence/jim/jira/analytics-helper",["ajs","wrm","confluence/analytics-support"],function(c,b,a){return{sendAnalyticsEvent:function(d){if(!a.analyticsHandlerExists()){try{b.require("wr!com.atlassian.analytics.analytics-client:js-events").done(function(e){c.trigger("analytics",d)})}catch(f){c.trigger("analytics",d);c.warn("Unable to dynamically load legacy analytics client",f)}}else{c.trigger("analytics",d)}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/jiraanalytics.js' */
AJS.Editor=AJS.Editor||{};AJS.Editor.JiraAnalytics={events:{paste:{key:"confluence.jim.paste"},search:{key:"confluence.jim.search"},trigger:{key:"confluence.jim.trigger"},customizeColumn:{key:"confluence.jim.column.customize"},customizeMaxIssues:{key:"confluence.jim.max.issues.customize"},recentlyViewedSearch:{key:"confluence.jim.recently.viewed.search"},customizeCheckedIssues:{key:"confluence.jim.checked.issues.customize"},},atlassianCloudDomain:"atlassian.net",atlassianCloudStagingDomain:"jira-dev.com",linkTypes:{jqlDirect:"direct_jql",jql:"jql_link",xml:"xml_link",rss:"rss_link",filter:"filter_link"},isFabricEditor:function(){var a=/\/pages\/edit-v2\//;return a.test(window.location)},getAnalyticsEventData:function(){return{contentId:AJS.Meta.get("content-id")||AJS.Meta.get("page-id"),isFabric:this.isFabricEditor(),}},getDisplayType:function(a){if(!a||!a.container){return"unknown"}var b="single";if(a.container.find("#opt-table").is(":checked")){b="table"}else{if(a.container.find("#opt-total").is(":checked")){b="count"}}return b},setupAnalyticPanelActionObject:function(a,c,b){return{name:a.analyticPanelActionName,properties:this.setupPanelActionProperties(a,c,b),}},setupPanelActionProperties:function(a,e,b){var c={};if(a.analyticPanelActionName==="confluence.jim.issuecreated"){var d=a&&a.container&&a.container.find('select[name="issuetype"] :selected');if(d){c.issueType=d.text()}}else{if(a.analyticPanelActionName==="confluence.jim.searchadded"){c.display=this.getDisplayType(a)}}c.label=b;if(a&&a.selectedServer){c.appLinkId=a.selectedServer.id;if(a.selectedServer.url){c.isCloudLink=a.selectedServer.url.indexOf(this.atlassianCloudDomain)!==-1||a.selectedServer.url.indexOf(this.atlassianCloudStagingDomain)!==-1}}if(a&&a.macroParams){c.isCount=a.macroParams.count;c.maxIssues=a.macroParams.maximumIssues}return c},sendAnalyticsEvent:function(a,b){try{AJS.trigger("createGASv3Event",b);require("confluence/module-exporter").safeRequire("confluence/jim/jira/analytics-helper",function(d){d.sendAnalyticsEvent(a)})}catch(c){AJS.trigger("analytics",a);AJS.warn("Unable to dynamically require JIM analytics helper",c)}},triggerModalViewedEvent:function(a){this.sendAnalyticsEvent({},{type:"sendScreenEvent",data:{action:"viewed",actionSubject:"dialog",actionSubjectId:"jimModalViewedEvent",name:"jiraIssueMacroModal",attributes:{data:this.getAnalyticsEventData(),isEdit:a}}})},triggerPasteEvent:function(b){var a={name:AJS.Editor.JiraAnalytics.events.paste.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"pasted",actionSubject:"input",actionSubjectId:"pasteEvent",source:"jiraIssueMacroModal",attributes:a}})},triggerPanelActionEvent:function(a){a.data=AJS.$.extend(a.properties,this.getAnalyticsEventData());this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"clicked",actionSubject:"dialog",actionSubjectId:"panelActionevent",source:"jiraIssueMacroModal",attributes:a}})},triggerSearchEvent:function(b){var a={name:AJS.Editor.JiraAnalytics.events.search.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"searched",actionSubject:"input",actionSubjectId:"searchEvent",source:"jiraIssueMacroModal",attributes:a}})},triggerMarkupEvent:function(a){this.triggerSearchEvent(a)},triggerPanelTriggerEvent:function(b){var a={name:AJS.Editor.JiraAnalytics.events.trigger.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"clicked",actionSubject:"dialog",actionSubjectId:"panelTriggerEvent",source:"jiraIssueMacroModal",attributes:a}})},triggerCustomizeColumnEvent:function(b){var a={name:AJS.Editor.JiraAnalytics.events.customizeColumn.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"clicked",actionSubject:"input",actionSubjectId:"customizeColumnEvent",source:"jiraIssueMacroModal",attributes:a}})},triggerCustomizeCheckedIssues:function(b){var a={name:AJS.Editor.JiraAnalytics.events.customizeCheckedIssues.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"clicked",actionSubject:"input",actionSubjectId:"customizeCheckedIssues",source:"jiraIssueMacroModal",attributes:a}})},triggerCustomizeMaximumIssues:function(b){var a={name:AJS.Editor.JiraAnalytics.events.customizeMaxIssues.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendUIEvent",data:{action:"clicked",actionSubject:"input",actionSubjectId:"customizeMaximumIssues",source:"jiraIssueMacroModal",attributes:a}})},triggerRecentlyViewedSearchEvent:function(b){var a={name:AJS.Editor.JiraAnalytics.events.recentlyViewedSearch.key,data:AJS.$.extend(this.getAnalyticsEventData(),b)};this.sendAnalyticsEvent(a,{type:"sendScreenEvent",data:{action:"viewed",actionSubject:"dialog",actionSubjectId:"recentlyViewedSearchEvent",source:"jiraIssueMacroModal",attributes:a}})}};(function(b){b.aop.before({target:AJS.MacroBrowser,method:"loadMacroInBrowser"},function(c,d){if(c&&c[0]&&c[0].pluginKey==="confluence.extra.jira"){AJS.Editor.JiraAnalytics.triggerPanelTriggerEvent({source:AJS.Editor.JiraConnector.source.macroBrowser})}});var a=window.tinymce;if(a){b.aop.before({target:a.confluence.macrobrowser,method:"macroBrowserToolbarButtonClicked"},function(c,d){if(c&&c[0]&&c[0].presetMacroMetadata&&c[0].presetMacroMetadata.pluginKey==="confluence.extra.jira"){AJS.Editor.JiraAnalytics.triggerPanelTriggerEvent({source:AJS.Editor.JiraConnector.source.editorBraceKey})}});AJS.bind("init.rte",function(){b.aop.before({target:a.activeEditor,method:"execCommand"},function(m,l){if(m&&m[0]==="mceInsertContent"&&m[2]){var n=m[2];var f=AJS.$("<div></div>").html(n).children().first();var d=f.attr("data-macro-name");var j=["jira","jiraissues"];if(b.inArray(d,j)===-1){return}var k=AJS.Editor.JiraAnalytics;var o={source:"wiki_markup"};if(!f.attr("data-macro-parameters")){return}var h=f.attr("data-macro-parameters").split("|");for(var g=0;g<h.length;g++){var e=b.trim(h[g]);if(e.indexOf("jql")===0||e.indexOf("jqlQuery")===0){o.type=k.linkTypes.jqlDirect;break}else{if(e.indexOf("url")===0){var c=b.trim(e.substring(e.indexOf("=")+1,e.length));o.type=AJS.JQLHelper.checkQueryType(c);break}else{if(e.indexOf("http")===0){var c=e;o.type=AJS.JQLHelper.checkQueryType(c);break}}}}if(typeof o.type==="undefined"){o.type=k.linkTypes.jqlDirect}k.triggerMarkupEvent(o)}})})}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = 'util/dialog-helper.js' */
define("confluence/jim/util/dialog-helper",["ajs","confluence-macro-browser/macro-browser"],function(a,c){var b={addSelectOtherMacroLink:function(d){var e=window.location.pathname;if(e&&(e.includes("/edit-v2")||e.includes("/edit-embed"))){return}var f="Select Macro";d.addLink(f,function(){d.hide();var g={};g.selectedMacro=null;c.open(g)},"dialog-back-link")}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/datatable.js' */
(function(a){AJS.DataTable=function(h,d,b){var g=null;if(h&&h.jquery){g=h}else{if(typeof h=="string"){g=a(h)}}if(g){g.addClass("data-table");if(d&&d.length){this.columns=d;if(g[0]&&typeof g[0].innerHTML==="string"&&g[0].innerHTML.substring(0,7)!=="<tbody>"){g.append("<tbody></tbody>")}var f=a("<tr></tr>").appendTo(g);f.addClass("data-table-header");for(var c=0;c<d.length;c++){var e=d[c];f.append('<th class="'+e.className+'">'+e.title+"</th>")}}}this.tbl=g;this.rowIdx=0};AJS.DataTable.prototype.addRow=function(e){var f=a("<tr></tr>").appendTo(this.tbl);var c=this.columns;for(var b=0;b<this.columns.length;b++){var d=c[b];var g=a("<td></td>").appendTo(f);g.addClass(d.className);d.renderCell(g,e)}f.data("row-data",e);this._bindRowJs(f,this.rowIdx,"selected","hover");this.rowIdx+=1;f.attr("tabindex","-1")};AJS.DataTable.prototype.selectRow=function(b){var c=a("tbody tr",this.tbl)[b+1];a(c).focus()};AJS.DataTable.prototype._bindRowJs=function(f,g,c,b){var e=this;f.click(function(i){if(c){a(e.tbl).find("."+c).removeClass(c);a(this).addClass(c)}var h=f.data("row-data");e.tbl.trigger("row-select",[h])});var d=function(k){switch(k.keyCode){case 13:var j;var h=f.data("row-data");f.keyup(j=function(l){e.tbl.trigger("row-action",[h]);f.unbind("keyup",j);return AJS.stopEvent(l)});return AJS.stopEvent(k);break;case 38:if(g>0){f.prev().focus()}return AJS.stopEvent(k);case 40:var i=a("tbody tr",e.tbl).length;if(g<i-1){f.next().focus()}return AJS.stopEvent(k)}};if(a.browser.mozilla){f.keypress(d)}else{f.keydown(d)}f.focus(function(h){f.click()});if(b){f.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = 'editor-plugins/jim-dialog.js' */
define("confluence/jim/editor-plugins/jim-dialog",["ajs","window","jquery",],function(g,d,c){var b="ctrl+shift+j";var f="jiraconnector";var h=function(){var j=g.contextPath()+"/rest/jiraanywhere/1.0/servers";return c.get(j)};var i=function(){};var e={getOpenDialogRef:function(){return g.Editor.JiraConnector.open||i},getSourceDialogRef:function(){return g.Editor.JiraConnector.source||{}}};function a(){var j=d.tinymce;j.create("tinymce.plugins.JiraLink",{init:function(k){k.addCommand("mceJiralink",function(){var l=e.getSourceDialogRef();var m=e.getOpenDialogRef();m(l.editorHotKey,true)});k.onPostRender.add(function(l){c("#jiralink").click(function(n){var m=e.getSourceDialogRef();var o=e.getOpenDialogRef();o(m.editorDropdownLink,true);return g.stopEvent(n)});c("#insert-menu .macro-jiralink").show();l.addShortcut(b,"","mceJiralink")})},getInfo:function(){return{longname:"Confluence Jira Connector",author:"Atlassian",authorurl:"http://www.atlassian.com",version:j.majorVersion+"."+j.minorVersion}}});j.PluginManager.add(f,j.plugins.JiraLink);g.Rte.BootstrapManager.addTinyMcePluginInit(function(l){l.plugins+=","+f;var m=l.theme_advanced_buttons1;var k=m.indexOf("confimage");l.theme_advanced_buttons1=m.substring(0,k)+"jiralinkButton,"+m.substring(k)})}return{init:function(){h().then(function(m){g.Editor=g.Editor||{};g.Editor.JiraConnector=g.Editor.JiraConnector||{};g.Editor.JiraConnector.servers=m||[]});var l=/\/pages\/edit-v2\//;var k=l.test(d.location);if(!k){var j=/createblogpost\.action|draft-createpage\.action|createpage\.action|createpagetemplate\.action/;if(!j.test(d.location.pathname)){g.bind("rte-pre-resolveplugins",a)}else{a()}}}}});require("confluence/module-exporter").safeRequire("confluence/jim/editor-plugins/jim-dialog",function(a){a.init()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/dialogs.js' */
AJS.Editor=AJS.Editor||{};AJS.Editor.JiraConnector=(function(j){var f="";var c="Insert JIRA Issue/Filter";var a="Insert";var h="Cancel";var l=function(){var p=navigator.platform.toLowerCase().indexOf("mac")!=-1;return p?"Cmd":"Ctrl"};var b={macroBrowser:"macro_browser",editorBraceKey:"editor_brace_key",editorHotKey:"editor_hot_key",editorDropdownLink:"editor_dropdown_link",instructionalText:"instructional text"};var o=AJS.format("Hint: type \"{0}+Shift+J\" in the editor to quickly access this dialog.",l());var n,m,d;var i=function(){var p=j("#createPageLabelsString");if(p.length>0){m=p.val().split(" ").join();AJS.Editor.JiraAnalytics.triggerPanelTriggerEvent({source:n,label:m});return}j.getJSON(AJS.Meta.get("base-url")+"/rest/ui/1.0/content/"+AJS.Meta.get("page-id")+"/labels",function(r){var q=[];j.each(r.labels,function(t,s){q.push(s.name)});m=q.join();AJS.Editor.JiraAnalytics.triggerPanelTriggerEvent({source:n,label:m})})};var g=function(p,q){if(AJS.Editor.JiraAnalytics){AJS.Editor.JiraConnector.analyticPanelActionObject=AJS.Editor.JiraAnalytics.setupAnalyticPanelActionObject(q,n,m);if(p.customizedColumn){AJS.Editor.JiraAnalytics.triggerCustomizeColumnEvent({columns:p.customizedColumn})}}};var e=function(x,s){if(AJS.Editor.JiraAnalytics){AJS.Editor.JiraAnalytics.triggerModalViewedEvent(s||false)}if(!d){d=new AJS.ConfluenceDialog({width:840,height:590,id:"jira-connector"});d.addHeader(c);var u=AJS.Editor.JiraConnector.Panels;for(var t=0;t<u.length;t++){d.addPanel(u[t].title());var q=d.getCurrentPanel();var v=u[t];v.init(q)}var p=require("confluence/jim/util/dialog-helper");p.addSelectOtherMacroLink(d);d.addHelpText(o);j("#jira-connector .dialog-tip").attr("title",o);d.addButton(a,function(){var A=d.getCurrentPanel().id;var z=u[A];var y=u[0];g(y,z);z.insertLink()},"insert-issue-button");AJS.$(".insert-issue-button").disable();d.addCancel(h,function(){AJS.Editor.JiraConnector.closePopup()});d.gotoPanel(0);if(AJS.Editor.JiraConnector.servers){for(var t=0;t<AJS.Editor.JiraConnector.servers.length;t++){var r=AJS.Editor.JiraConnector.servers[t];AppLinks.makeRequest({appId:r.id,type:"GET",url:"/rest/api/2/field",dataType:"json",serverIndex:t,success:function(y){if(y&&y.length){AJS.Editor.JiraConnector.servers[this.serverIndex].columns=y}},error:function(){AJS.warn("Jira Issues Macro: unable to retrieve fields from AppLink: "+r.id)}})}}j("#jira-connector ul.dialog-page-menu").append(Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink({id:"open-jira-chart-dialog",label:"JIRA Charts"}));j("#jira-connector .dialog-page-menu button").click(function(){var y=AJS.Editor.JiraConnector.Panels[d.getCurrentPanel().id];y.setInsertButtonState&&y.setInsertButtonState()});j("#open-jira-chart-dialog").click(function(){AJS.Editor.JiraConnector.closePopup();if(AJS.Editor.JiraChart){AJS.Editor.JiraChart.open()}})}AJS.Editor.JiraConnector.Panels[0].refreshSearchForm();if(x){d.gotoPanel(1);var w=AJS.Editor.JiraConnector.Panels[1];w.setSummary(x)}else{d.gotoPanel(0)}d.overrideLastTab();d.show()};var k=function(){if(AJS.Editor.JiraConnector.clickConfigApplink){AJS.$.ajax({url:Confluence.getContextPath()+"/rest/jiraanywhere/1.0/servers",async:false}).done(function(p){AJS.Editor.JiraConnector.servers=p})}if(typeof(AJS.Editor.JiraConnector.servers)=="undefined"||AJS.Editor.JiraConnector.servers.length==0){AJS.Editor.JiraConnector.warningPopup(AJS.Meta.get("is-admin"));return false}AJS.Editor.JiraConnector.clickConfigApplink=false;if(AJS.Editor.JiraConnector.refreshAppLink){AJS.Editor.JiraConnector.refreshAppLink.call();AJS.Editor.JiraConnector.refreshAppLink=false}return true};return{warningPopup:function(r){var p=new AJS.ConfluenceDialog({width:600,height:400,id:"warning-applink-dialog"});var q="Connect Confluence To JIRA";p.addHeader(q);var s=Confluence.Templates.ConfluenceJiraPlugin.warningDialog({isAdministrator:r});p.addPanel("Panel 1",s);p.get("panel:0").setPadding(0);if(r){p.addButton("Set connection",function(t){AJS.Editor.JiraConnector.clickConfigApplink=true;t.hide();var u=require("confluence-macro-browser/macro-browser-facade");u.cancel();window.open(Confluence.getContextPath()+"/admin/listapplicationlinks.action")},"create-dialog-create-button app_link");p.popup.element.find(".create-dialog-create-button").removeClass("button-panel-button").addClass("aui-button aui-button-primary")}else{p.addButton("Contact admin",function(t){t.hide();var u=require("confluence-macro-browser/macro-browser-facade");u.cancel();window.open(Confluence.getContextPath()+"/wiki/contactadministrators.action")})}p.addLink("Cancel",function(t){t.hide();var u=require("confluence-macro-browser/macro-browser-facade");u.cancel()});p.show();p.gotoPanel(0)},closePopup:function(){d.hide();var q=require("confluence-macro-browser/macro-browser-facade");const p=AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.issue.macro.switch.no.cancel");if(!p){q.cancel()}},open:function(s,t){if(!k()){return}AJS.Rte.BookmarkManager.storeBookmark();n=s;if(AJS.Editor.JiraAnalytics&&n){if(n===AJS.Editor.JiraConnector.source.instructionalText){i()}else{m=null;AJS.Editor.JiraAnalytics.triggerPanelTriggerEvent({source:n})}}var p=require("confluence-macro-browser/macro-browser-facade");var r=p.getTinyMceMacroBrowserIfHave();if(r){var q=r.getCurrentNode();if(r.isMacroTag(q)&&"jira"==j(q).attr("data-macro-name")){r.editMacro(q);return}}AJS.Editor.JiraConnector.openCleanDialog(t)},openCleanDialog:function(r){var q=r&&tinyMCE.activeEditor.selection&&tinyMCE.activeEditor.selection.getContent({format:"text"});e(q);var p=AJS.Editor.JiraConnector.Panels[0];p.setMacroParams(null)},edit:function(t){if(!k()){return}if(typeof(t.params)=="undefined"){AJS.Editor.JiraConnector.openCleanDialog(false);return}n=f;m=f;var v=function(y){if(y.hasOwnProperty("jqlQuery")){return y.jqlQuery}var x=/^([0-9]\d*)$/;var w=["count","columns","columnIds","title","renderMode","cache","width","height","server","serverId","anonymous","baseurl","showSummary"];for(var z in y){if(j.inArray(z,w)==-1&&y.hasOwnProperty(z)){if(x.test(z)){return y[z]}return z+=" = "+y[z]}}return""};var q=function(y){var z={};if(y.params.url){z.searchStr=y.params.url;return z}z.maximumIssues=y.params.maximumIssues;var w=y.defaultParameterValue||v(y.params);if(typeof(w)=="undefined"){z.searchStr=f}else{z.searchStr=w}if(typeof(y.params.server)!="undefined"){z.serverName=y.params.server}else{for(var x=0;x<AJS.Editor.JiraConnector.servers.length;x++){if(AJS.Editor.JiraConnector.servers[x].selected){z.serverName=AJS.Editor.JiraConnector.servers[x].name;break}}}z.columnIds=y.params.columnIds;return z};var s=function(y){var z=q(y);var x=y.params.count;if(typeof x==="undefined"){x="false"}z.count=x;var w=y.params.columns;if(typeof(w)!="undefined"){if(w.length){z.columns=w}}return z};var r=s(t);e(undefined,true);if(r.searchStr){d.gotoPanel(0);var p=AJS.Editor.JiraConnector.Panels[0];p.setMacroParams(r);var u={searchValue:r.searchStr,serverName:r.serverName,isJqlQuery:t.params.hasOwnProperty("jqlQuery"),isAutoSearch:true};p.doSearch(u)}},source:b}})(AJS.$);AJS.MacroBrowser.setMacroJsOverride("jira",{opener:AJS.Editor.JiraConnector.edit});AJS.MacroBrowser.setMacroJsOverride("jiraissues",{opener:AJS.Editor.JiraConnector.edit});AJS.Editor.JiraConnector.Panels=[];AJS.Editor.JiraConnector.clickConfigApplink=false;
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/panelhelper.js' */
AJS.Editor.JiraConnector.Panel=function(){};AJS.Editor.JiraConnector.Panel.prototype={SHOW_MESSAGE_ON_TOP:false,insertIssueLink:function(a){this.insertIssueLinkWithParams({key:a})},insertJqlLink:function(a){this.insertIssueLinkWithParams({jqlQuery:a})},insertIssueLinkWithParams:function(c){c.server=this.selectedServer.name;c.serverId=this.selectedServer.id;var b={name:"jira",params:c};var a=require("confluence-macro-browser/macro-browser-facade");a.insert(b);if(AJS.Editor.JiraAnalytics&&AJS.Editor.JiraConnector.analyticPanelActionObject){AJS.Editor.JiraAnalytics.triggerPanelActionEvent(AJS.Editor.JiraConnector.analyticPanelActionObject);AJS.Editor.JiraConnector.analyticPanelActionObject=null}AJS.Editor.JiraConnector.closePopup()},disableInsert:function(){AJS.$(".insert-issue-button").disable()},isInsertDisabled:function(){return AJS.$(".insert-issue-button").is(":disabled")},getOAuthRealm:function(d){var b=d.getResponseHeader("WWW-Authenticate")||"";var a=/OAuth realm\=\"([^\"]+)\"/;var c=a.exec(b);if(c){return c[1]}else{return null}},enableInsert:function(){AJS.$(".insert-issue-button").enable()},handleInsertWaiting:function(b){var a=AJS.$(".insert-issue-button");return b?a.before(aui.icons.icon({icon:"wait"})):a.prev(".aui-icon.aui-icon-wait").remove()},msg:function(a,c,b){if(aui&&aui.message){try{var h=AJS.$('<div class="aui-message-container"/>');var f=c;if(c.html){f=c.html()}var i={content:f};var d;switch(b){case"error":d=aui.message.error(i);break;case"success":d=aui.message.success(i);break;case"warning":d=aui.message.warning(i);break;default:d=aui.message.info(i)}h.append(d);c=h}catch(g){if(AJS&&AJS.logError){AJS.logError("jira-connector",g)}}}a.append(c)},errorMsg:function(a,c){this.removeError(a);var b=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="jira-error"></div>').prependTo(a):AJS.$('<div class="jira-error"></div>').appendTo(a);this.msg(b,c,"error")},warningMsg:function(a,b){this.removeError(a);var c=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="jira-error"></div>').prependTo(a):AJS.$('<div class="jira-error"></div>').appendTo(a);this.msg(c,b,"warning")},noServerMsg:function(a,b){var d=AJS.$('<div class="data-table jiraSearchResults" ></div>').appendTo(a);var c=this.SHOW_MESSAGE_ON_TOP?AJS.$('<div class="message-panel"/>').prependTo(d):AJS.$('<div class="message-panel"/>').appendTo(d);this.msg(c,b,"info")},ajaxError:function(c,b){if(c.status==401){var a=this.getOAuthRealm(c);this.selectedServer.authUrl=a;b.call(this)}else{this.errorMsg(this.container,"Received the following HTTP error code from the server"+":"+c.status)}},removeError:function(a){AJS.$("div.jira-error",a).remove()},setActionOnEnter:function(a,c,b){a.unbind("keydown").keydown(function(d){if(d.which==13){var f=function(g){a.unbind("keyup",f);c(b);return AJS.stopEvent(g)};a.keyup(f);return AJS.stopEvent(d)}})},createOauthForm:function(e){var d=this.selectedServer;var c={onSuccess:function(){d.authUrl=null;e(d)},onFailure:function(){}};var a='<a class="oauth-init" href="#">'+"Login & Approve"+"</a> "+"to retrieve data from"+" "+AJS.escapeHtml(this.selectedServer.name);var b=AJS.$('<div class="jira-oauth-message-marker"/>');if(!(aui&&aui.message)){b.addClass("oauth-message")}this.msg(b,a,"info");AJS.$(".oauth-init",b).click(function(f){AppLinks.authenticateRemoteCredentials(d.authUrl,c.onSuccess,c.onFailure);f.preventDefault()});return b},applinkServerSelect:function(a,b){var c=AJS.Editor.JiraConnector.servers;AJS.$(c).each(function(){var d="<option ";if(this.selected){selectedServer=this;d+='selected="selected"'}d+='value="'+this.id+'"></option>';d=AJS.$(d);d.text(this.name);AJS.$(a).append(d);d.data("jiraapplink",this)});AJS.$(a).change(function(g){var d=AJS.$("option:selected",a);var f=d.data("jiraapplink");b(f)})},showSpinner:function(d,a,c,b){AJS.$.data(d,"spinner",Raphael.spinner(d,a,"#666"));if(c){AJS.$(d).css("marginLeft",-a*1.2)}if(b){AJS.$(d).css("marginTop",-a*1.2)}},hideSpinner:function(a){AJS.$(a).css("marginTop","");AJS.$(a).css("marginLeft","");var b=AJS.$.data(a,"spinner");if(b){b();delete b;AJS.$.data(a,"spinner",null)}},setSelectedIssue:function(a){this.selectedIssue=a;this.enableInsert()},insertSelected:function(){if(this.selectedIssue){this.insertIssueLink(this.selectedIssue.key)}},createIssueTableFromUrl:function(c,f,b,a,d,i,j,g,e){AJS.$("div.data-table",c).remove();var k=AJS.$('<div class="data-table jiraSearchResults" ></div>').appendTo(c);var l=AJS.$('<div class="loading-data"></div>').appendTo(k);this.removeError(c);this.showSpinner(l[0],50,true,true);var h=this;this.currentXhr=AppLinks.makeRequest({appId:f.id,type:"GET",url:b,dataType:"json",success:function(q){l.remove();var r=q.issues;AJS.$(":disabled",c).enable();if(r.length){var u=AJS.$('<table class="my-result aui"></table>');AJS.$(".jiraSearchResults",c).append(u);var o=[];if(e){var t={className:"issue-checkbox-column",title:'<input type="checkbox" name="jira-issue-all" checked/>',renderCell:function(y,w){var x=Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox({issueKey:w.key});AJS.$(x).appendTo(y)}};o.push(t)}var s=[{className:"issue-key-column",title:"Key",renderCell:function(y,x){var w=Confluence.Templates.ConfluenceJiraPlugin.issueKey({issueIconUrl:x.iconUrl.replace(f.rpcUrl,f.url),issueKey:x.key});AJS.$(w).appendTo(y)}},{className:"issue-summary-column",title:"Summary",renderCell:function(x,w){x.text(w.summary)}}];o=o.concat(s);var m=new AJS.DataTable(u,o);r.forEach(function(w){var x={iconUrl:w.fields.issuetype.iconUrl,key:w.key,summary:w.fields.summary,url:f.url+"/browse/"+w.key};m.addRow(x)});u.bind("row-action",function(x,w){d.call(h,w)});u.bind("row-select",function(x,w){a.call(h,w)});m.selectRow(0);if(j){var n=AJS.$("issue",q).attr("total");j.call(h,n)}}else{if(i){i()}var v="No search results found.";var p=AJS.$('<div class="message-panel"/>');h.msg(p,v,"info");AJS.$(".jiraSearchResults",c).append(p)}},error:function(m){AJS.$(":disabled",c).enable();l.remove();g.call(h,m)}})},retrieveJson:function(c,a,d,b){AppLinks.makeRequest({appId:c,type:"GET",url:a,dataType:"json",success:d,error:b})}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/searchpanel.js' */
AJS.Editor.JiraConnector.Panel.Search=function(){this.jql_operators=/=|!=|~|>|<|!~| is | in /i};AJS.Editor.JiraConnector.Select2=AJS.Editor.JiraConnector.Select2||{};AJS.Editor.JiraConnector.Panel.Search.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Search.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Search.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Search.prototype,{defaultColumns:"key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution",defaultColumnIds:"issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution",aliases:[{id:"issuekey",clauseName:"key"},{id:"issuetype",clauseName:"type"},{id:"duedate",clauseName:"due"}],DEFAULT_MAX_ISSUES_VAL:20,MAXIMUM_MAX_ISSUES_VAL:1000,MINIMUM_MAX_ISSUES_VAL:1,title:function(){return "Search"},init:function(a){a.html('<div id="my-jira-search"></div>');var f=this;var b=AJS.$("#my-jira-search");this.container=b;var h=function(){b.children(":not(div.jira-search-form)").remove()};var e=function(){AJS.$("input.text",b).enable();AJS.$("button",b).enable()};var l=function(){AJS.$("button",b).disable();AJS.$("input.text",b).disable()};var i=function(n){h();f.disableInsert();if(n){f.selectedServer=n}if(f.selectedServer.authUrl){l();var m=f.createOauthForm(function(){h();e()});b.append(m)}else{e();AJS.$(".search-help").show()}};this.authCheck=i;var g=function(x){var m=x&&x.searchValue;var o=x&&x.serverName;if(m){AJS.$("input:text",b).val(m)}if(o&&o!=this.selectedServer.name){var y=AJS.Editor.JiraConnector.servers;var q=false;for(var r=0;r<y.length;r++){if(y[r].name==o){AJS.$('option[value="'+y[r].id+'"]',b).attr("selected","selected");AJS.$("select",b).change();q=true;break}}if(!q){c(AJS.Meta.get("is-admin"));return}}if(this.currentXhr&&this.currentXhr.readyState!=4){return}var p=m||AJS.$("input",b).val();if(AJS.Editor.JiraAnalytics){var w=AJS.JQLHelper.checkQueryType(p);if(w){AJS.Editor.JiraAnalytics.triggerSearchEvent({type:w,jqlQueryCharacterLength:p.length,numberOfServers:AJS.Editor.JiraConnector.servers.length,source:"dialog"})}}var s=function(C,F,D){var B=b.find("#jiraIssueColumnSelector");var E=B.val()&&B.val();AJS.$("select",b).disable();l();f.lastSearch=C;var A="/rest/api/latest/search?jql="+encodeURIComponent(C)+"&fields=summary,issuetype,status&startAt=0&maxResults=20&validateQuery=none";f.createIssueTableFromUrl(b,f.selectedServer,A,f.selectHandler,f.insertLinkFromForm,function(){f.addDisplayOptionPanel();f.loadMacroParams(E);f.bindEventToDisplayOptionPanel(true,x);f.enableInsert()},function(G){f.addDisplayOptionPanel();f.loadMacroParams(E);f.bindEventToDisplayOptionPanel(false,x);f.updateTotalIssuesDisplay(G);f.checkAutoSelectColumns();x&&x.isAutoSearch&&f.focusForm()},function(G){f.disableInsert();if(G.status==400){if(D){D()}else{AJS.$("div.data-table",b).remove();f.warningMsg(b,AJS.format("The JIRA server didn\'\'t understand your search query. If you entered JQL, please ensure that it\'\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}",Confluence.Templates.ConfluenceJiraPlugin.learnMore()))}}else{AJS.$("div.data-table",b).remove();f.ajaxError(G,i)}x&&x.isAutoSearch&&f.focusForm()},true)};if(AJS.JQLHelper.isFilterUrl(p)){var n=decodeURIComponent(p);var v=AJS.JQLHelper.findServerIndexFromUrl(n,AJS.Editor.JiraConnector.servers);if(v!=-1){var t=AJS.Editor.JiraConnector.servers[v].id;AJS.$('option[value="'+t+'"]',b).attr("selected","selected");AJS.$("select",b).change();var z=AJS.JQLHelper.getFilterFromFilterUrl(n);if(z){AJS.$("input",b).val(z);s(z)}else{h();f.warningMsg(b,AJS.format("The JIRA server didn\'\'t understand your search query. If you entered JQL, please ensure that it\'\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}",Confluence.Templates.ConfluenceJiraPlugin.learnMore()))}}else{h();f.disableInsert();c(AJS.Meta.get("is-admin"))}}else{if(AJS.JQLHelper.isIssueUrlOrXmlUrl(p)){var n=decodeURIComponent(p);var u=AJS.JQLHelper.getJqlAndServerIndexFromUrl(n,AJS.Editor.JiraConnector.servers);if(d(u)){AJS.$("input",b).val(u.jqlQuery);s(u.jqlQuery,false,null)}}else{if(p.match(f.jql_operators)){s(p,false,null)}else{if(AJS.JQLHelper.isSingleKeyJQLExp(p)){s("key = "+p,true)}else{if(AJS.JQLHelper.isMultipleSingleKeyJQLExp(p)){s("key in ("+p+")",true)}else{s('summary ~ "'+p+'" OR description ~ "'+p+'"',false,null)}}}}}};this.doSearch=g;f.addSearchForm();var d=function(m){var n;if(m.serverIndex!=-1){AJS.$('option[value="'+AJS.Editor.JiraConnector.servers[m.serverIndex].id+'"]',b).attr("selected","selected");AJS.$("select",b).change();if(m.jqlQuery.length==0){h();f.errorMsg(b,"The JIRA server didn\'t understand your search query. If you entered JQL, please ensure that it\'s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it. {0}")}else{n=m.jqlQuery}}else{h();f.disableInsert();c(AJS.Meta.get("is-admin"))}return n};f.processJiraParams=d;var c=function(m){var o=Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer({isAdministrator:m,contextPath:Confluence.getContextPath()});f.noServerMsg(b,o);var n=AJS.$("#open_applinks");n.bind("click",function(){AJS.Editor.JiraConnector.clickConfigApplink=true;AJS.Editor.JiraConnector.refreshAppLink=function(){f.refreshSearchForm()}})};f.bindPasteEvent();AJS.$(a).select(function(){f.validate()});var k=AJS.$(".jql-display-opts-open.disabled");var j={live:true,title:function(){return AJS.$(".jql-display-opts-open.disabled").data("title")},gravity:"s",delayIn:300,delayOut:0};k.tooltip(j)},focusForm:function(){AJS.$('input[name="jiraSearch"]',this.container).focus()},addSearchForm:function(){var e=this;e.container.empty();var g=AJS.Editor.JiraConnector.servers;e.selectedServer=g[0];var a=false;if(g.length>1){a=true}var f=Confluence.Templates.ConfluenceJiraPlugin.searchForm({isMultiServer:a});var d=AJS.$(f).appendTo(e.container);if(g.length>1){var c=AJS.$('<div class="search-server-select-container"></div>');AJS.$('<label for="search-server-select"></label>').text("Choose server").appendTo(c);var b=AJS.$('<select id="search-server-select" class="select" tabindex="0"></select>').appendTo(c);c.insertAfter("div.search-input",d);e.applinkServerSelect(b,e.authCheck)}e.authCheck(e.selectedServer);AJS.$("button",e.container).click(function(){e.doSearch()});e.setActionOnEnter(AJS.$("input.text",e.container),e.doSearch)},bindPasteEvent:function(){var a=this;AJS.$("#my-jira-search input:text").bind("paste",function(){var b=this;setTimeout(function(){var d=AJS.$(b).val();if(AJS.JQLHelper.isFilterUrl(d)){a.doSearch()}else{if(AJS.JQLHelper.isIssueUrlOrXmlUrl(d)){var e=decodeURIComponent(d);var c=AJS.JQLHelper.getJqlAndServerIndexFromUrl(e,AJS.Editor.JiraConnector.servers);if(a.processJiraParams(c)){AJS.$(b).val(c.jqlQuery);a.doSearch()}}}},100)})},refreshSearchForm:function(){this.container.empty();this.addSearchForm();this.bindPasteEvent()},validate:function(e,d){var c=this.container;var f=AJS.$("input:checkbox[name=jira-issue]",c);var b=AJS.Editor.JiraConnector.Panel.Search.prototype;if(f.length||e){var a=AJS.$("input:checkbox[name=jira-issue]:checked",c).length;if(a>0||e){b.enableInsert()}else{b.disableInsert()}b.changeInsertOptionStatus(a,e,d)}else{if(AJS.$(".jira-oauth-message-marker",c).length){b.authCheck(this.selectedServer)}AJS.$("input",c).focus();b.disableInsert()}if(b.isInsertDisabled()){return}b.validateMaxIssues()},isValidMaxIssues:function(a){return AJS.$.isNumeric(a)&&(this.MINIMUM_MAX_ISSUES_VAL<=a&&a<=this.MAXIMUM_MAX_ISSUES_VAL)},validateMaxIssues:function(i){var b=AJS.$("#jira-maximum-issues");function d(){b.next("#jira-max-number-error").remove()}function f(){b.attr("disabled","disabled")}function h(){b.removeAttr("disabled")}function c(){d();b.after(Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues())}switch(AJS.$("input:radio[name=insert-advanced]:checked").val()){case"insert-single":case"insert-count":d();f();break;case"insert-table":var a=AJS.Editor.JiraConnector.Panel.Search.prototype;h();var g=b.val();if(AJS.$.trim(g)===""){if(i&&i.type==="keyup"){d();break}if(i&&i.type==="blur"){g=a.MAXIMUM_MAX_ISSUES_VAL;b.val(g);break}}if(a.isValidMaxIssues(g)){d();a.enableInsert()}else{c();a.disableInsert()}break}},customizedColumn:null,parseColumnsStringToArray:function(g){var f="";var b=[];var a=null;var c=function(i,h){i=AJS.$.trim(i);if(i!=""){h.push(i)}};for(var e=0;e<g.length;e++){var d=g.charAt(e);if(d!==","&&d!=='"'&&d!=="'"){f+=d}if(d==='"'||d==="'"){if(a==null){a=d}else{if(a===d){c(f,b);f="";a=null}}}else{if(d===","){if(a==null){c(f,b);f=""}else{f+=d}}}}c(f,b);return b},parseArrayToColumnString:function(b){var a="";for(var c=0;c<b.length;c++){var d=AJS.$.trim(b[c]);if(d!=""){if(d.indexOf(",")>=0){d='"'+d+'"'}if(c!=0){a+=","}a+=d}}},checkAndSetDefaultValueMaximumIssues:function(a){if(!a){AJS.log("Cannot set default value for Maximum Issues");return}var b=a.element||AJS.$("#jira-maximum-issues");var d=a.defaultVal||this.MAXIMUM_MAX_ISSUES_VAL;var c=AJS.$.trim(b.val());if(c===""){b.val(d)}},setMacroParams:function(a){this.macroParams=a},getMacroParamsFromUserInput:function(){var g=((AJS.$("input:radio[name=insert-advanced]:checked").val()=="insert-count"));var e=this;var b=[];var f=[];var a=[];var d={};AJS.$("#my-jira-search .my-result.aui input:checkbox[name=jira-issue]").each(function(h){var j=AJS.$(this);if(j.is(":checked")){f[f.length]=j.val()}else{a[a.length]=j.val()}});if(g){d.count="true"}else{if(!AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox){d.columns=this.defaultColumns;d.columnIds=this.defaultColumnIds;return}b=AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox.select2("data");if(b.length){d.columns=b.map(function(h){return e.selectedServer.columns.find(function(i){return i.id===h.id}).custom?h.text:h.id}).map(function(h){var i=e.aliases.find(function(j){return j.id===h});return i?i.clauseName:h}).join(",");d.columnIds=b.map(function(h){return h.id}).join(",")}else{d.columns=this.defaultColumns;d.columnIds=this.defaultColumnIds}}var c=AJS.$("input:radio[name=insert-advanced]:checked").val();if(c==="insert-single"){d.key=f.toString()}else{if(a.length===0){d.jqlQuery=this.lastSearch+" "}else{if(f.length===1){AJS.Editor.JiraAnalytics.triggerCustomizeCheckedIssues({numChecked:1,numUnchecked:a.length});d.jqlQuery="key = "+f.toString()}else{AJS.Editor.JiraAnalytics.triggerCustomizeCheckedIssues({numChecked:f.length,numUnchecked:a.length});d.jqlQuery="key in ("+f.toString()+")"}}}if(c==="insert-table"){d.maximumIssues=AJS.$("#jira-maximum-issues").val()}return d},insertLinkFromForm:function(){var c=this;var b=c.container;var d=AJS.$("input:checkbox[name=jira-issue]",b);if(d.length){var a=AJS.$("input:checkbox[name=jira-issue]:checked",b).length;if(a>0){c.insertLink()}}},insertLink:function(d){var b;if(d&&typeof d.insertIssueLinkWithParams==="function"){b=d}else{b=this}var c=b.getMacroParamsFromUserInput();b.insertIssueLinkWithParams(c);if(c&&AJS.Editor&&AJS.Editor.JiraAnalytics&&AJS.Editor.JiraAnalytics){if(c.columns&&c.columns!==this.defaultColumns){var a=c.columns.split(",").length;AJS.Editor.JiraAnalytics.triggerCustomizeColumnEvent({numColumns:a})}if(c.maximumIssues&&c.maximumIssues!==String(this.DEFAULT_MAX_ISSUES_VAL)){AJS.Editor.JiraAnalytics.triggerCustomizeMaximumIssues({maxIssues:parseInt(c.maximumIssues)})}}return true},loadMacroParams:function(c){var a=this.macroParams;if(!a){this.checkAndSetDefaultValueMaximumIssues({defaultVal:20});this.prepareColumnSelect(c)}else{if(!a.maximumIssues){AJS.$("#jira-maximum-issues").attr("disabled","disabled")}if(a.count=="true"){AJS.$("#opt-total").prop("checked",true)}else{AJS.$("#opt-table").prop("checked",true);AJS.$("#jira-maximum-issues").removeAttr("disabled");var b=a.maximumIssues||this.DEFAULT_MAX_ISSUES_VAL;this.checkAndSetDefaultValueMaximumIssues({defaultVal:b})}this.prepareColumnSelect(c)}},selectHandler:function(){var a=this.container;var b=a.find("tr.selected");if(b.length){b.unbind("keydown.space").bind("keydown.space",function(c){if(c.which==32||c.keyCode==32){var d=b.find("[type=checkbox]");d.trigger("click")}})}},addDisplayOptionPanel:function(){var a=Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml;AJS.$(".jiraSearchResults").after(a());AJS.$("#jiraMacroDlg").unbind("submit").on("submit",function(b){return false})},updateTotalIssuesDisplay:function(b){var a=this.selectedServer.url+"/issues/?jql="+this.lastSearch;if(b>20){AJS.$(".my-result.aui").after(Confluence.Templates.ConfluenceJiraPlugin.viewAll({jiraIssuesLink:a}))}var c=AJS.format("{0} issues",b);AJS.$(".total-issues-text").html(c);AJS.$(".total-issues-link").attr("href",a)},escapeString:function(b){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(b).replace(/[&<>"'`=\/]/g,function(c){return a[c]})},prepareColumnSelect:function(g){var e=this;var a=!(this.macroParams&&!this.macroParams.columnIds);var c=g||(this.macroParams&&this.macroParams.columnIds&&this.macroParams.columnIds.split(","))||(this.macroParams&&this.macroParams.columns&&this.macroParams.columns.toLowerCase().split(","))||this.defaultColumnIds.split(",");var d={};var f=this.selectedServer;var b=function(h){var k=AJS.$("#jiraIssueColumnSelector");var l="";var i="";h.filter(function(m){return m.navigable}).sort(function(n,m){var o=c.map(function(p){var q=e.aliases.find(function(r){return r.clauseName===p});return q?q.id:p});return o.indexOf((a||!n.custom)?n.id:n.name.toLowerCase())-o.indexOf((a||!m.custom)?m.id:m.name.toLowerCase())}).forEach(function(m){if(c.find(function(n){if(a){return n===m.id}else{if(!a&&!!d[n]){return false}}return m.clauseNames.includes(n)||n===m.name.toLowerCase()})){i+=AJS.template('<option selected="true" value="{fieldId}">{fieldName}</option>').fill({fieldId:m.id,fieldName:e.escapeString(m.name)});if(!a){d[m.name]=true}}else{key=m.id.toLowerCase();l+=AJS.template('<option value="{fieldId}">{fieldName}</option>').fill({fieldId:m.id,fieldName:e.escapeString(m.name)})}});k.hide();k.html(i+l);k.show();function j(o,m){var n=m.prevObject.children().last();n.attr({tabindex:0,role:"button","aria-label":"Remove column "+o.text});n.bind("keypress",function(q){if(q.which===32){var p=k.val();p.splice(p.indexOf(o.id),1);k.val(p).trigger("change")}});return o.text}k.auiSelect2({width:"415px",containerCssClass:"select2-container-jira-issue-columns",formatSelection:j});AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox=k};if(f.columns&&f.columns.length>0){b(f.columns);return}this.retrieveJson(f.id,"/rest/api/2/field",function(h){if(h&&h.length){f.columns=h;b(f.columns)}})},expandDisplayOptPanel:function(){var b=AJS.$(".jql-display-opts-overlay");var c=b.height();var d=40;b.css("top","");var a=-(c-d);b.css("bottom",a+"px");b.animate({bottom:0},500)},minimizeDisplayOptPanel:function(){var a=AJS.$(".jql-display-opts-overlay");a.css("top",a.position().top+"px");a.css("bottom","");a.animate({top:420},500)},disableAutoSelectColumns:function(){AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox.auiSelect2("enable",false)},enableAutoSelectColumns:function(){AJS.Editor.JiraConnector.Panel.Search.jiraColumnSelectBox.auiSelect2("enable",true)},checkAutoSelectColumns:function(){if(AJS.$("#opt-table").prop("checked")){this.enableAutoSelectColumns()}else{this.disableAutoSelectColumns();this.enableInsert()}},bindEventToDisplayOptionPanel:function(f,h){var d=this;var b=AJS.$(".jql-display-opts-close, .jql-display-opts-open");var c=AJS.$(".jql-display-opts-overlay");var i=AJS.$(".jql-display-opts-inner .radio");var a=AJS.$("#my-jira-search input:checkbox[name=jira-issue-all]");var e=AJS.$("#my-jira-search input:checkbox[name=jira-issue]");var g=AJS.$("#jira-maximum-issues");g.on("blur keyup",AJS.Editor.JiraConnector.Panel.Search.prototype.validateMaxIssues);c.css("top","420px");b.click(function(j){j.preventDefault();if(AJS.$(this).hasClass("disabled")){return}var k=AJS.$(this).hasClass("jql-display-opts-open");if(k){d.expandDisplayOptPanel();jQuery(this).addClass("jql-display-opts-close");jQuery(this).removeClass("jql-display-opts-open")}else{d.minimizeDisplayOptPanel();jQuery(this).removeClass("jql-display-opts-close");jQuery(this).addClass("jql-display-opts-open")}});i.change(function(){d.checkAutoSelectColumns();d.validateMaxIssues()});a.bind("click",function(){var j=AJS.$(this);if(j.prop("checked")){e.prop("checked","checked")}else{e.removeAttr("checked")}d.validate()});e.change(function(){var j=AJS.$("#my-jira-search input:checkbox[name=jira-issue]:not(:checked)").length;if(j>0){a.removeAttr("checked")}else{a.prop("checked","checked")}d.validate()});d.validate(f,h)},changeInsertOptionStatus:function(q,n,f){var r=this;var g=AJS.$("#opt-single");var d=AJS.$("#opt-total");var m=AJS.$("#opt-table");var j=AJS.$("#my-jira-search input:checkbox[name=jira-issue]:checked");var i=AJS.$("#my-jira-search input:checkbox[name=jira-issue-all]").attr("checked")==="checked";var l=j.length===1;var p=j.length>1;var h=j.length===0;var b=AJS.JQLHelper.isSingleKeyJQLExp(AJS.$("#my-jira-search input[name=jiraSearch]").val());var c=function(){if(f&&f.isJqlQuery){m.click()}else{g.click()}};var k=function(){d.attr("disabled","disabled");m.removeAttr("disabled");g.removeAttr("disabled");c();setTimeout(function(){c()},100)};var e=function(){g.attr("disabled","disabled");d.removeAttr("disabled");if(AJS.$("input[name=insert-advanced]:checked").val()==="insert-single"){setTimeout(function(){m.removeAttr("disabled").click()},100)}};var o=function(){m.removeAttr("disabled","disabled");d.removeAttr("disabled","disabled");g.removeAttr("disabled","disabled");var s=AJS.$("input:radio[name=insert-advanced]:checked").val();if(s==="insert-single"){setTimeout(function(){m.click()},100)}};var a=function(){g.attr("disabled","disabled");d.attr("disabled","disabled");m.attr("disabled","disabled");AJS.$(".jql-display-opts-close").click();AJS.$(".jql-display-opts-open").addClass("disabled")};AJS.$(".jql-display-opts-open").removeClass("disabled");g.removeAttr("disabled");d.removeAttr("disabled");m.removeAttr("disabled");if(i&&l&&b){k()}else{if(i&&l&&!b){o()}else{if(p){e()}else{if(l&&!i){k()}else{if(n){e()}else{if(h){a()}}}}}}},isInsertTableType:function(){return AJS.$("input:radio[name=insert-advanced]:checked").val()==="insert-table"},setInsertButtonState:function(){var a=AJS.$(".jql-display-opts-close, .jql-display-opts-open");var b=AJS.$("#jira-maximum-issues");if(!a.length||(a.length&&this.isInsertTableType()&&!this.isValidMaxIssues(b.val()))){this.disableInsert()}else{this.enableInsert()}},analyticPanelActionName:"confluence.jim.searchadded"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Search());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/jip_createissuepanel.js' */
AJS.Editor.JiraConnector.Panel.Create=function(){};AJS.Editor.JiraConnector.Panel.Create.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Create.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Create.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Create.prototype,{DEFAULT_PROJECT_VALUE:"-1",SHOW_MESSAGE_ON_TOP:true,EXCLUDED_FIELDS:["project","issuetype","summary","description"],PROJECTS_META:{},setSummary:function(b){var a=AJS.$('.field-group [name="summary"]',this.jipForm.formEl);a.length&&a.val(b)},resetIssue:function(){AJS.$(".issue-summary",this.container).empty();AJS.$(".issue-description",this.container).empty()},focusForm:function(){var a=AJS.$("select.server-select",this.container);if(a.length){a.focus()}else{var b=AJS.$(".project-select",this.container);b.length&&b.focus()}},authCheck:function(){this.selectedServer=this.jipForm.getCurrentServer();if(this.selectedServer.authUrl){this.showOauthChallenge()}else{this.serverSelect()}},ajaxAuthCheck:function(b){var a=this;this.endLoading();this.ajaxError(b,function(){a.authCheck(a.jipForm.getCurrentServer())})},showOauthChallenge:function(){AJS.$("div.field-group",this.container).not(".servers").hide();AJS.$(".jira-oauth-message-marker",this.container).remove();var a=this;var b=this.createOauthForm(function(){a.serverSelect()});this.container.append(b)},projectOk:function(){var a=AJS.$(".project-select option:selected",this.container).val();return a&&a.length&&a!=this.DEFAULT_PROJECT_VALUE},setInsertButtonState:function(){if(this.formHasError===false&&this.projectOk()){this.enableInsert();return true}else{this.disableInsert();return false}},startLoading:function(){this.removeError(this.container);AJS.$(".loading-blanket",this.container).removeClass("hidden");AJS.$("input,select,textarea",this.container).disable();this.disableInsert();this.handleInsertWaiting(true)},endLoading:function(){AJS.$(".loading-blanket",this.container).addClass("hidden");AJS.$("input,select,textarea",this.container).enable();if(AJS.$(".project-select",this.container).val()===this.DEFAULT_PROJECT_VALUE){AJS.$(".issuetype-select",this.container).disable()}this.setInsertButtonState();this.handleInsertWaiting(false)},bindEvent:function(){var b=this;var a=AJS.$('.field-group [name="summary"]',this.jipForm.formEl);a.keyup(function(){b.setInsertButtonState()});this.container.on("focus","input[data-aui-dp-uuid]",function(){var c=AJS.$(this).attr("data-aui-dp-uuid");setTimeout(function(){AJS.$("[data-aui-dp-popup-uuid="+c+"]").parents(".aui-inline-dialog").addClass("datepicker-patch")},0)})},title:function(){return "Create New Issue"},init:function(b){var c=this;b.html('<div class="create-issue-container"></div>');this.container=AJS.$("div.create-issue-container");var a=this.container;var d=AJS.Editor.JiraConnector.servers;this.selectedServer=d[0];this.jipForm=new jiraIntegration.JiraCreateIssueForm({container:".create-issue-container",renderSummaryAndDescription:true,onError:function(){AJS.$(".field-group .error",this.container).remove();c.formHasError=true;c.disableInsert()},onServerChanged:function(){AJS.$(".field-group .error",this.container).remove();c.setInsertButtonState();c.selectedServer=this.getCurrentServer()},onRequiredFieldsRendered:function(f,e){AJS.$(".field-group .error",this.container).remove();c.formHasError=!!e.length;c.setInsertButtonState()}});b.onselect=function(){c.onselect()};this.bindEvent()},convertFormToJSON:function(b){if(!jiraIntegration){AJS.logError("Jira integration plugin is missing!");return""}var c={};c.issues=[];var a={};a.fields={project:{id:AJS.$(".project-select option:selected",b).val()},issuetype:{id:AJS.$(".issuetype-select option:selected",b).val()},summary:AJS.$('.field-group [name="summary"]',b).val(),description:AJS.$('.field-group [name="description"]',b).val()};b.children(".create-issue-required-fields").children(".jira-field").children("input,select,textarea").not(".select2-input").each(function(d,e){var f=AJS.$(e);a.fields[f.attr("name")]=jiraIntegration.fields.getJSON(f)});c.issues.push(a);return JSON.stringify(c)},validateRequiredFieldInForm:function(b){var d=true;var a="placeholder" in document.createElement("input");var c=b.find(".field-group .icon-required, .field-group .aui-icon-required");c.each(function(h,l){var k=AJS.$(l).parent();var g=k.text();var i=k.nextAll("input,select,textarea");var j=AJS.$.trim(i.val());if(!j||(!a&&j==i.attr("placeholder"))){d=false;var f=k.parent();var e=AJS.format("{0} is required",g);f.append(aui.form.fieldError({message:e}))}});return d},clearFieldErrors:function(){AJS.$("form div.error",this.container).remove()},insertLink:function(){var b=this;var c=Confluence.getContextPath()+"/rest/jira-integration/1.0/issues";var a=AJS.$("div.create-issue-container form");var d=this.jipForm.getCurrentServer();b.clearFieldErrors();if(!b.validateRequiredFieldInForm(a)){return}this.startLoading();AJS.$.ajax({type:"POST",contentType:"application/json",url:c+"?applicationId="+this.selectedServer.id,data:this.convertFormToJSON(a),success:function(k){var h=k&&k.issues&&k.issues[0]&&k.issues[0].issue&&k.issues[0].issue.key;if(!h){if(!_.isEmpty(k.errors[0].elementErrors.errorMessages)){var i=k.errors[0].elementErrors.errorMessages;var m=Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel({errors:i,serverUrl:d.displayUrl});b.errorMsg(AJS.$("div.create-issue-container"),m)}var f=k.errors[0].elementErrors.errors;_.each(f,function(o,n){var e=aui.form.fieldError({message:o});AJS.$(AJS.format(".field-group [name={0}]",n),a).after(e)})}else{try{var j=window.require("confluence/jim/jira/applinks-bridge-for-spa");var g=j.isCloudAppLinkFromUrl(d.displayUrl)||j.isCloudAppLinkFromUrl(d.rpcUrl);AJS.trigger("createGASv3Event",{type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"createNewJiraIssue",source:"jiraCreateIssueModal",attributes:{isCloudSite:g,serverId:d.id}}})}catch(l){}b.insertIssueLink(h,d.displayUrl+"/browse/"+h);b.resetIssue()}b.endLoading()},error:function(f,e){b.ajaxAuthCheck(f)}})},onselect:function(){var a=!!AJS.$(".aui-message > .oauth-init",this.container).length;if(this.selectedServer&&!this.selectedServer.authUrl&&a){this.jipForm.defaultFields.server.trigger("change")}else{this.setInsertButtonState()}},analyticPanelActionName:"confluence.jim.issuecreated"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Create());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = '/jira/recentlyviewedpanel.js' */
AJS.Editor.JiraConnector.Panel.Recent=function(){};AJS.Editor.JiraConnector.Panel.Recent.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Recent.prototype,AJS.Editor.JiraConnector.Panel.prototype);AJS.Editor.JiraConnector.Panel.Recent.prototype=AJS.$.extend(AJS.Editor.JiraConnector.Panel.Recent.prototype,{title:function(){return "Recently Viewed"},init:function(a){var d=AJS.Editor.JiraConnector.servers;a.html('<div id="my-recent-issues" '+(d.length>1?'class="multi-server" ':"")+"></div>");var c=this;this.selectedServer=d[0];if(d.length>1){var b=AJS.$('<div class="jira-server-select"><form action="#" method="post" class="aui"><div class="field-group"><label>Server</label><select class="select" ></select></div></form></div>').appendTo("div#my-recent-issues");this.applinkServerSelect(AJS.$(".select",b),function(e){c.selectedServer=e;c.onselect()})}a.onselect=function(){c.onselect()}},insertLink:function(){this.insertSelected()},onselect:function(){var c=this;var b=AJS.$("div#my-recent-issues");this.container=b;var d=function(){b.children().not(".jira-server-select").remove()};var e;var a=function(){if(c.selectedServer.authUrl){d();var f=c.createOauthForm(function(){e()});b.append(f)}else{e()}};e=function(){if(c.currentXhr&&c.currentXhr.readyState!=4){return}var g=AJS.$(".select",b);g.disable();d();var h="key+in+issueHistory()+ORDER+BY+lastViewed+DESC";var f="/rest/api/latest/search?jql="+h+"&fields=summary,issuetype,status&startAt=0&maxResults=50&validateQuery=none";c.createIssueTableFromUrl(b,c.selectedServer,f,c.setSelectedIssue,c.insertLink,c.disableInsert,function(){g.length&&g.focus();if(AJS.Editor&&AJS.Editor.JiraAnalytics&&AJS.Editor.JiraAnalytics){AJS.Editor.JiraAnalytics.triggerRecentlyViewedSearchEvent()}},function(i){AJS.$("div.data-table",b).remove();c.ajaxError(i,a)},false)};a()},analyticPanelActionName:"confluence.jim.recentlyviewadded"});AJS.Editor.JiraConnector.Panels.push(new AJS.Editor.JiraConnector.Panel.Recent());
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = 'templates/soy/dialog.soy' */
// This file was automatically generated from dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.ConfluenceJiraPlugin.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.ConfluenceJiraPlugin == 'undefined') { Confluence.Templates.ConfluenceJiraPlugin = {}; }


Confluence.Templates.ConfluenceJiraPlugin.displayOptsHtml = function(opt_data, opt_ignored) {
  return '<div class=\'jql-display-opts-bar data-table\'><a href=\'#\' class=\'jql-display-opts-open\' data-title="' + soy.$$escapeHtml('Display options panel is not available without a selection.') + '"><span></span><strong>' + soy.$$escapeHtml('Display options') + '</strong></a></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.displayOptsHtml.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.displayOptsHtml';
}


Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml = function(opt_data, opt_ignored) {
  return '<div class=\'jql-display-opts-overlay data-table\' data-js="display-option-wrapper"><form id="jiraMacroDlg" class="aui" action="#"><div class=\'jql-display-opts-inner\'><a href=\'#\' class=\'jql-display-opts-open\' data-js="display-option-trigger" data-title="' + soy.$$escapeHtml('Display options panel is not available without a selection.') + '"><span></span><strong>' + soy.$$escapeHtml('Display options') + '</strong></a><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Display as') + '</span></legend><div class="radio"><input type=\'radio\' class=\'radio\' name=\'insert-advanced\' id=\'opt-single\' value=\'insert-single\'><label for=\'opt-single\'>' + soy.$$escapeHtml('Single issue') + '</label><div class=\'description\'>' + soy.$$escapeHtml('Display the macro as a single issue.') + '</div></div><div class="radio"><input type=\'radio\' class=\'radio\' name=\'insert-advanced\' id=\'opt-total\' value=\'insert-count\'><label for=\'opt-total\'>' + soy.$$escapeHtml('Total issue count') + '</label><div class=\'description\'>' + soy.$$escapeHtml('Display total number of issues as a link. E.g.') + '<a class=\'total-issues-link\' target=\'_blank\' href=\'#\'><span class=\'total-issues-text\'>' + soy.$$escapeHtml(AJS.format('{0} issues',12)) + '</span></a></div></div><div class="radio"><input type=\'radio\' class=\'radio\' checked=\'checked\' name=\'insert-advanced\' id=\'opt-table\' value=\'insert-table\'><label for=\'opt-table\'>' + soy.$$escapeHtml('Table') + '</label><div class=\'description\'>' + soy.$$escapeHtml('Customise your columns below.') + '</div></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml('Maximum issues') + '</label><input type="text" name="jira-maximum-issues" id="jira-maximum-issues" class="text short-field"><div class="description">' + soy.$$escapeHtml('Leave empty to get all issues.') + '</div></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml('Columns to display') + '</label><select id="jiraIssueColumnSelector" data-placeholder="' + soy.$$escapeHtml('Start typing to see possible columns') + '" multiple="true" class="select long-field"></select></div></fieldset></div></form></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.displayOptsOverlayHtml';
}


Confluence.Templates.ConfluenceJiraPlugin.searchForm = function(opt_data, opt_ignored) {
  return '<div class=\'jira-search-form\'><form class=\'aui\'><fieldset class=\'inline\'>' + ((opt_data.isMultiServer == true) ? '<div class=\'search-input\'><label for=\'jira-search-input\'>' + soy.$$escapeHtml('Search') + '</label><input type=\'text\' id=\'jira-search-input\' class=\'text search-text\' aria-describedby=\'jira-search-help\' name=\'jiraSearch\'></div>' : '<div class=\'search-input one-server\'><label for=\'jira-search-input\'>' + soy.$$escapeHtml('Search') + '</label><input type=\'text\' id=\'jira-search-input\' class=\'text\' aria-describedby=\'jira-search-help\' name=\'jiraSearch\'></div>') + '<button type=\'button\' title="' + soy.$$escapeHtml('Search') + '" class=\'button\'><span class="aui-icon aui-icon-small aui-iconfont-search"></span></button></fieldset><div class=\'search-help\' id=\'jira-search-help\'>' + soy.$$escapeHtml('Search using any issue key, search URL, JIRA link, JQL, plain text or filter, e.g. filter \x3d \x22My JIRA filter\x22') + '</div></form></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.searchForm.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.searchForm';
}


Confluence.Templates.ConfluenceJiraPlugin.warningDialog = function(opt_data, opt_ignored) {
  return '<div class=\'warning-body\'><p>' + soy.$$escapeHtml('If you connect Confluence to JIRA you can easily link issues...') + '</p>' + ((opt_data.isAdministrator == false) ? '<p>' + soy.$$escapeHtml('Your administrator can set this up.') + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.warningDialog.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.warningDialog';
}


Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox = function(opt_data, opt_ignored) {
  return '<input type=\'checkbox\' name=\'jira-issue\' value=\'' + soy.$$escapeHtml(opt_data.issueKey) + '\' checked>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.issueCheckbox';
}


Confluence.Templates.ConfluenceJiraPlugin.issueKey = function(opt_data, opt_ignored) {
  return '<span><img class="icon" src="' + soy.$$escapeHtml(opt_data.issueIconUrl) + '"> ' + soy.$$escapeHtml(opt_data.issueKey) + '</span>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.issueKey.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.issueKey';
}


Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isAdministrator == true) ? soy.$$escapeHtml('No server found match with your URL.') + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/admin/listapplicationlinks.action">' + soy.$$escapeHtml('Click here to set this up') + '</a>' : soy.$$escapeHtml('No server found match with your URL. Your administrator can set this up.') + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/wiki/contactadministrators.action">' + soy.$$escapeHtml('Click here to contact your admin') + '</a>');
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.showMessageNoServer';
}


Confluence.Templates.ConfluenceJiraPlugin.viewAll = function(opt_data, opt_ignored) {
  return '<div class=\'view-all\'>' + soy.$$escapeHtml('Displaying first 20 results.') + '<a href=\'' + soy.$$escapeHtml(opt_data.jiraIssuesLink) + '\' target=\'_blank\'>' + soy.$$escapeHtml('View all.') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.viewAll.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.viewAll';
}


Confluence.Templates.ConfluenceJiraPlugin.learnMore = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml('https://confluence.atlassian.com/display/DOC/JIRA+Issues+Macro') + '" target=\'_blank\'>' + soy.$$escapeHtml('Learn More') + '</a>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.learnMore.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.learnMore';
}


Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart = function(opt_data, opt_ignored) {
  return '<div id="jira-chart-content-' + soy.$$escapeHtml(opt_data.chartType) + '"><div class=\'jira-chart-search\'><form class=\'aui\'><fieldset class=\'inline\'>' + ((opt_data.isMultiServer == true) ? '<div class=\'jira-chart-search-input-container\'><label for=\'jira-chart-search-input-' + soy.$$escapeHtml(opt_data.chartType) + '\'>' + soy.$$escapeHtml('Search') + '</label><input type=\'text\' id="jira-chart-search-input-' + soy.$$escapeHtml(opt_data.chartType) + '" class=\'text search-text jira-chart-search-input\' aria-describedby=\'jira-chart-search-help-' + soy.$$escapeHtml(opt_data.chartType) + '\' name=\'jiraSearch\'></div><div class=\'jira-chart-servers-container\'><label for=\'jira-chart-servers-' + soy.$$escapeHtml(opt_data.chartType) + '\'>' + soy.$$escapeHtml('Choose server') + '</label><select id="jira-chart-servers-' + soy.$$escapeHtml(opt_data.chartType) + '" class="select jira-chart-servers" name="server" tabindex="0"></select></div>' : '<div class=\'jira-chart-search-input-container one-server\'><label for=\'jira-chart-search-input-' + soy.$$escapeHtml(opt_data.chartType) + '\'>' + soy.$$escapeHtml('Search') + '</label><input type=\'text\' id="jira-chart-search-input-' + soy.$$escapeHtml(opt_data.chartType) + '" class=\'text jira-chart-search-input\' aria-describedby=\'jira-chart-search-help-' + soy.$$escapeHtml(opt_data.chartType) + '\' name=\'jiraSearch\'></div>') + '<button id="jira-chart-search-button" type=\'button\' class=\'button\'>' + soy.$$escapeHtml('Preview') + '</button></fieldset><div id=\'jira-chart-search-help-' + soy.$$escapeHtml(opt_data.chartType) + '\' class=\'search-help\'>' + soy.$$escapeHtml('Search using any issue key, search URL, JIRA link, JQL, plain text or filter, e.g. filter \x3d \x22My JIRA filter\x22') + '</div></form></div><div class="jira-chart-img"></div><div class="jira-chart-option" data-js="display-option-wrapper" ><form action="#" class="aui" id="jiraChartMacroOption"><div class="jiraChartOption"><a class="jirachart-display-opts-open" data-js="display-option-trigger" href="#"><span class="display-option-icon"></span><strong>' + soy.$$escapeHtml('Display options') + '</strong></a>' + ((opt_data.chartType == 'pie') ? Confluence.Templates.ConfluenceJiraPlugin.piechartForm(null) : (opt_data.chartType == 'createdvsresolved') ? Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved(null) : (opt_data.chartType == 'twodimensional') ? Confluence.Templates.ConfluenceJiraPlugin.twoDimensional(null) : '') + '</div></form></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart';
}


Confluence.Templates.ConfluenceJiraPlugin.piechartForm = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="jira-chart-statType">' + soy.$$escapeHtml('Chart by') + '</label><select name="type" id="jira-chart-statType" class="select"></select></div></fieldset><fieldset class="group"><div class="field-group"><label for="jira-chart-width">' + soy.$$escapeHtml('Width') + '</label><input type="text" name="jira-chart-width" id="jira-chart-width" class="text short-field"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment widthInfo" title="' + soy.$$escapeHtml('Enter pixels, percent or leave blank to auto-resize.') + '"></span><div class="checkbox"><input type="checkbox" id="jira-pie-chart-show-border" class="checkbox jira-chart-show-border"><label for="jira-pie-chart-show-border">' + soy.$$escapeHtml('Show border') + '</label></div><div class="checkbox"><input type="checkbox" id="jira-pie-chart-show-infor" class="checkbox jira-chart-show-infor"><label for="jira-pie-chart-show-infor">' + soy.$$escapeHtml('Show chart information') + '</label></div></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.piechartForm.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.piechartForm';
}


Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="created-vs-resolved-chart-periodName">' + soy.$$escapeHtml('Period') + '</label><select class="select" id="created-vs-resolved-chart-periodName" name="created-vs-resolved-chart-periodName"><option value="hourly">' + soy.$$escapeHtml('Hourly') + '</option><option value="daily">' + soy.$$escapeHtml('Daily') + '</option><option value="weekly">' + soy.$$escapeHtml('Weekly') + '</option><option value="monthly">' + soy.$$escapeHtml('Monthly') + '</option><option value="quarterly">' + soy.$$escapeHtml('Quarterly') + '</option><option value="yearly">' + soy.$$escapeHtml('Yearly') + '</option></select><div class="error"></div></div><div class="field-group"><label for="created-vs-resolved-chart-daysprevious">' + soy.$$escapeHtml('Days previously') + '<span class="aui-icon icon-required"></span></label><input type="text" class="text" id="created-vs-resolved-chart-daysprevious" value="30"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment daysPreviousInfo" title="' + soy.$$escapeHtml('Number of days to include (counting back from today).') + '"></span><div class="error days-previous-error"></div></div><fieldset class="group"><div class="checkbox"><input type="checkbox" id="created-vs-resolved-chart-cumulative" name="created-vs-resolved-chart-cumulative" class="checkbox"><label for="created-vs-resolved-chart-cumulative">' + soy.$$escapeHtml('Cumulative totals') + '</label><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment cumulativeInfo" title="' + soy.$$escapeHtml('Progressively add totals (1, 2, 3) or show individual values (1,1,1).') + '"></span></div><div class="checkbox"><input type="checkbox" id="created-vs-resolved-chart-showunresolvedtrend" name="created-vs-resolved-chart-showunresolvedtrend" class="checkbox"><label for="created-vs-resolved-chart-showunresolvedtrend">' + soy.$$escapeHtml('Show unresolved trend') + '</label><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment showunresolvedtrendInfo" title="' + soy.$$escapeHtml('Include a subplot showing unresolved issues.') + '"></span></div></fieldset><div class="field-group"><label for="created-vs-resolved-chart-versionLabel">' + soy.$$escapeHtml('Show versions') + '</label><select class="select" id="created-vs-resolved-chart-versionLabel" name="created-vs-resolved-chart-versionLabel"><option value="all">' + soy.$$escapeHtml('All versions') + '</option><option value="major">' + soy.$$escapeHtml('Only major versions') + '</option><option value="none">' + soy.$$escapeHtml('None') + '</option></select><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment versionLabelInfo" title="' + soy.$$escapeHtml('Mark version release dates in the chart.') + '"></span><div class="error"></div></div></fieldset><fieldset class="group"><div class="field-group"><label for="jira-chart-width">' + soy.$$escapeHtml('Width') + '</label><input type="text" name="jira-chart-width" id="jira-chart-width" class="text short-field"><span class="aui-icon aui-icon-small aui-iconfont-help help-aligment widthInfo" title="' + soy.$$escapeHtml('Enter pixels, percent or leave blank to auto-resize.') + '"></span><div class="checkbox"><input type="checkbox" id="jira-createdvsresolved-chart-show-border" class="checkbox jira-chart-show-border"><label for="jira-createdvsresolved-chart-show-border">' + soy.$$escapeHtml('Show border') + '</label></div><div class="checkbox"><input type="checkbox" id="jira-createdvsresolved-chart-show-infor" class="checkbox jira-chart-show-infor"><label for="jira-createdvsresolved-chart-show-infor">' + soy.$$escapeHtml('Show chart information') + '</label></div></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.createdVsResolved';
}


Confluence.Templates.ConfluenceJiraPlugin.twoDimensional = function(opt_data, opt_ignored) {
  return '<fieldset><div id="jira-chart-support-all-version" class="hidden"></div><div class="field-group"><label for="twodimensional-xaxis">' + soy.$$escapeHtml('XAxis') + '</label><select class="select" id="twodimensional-xaxis"><option value="statuses">' + soy.$$escapeHtml('Status') + '</option><option value="priorities">' + soy.$$escapeHtml('Priority') + '</option><option value="assignees">' + soy.$$escapeHtml('Assignee') + '</option><option value="allFixfor">' + soy.$$escapeHtml('Fix For Versions (all)') + '</option><option value="components">' + soy.$$escapeHtml('Component') + '</option><option value="issuetype">' + soy.$$escapeHtml('Issue Type') + '</option></select></div><div class="field-group"><label for="twodimensional-yaxis">' + soy.$$escapeHtml('YAxis') + '</label><select class="select" id="twodimensional-yaxis"><option value="statuses">' + soy.$$escapeHtml('Status') + '</option><option value="priorities">' + soy.$$escapeHtml('Priority') + '</option><option value="assignees">' + soy.$$escapeHtml('Assignee') + '</option><option value="allFixfor">' + soy.$$escapeHtml('Fix For Versions (all)') + '</option><option value="components">' + soy.$$escapeHtml('Component') + '</option><option value="issuetype">' + soy.$$escapeHtml('Issue Type') + '</option></select></div><div class="field-group"><label for="twodimensional-number-of-result">' + soy.$$escapeHtml('Rows to display') + '</label><input type="text" name="twodimensional-number-of-result" id="twodimensional-number-of-result" class="text short-field"><div class="error twodimensional-number-of-result-error"></div></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.twoDimensional.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.twoDimensional';
}


Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message-container"><div class="aui-message error closeable shadowed"><p class="title"><span class="aui-icon icon-error"></span><strong></strong></p><span class=\'message\'>' + soy.$$escapeHtml(opt_data.message) + '</span><span class="aui-icon icon-close" role="button" tabindex="0"></span></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage';
}


Confluence.Templates.ConfluenceJiraPlugin.noServerWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message-container"><div class="aui-message warning">' + ((opt_data.isAdministrator == true) ? soy.$$escapeHtml('No server found match with your URL.') + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/admin/listapplicationlinks.action">' + soy.$$escapeHtml('Click here to set this up') + '</a>' : soy.$$escapeHtml('No server found match with your URL. Your administrator can set this up.') + '<a id="open_applinks" target="_blank" href="' + soy.$$escapeHtml(opt_data.contextPath) + '/wiki/contactadministrators.action">' + soy.$$escapeHtml('Click here to contact your admin') + '</a>') + '<span class="aui-icon icon-warning"></span></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.noServerWarning.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.noServerWarning';
}


Confluence.Templates.ConfluenceJiraPlugin.addMoreToComeLink = function(opt_data, opt_ignored) {
  return '<li class="page-menu-item"><button class="item-button moreToCome"><a target="_blank" href="http://go.atlassian.com/confluencejiracharts">' + soy.$$escapeHtml('More to come...') + '</a></button></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.addMoreToComeLink.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.addMoreToComeLink';
}


Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink = function(opt_data, opt_ignored) {
  return '<li class="page-menu-item"><hr><span class="aui-nav-heading jira-padding-left-10px"><strong>' + soy.$$escapeHtml('OTHER JIRA CONTENT') + '</strong></span><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><ul class="aui-nav"><li><button class="item-button jira-left-panel-link" id="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + '</button></li></ul></div></nav></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink';
}


Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid = function(opt_data, opt_ignored) {
  return '<div class="aui-message-container"><div class="aui-message warning">' + soy.$$escapeHtml('The JIRA server didn\x27t understand your search query. If you entered JQL, please ensure that it\x27s correctly formed. If you entered an issue key, ensure that it exists and you have permission to view it.') + '<span class="aui-icon icon-warning"></span></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid';
}


Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn = function(opt_data, opt_ignored) {
  return '<div class="error width-error">' + ((opt_data.error == 'wrongFormat') ? soy.$$escapeHtml('The width must be in correct format') : (opt_data.error == 'wrongNumber') ? soy.$$escapeHtml('The width must be a number between 100 and 9000') : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn';
}


Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues = function(opt_data, opt_ignored) {
  return '<div id="jira-max-number-error" class="error">' + soy.$$escapeHtml('Must be a number between 1 and 1000.') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.warningValMaxiumIssues';
}


Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion = function(opt_data, opt_ignored) {
  return '<div class="jira-unsupported-version aui-message-container"><div class="aui-message warning">' + soy.$$escapeHtml('JIRA Charts are not available for your version of JIRA. Upgrade to JIRA 6.1.1 or later to use this macro.') + '<span class="aui-icon icon-warning"></span></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:dialogsJs-for-conf-frontend', location = 'templates/soy/create_issues.soy' */
// This file was automatically generated from create_issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.ConfluenceJiraPlugin.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.ConfluenceJiraPlugin == 'undefined') { Confluence.Templates.ConfluenceJiraPlugin = {}; }


Confluence.Templates.ConfluenceJiraPlugin.createIssuesForm = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui" id="create-issues-form"><div class="loading-blanket hidden"><div class="loading-data"></div></div><div class="field-group servers"><label>' + soy.$$escapeHtml('Server') + '</label><select class="select server-select"></select></div><div class="field-group project-select-parent" ><label>' + soy.$$escapeHtml('Project') + '</label><select class="select project-select" name="pid"></select></div><div class="field-group type-select-parent issues-type-group" ><label>' + soy.$$escapeHtml('Issue Type') + '</label><select class="select type-select" name="issuetype"></select></div><div class="field-group"><label>' + soy.$$escapeHtml('Summary') + '<span class="aui-icon icon-required"></span></label><input class="text issue-summary" type="text" name="summary"></div><div id="jira-required-fields-panel"></div><div class="field-group"><label>' + soy.$$escapeHtml('Description') + '</label><textarea class="issue-description textarea" rows="5" name="description"></textarea></div></form>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.createIssuesForm.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.createIssuesForm';
}


Confluence.Templates.ConfluenceJiraPlugin.renderOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList15 = opt_data.options;
  var optionListLen15 = optionList15.length;
  for (var optionIndex15 = 0; optionIndex15 < optionListLen15; optionIndex15++) {
    var optionData15 = optionList15[optionIndex15];
    output += '<option value="' + soy.$$escapeHtml(optionData15.id) + '">' + soy.$$escapeHtml(optionData15.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.renderOptions.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.renderOptions';
}


Confluence.Templates.ConfluenceJiraPlugin.renderOption = function(opt_data, opt_ignored) {
  return '<option value="' + soy.$$escapeHtml(opt_data.option.id) + '" data-jira-option-key="' + soy.$$escapeHtml(opt_data.option.key) + '">' + soy.$$escapeHtml(opt_data.option.name) + '</option>';
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.renderOption.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.renderOption';
}


Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel = function(opt_data, opt_ignored) {
  var output = '<div>' + soy.$$escapeHtml('There were errors creating an issue in') + '<a target="_blank" href=' + soy.$$escapeHtml(opt_data.serverUrl) + '>JIRA</a></div><ul>';
  var errorList36 = opt_data.errors;
  var errorListLen36 = errorList36.length;
  for (var errorIndex36 = 0; errorIndex36 < errorListLen36; errorIndex36++) {
    var errorData36 = errorList36[errorIndex36];
    output += '<li>' + soy.$$escapeHtml(errorData36) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel.soyTemplateName = 'Confluence.Templates.ConfluenceJiraPlugin.renderCreateErrorPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = 'util/dialog-helper.js' */
define("confluence/jim/util/dialog-helper",["ajs","confluence-macro-browser/macro-browser"],function(a,c){var b={addSelectOtherMacroLink:function(d){var e=window.location.pathname;if(e&&(e.includes("/edit-v2")||e.includes("/edit-embed"))){return}var f="Select Macro";d.addLink(f,function(){d.hide();var g={};g.selectedMacro=null;c.open(g)},"dialog-back-link")}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-dialog.js' */
AJS.Editor.JiraChart=(function(j){var m=-1;var A=6109;var e=6155;var d="Insert";var q="Cancel";var x="Insert JIRA Chart";var c;var g;var E=function(H){if(!c){c=new AJS.ConfluenceDialog({width:840,height:590,id:"jira-chart"});c.addHeader(x);g=AJS.Editor.JiraChart.Panels;for(var G=0;G<g.length;G++){if(typeof(g[G].title)==="function"){c.addPanel(g[G].title())}else{if(g[G].title!==undefined){c.addPanel(g[G].title)}}var K=c.getCurrentPanel();g[G].init(K)}j("#jira-chart ul.dialog-page-menu").show().append(Confluence.Templates.ConfluenceJiraPlugin.addCrossMacroLink({id:"open-jira-issue-dialog",label:"JIRA Issue/Filter"}));c.addButton(d,function(){var L=g[c.getCurrentPanel().id];if(b(L.chartType)&&L.isImageChartExisted()){var M=L.getMacroParamsFromDialog();C(M);AJS.Editor.JiraChart.close()}else{y(j("#jira-chart-content-"+L.chartType))}},"insert-jira-chart-macro-button");var J=require("confluence/jim/util/dialog-helper");J.addSelectOtherMacroLink(c);c.addCancel(q,function(){AJS.Editor.JiraChart.close()})}AJS.$("#jira-chart .dialog-page-menu button").click(function(){var N=g[c.getCurrentPanel().id];var M=c.getCurrentPanel().body;var L=AJS.Editor.JiraChart.Helper.getSelectedServer(M);n(M,L);p(M);N.handleInsertButton();N.resetDisplayOption()});var I=c.getCurrentPanel().body;p(I);var F=F||function(M){var L={};_.each(M,function(N,O){L[N.chartType]=O});return L}(g);f(F,H);a();c.gotoPanel(r(F,H));c.overrideLastTab();c.show();i()};var r=function(F,G){if(G&&G.params){return F[G.params.chartType]}return 0};var s=function(){_.each(AJS.Editor.JiraChart.Panels,function(F){F.preBinding&&typeof F.preBinding==="function"&&F.preBinding()})};var i=function(){j("#open-jira-issue-dialog").click(function(){AJS.Editor.JiraChart.close();if(AJS.Editor.JiraConnector){AJS.Editor.JiraConnector.openCleanDialog(false)}})};var D=function(F){if(AJS.Editor.JiraConnector.servers.length>0){AJS.Editor.JiraConnector.Panel.prototype.applinkServerSelect(F.find(".jira-chart-servers"),function(G){l(F);if(p(F)){n(F,G);B(F)}})}};var b=function(G){var F=c.getCurrentPanel().body;return F.find("#jira-chart-content-"+G).length>0};var k=function(F){F(g[c.getCurrentPanel().id])};var y=function(F){if(AJS.Editor.JiraChart.Helper.convertSearchTextToJQL(F)===undefined){return}k(function(G){G.renderChart()})};var p=function(F){if(F.find("#jira-chart-support-all-version").length){return true}var G=AJS.Editor.JiraChart.Helper.getSelectedServer(F);if(w(G)){t(F);z(F);return false}return true};var C=function(H){var G={name:"jirachart",params:H};var F=require("confluence-macro-browser/macro-browser-facade");F.insert(G)};var f=function(F,H){for(var G=0;G<g.length;G++){g[G].resetDialogValue()}s();if(H&&H.params){var I=g[F[H.params.chartType]];I.bindingDataFromMacroToForm(H.params)}};var v=function(){if(AJS.Editor.JiraConnector.servers===undefined||AJS.Editor.JiraConnector.servers.length===0){AJS.Editor.JiraConnector.warningPopup(AJS.Meta.get("is-admin"));return false}return true};var l=function(F){F.find(".jira-oauth-message-marker").remove();F.find(".jira-chart-img").empty();F.find(".jira-chart-search-input").empty()};var a=function(){j("#jira-chart").find(".insert-jira-chart-macro-button").disable()};var h=function(){var F=AJS.$("#jira-chart").find(".insert-jira-chart-macro-button");if(F.is(":disabled")){F.enable()}};var o=function(F){F.find("#jira-chart-search-button").disable()};var u=function(F){if(F.find("#jira-chart-search-button").is(":disabled")){F.find("#jira-chart-search-button").enable()}};var n=function(H,G){j(".jira-oauth-message-marker",H).remove();var I={selectedServer:G,msg:AJS.Editor.JiraConnector.Panel.prototype.msg};if(G&&G.authUrl){var F=AJS.Editor.JiraConnector.Panel.prototype.createOauthForm.call(I,function(){j(".jira-oauth-message-marker",H).remove();AJS.Editor.JiraChart.search(H)});H.find("div.jira-chart-search").append(F)}};var t=function(F){F.find(".jira-chart-img").html(Confluence.Templates.ConfluenceJiraPlugin.showJiraUnsupportedVersion())};var z=function(G){G.find(".jira-chart-search-input").attr("disabled","disabled");G.find("#jira-chart-search-button").attr("disabled","disabled");var F=G.find(".jirachart-display-opts-close, .jirachart-display-opts-open");if(F.hasClass("jirachart-display-opts-close")){F.click()}F.addClass("disabled");a()};var B=function(F){F.find(".jira-chart-search-input").removeAttr("disabled");F.find("#jira-chart-search-button").removeAttr("disabled");F.find(".jirachart-display-opts-open").removeClass("disabled")};var w=function(G){var F=G.buildNumber;return F==m||(F>=A&&F<e)};return{close:function(){c.hide();var G=require("confluence-macro-browser/macro-browser-facade");const F=AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.issue.macro.switch.no.cancel");if(!F){G.cancel()}},edit:function(F){if(!v()){return}E(F);var H=c.getCurrentPanel().body;if(!p(H)){return}B(H);if(F.params!==undefined&&F.params.serverId!==undefined){y(H)}var G=AJS.Editor.JiraChart.Helper.getSelectedServer(H);n(H,G)},search:y,disableInsert:a,enableInsert:h,disableSearch:o,enableSearch:u,insertJiraChartMacroWithParams:C,open:E,clearChartContent:l,loadServers:D,validateServerSupportedChart:p}})(AJS.$);AJS.Editor.JiraChart.Panels=[];AJS.MacroBrowser.setMacroJsOverride("jirachart",{opener:AJS.Editor.JiraChart.edit});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-helper.js' */
AJS.Editor.JiraChart.Helper=(function(g){var a=/^\d+$/;var m={};var f=function(o){o=(o&&typeof o==="string")?o.replace("px",""):"";if(o==="auto"){o=""}if(o.indexOf("%")>0){o=o.replace("%","")*4}return o};var n=function(o){return a.test(o)};var k=function(o){var p=AJS.Editor.JiraConnector.servers;if(p.length>1){return o.find(".jira-chart-servers option:selected").data("jiraapplink")}return p[0]};var h=function(p){var u=AJS.Editor.JiraConnector.servers;var r;var q=p.find(".jira-chart-search-input").val();if(q.indexOf("http")===0){var t=AJS.JQLHelper.findServerIndexFromUrl(q,u);if(t!==-1){r=u[t].id;p.find(".jira-chart-servers").val(r)}else{var s=Confluence.Templates.ConfluenceJiraPlugin.noServerWarning({isAdministrator:AJS.Meta.get("is-admin"),contextPath:Confluence.getContextPath()});p.find(".jira-chart-img").html(s);AJS.Editor.JiraChart.disableInsert();return}}var o=AJS.JQLHelper.convertToJQL(q,r);if(o){p.find(".jira-chart-search-input").val(o)}else{p.find(".jira-chart-img").html(Confluence.Templates.ConfluenceJiraPlugin.jqlInvalid());AJS.Editor.JiraChart.disableInsert()}return o};var d=function(o,q){var s=k(o);if(q){var p=s.id;var t=m[p];if(!t){AppLinks.makeRequest({appId:s.id,type:"GET",url:"/rest/gadget/1.0/statTypes",dataType:"json",async:false,success:function(u){if(u){m[s.id]=u;t=u}},error:function(u){if(u){m[s.id]=JSON.parse(u.responseText);t=JSON.parse(u.responseText)}AJS.log("Jira Chart Macro: unable to retrieve statTypes from AppLink: "+s.id)}}).fail(function(u){if(u){m[s.id]=JSON.parse(u.responseText);t=JSON.parse(u.responseText)}})}var r="";_.each(t.stats,function(u){r+="<option value = '"+u.value+"'>"+AJS.escapeHtml(u.label)+" </option>"});q.html(r)}};var l=function(o){o.next().next(".width-error").remove();var p=f(o.val());var q;if(p){if(n(p)){if(p<100||p>9000){q="wrongNumber"}}else{q="wrongFormat"}}if(q){o.next().after(Confluence.Templates.ConfluenceJiraPlugin.warningValWidthColumn({error:q}));AJS.Editor.JiraChart.disableInsert();return false}return true};var j=function(o){return{jql:o.find(".jira-chart-search-input"),width:o.find("#jira-chart-width"),border:o.find(".jira-chart-show-border"),showinfor:o.find(".jira-chart-show-infor"),displayOption:o.find(".jirachart-display-opts-close, .jirachart-display-opts-open"),server:o.find(".jira-chart-servers")}};var c=function(p,o){p.jql.val(decodeURIComponent(o.jql));p.width.val(o.width);p.border.attr("checked",(o.border==="true"));p.showinfor.attr("checked",(o.showinfor==="true"));if(AJS.Editor.JiraConnector.servers.length>1){p.server.val(o.serverId)}};var b=function(q,o){var p=k(o);return{jql:encodeURIComponent(q.jql.val()),width:f(q.width.val()),border:q.border.prop("checked"),showinfor:q.showinfor.prop("checked"),serverId:p.id,server:p.name,isAuthenticated:!p.authUrl}};var i=function(p,o){return{contentId:AJS.Meta.get("page-id"),macro:{name:"jirachart",params:{jql:p.jql,serverId:p.serverId,width:p.width,border:p.border,showinfor:p.showinfor,chartType:o}}}};var e=function(o){if(o){return AJS.$.trim(o.val())!==""&&o.val()!==o.attr("placeholder")}return false};return{getSelectedServer:k,bindingCommonChartElements:j,bindingCommonDataFromMacroToForm:c,getCommonMacroParamsFromDialog:b,getCommonChartParamsRequest:i,convertSearchTextToJQL:h,convertFormatWidth:f,isChartWidthValid:l,isNumber:n,isJqlNotEmpty:e,populateStatType:d}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/jirachart-panel.js' */
AJS.Editor.JiraChart.Panel=function(){};AJS.Editor.JiraChart.Panel.prototype={init:function(a){var b=this.chartType;var c=Confluence.Templates.ConfluenceJiraPlugin.contentJiraChart({isMultiServer:AJS.Editor.JiraConnector.servers.length>1,chartType:b});a.html(c);this.container=AJS.$(this.containerId);AJS.Editor.JiraChart.clearChartContent(this.container);AJS.Editor.JiraChart.loadServers(this.container);this.bindingChartElements();this.bindingActions()},bindingActions:function(){var e=this;var d=function(){if(e.isFormValid()){AJS.Editor.JiraChart.search(e.container)}else{AJS.Editor.JiraChart.disableInsert()}};var b=e.container.find(e.clickableElements);b.click(d);var f=e.container.find(e.onChangeElements);f.change(d);e.chartElements.jql.change(function(){if(this.value!==e.jqlWhenEnterKeyPress){e.container.find(".jira-chart-img").empty();AJS.Editor.JiraChart.disableInsert()}e.jqlWhenEnterKeyPress=""}).bind("paste",function(){setTimeout(function(){if(e.isFormValid()){e.jqlWhenEnterKeyPress=e.chartElements.jql.val();AJS.Editor.JiraChart.search(e.container)}},100)});var a=e.container.find("input[type='text']");var c=function(g){if(g.hasClass("jira-chart-search-input")){e.jqlWhenEnterKeyPress=g.val()}};a.unbind("keydown").keydown(function(g){if(g.which==13){var h=function(i){a.unbind("keyup",h);if(e.isFormValid()){AJS.Editor.JiraChart.search(e.container)}c(a);return AJS.stopEvent(i)};a.keyup(h);return AJS.stopEvent(g)}});e.bindSelectOption();e.bindingServerChange()},bindingServerChange:function(){var a=this;a.chartElements.server.change(function(){if(a.isFormValid()&&AJS.Editor.JiraChart.validateServerSupportedChart(a.container)){AJS.Editor.JiraChart.search(a.container)}else{AJS.Editor.JiraChart.disableInsert()}})},renderChart:function(){var e=this;var b=this.getChartParamsRequest();var a=Confluence.getContextPath()+"/rest/tinymce/1/macro/preview";var d=this.container.find(".jira-chart-img");d.html('<div class="loading-data"></div>');var c=d.find(".loading-data").first();AJS.$.data(c,"spinner",Raphael.spinner(c[0],50,"#666"));if(e.request){e.request.abort()}e.request=AJS.$.ajax({url:a,type:"POST",contentType:"application/json",data:JSON.stringify(b)}).done(function(f){d.html("").hide();var i=AJS.$('<iframe frameborder="0" id="chart-preview-iframe"></iframe>');i.appendTo(d);var h=i[0].contentWindow,g=h.document;i.on("load",function(){h.AJS.$("#main").addClass("chart-preview-main");d.show();e.handleInsertButton()});f=f.replace("window.onload","var chartTest");g.open();g.write(f);g.close()}).error(function(f){if(f.statusText!="abort"){AJS.log("Jira Chart Macro - Fail to get data from macro preview");d.html(Confluence.Templates.ConfluenceJiraPlugin.jiraChartErrorMessage({message:"Unable to render JIRA chart macro due to an execution error."}))}AJS.Editor.JiraChart.disableInsert()})},resetDialogValue:function(){var a=AJS.$("input",this.container);a.filter(":text").val("");a.filter(":checked").removeAttr("checked");this.container.find(".jira-chart-search-input").val();this.container.find(".jira-chart-img").empty();this.resetDisplayOption()},resetDisplayOption:function(){var b=this;var a=this.chartElements.displayOption;a.addClass("jirachart-display-opts-open");a.removeClass("jirachart-display-opts-close");setTimeout(function(){var c=b.container.find(".jira-chart-option");c.scrollTop(0);c.css({overflow:"hidden",top:"430px"})},0)},bindSelectOption:function(){var c=this;var b=c.container.find(".jira-chart-option");var d=function(g){var f=40;var i=b.position().top+"px";var e="";var h={top:430};if(g){i="";e=f-b.find("#jiraChartMacroOption").height()+"px";h={bottom:0};b.css("overflow","auto")}else{b.css("overflow","hidden")}b.css("top",i);b.css("bottom",e);b.animate(h,500)};b.css("top","430px");var a=this.chartElements.displayOption;a.click(function(g){var f=AJS.$(this);g.preventDefault();if(f.hasClass("disabled")){return}var h=f.hasClass("jirachart-display-opts-open");if(h){d(true);f.addClass("jirachart-display-opts-close");f.removeClass("jirachart-display-opts-open")}else{d();f.removeClass("jirachart-display-opts-close");f.addClass("jirachart-display-opts-open")}})},isImageChartExisted:function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-img").length>0},focusForm:function(){this.container.find(".jira-chart-search-input").focus()},handleInsertButton:function(){if(this.isFormValid()&&this.isResultValid()){AJS.Editor.JiraChart.enableInsert()}else{AJS.Editor.JiraChart.disableInsert()}}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/piechart-panel.js' */
AJS.Editor.JiraChart.Panel.PieChart=function(d){AJS.Editor.JiraChart.Panel.call(this);var a="Pie Chart";var c="pie";var b=this;this.title=a;this.chartType=c;this.containerId="#jira-chart-content-pie";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor";this.onChangeElements="#jira-chart-statType, #jira-chart-width";this.isFormValid=function(){return AJS.Editor.JiraChart.Helper.isChartWidthValid(b.chartElements.width)&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(b.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-wrapper").length};this.bindingActions=function(){var e=this;AJS.Editor.JiraChart.Panel.prototype.bindingActions.call(e);e.container.find(".widthInfo").tooltip({gravity:"w"})};this.bindingServerChange=function(){b.chartElements.server.change(function(){AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.statType);if(b.isFormValid()){AJS.Editor.JiraChart.search(b.container)}else{AJS.Editor.JiraChart.disableInsert()}})};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.statType=this.container.find("#jira-chart-statType")};this.getChartParamsRequest=function(){var f=this.getMacroParamsFromDialog();var e=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(f,this.chartType);e.macro.params.statType=f.statType;return e};this.getMacroParamsFromDialog=function(){var e=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);e.chartType=c;e.statType=this.chartElements.statType.val();return e};this.bindingDataFromMacroToForm=function(e){if(e){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(this.chartElements,e);this.chartElements.statType.val(e.statType)}};this.preBinding=function(){AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#jira-chart-statType"))}};AJS.Editor.JiraChart.Panel.PieChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.PieChart.prototype.constructor=AJS.Editor.JiraChart.Panel.PieChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.PieChart(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/createdvsresolvedchart-panel.js' */
AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart=function(e){AJS.Editor.JiraChart.Panel.call(this);var d="createdvsresolved";var c=this;var a=function(){c.container.find("#created-vs-resolved-chart-periodName").val("daily");c.container.find("#created-vs-resolved-chart-daysprevious").val("30")};var b=function(){var h=c.chartElements.periodName.val();var g=e.trim(c.chartElements.daysprevious.val());var f=c.container.find(".days-previous-error");if(g===""){c.container.find(".days-previous-error").html("Days Previously is required field.");return false}if(!AJS.Editor.JiraChart.Helper.isNumber(g)||g<0){f.html("Days Previously must be a number and positive.");return false}switch(h){case"hourly":isValid=g<=10;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",10,h))}break;case"daily":isValid=g<=300;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",300,h))}break;case"weekly":isValid=g<=1750;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",1750,h))}break;case"monthly":isValid=g<=7500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",7500,h))}break;case"quarterly":isValid=g<=22500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",22500,h))}break;case"yearly":isValid=g<=36500;if(!isValid){f.html(AJS.format("Days must not exceed {0} for {1} period",36500,h))}break;default:isValid=false}if(isValid){f.empty()}return isValid};this.title="Created vs Resolved";this.chartType=d;this.containerId="#jira-chart-content-createdvsresolved";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor, #created-vs-resolved-chart-cumulative, #created-vs-resolved-chart-showunresolvedtrend";this.onChangeElements="#created-vs-resolved-chart-periodName, #created-vs-resolved-chart-daysprevious, #created-vs-resolved-chart-versionLabel, #jira-chart-width";this.isFormValid=function(){var f=AJS.Editor.JiraChart.Helper.isChartWidthValid(c.chartElements.width);return b()&&f&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(c.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".jira-chart-macro-wrapper").length};this.init=function(f){AJS.Editor.JiraChart.Panel.prototype.init.call(this,f);a()};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.periodName=this.container.find("#created-vs-resolved-chart-periodName");this.chartElements.daysprevious=this.container.find("#created-vs-resolved-chart-daysprevious");this.chartElements.isCumulative=this.container.find("#created-vs-resolved-chart-cumulative");this.chartElements.showUnresolvedTrend=this.container.find("#created-vs-resolved-chart-showunresolvedtrend");this.chartElements.versionLabel=this.container.find("#created-vs-resolved-chart-versionLabel")};this.bindingActions=function(){AJS.Editor.JiraChart.Panel.prototype.bindingActions.call(this);this.container.find(".widthInfo").tooltip({gravity:"w"});this.container.find(".showunresolvedtrendInfo").tooltip({gravity:"w"});this.container.find(".cumulativeInfo").tooltip({gravity:"w"});this.container.find(".versionLabelInfo").tooltip({gravity:"w"});this.container.find(".daysPreviousInfo").tooltip({gravity:"w"})};this.getChartParamsRequest=function(){var g=this.getMacroParamsFromDialog();var f=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(g,this.chartType);f.macro.params.periodName=g.periodName;f.macro.params.daysprevious=g.daysprevious;f.macro.params.isCumulative=g.isCumulative;f.macro.params.showUnresolvedTrend=g.showUnresolvedTrend;f.macro.params.versionLabel=g.versionLabel;return f};this.getMacroParamsFromDialog=function(){var f=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);f.chartType=d;f.periodName=this.chartElements.periodName.val();f.daysprevious=e.trim(this.chartElements.daysprevious.val());f.isCumulative=this.chartElements.isCumulative.prop("checked");f.showUnresolvedTrend=this.chartElements.showUnresolvedTrend.prop("checked");f.versionLabel=this.chartElements.versionLabel.val();return f};this.resetDialogValue=function(){AJS.Editor.JiraChart.Panel.prototype.resetDialogValue.call(this);a()};this.bindingDataFromMacroToForm=function(f){if(f){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(c.chartElements,f);c.chartElements.isCumulative.attr("checked",(f.isCumulative!=="false"));c.chartElements.showUnresolvedTrend.attr("checked",(f.showUnresolvedTrend==="true"));c.chartElements.periodName.val(f.periodName===""?"daily":f.periodName);c.chartElements.versionLabel.val(f.versionLabel);c.chartElements.daysprevious.val(f.daysprevious===""?"30":f.daysprevious)}}};AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart.prototype.constructor=AJS.Editor.JiraChart.Panels.CreatedVsResolvedChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.CreatedVsResolvedChart(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jirachart-macro', location = '/jirachart/twodimensionalchart-panel.js' */
AJS.Editor.JiraChart.Panel.TwoDimensionalChart=function(d){AJS.Editor.JiraChart.Panel.call(this);var c="twodimensional";var f=5;var b=this;var e=function(){var h=d(".twodimensional-number-of-result-error");var g=b.chartElements.numberToShow.val();if(AJS.Editor.JiraChart.Helper.isNumber(g)&&g>0){h.empty();return true}h.html("The number of rows should be a positive integer");return false};var a=function(){b.chartElements.numberToShow.val(f);b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees")};this.title="Two Dimensional";this.chartType=c;this.containerId="#jira-chart-content-twodimensional";this.clickableElements=".jira-chart-search button, .jira-chart-show-border, .jira-chart-show-infor, #twodimensional-show-total";this.onChangeElements="#twodimensional-xaxis, #twodimensional-yaxis, #twodimensional-number-of-result";this.isFormValid=function(){var g=e();return g&&AJS.Editor.JiraChart.Helper.isJqlNotEmpty(b.chartElements.jql)};this.isResultValid=function(){return this.container.find("#chart-preview-iframe").contents().find(".two-dimensional-chart-table").length};this.init=function(g){AJS.Editor.JiraChart.Panel.prototype.init.call(this,g);a()};this.bindingChartElements=function(){this.chartElements=AJS.Editor.JiraChart.Helper.bindingCommonChartElements(this.container);this.chartElements.xstattype=this.container.find("#twodimensional-xaxis");this.chartElements.ystattype=this.container.find("#twodimensional-yaxis");this.chartElements.sortBy=this.container.find("#twodimensional-sortby");this.chartElements.sortDirection=this.container.find("#twodimensional-sort-direction");this.chartElements.showTotals=this.container.find("#twodimensional-show-total");this.chartElements.numberToShow=this.container.find("#twodimensional-number-of-result")};this.getChartParamsRequest=function(){var h=this.getMacroParamsFromDialog();var g=AJS.Editor.JiraChart.Helper.getCommonChartParamsRequest(h,this.chartType);g.macro.params.xstattype=h.xstattype;g.macro.params.ystattype=h.ystattype;g.macro.params.sortBy=h.sortBy;g.macro.params.sortDirection=h.sortDirection;g.macro.params.showTotals=h.showTotals;g.macro.params.numberToShow=h.numberToShow;return g};this.getMacroParamsFromDialog=function(){var g=AJS.Editor.JiraChart.Helper.getCommonMacroParamsFromDialog(this.chartElements,this.container);g.chartType=c;g.xstattype=this.chartElements.xstattype.val();g.ystattype=d.trim(this.chartElements.ystattype.val());g.sortBy=d.trim(this.chartElements.sortBy.val());g.sortDirection=d.trim(this.chartElements.sortDirection.val());g.showTotals=this.chartElements.showTotals.prop("checked");g.numberToShow=this.chartElements.numberToShow.val();return g};this.bindingDataFromMacroToForm=function(g){if(g){AJS.Editor.JiraChart.Helper.bindingCommonDataFromMacroToForm(b.chartElements,g);b.chartElements.xstattype.val(g.xstattype);b.chartElements.ystattype.val(g.ystattype);b.chartElements.sortBy.val(g.sortBy);b.chartElements.sortDirection.val(g.sortDirection);b.chartElements.showTotals.attr("checked",g.showTotals==="true");b.chartElements.numberToShow.val(g.numberToShow)}};this.resetDialogValue=function(){AJS.Editor.JiraChart.Panel.prototype.resetDialogValue.call(this);a()};this.isImageChartExisted=function(){return this.container.find("#chart-preview-iframe").contents().find(".two-dimensional-chart-table").length>0};this.preBinding=function(){AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#twodimensional-xaxis"));AJS.Editor.JiraChart.Helper.populateStatType(this.container,this.container.find("#twodimensional-yaxis"));b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees")};this.bindingServerChange=function(){b.chartElements.server.change(function(){AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.xstattype);AJS.Editor.JiraChart.Helper.populateStatType(b.container,b.chartElements.ystattype);b.chartElements.xstattype.val("statuses");b.chartElements.ystattype.val("assignees");if(b.isFormValid()){AJS.Editor.JiraChart.search(b.container)}else{AJS.Editor.JiraChart.disableInsert()}})}};AJS.Editor.JiraChart.Panel.TwoDimensionalChart.prototype=AJS.Editor.JiraChart.Panel.prototype;AJS.Editor.JiraChart.Panel.TwoDimensionalChart.prototype.constructor=AJS.Editor.JiraChart.Panel.TwoDimensionalChart;AJS.Editor.JiraChart.Panels.push(new AJS.Editor.JiraChart.Panel.TwoDimensionalChart(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.extra.jira:jim-fabric-editor-support', location = 'editor-plugins/jira-paste-link.js' */
define("confluence/jim/editor-plugins/jira-paste-link",["ajs","confluence-macro-browser/macro-browser-facade"],function(b,c){var a={issueKeyOnlyRegEx:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/,singleTicketXMLEx:/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//,issueKeyWithinRegex:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)(?:\?|#)/,jqlRegEx:/jqlQuery\=([^&]+)/,jqlRegExAlternateFormat:/jql\=([^&]+)/,_getMatchedServerFromLink:function(e,k){var j=null;for(var g in k){if(k.hasOwnProperty(g)){var h=k[g];var d=h.url;var f=h.url[h.url.length-1];if(f!=="/"){d+="/"}if(e.indexOf(d)===0){j=h;break}}}return j},pasteHandler:function(h,i,l){var n=b.Editor.JiraConnector.servers;if(!n){l();return null}var m=b.Editor.JiraAnalytics;var g={};var o=a._getMatchedServerFromLink(h.source,n);var j=null;if(o){var e=a.jqlRegEx.exec(h.source)||a.jqlRegExAlternateFormat.exec(h.source);var d=b.JQLHelper.isFilterUrl(h.source);var k=a.issueKeyOnlyRegEx.exec(h.source)||a.issueKeyWithinRegex.exec(h.source);if(k){k=k[2];if(m){g.type=m.linkTypes.jql}}else{k=a.singleTicketXMLEx.exec(h.source);if(k){k=k[1];if(m){g.type=m.linkTypes.xml}}}if(e){g.is_single_issue=false;g.type=b.JQLHelper.checkQueryType(h.source);j={name:"jira",params:{jqlQuery:decodeURIComponent(e[1].replace(/\+/g,"%20")),server:o.name,serverId:o.id}}}else{if(d){var f=h.source;g.is_single_issue=false;g.type=b.JQLHelper.checkQueryType(f);j={name:"jira",params:{jqlQuery:b.JQLHelper.getFilterFromFilterUrl(f),server:o.name,serverId:o.id}}}else{if(k){g.is_single_issue=true;j={name:"jira",params:{key:k,server:o.name,serverId:o.id}}}}}}if(c.isInTinyMceEditor()){if(j){window.tinymce.plugins.Autoconvert.convertMacroToDom(j,l,l);if(m){m.triggerPasteEvent(g)}}else{l()}}else{return j}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:event', location = 'includes/js/api/event.js' */
define("confluence/api/event",["ajs"],function(a){return{bind:function(){a.bind.apply(this,arguments)},unbind:function(){a.unbind.apply(this,arguments)},trigger:function(){a.trigger.apply(this,arguments)},stopEvent:function(){a.stopEvent.apply(this,arguments)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-for-fabric', location = 'editor/page-editor.js' */
define("confluence-editor/editor/page-editor","ajs jquery document window confluence/meta confluence/api/constants confluence-editor/editor/page-editor-message confluence/analytics-support confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/get-content-id confluence/api/event confluence/dark-features".split(" "),function(d,b,k,p,e,w,j,R,c,x,g){function y(){return e.get("content-type")==="page"||e.get("content-type")==="blogpost"}function z(a){b("#editpageform").find("input[name='atl_token']").val(a);
e.set("atl-token",a);e.set("atlassian-token",a);b("#atlassian-token").attr("content",a)}function L(a){if(!y()&&a){z(a.atlToken);g.trigger("rte.heartbeat",a)}else if(!a||!a.atlToken){if(a.status==="unauthorised")if(options.movedBy){j.closeMessages(["heartbeat-error"]);j.handleMessage("heartbeat-error",{type:"error",title:"Page permissions have changed",message:"You can\'t publish due to a page move or change in restrictions. You will be redirected in 10 seconds."})}else{j.closeMessages(["heartbeat-error"]);
j.handleMessage("heartbeat-error",{type:"error",title:"No access to this page",message:"This content has been moved, restricted, or deleted. You will be redirected in 10 seconds."})}g.trigger("rte.heartbeat-error","Invalid server response");d.logError("Unexpected server response for heartbeat:");d.log(a);setTimeout(function(){var a=e.get("base-url")+"/pages/viewpage.action?pageId="+e.get("content-id");p.location=a},1E4)}else{e.set("contributors-hash",a.contributorsHash);z(a.atlToken);
c.heartbeatType.normal();g.trigger("rte.heartbeat",a);b(k).trigger("resize.resizeplugin");g.trigger("editor-heartbeat",a)}}function M(a,b,f){(a.status>=500||a.status===0)&&c.heartbeatType.recovery();if(a.status===403||a.status===401)d.logError("Heartbeat error: Unauthorized");else{d.logError("Server error on heartbeat request:");d.log(f)}g.trigger("rte.heartbeat-error",a)}var n=[],m=[],l=[],A=false,o,B=function(a){c.UI.setButtonState(a,c.UI.saveButton);c.UI.setButtonState(a,c.UI.previewButton);c.UI.setButtonState(a,
c.UI.cancelButton)},q=function(a){var a=a||{},b=a.messageKey||"editor-error-message",c=a.message||"Something went wrong with the editor. Copy your unsaved changes and refresh the page to keep editing.";j.handleMessage(b,{title:a.title,type:"error",message:c},function(){a.disablePublish&&B(false)})},C=function(){g.trigger("analytics",{name:"confluence.editor.update",data:{contentId:e.get("content-id"),notifiedWatchers:b("#notifyWatchers").is(":checked"),addedVersionComment:b("#versionComment").val()!=null&&b("#versionComment").val().length>0,contentType:e.get("content-type"),
isTitleChanged:e.get("latest-published-page-title")!==b("#content-title").val(),spaceKey:e.get("space-key"),isNeverPublished:e.get("page-id")==="0"}})},O=function(a){var b=true;j.closeMessages(["offline-before-save-error"]);for(var c=0;c<m.length;c++){m[c](a)===false&&(b=false);if(a.isImmediatePropagationStopped())break}if(!b||a.isDefaultPrevented()||a.isPropagationStopped())return false;a.preventDefault();D(a).done(function(a){a=E(a);if(a==null){d.warn("Expected deferred object not returned by save handler");
C()}else a.done(C)}).fail(N)},N=function(a){var b=a||{};q({messageKey:b.messageKey||"offline-before-save-error",message:b.disablePublish?"Something went wrong with the editor. Copy your unsaved changes and refresh the page to keep editing.":"Unable to communicate with server. Saving is not possible at the moment.",disablePublish:b.disablePublish});a&&g.trigger("analytics",{name:"editor.save.error."+a.origin+"."+a.cause});c.UI.toggleSavebarBusy(false);c.Drafts.bindUnloadMessage()},D=function(a){var i=b.Deferred();i.resolve(a);return i.promise()},E=function(){b(c.getCurrentForm()).submit()};
g.bind("rte-ready",function(){c.UI.saveButton.bind("click",O)});g.bind("editor.error.message",function(a,b){q(b)});g.bind("dismiss.editor.error.message",function(a,b){j.closeMessages([b.messageKey]);b.enablePublish&&B(true)});var P=function(){var a;for(a=0;a<n.length;a++)c.UI.cancelButton.click(n[a]);var i=b(c.getCurrentForm());for(a=0;a<l.length;a++)i.submit(l[a]);b.unbind("init.rte",this)},F=function(a,c,f,e){e.push(f);if(d.Rte&&d.Rte.BootstrapManager&&d.Rte.BootstrapManager.isInitComplete())a.bind(c,
f);else if(!A){A=true;b.bind("init.rte",P)}},s=function(a,b,c){var e=null;d.Rte&&(d.Rte.BootstrapManager&&d.Rte.BootstrapManager.isInitComplete())&&(e=function(a,b,c){a.unbind(b,c)});for(var g=c.pop();g;){e&&e(a,b,g);g=c.pop()}},G=function(a){if(h!==a){h&&h.clear();a.start(c.heartbeat);h=a}},h,H=e.getNumber("heartbeat-interval")||6E4,t,I;t={start:function(a){d.debug("Changing heartbeat to the normal scheduler");I=setInterval(a,H)},clear:function(){clearInterval(I)}};var J,K=Math.max(H/5,5E3),u,v;
J={start:function(a){d.debug("Changing heartbeat to the recovery scheduler");v=0;var b=function(){a();var c=K*Math.pow(2,v);u=setTimeout(b,Math.min(c,3E5));v++};u=setTimeout(b,K)},clear:function(){clearTimeout(u)}};return{bookmark:"",MODE_RICHTEXT:"richtext",MODE_SOURCE:"source",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:null,contentHasChangedSinceLastSave:false,sourceInitialValue:false,isSubmitting:false,isCancelling:false,overrideBeforeSave:function(a){D=a},overrideSave:function(a){E=
a},addCancelHandler:function(a){F(c.UI.cancelButton,"click",a,n)},addSaveHandler:function(a){m.push(a)},addSubmitHandler:function(a){F(b(c.getCurrentForm()),"submit",a,l)},removeAllCancelHandlers:function(){s(c.UI.cancelButton,"click",n)},removeAllSaveHandlers:function(){s(c.UI.saveButton,"click",m)},removeAllSubmitHandlers:function(){s(b(c.getCurrentForm()),"submit",l)},hasContentChanged:function(){return!this.inRichTextMode()&&!this.contentHasChangedSinceLastSave?false:this.editorHasContentChanged()},
editorHasContentChanged:function(){if(d.Rte.getEditor()==null){d.debug("Editor: editorHasContentChanged - No active editor present. Returning false.");return false}return d.Rte.Content.editorHasContentChanged()},isEmpty:function(){var a=b(d.Rte.getEditor().getContent()).text();return!b.trim(a)},getCurrentTitle:function(){return b("#content-title")&&b("#content-title").val()},contentFormSubmit:function(){b(".editable-title #content-title").prop("disabled",true);return true},metadataSyncRequired:y,
heartbeat:function(a){var a=a||{},c={dataType:"json",contentId:e.get("content-id"),draftType:e.get("content-type"),collabService:"synchrony",editorVersion:"v1"};o=b.ajax({url:w.CONTEXT_PATH+"/api/v2/editor/heartbeat/start",type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},async:a.synchronousHeartbeat!==true}).done(L.bind(this)).fail(M.bind(this))},heartbeatType:{normal:function(){G(t)},recovery:function(){G(J)},reset:function(){h&&
h.clear();h=t;h.start(c.heartbeat)},cleanup:function(){if(h){h.clear();h=null}o&&o.abort&&o.abort()}},disableFrame:function(a){b("form",a).each(function(){b(this).unbind();this.onsubmit=function(){return false}});b("a",a).each(function(){b(this).attr("target","_top").unbind()});b("input, img",a).each(function(){b(this).unbind()})},previewFrameOnload:function(a,i){var f=require("tinymce");c.setMode(c.MODE_PREVIEW);f.activeEditor.setProgressState(false);c.disableFrame(a);var g=b("#main",a)[0];if(e.get("content-type")!==
"comment"&&b(g).find("#main-header").length===0){var h=b("#title-heading"),j=h.attr("class");b(g).prepend('<div id="preview-header"><div id="title-heading" class="'+j+'">'+h.html()+"</div></div>")}if(b(d.Rte.getEditor().getBody()).hasClass("resizable")){var r=b(i||"#previewArea iframe"),n=0,m=0,l,o=r.height();g&&function Q(){var a=b(g).outerHeight(true);if(n!==a){a!==r.height()&&r.height(0).height(Math.max(a,o));n=a;m=0}else m++;m<500&&(l=setTimeout(Q,500))}();b(k).one("mode-changed.resize-editor",
function(a,b){b!==c.MODE_PREVIEW&&l&&clearTimeout(l)})}else if(f.isIE||f.isOpera){f=b(p).height();h=b("#header-precursor").height()+b("#header").height()+b("#editor-precursor").height();j=b("#savebar-container").height();b("#preview iframe").height(f-h-j-4);b("#content.edit").height("auto")}},showRichText:function(a){var i=require("tinymce");d.setVisible("#wysiwyg",a);b(".toolbar-group-edit").toggleClass("assistive",a);b(".toolbar-group-preview").toggleClass("assistive",!a);b("#main").toggleClass("active-richtext",
a);i.isGecko&&a&&d.Rte.fixEditorFocus(c.bookmark)},showPreview:function(a){if(e.get("content-type")!=="comment"){var c=b("#content-title");if(c.hasClass("placeholded")){b("#preview-title-text").text("");b("#title-text").text("")}else{b("#preview-title-text").text(c.val());b("#title-text").text(c.val())}}d.setVisible("#preview",a);b(".toolbar-group-preview").toggleClass("assistive",a);b(".toolbar-group-edit").toggleClass("assistive",!a);b("#main, .editor-container").toggleClass("active-preview",a);
e.get("content-type")!=="comment"&&b("#full-height-container").length&&b("#full-height-container").toggleClass("active-preview",a)},showSource:function(a){a?this.showSourceArea():this.hideSourceArea();b("#main")[a?"addClass":"removeClass"]("active-source")},setMode:function(a){d.debug("Set mode: "+a);if(a===c.MODE_RICHTEXT){this.showRichText(true);this.showPreview(false);this.showSource(false)}else if(a===c.MODE_SOURCE){this.showSource(true);this.showRichText(false);this.showPreview(false)}else if(a===
c.MODE_PREVIEW){this.showPreview(true);this.showRichText(false);this.showSource(false);c.UI.spinner.removeClass("aui-icon-wait")}setTimeout(function(){var a=b(".toolbar-group-preview");a.height(0);a.height();a.height("auto");a.height("")},1);this.currentEditMode=a;b(k).trigger("mode-changed",[a])},getContentId:function(){return x()},addErrorMessage:function(a,c,f){var e=b("#"+a),f=f?"#all-messages":"#editor-messages";e.length?e.empty():e=b("<div></div>").attr("id",a).appendTo(f);d.messages.error(e,
{closeable:true,body:c})},changeMode:function(a,i){var f=require("tinymce");d.debug("Change mode: "+a);i=i||{};if(this.inRichTextMode()&&!d.Rte.BootstrapManager.isInitComplete()||this.currentEditMode===a)return false;var h=this.currentEditMode;g.trigger("rte-changeMode",a);if(a===c.MODE_PREVIEW){var m=d.Rte.getEditor();h===c.MODE_SOURCE&&c.transferSourceToEditor();if(f.isGecko&&h===c.MODE_RICHTEXT&&!c.bookmark)c.bookmark=f.activeEditor.selection.getBookmark();this.currentEditMode=a;f=function(a){typeof a!==
"object"&&(a={draftId:x()});a={contentId:a.draftId,contentType:e.get("content-type"),spaceKey:e.get("space-key"),xHtml:m.getContent(),outputType:c.PREVIEW_OUTPUT_TYPE};d.safe.ajax({type:"POST",url:w.CONTEXT_PATH+"/pages/rendercontent.action",data:a,success:c.replysetPreviewArea,timeout:2E4,error:function(){g.trigger("rte.preview.error",{status:0});j.closeMessages(["server-offline"]);q({messageKey:"server-offline",message:"Can\'t reach the server. Check you\'re connected to the internet and Confluence is up and running.",disablePublish:false});c.currentEditMode=
h;i.errorCallback&&i.errorCallback()}})};e.get("content-type")==="comment"?f():c.Drafts.save({forceSave:true,onSuccessHandler:f,onErrorHandler:f})}else this.setMode(a);a===c.MODE_RICHTEXT&&b(k).trigger("resize.resizeplugin");if(h===c.MODE_PREVIEW)if(f=k.getElementById("editor-preview-iframe")){var l=f.contentDocument||f.contentWindow.document;l.removeChild(l.documentElement);b(f).remove()}return false},replysetPreviewArea:function(a){var c=require("tinymce");b("#preview-error").remove();c.activeEditor.setProgressState(true);
var c=b("#previewArea"),d=b('<iframe id="editor-preview-iframe" src="about:blank" scrolling="yes" frameborder="0"></iframe>');c.html(d);c=d[0].contentDocument||d[0].contentWindow.document;c.open();c.write(a);c.close()},inRichTextMode:function(){return this.currentEditMode===c.MODE_RICHTEXT},isNewPage:function(){return b("#createpageform, #createpagetemplate").length>0},onInit:function(){var a=require("tinymce");c.setMode(c.MODE_RICHTEXT);a.activeEditor.onClick.add(function(){var a=c.UI.postingDatePicker;
a&&a.hide()})},contentChangeHandler:function(){this.contentHasChangedSinceLastSave=true},getCurrentForm:function(){return require("tinymce").activeEditor.formElement},transferSourceToEditor:function(){var a=c;if(a.sourceInitialValue){var b=a.getSourceAreaVal();if(b!==a.sourceInitialValue){var d=require("tinymce").activeEditor;d.setContent(b);d.setDirty(b)}}a.sourceInitialValue=false},hideSourceArea:function(){b("#editor-html-source-container").addClass("hidden");this.setToolBarInactive(false);this.transferSourceToEditor();
b("#rte-button-source-mode").removeClass("active");b("#rte-button-publish").unbind("click.source-save")},showSourceArea:function(){var a=require("tinymce");b("#editor-html-source-container").removeClass("hidden");this.setSourceAreaHeight();this.setToolBarInactive(true);this.sourceInitialValue=a.activeEditor.getContent();this.setSourceAreaVal(this.sourceInitialValue);b("#rte-button-source-mode").addClass("active");b("#rte-button-publish").bind("click.source-save",c.transferSourceToEditor)},getSourceAreaVal:function(){return b("#editor-html-source").val()},
setSourceAreaVal:function(a){b("#editor-html-source").val(a)},setSourceAreaHeight:function(){var a=d.Rte.getTinyMceEditorMinHeight();d.debug("HTML source height= "+a);var c=b("#editor-html-source")[0].scrollHeight;if(c>a){a=c;d.debug("ACTUAL HEIGHT "+c)}b("#editor-html-source-container").height(a+"px")},setToolBarInactive:function(a){b("#rte-toolbar").toggleClass("disabled",a)},isVisible:function(){return b("#wysiwyg:visible").length>0||b("#editor-html-source-container:visible").length>0||b("#preview:visible").length>
0}}});require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor",function(d){var b=require("jquery"),k=require("ajs"),p=require("confluence/api/event");k.Editor=k.Editor||{};Confluence.Editor=b.extend(Confluence.Editor||{},k.Editor,d);k.toInit(function(){p.bind("init.rte",Confluence.Editor.onInit)});k.Editor=Confluence.Editor});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-utilities-resources', location = 'utils/roadmap-helper.js' */
(function(b,a){var c=Confluence.Roadmap=Confluence.Roadmap||{};c.Helper={getPosXOnMonthTimeline:function(g,e){var j=moment(g.startDate).startOf("month");var f=moment(e).startOf("month");var d=c.DateUtilities.getNumberOfMonths(j,f);var i=d*Roadmap.MONTH_WIDTH;var h=c.DateUtilities.getMilisecondsFromStartMonth(e)*Roadmap.MONTH_WIDTH/c.DateUtilities.getMilisecondsInMonth(e);return Math.round(i+h)},getPosXOnWeekTimeline:function(g,d){var e=moment(g.startDate).startOf("isoWeek");var f=moment(d).diff(e,"weeks",true);var h=f*Roadmap.WEEK_WIDTH;return Math.round(h)},getWidthTimeline:function(f,e){var d=e.duration;if(f.displayOption===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){d*=Roadmap.MONTH_WIDTH}else{d*=Roadmap.WEEK_WIDTH}return d<Roadmap.EXTRA_SPACE_AROUND?0:Math.round(d-Roadmap.EXTRA_SPACE_AROUND)},getMonthStartDateByPosition:function(i,h){var d=Math.floor(h/Roadmap.MONTH_WIDTH);var g=moment(i.startDate).startOf("month");var e=g.add(d,"months").toDate();var f=Math.abs(h)%Roadmap.MONTH_WIDTH;if(f!==0&&d<0){f=Roadmap.MONTH_WIDTH-f}var j=c.DateUtilities.getMilisecondsInMonth(e)*f/Roadmap.MONTH_WIDTH;return new Date(e.getTime()+j)},getWeekStartDateByPosition:function(f,e){var h=moment(f.startDate).startOf("isoWeek");var d=e/Roadmap.WEEK_WIDTH;var g=d*c.DateUtilities.MILLISECONDS_A_WEEK;return new Date(h.valueOf()+g)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var e=Math.random()*16|0,d=f=="x"?e:(e&3|8);return d.toString(16)})}};c.ColorHelper={resetColorCounts:function(){a.each(Roadmap.COLORS,function(d){d.count=0})},findColor:function(d){return a.find(Roadmap.COLORS,function(e){return e.lane===d.lane})},adjustColorCount:function(e,f){var d=c.ColorHelper.findColor(e);if(d){d.count=d.count+f}},getColor:function(){return a.min(Roadmap.COLORS,function(d){return d.count})}}}(AJS.$,window._));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-utilities-resources', location = 'utils/roadmap-utilities.js' */
(function(b,a){var c=Confluence.Roadmap=Confluence.Roadmap||{};c.DateUtilities={MILLISECONDS_A_DAY:86400000,MILLISECONDS_A_WEEK:604800000,parseDate:function(e){var d=moment(e,Roadmap.SHORT_DATE_FORMAT,true);if(d.isValid()){return d}d=moment(e,Roadmap.TWO_YY_SHORT_DATE_FORMAT,true);return d.isValid()?d:null},getDateStringFromDate:function(e,d){if(d){return moment(e).format(d)}return moment(e).format(Roadmap.DATE_FORMAT)},getDateFromDateString:function(e,d){return moment(e,d||Roadmap.DATE_FORMAT).toDate()},getNumberOfMonths:function(e,d){var g=moment(e),f=moment(d);return f.diff(g,"months")},getMilisecondsInMonth:function(d){return moment(d).daysInMonth()*c.DateUtilities.MILLISECONDS_A_DAY},getMilisecondsFromStartMonth:function(d){return d.getTime()-moment(d).startOf("month").valueOf()},calculateDurationInformation:function(d){var g=c.DateUtilities.getMilisecondsInMonth(d.toDate());var e=c.DateUtilities.getMilisecondsFromStartMonth(d.toDate());var f=g-e;return{totalMillisOfMonth:g,millisFromStartMonth:e,millisRemainingOfMonth:f,durationOfMonth:e/g,remainingDurationOfMonth:f/g}},convertToWeekDuration:function(e,g){var l=moment(e);var j=l.clone();var m=c.DateUtilities.calculateDurationInformation(l);if(g<=m.remainingDurationOfMonth){var f=g*m.totalMillisOfMonth;j=j.add(f,"ms")}else{j=j.add(m.millisRemainingOfMonth,"ms");g=g-m.remainingDurationOfMonth;var h=Math.floor(g);if(h>0){j=j.add(h,"months")}var k=g%1;var i=c.DateUtilities.getMilisecondsInMonth(j.toDate());var d=k*i;j.add(d,"ms")}return j.diff(l,"weeks",true)},convertToMonthDuration:function(e,j){var k=moment(e);var f=j*c.DateUtilities.MILLISECONDS_A_WEEK;var i=k.clone().add(f,"ms");var h=i.get("year")*12+i.get("month");h=h-(k.get("year")*12+k.get("month"));var l=c.DateUtilities.calculateDurationInformation(k);if(h===0){return f/l.totalMillisOfMonth}else{var g=l.remainingDurationOfMonth;var d=c.DateUtilities.calculateDurationInformation(i);g=g+d.durationOfMonth;g=g+(h-1);return g}}};c.FieldUtilities={fixDatePickerFields:function(d){var e=d.find("input[data-aui-dp-uuid]");e.each(function(f,g){var i=b(g),h=i.attr("data-aui-dp-uuid");i.on("click focus",function(){var j=b("[data-aui-dp-popup-uuid="+h+"]");if(AJS.version<="5.4.5"){var k=j.datepicker("option","onSelect");j.datepicker("option","onSelect",function(m,l){k(m,l);i.change()})}j.parents(".aui-inline-dialog").addClass("datepicker-roadmap-patch")})})}}}(AJS.$,window._));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-models', location = '/models/model.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.Bar=Backbone.Model.extend({defaults:function(){return{id:Confluence.Roadmap.Helper.guid(),title:"New Bar",description:"",startDate:new Date(),duration:1,rowIndex:0,pageLink:{}}}});Roadmap.Lane=Backbone.Model.extend({defaults:function(){return{title:"New Lane",color:Confluence.Roadmap.ColorHelper.getColor(),bars:[]}},initialize:function(){var a=new Roadmap.Bars(this.get("bars"));this.set("bars",a)},getNumberOfRows:function(){var a=this.get("bars");if(a.length===0){return 0}var b=0;a.each(function(c){b=Math.max(c.get("rowIndex"),b)});return b+1}});Roadmap.Marker=Backbone.Model.extend({defaults:function(){return{title:"Marker"}}});Roadmap.Timeline=Backbone.Model.extend({defaults:function(){return{displayOption:Roadmap.TIMELINE_DISPLAY_OPTION.MONTH}},validate:function(a){var d=[];var c=Confluence.Roadmap.DateUtilities.parseDate(a.startDateString);var b=Confluence.Roadmap.DateUtilities.parseDate(a.endDateString);if(!c||!b){d.push({name:"date",message:"Enter dates in yy-mm-dd"})}else{if(c.diff(b)>=0){d.push({name:"endDate",message:"Start date needs to be before the end date"})}else{if(b.diff(c,"years",true)>Roadmap.TIMELINE_YEARS_LIMIT){d.push({name:"endDate",message:AJS.format("You cannot plan more than {0} years ahead.",Roadmap.TIMELINE_YEARS_LIMIT)})}}}return d.length>0?d:false},calculateTimelineColumns:function(){var d=this.get("startDate");var f=this.get("endDate");var c=[];var e;if(this.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){e=moment(d).clone().startOf("month");var b=moment(f).clone().endOf("month");do{c.push({month:Confluence.Roadmap.DateUtilities.getDateStringFromDate(e,Roadmap.MONTH_FORMAT),year:e.get("year")});e.add(1,"months")}while(e.diff(b)<0)}else{e=moment(d).clone().startOf("isoWeek");var a=moment(f).clone().endOf("isoWeek");do{c.push({month:Confluence.Roadmap.DateUtilities.getDateStringFromDate(e,Roadmap.WEEK_FORMAT),year:e.get("year")});e.add(1,"weeks")}while(e.diff(a)<0)}this.attributes.displayTimelineColumns=c}});Roadmap.Roadmap=Backbone.Model.extend({defaults:function(){return{title:"Roadmap Planner",lanes:[],markers:[]}},initialize:function(){var a=new Roadmap.Lanes(this.get("lanes"));this.set("lanes",a);var c=new Roadmap.Markers(this.get("markers"));this.set("markers",c);var b=new Roadmap.Timeline(this.get("timeline"));this.set("timeline",b)},parse:function(a){if(!a.timeline){return Roadmap.getDefaultRoadmapData()}return this.fromMacroData(a)},fromMacroData:function(c){var b=c.timeline;b.startDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(b.startDate);b.endDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(b.endDate);var a=c.lanes;_.each(a,function(e){var f=e.bars;_.each(f,function(g){g.startDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(g.startDate);if(!g.id){g.id=Confluence.Roadmap.Helper.guid()}});e.bars=f});c.lanes=a;var d=c.markers;_.each(d,function(e){e.markerDate=Confluence.Roadmap.DateUtilities.getDateFromDateString(e.markerDate)});c.markers=d;return c},toMacroData:function(){var c=this.toJSON();var b=c.timeline.toJSON();b.startDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(b.startDate);b.endDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(b.endDate);delete b.displayTimelineColumns;c.timeline=b;var a=c.lanes.toJSON();_.each(a,function(e){var f=e.bars.toJSON();_.each(f,function(g){g.startDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(g.startDate)});e.bars=f});c.lanes=a;var d=c.markers.toJSON();_.each(d,function(e){e.markerDate=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.markerDate)});c.markers=d;return c},updateDurationUnit:function(a){this.get("lanes").each(function(b){b.get("bars").each(function(c){var d;d=a===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?Confluence.Roadmap.DateUtilities.convertToMonthDuration(c.get("startDate"),c.get("duration")):Confluence.Roadmap.DateUtilities.convertToWeekDuration(c.get("startDate"),c.get("duration"));c.attributes.duration=d})})}})})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-models', location = '/models/collection.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.Bars=Backbone.Collection.extend({model:Roadmap.Bar});Roadmap.Lanes=Backbone.Collection.extend({model:Roadmap.Lane});Roadmap.Markers=Backbone.Collection.extend({model:Roadmap.Marker})})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-toolbar-view-resources', location = 'view/roadmap-editor/toolbar/toolbar-templates.soy' */
// This file was automatically generated from toolbar-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Roadmap.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.toolbar = function(opt_data, opt_ignored) {
  return '<div id="roadmap-editor-toolbar" class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-group"><div class="aui-toolbar2-primary">' + aui.buttons.buttons({content: '' + aui.buttons.button({id: 'toolbar-button-add-lane', text: ' ' + soy.$$escapeHtml('Add lane'), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'}) + aui.buttons.button({id: 'toolbar-button-add-bar', text: ' ' + soy.$$escapeHtml('Add bar'), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'}) + aui.buttons.button({id: 'toolbar-button-add-marker', text: ' ' + soy.$$escapeHtml('Add marker'), iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add'})}) + '</div><div class="aui-toolbar2-secondary">' + Confluence.Templates.Roadmap.timelineOptionsForm(null) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.toolbar.soyTemplateName = 'Confluence.Templates.Roadmap.toolbar';
}


Confluence.Templates.Roadmap.timelineOptionsForm = function(opt_data, opt_ignored) {
  return '' + aui.form.form({id: 'timeline-options-form', action: '#', content: '<fieldset>' + aui.form.selectField({id: 'timeline-display-options-select', labelContent: '' + soy.$$escapeHtml('View by'), options: [{text: 'Months', value: 'MONTH'}, {text: 'Weeks', value: 'WEEK'}], extraClasses: 'view-by'}) + aui.form.textField({id: 'timeline-startdate-input', name: 'startDate', isRequired: true, extraClasses: 'roadmap-toolbar-date start-date aui-date-picker'}) + ' - ' + aui.form.textField({id: 'timeline-enddate-input', name: 'endDate', isRequired: true, extraClasses: 'roadmap-toolbar-date end-date aui-date-picker'}) + '<div class="field-group timeline-field-group-error"><div id="roadmap-timeline-error" class="error"></div></div></fieldset>'});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.timelineOptionsForm.soyTemplateName = 'Confluence.Templates.Roadmap.timelineOptionsForm';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-toolbar-view-resources', location = 'view/roadmap-editor/toolbar/toolbar.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.ToolbarView=Backbone.View.extend({className:"roadmap-toolbar",events:{"click #toolbar-button-add-bar":"onAddBarClick","click #toolbar-button-add-lane":"onAddLaneClick","click #toolbar-button-add-marker":"onAddMarkerClick","change #timeline-display-options-select":"onTimelineOptionChange"},initialize:function(){a.bindAll(this,"render")},render:function(){b(this.$el).html(Confluence.Templates.Roadmap.toolbar());this._initVariables();this._setupTimelineOptionsForm();return this},onAddBarClick:function(i){i.preventDefault();var d=this.model.get("lanes").at(0);var c=d.get("bars");var g=this.model.get("timeline");var f=this.model.get("timeline").get("startDate");var h=g.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?moment(f).startOf("month"):moment(f).startOf("isoWeek");c.add(new Roadmap.Bar({rowIndex:d.getNumberOfRows(),startDate:h.toDate()}))},onAddLaneClick:function(d){d.preventDefault();var c=this.model.get("lanes");c.add(new Roadmap.Lane());d.target.blur()},onAddMarkerClick:function(f){var g=this.model.get("markers");var d=this.model.get("timeline");var h=moment(d.get("startDate"));var c=d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?h.date(15):h.isoWeekday(4);g.add(new Roadmap.Marker({markerDate:c.toDate()}))},onTimelineOptionChange:function(d){var c=this.model.get("timeline");c.set({displayOption:this.$timelineSelect.val()})},_initVariables:function(){this.$timelineForm=this.$el.find("#timeline-options-form");this.$startDateInput=this.$timelineForm.find("#timeline-startdate-input");this.$endDateInput=this.$timelineForm.find("#timeline-enddate-input");this.$timelineSelect=this.$timelineForm.find("#timeline-display-options-select");this.$timelineError=this.$timelineForm.find("#roadmap-timeline-error");this.newTimeline=new Roadmap.Timeline()},_clearTimelineErrors:function(){this.$timelineError.empty()},_showTimelineErrors:function(){var c=this;a.each(c.newTimeline.validationError,function(d){c.$timelineError.append(d.message)})},_applyNewTimeline:function(){var c=this.model.get("timeline");var e=Confluence.Roadmap.DateUtilities.parseDate(this.$startDateInput.val());var d=Confluence.Roadmap.DateUtilities.parseDate(this.$endDateInput.val());c.set({startDate:e.toDate(),endDate:d.toDate()});this._showTimeLineFormat()},_showTimeLineFormat:function(){var c=this.model.get("timeline");this.$startDateInput.val(Confluence.Roadmap.DateUtilities.getDateStringFromDate(c.get("startDate"),Roadmap.SHORT_DATE_FORMAT));this.$endDateInput.val(Confluence.Roadmap.DateUtilities.getDateStringFromDate(c.get("endDate"),Roadmap.SHORT_DATE_FORMAT))},_validate:function(){this._clearTimelineErrors();if(this.newTimeline.isValid()){this._applyNewTimeline()}else{this._showTimelineErrors()}},_setupTimelineOptionsForm:function(){var e=this.model.get("timeline");var g=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.get("startDate"),Roadmap.SHORT_DATE_FORMAT),c=Confluence.Roadmap.DateUtilities.getDateStringFromDate(e.get("endDate"),Roadmap.SHORT_DATE_FORMAT);this.$startDateInput.val(g);this.$endDateInput.val(c);this.newTimeline.set({startDateString:g,endDateString:c});this.$timelineSelect.val(e.get("displayOption"));var f={overrideBrowserDefault:true,firstDay:1};this.$startDateInput.datePicker(f);this.$endDateInput.datePicker(f);Confluence.Roadmap.FieldUtilities.fixDatePickerFields(this.$timelineForm);var d=this;this.$startDateInput.on("change",function(){d.newTimeline.set({startDateString:d.$startDateInput.val()});d._validate()});this.$endDateInput.on("change",function(){d.newTimeline.set({endDateString:d.$endDateInput.val()});d._validate()})}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline-templates.soy' */
// This file was automatically generated from timeline-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Roadmap.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.timeline = function(opt_data, opt_ignored) {
  var output = '';
  var displayTimelineList3 = opt_data.displayTimelines;
  var displayTimelineListLen3 = displayTimelineList3.length;
  for (var displayTimelineIndex3 = 0; displayTimelineIndex3 < displayTimelineListLen3; displayTimelineIndex3++) {
    var displayTimelineData3 = displayTimelineList3[displayTimelineIndex3];
    output += '<div class="roadmap-column-title">' + ((displayTimelineIndex3 == 0 || displayTimelineData3.year != opt_data.displayTimelines[displayTimelineIndex3 - 1].year) ? '<span class="roadmap-column-year">' + soy.$$escapeHtml(displayTimelineData3.year) + '</span><br/>' : '') + soy.$$escapeHtml(displayTimelineData3.month) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.timeline.soyTemplateName = 'Confluence.Templates.Roadmap.timeline';
}


Confluence.Templates.Roadmap.timelineColumn = function(opt_data, opt_ignored) {
  var output = '';
  var iLimit14 = opt_data.numberOfColumns;
  for (var i14 = 0; i14 < iLimit14; i14++) {
    output += '<div class="roadmap-column-item">&nbsp;</div>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.timelineColumn.soyTemplateName = 'Confluence.Templates.Roadmap.timelineColumn';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};var c={};c.Helper=Confluence.Roadmap.Helper;Roadmap.TimelineView=Backbone.View.extend({className:"roadmap-frame-title",initialize:function(){a.bindAll(this,"render")},render:function(){this.model.calculateTimelineColumns();this.$el.html(Confluence.Templates.Roadmap.timeline({displayTimelines:this.model.get("displayTimelineColumns")}));return this},update:function(){this.render()},getBarPosition:function(d){if(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){return{left:c.Helper.getPosXOnMonthTimeline(this.model.attributes,d.startDate),width:c.Helper.getWidthTimeline(this.model.attributes,d)}}return{left:c.Helper.getPosXOnWeekTimeline(this.model.attributes,d.startDate),width:c.Helper.getWidthTimeline(this.model.attributes,d)}},getBarDuration:function(d){return(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH)?(d/Roadmap.MONTH_WIDTH):(d/Roadmap.WEEK_WIDTH)},getBarStartDate:function(d){return(this.model.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH)?c.Helper.getMonthStartDateByPosition(this.model.attributes,d):c.Helper.getWeekStartDateByPosition(this.model.attributes,d)}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-timeline-view-resources', location = 'view/roadmap-editor/timeline/timeline-column.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.TimelineColumnView=Backbone.View.extend({className:"roadmap-frame-content",initialize:function(){a.bindAll(this,"render")},render:function(){var c=this.model.get("displayTimelineColumns").length;this.$el.html(Confluence.Templates.Roadmap.timelineColumn({numberOfColumns:c}));return this},updateHeight:function(c){this.$el.height(c)},update:function(){this.render()},getSizeAndPosition:function(){return{width:this.$el.width(),height:this.$el.height(),left:this.$el.position().left,top:this.$el.position().top}}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-dialog-resources', location = 'view/dialog-view.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.InlineDialogView=Backbone.View.extend({initialize:function(c){a.bindAll(this,"_onDocumentClick","_onKeyDown","_shouldHide","_onHide");this._trigger=c.trigger;this._dialogOptions=c.dialogOptions;this._reset();var d=this;b(".roadmap-editor-popup, .roadmap-macro-view").scroll(function(){d.hide()})},_shouldHideWhenClick:function(c){return !b.contains(this._inlineDialog[0],c.target)},_createInlineDialog:function(d,f){var e,g=this;function h(l,k,j){g._getContent(l);j()}function c(){g._onBeforeShow();a.delay(function(){AJS.InlineDialog.current=null;g._onShow();b(document).on({click:g._onDocumentClick,keydown:g._onKeyDown})},g._inlineDialog.getOptions().fadeTime)}var i={hideCallback:this._onHide,initCallback:c,noBind:true,persistent:true,preHideCallback:this._shouldHide};if(f&&f.isSideInlineDialog){a.extend(i,{calculatePositions:a.compose(this._calculateSidePositions,this._getSideDimensions),offsetX:8,offsetY:0});if(Raphael.version){a.extend(i,{getArrowPath:this._getSideArrowPath})}}e=new AJS.InlineDialog(d,"roadmap-dialog",h,a.extend({},i,f));return e},_onHide:function(){b(document).off({click:this._onDocumentClick,keydown:this._onKeyDown})},hide:function(){this._inlineDialog.remove()},_onDocumentClick:function(c){this._shouldHideWhenClick(c)&&this.hide()},_onBeforeShow:b.noop,_onKeyDown:function(f){var c=f.which===b.ui.keyCode.ESCAPE,d=b(f.target).is(":input");if(c&&!d){this.hide()}},_onShow:b.noop,_reset:function(){this._inlineDialog=this._createInlineDialog(this._trigger,this._dialogOptions);this.setElement(this._inlineDialog)},_shouldHide:function(){return true},show:function(){this._inlineDialog.show()},disable:function(){this.$el.find(":input").attr("disabled","disabled")},enable:function(){this.$el.find(":input").removeAttr("disabled")},_onSubmit:function(){throw new Error("DialogView subclasses must implement _onSubmit().")},_getSideDimensions:function(e,i,p,c){var k=c.container.toLowerCase()!=="body";var d=AJS.$(c.container);var l=k?AJS.$(c.container).parent():AJS.$(window);var n=k?d.offset():{left:0,top:0};var j=k?l.offset():{left:0,top:0};var g=i.target;var q=g.offset();var m=g[0].getBoundingClientRect&&g[0].getBoundingClientRect();var f=m?m.width:g.outerWidth();if(c.timelineWidth){var h=g.position();if(h.left+f>c.timelineWidth){f=c.timelineWidth-h.left-1}}var o={screenPadding:10,arrowMargin:5,window:{top:j.top,left:j.left,scrollTop:l.scrollTop(),scrollLeft:l.scrollLeft(),width:l.width(),height:l.height()},scrollContainer:{width:d.width(),height:d.height()},trigger:{top:q.top-n.top,left:q.left-n.left,width:f,height:m?m.height:g.outerHeight()},dialog:{width:e.width(),height:e.height(),offset:{top:c.offsetY,left:c.offsetX}},arrow:{height:e.find(".arrow").outerHeight()}};return o},_calculateSidePositions:function(i){var g=i.screenPadding;var h=i.window;var o=i.trigger;var y=i.dialog;var f=i.arrow;var s=i.scrollContainer;var A={top:o.top-h.scrollTop,left:o.left-h.scrollLeft};var t=Math.floor(o.height/2);var q=Math.floor(y.height/2);var p=Math.floor(f.height/2);var x=A.left-y.offset.left-g;var B=s.width-A.left-o.width-y.offset.left-g;var u=x>=y.width;var e=B>=y.width;var w=!e&&u?"left":"right";var k=A.top+t-p;var m=h.height-k-f.height;g=Math.min(g,k-i.arrowMargin);g=Math.min(g,m-i.arrowMargin);var l=Math.max(A.top-g,0);var c=Math.max(h.height-A.top-o.height-g,0);var d=Math.max(q-t-y.offset.top-l,0);var v=Math.max(q-t+y.offset.top-c,0);var j=d||-v||0;var r={top:o.top+t-q+y.offset.top+j,left:w==="right"?o.left+o.width+y.offset.left:o.left-y.width-y.offset.left};var z="w";var n={position:"absolute",top:q-p-j};if(w==="right"){n.right="auto";n.left=Raphael.version?"-7px":"0px"}else{n.right="-7px";n.left="auto";z="e"}return{dialogLocation:w,popupCss:r,arrowCss:n,gravity:z}},_getSideArrowPath:function(c){return c.dialogLocation==="right"?"M8,0L0,8,8,16":"M8,0L16,8,8,16"},refresh:function(){this._inlineDialog&&this._inlineDialog.refresh()}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-dialog-templates.soy' */
// This file was automatically generated from bar-dialog-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Roadmap.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.barDialog = function(opt_data, opt_ignored) {
  var output = '';
  var hasPageLink__soy3 = opt_data.bar.pageLink != null && opt_data.bar.pageLink.id != null;
  output += '<h3 id="bar-title" class="editable-field">' + soy.$$escapeHtml(opt_data.bar.title) + '</h3><div class="information"><div class="bar-page-link-wrapper">' + ((opt_data.linkPageEditable) ? '<div class="link-update-page ' + ((hasPageLink__soy3) ? 'hidden-field' : '') + '"><a href="#">' + soy.$$escapeHtml('Link page') + '</a></div>' : '') + '<div class="bar-page-link editable-field ' + ((! hasPageLink__soy3) ? 'hidden-field' : '') + '">' + ((hasPageLink__soy3) ? Confluence.Templates.Roadmap.buildPageLink({pageLink: opt_data.bar.pageLink, isEditMode: opt_data.renderOption.isEditMode}) : '') + '</div>' + ((opt_data.linkPageEditable) ? '<div class="link-new-page' + ((hasPageLink__soy3) ? ' hidden-field' : '') + '"><span class=\'page-link-separator\'>\u2022</span><a href="#">' + soy.$$escapeHtml('Create page') + '</a></div>' : '') + '</div><div class="clear"></div><div class="bar-description editable-field">' + soy.$$filterNoAutoescape(opt_data.bar.description) + '</div></div>' + ((opt_data.renderOption.isEditMode) ? '<div class="inner">' + aui.buttons.button({id: 'delete-button', text: 'Delete bar', type: 'link'}) + '</div>' : '');
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.barDialog.soyTemplateName = 'Confluence.Templates.Roadmap.barDialog';
}


Confluence.Templates.Roadmap.buildPageLink = function(opt_data, opt_ignored) {
  return '<a id="roadmap-page-link" href=' + soy.$$escapeHtml("/wiki") + '/pages/viewpage.action?pageId=' + soy.$$escapeHtml(opt_data.pageLink.id) + ' ' + ((opt_data.isEditMode) ? 'target=\'_blank\'' : '') + ' class=\'confluence-link content-type-' + soy.$$escapeHtml(opt_data.pageLink.type) + '\'><span class="link-page-title">' + soy.$$escapeHtml(opt_data.pageLink.title) + '</span></a>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.buildPageLink.soyTemplateName = 'Confluence.Templates.Roadmap.buildPageLink';
}


Confluence.Templates.Roadmap.inlineEditSaveButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'inline-edit-save', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Save'}, iconClass: 'aui-icon-small aui-iconfont-success'});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.inlineEditSaveButton.soyTemplateName = 'Confluence.Templates.Roadmap.inlineEditSaveButton';
}


Confluence.Templates.Roadmap.inlineEditCancelButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'inline-edit-cancel', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Cancel'}, iconClass: 'aui-icon-small aui-iconfont-close-dialog'});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.inlineEditCancelButton.soyTemplateName = 'Confluence.Templates.Roadmap.inlineEditCancelButton';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/roadmap-editinplace.js' */
(function(g){g.fn.editInPlace=function(h){var i=g.extend({},g.fn.editInPlace.defaults,h);d(i);e(i.saving_image);return this.each(function(){var j=g(this);if(j.data("editInPlace")){return}j.data("editInPlace",true);new f(i,j).init()})};g.fn.editInPlace.defaults={url:"",bg_over:"#ffc",bg_out:"transparent",hover_class:"",form_extra_classes:[],show_buttons:false,save_button:'<button class="inplace_save">Save</button>',cancel_button:'<button class="inplace_cancel">Cancel</button>',params:"",field_type:"text",field_extra_classes:[],default_text:"(Click here to add text)",use_html:false,textarea_rows:10,textarea_cols:25,select_text:"Choose new value",select_options:"",text_size:null,saving_text:undefined,saving_image:"",saving_animation_color:"transparent",value_required:false,disable_submit_when_empty:false,element_id:"element_id",update_value:"update_value",original_value:"original_value",original_html:"original_html",save_if_nothing_changed:false,on_blur:"save",cancel:"",callback:null,callback_skip_dom_reset:false,success:null,error:null,error_sink:function(h,i){alert(i)},preinit:null,postclose:null,delegate:null,isAutoCompleteField:false};var c={shouldOpenEditInPlace:function(j,i,h){},willOpenEditInPlace:function(i,h){},didOpenEditInPlace:function(i,h){},shouldCloseEditInPlace:function(j,i,h){},willCloseEditInPlace:function(i,h){},didCloseEditInPlace:function(i,h){},missingCommaErrorPreventer:""};function f(h,i){this.settings=h;this.dom=i;this.originalValue=null;this.didInsertDefaultText=false;this.shouldDelayReinit=false;this.pageLinkHTML=h.pageLinkHTML;this.isEditMode=h.isEditMode;this.addRemoveDialogOnClickListener(this.isEditMode)}g.extend(f.prototype,{init:function(){this.setDefaultTextIfNeccessary();this.connectOpeningEvents()},reinit:function(){if(this.shouldDelayReinit){return}this.triggerCallback(this.settings.postclose,this.dom);this.triggerDelegateCall("didCloseEditInPlace");this.markEditorAsInactive();this.connectOpeningEvents()},setDefaultTextIfNeccessary:function(){if(""!==this.dom.html()){return}this.dom.html(this.settings.default_text);this.didInsertDefaultText=true},connectOpeningEvents:function(){var h=this;this.dom.bind("mouseenter.editInPlace",function(){h.addHoverEffect()}).bind("mouseleave.editInPlace",function(){h.removeHoverEffect()}).bind("click.editInPlace",function(i){h.openEditor(i)})},disconnectOpeningEvents:function(){this.dom.unbind(".editInPlace")},addHoverEffect:function(){if(this.settings.hover_class){this.dom.addClass(this.settings.hover_class)}else{this.dom.css("background-color",this.settings.bg_over)}},removeHoverEffect:function(){if(this.settings.hover_class){this.dom.removeClass(this.settings.hover_class)}else{this.dom.css("background-color",this.settings.bg_out)}},openEditor:function(h){if(!this.shouldOpenEditor(h)){return}this.disconnectOpeningEvents();this.removeHoverEffect();this.removeInsertedDefaultTextIfNeccessary();this.saveOriginalValue();this.markEditorAsActive();this.replaceContentWithEditor();this.setInitialValue();this.workAroundMissingBlurBug();this.connectClosingEventsToEditor();this.triggerDelegateCall("didOpenEditInPlace")},shouldOpenEditor:function(h){if(this.isClickedObjectCancelled(h.target)){return false}if(false===this.triggerCallback(this.settings.preinit,this.dom)){return false}if(false===this.triggerDelegateCall("shouldOpenEditInPlace",true,h)){return false}if(this.settings.isAutoCompleteField&&g(h.target).hasClass("link-page-title")){return false}return true},removeInsertedDefaultTextIfNeccessary:function(){if(!this.didInsertDefaultText||this.dom.html()!==this.settings.default_text){return}this.dom.html("");this.didInsertDefaultText=false},removeDialog:function(){g("#inline-dialog-roadmap-dialog").remove()},addRemoveDialogOnClickListener:function(h){if(!h){g("#roadmap-page-link").on("click",this.removeDialog)}},isClickedObjectCancelled:function(j){if(!this.settings.cancel){return false}var h=g(j).parents().andSelf();var i=h.filter(this.settings.cancel);return 0!==i.length},saveOriginalValue:function(){this.originalValue=a(this.dom.text())},restoreOriginalValue:function(){this.setClosedEditorContent(this.originalValue)},setClosedEditorContent:function(h){h=h||this.settings.default_text;if(this.settings.use_html){this.dom.html(this.pageLinkHTML);this.addRemoveDialogOnClickListener(this.isEditMode)}else{this.dom.text(h)}},workAroundMissingBlurBug:function(){var h=this.dom.find(":input");this.dom.parents(":last").find(".editInPlace-active :input").not(h).blur()},replaceContentWithEditor:function(){var m=this.createEditorElement();var h="inplace_form";if(this.settings.form_extra_classes instanceof Array){h=h+" "+this.settings.form_extra_classes.join(" ")}this.dom.html('<form class="'+h+'" style="display: inline; margin: 0; padding: 0;"></form>');var j=this.dom.find("form");j.append(m);if(this.settings.show_buttons){var i=g('<div class="inline-edit-buttons"></div>');var k=g(this.settings.save_button);k.addClass("inplace_save");i.append(k);var l=g(this.settings.cancel_button);l.addClass("inplace_cancel");i.append(l);j.append(i)}},createEditorElement:function(){if(-1===g.inArray(this.settings.field_type,["text","textarea","select"])){throw"Unknown field_type <fnord>, supported are 'text', 'textarea' and 'select'"}var h=null;if("select"===this.settings.field_type){h=this.createSelectEditor()}else{if("text"===this.settings.field_type){h=g('<input type="text" '+this.inputNameAndClass()+' size="'+this.settings.text_size+'" />')}else{if("textarea"===this.settings.field_type){h=g("<textarea "+this.inputNameAndClass()+' rows="'+this.settings.textarea_rows+'"  cols="'+this.settings.textarea_cols+'" />')}}}return h},setInitialValue:function(){var h=this.triggerDelegateCall("willOpenEditInPlace",this.originalValue);var i=this.dom.find(":input");i.val(h);if(i.val()!==h){i.val("")}},inputNameAndClass:function(){var h="inplace_field";if(this.settings.field_extra_classes instanceof Array){h=h+" "+this.settings.field_extra_classes.join(" ")}return' name="inplace_value" class="'+h+'"'},createSelectEditor:function(){var m=g("<select"+this.inputNameAndClass()+'><option disabled="true" value="">'+this.settings.select_text+"</option></select>");var j=this.settings.select_options;if(!g.isArray(j)){j=j.split(",")}for(var k=0;k<j.length;k++){var h=j[k];if(!g.isArray(h)){h=h.split(":")}var n=a(h[1]||h[0]);var o=a(h[0]);var l=g("<option>").val(n).text(o);m.append(l)}return m},connectClosingEventsToEditor:function(){var k=this;function j(l){if(!k.settings.isAutoCompleteField){k.handleCancelEditor(l)}return false}function h(l){k.handleSaveEditor(l);return false}var i=this.dom.find("form");i.find(".inplace_field").focus().select();i.find(".inplace_cancel").click(j);i.find(".inplace_save").click(h);if(!this.settings.show_buttons){if("save"===this.settings.on_blur){i.find(".inplace_field").blur(h)}else{i.find(".inplace_field").blur(j)}}i.keyup(function(l){var m=27;if(m===l.which){return j()}});this.bindInputKeyup();i.submit(h)},bindSubmitOnEnterInInput:function(){if("textarea"===this.settings.field_type){return}var h=this;this.dom.find(":input").keyup(function(i){var j=13;if(j===i.which){return h.dom.find("form").submit()}})},bindInputKeyup:function(){if("textarea"===this.settings.field_type){return}var i=this;var h=this.dom.find(":input");var j=this.dom.find(".inplace_save");h.keyup(function(k){var l=13;if(l===k.which){return i.dom.find("form").submit()}else{if(i.settings.disable_submit_when_empty){if(g.trim(h.val()).length){j.removeAttr("disabled")}else{j.attr("disabled","disabled")}}}})},handleCancelEditor:function(h){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,h)){return}var i=this.dom.find(":input").val();i=this.triggerDelegateCall("willCloseEditInPlace",i);this.restoreOriginalValue();this.reinit()},handleSaveEditor:function(h){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,h)){return}var i=g.trim(this.dom.find(":input").val());i=this.triggerDelegateCall("willCloseEditInPlace",i);if(this.isDisabledDefaultSelectChoice()||this.isUnchangedInput(i)){this.handleCancelEditor(h);return}if(this.didForgetRequiredText(i)){if(this.settings.disable_submit_when_empty){return}this.handleCancelEditor(h);this.reportError("Error: You must enter a value to save this field");return}this.showSaving(i);if(this.settings.callback){this.handleSubmitToCallback(i)}else{this.handleSubmitToServer(i)}},didForgetRequiredText:function(h){return this.settings.value_required&&(""===h||undefined===h||null===h)},isDisabledDefaultSelectChoice:function(){return this.dom.find("option").eq(0).is(":selected:disabled")},isUnchangedInput:function(h){return !this.settings.save_if_nothing_changed&&this.originalValue===h},showSaving:function(i){if(this.settings.callback&&this.settings.callback_skip_dom_reset){return}var h=i;if(b(this.settings.saving_text)){h=this.settings.saving_text}if(b(this.settings.saving_image)){h=g("<img />").attr("src",this.settings.saving_image).attr("alt",h)}this.dom.html(encodeURIComponent(h))},handleSubmitToCallback:function(h){this.enableOrDisableAnimationCallbacks(true,false);var i=this.triggerCallback(this.settings.callback,this.id(),h,this.originalValue,this.settings.params,this.savingAnimationCallbacks());if(this.settings.callback_skip_dom_reset){}else{if(undefined===i){this.reportError("Error: Failed to save value: "+h);this.restoreOriginalValue()}else{this.pageLinkHTML=i;this.dom.html(i);this.addRemoveDialogOnClickListener(this.isEditMode)}}if(this.didCallNoCallbacks()){this.enableOrDisableAnimationCallbacks(false,false);this.reinit()}},handleSubmitToServer:function(h){var j=this.settings.update_value+"="+encodeURIComponent(h)+"&"+this.settings.element_id+"="+this.dom.attr("id")+((this.settings.params)?"&"+this.settings.params:"")+"&"+this.settings.original_html+"="+encodeURIComponent(this.originalValue)+"&"+this.settings.original_value+"="+encodeURIComponent(this.originalValue);this.enableOrDisableAnimationCallbacks(true,false);this.didStartSaving();var i=this;g.ajax({url:i.settings.url,type:"POST",data:j,dataType:"html",complete:function(k){i.didEndSaving()},success:function(l){var k=l||i.settings.default_text;i.dom.html(k);i.triggerCallback(i.settings.success,l)},error:function(k){i.dom.html(i.originalHTML);if(i.settings.error){i.triggerCallback(i.settings.error,k)}else{i.reportError("Failed to save value: "+k.responseText||"Unspecified Error")}}})},triggerCallback:function(i){if(!i){return}var h=Array.prototype.slice.call(arguments,1);return i.apply(this.dom[0],h)},triggerDelegateCall:function(j,i,h){if(!this.settings.delegate||!g.isFunction(this.settings.delegate[j])){return i}var k=this.settings.delegate[j](this.dom,this.settings,h);return(undefined===k)?i:k},reportError:function(h){this.triggerCallback(this.settings.error_sink,this.id(),h)},id:function(){return this.dom.attr("id")},markEditorAsActive:function(){this.dom.addClass("editInPlace-active")},markEditorAsInactive:function(){this.dom.removeClass("editInPlace-active")},savingAnimationCallbacks:function(){var h=this;return{didStartSaving:function(){h.didStartSaving()},didEndSaving:function(){h.didEndSaving()}}},enableOrDisableAnimationCallbacks:function(i,h){this.didStartSaving.enabled=i;this.didEndSaving.enabled=h},didCallNoCallbacks:function(){return this.didStartSaving.enabled&&!this.didEndSaving.enabled},assertCanCall:function(h){if(!this[h].enabled){throw new Error("Cannot call "+h+" now. See documentation for details.")}},didStartSaving:function(){this.assertCanCall("didStartSaving");this.shouldDelayReinit=true;this.enableOrDisableAnimationCallbacks(false,true);this.startSavingAnimation()},didEndSaving:function(){this.assertCanCall("didEndSaving");this.shouldDelayReinit=false;this.enableOrDisableAnimationCallbacks(false,false);this.reinit();this.stopSavingAnimation()},startSavingAnimation:function(){var h=this;this.dom.animate({backgroundColor:this.settings.saving_animation_color},400).animate({backgroundColor:"transparent"},400,"swing",function(){setTimeout(function(){h.startSavingAnimation()},10)})},stopSavingAnimation:function(){this.dom.stop(true).css({backgroundColor:""})},missingCommaErrorPreventer:""});function d(h){if(h.url||h.callback){return}throw new Error("Need to set either url: or callback: option for the inline editor to work.")}function e(i){if(""===i){return}var h=new Image();h.src=i}function a(h){return h.replace(/^\s+/,"").replace(/\s+$/,"")}function b(h){if(undefined===h||null===h){return false}if(0===h.length){return false}return true}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.BarDialogView=b.extend({events:{"click #delete-button":"_onDeleteClick","click .link-new-page":"_goToCreateLinkPage","click .link-update-page":"_goToUpdateLinkPage"},initialize:function(){a.bindAll(this,"_onPageLinkOpen","_onPageLinkSelectCompleted","_onPageLinkCallback","_onPageLinkBlur","_goToCreateLinkPage");this.options.dialogOptions={width:260,timelineWidth:this.options.timelineWidth,isSideInlineDialog:true,renderOption:this.options.renderOption,linkPageEditable:this.options.linkPageEditable,createLinkPageCallback:this.options.createLinkPageCallback};b.prototype.initialize.call(this,this.options)},_escapeString:function(e){var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(f){return d[f]})},_getContent:function(d){const e=this.model.attributes.pageLink.id?{id:this._escapeString(this.model.attributes.pageLink.id)}:{};Object.assign(this.model.attributes.pageLink,e);d.html(Confluence.Templates.Roadmap.barDialog({bar:a.extend({},this.model.attributes,{description:AJS.escapeHtml(this.model.attributes.description).replace(/\r?\n/g,"<br />")}),renderOption:this.options.dialogOptions.renderOption,linkPageEditable:this.options.dialogOptions.linkPageEditable}))},_onBeforeShow:function(){this.fields=this._getFields();this._setupInlineEdit();this._addEvents()},_getFields:function(){return{$title:this.$el.find("#bar-title"),$description:this.$el.find(".bar-description"),$pageLink:this.$el.find(".bar-page-link"),$pageLinkNew:this.$el.find(".link-new-page"),$pageLinkUpdate:this.$el.find(".link-update-page")}},_setupInlineEdit:function(){var f=this;var d=this.fields;var i=this.options.dialogOptions.renderOption.editInplace;var e={form_extra_classes:["aui"],hover_class:"editable-field-hover aui-icon-small aui-iconfont-edit",field_extra_classes:["text"],show_buttons:true,save_button:Confluence.Templates.Roadmap.inlineEditSaveButton(),cancel_button:Confluence.Templates.Roadmap.inlineEditCancelButton(),error_sink:null,use_html:true,default_text:"Click to add description.",delegate:{shouldOpenEditInPlace:function(){f.$el.find(".inplace_cancel").trigger("click")},didCloseEditInPlace:function(){setTimeout(function(){f.refresh()},0)}}};i.title&&d.$title.editInPlace(c.extend(true,{},e,{callback:function(j,k){f.options.updateTitle(k);return AJS.escapeHtml(k)},value_required:true,disable_submit_when_empty:true,delegate:{willOpenEditInPlace:function(){f.refresh();d.$title.find(".text").attr("maxlength",Roadmap.BarDialog.MAX_LENGTH_TITLE)}}}));(c.trim(d.$description.text())==="")?d.$description.addClass("empty-field"):d.$description.removeClass("empty-field");var g=c.extend(true,{},e,{field_type:"textarea",field_extra_classes:["textarea"],value_required:false,save_if_nothing_changed:true,callback:function(j,k){k=c.trim(k);f.options.updateDescription(k);if(k===""){k="Click to add description.";c(this).addClass("empty-field")}else{c(this).removeClass("empty-field");Confluence.Roadmap.Analytics.addDescription()}return AJS.escapeHtml(k).replace(/\r?\n/g,"<br />")},delegate:{willOpenEditInPlace:function(){f.refresh();d.$description.find(".textarea").attr("maxlength",Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION);return f.model.attributes.description.replace(/<br\s*[\/]?>/gi,"\n")}}});i.description&&d.$description.editInPlace(g);var h=c.extend(true,{},e,{pageLinkHTML:Confluence.Templates.Roadmap.buildPageLink({pageLink:this.model.attributes.pageLink,isEditMode:this.options.renderOption.isEditMode}),isEditMode:this.options.renderOption.isEditMode,isAutoCompleteField:true,show_buttons:false,default_text:"",field_extra_classes:["text","autocomplete-confluence-content"],delegate:{willOpenEditInPlace:f._onPageLinkOpen,didCloseEditInPlace:function(){if(a.isEmpty(d.$pageLink.data("linkData"))){d.$pageLink.hide();d.$pageLinkNew.show();d.$pageLinkUpdate.show()}}},on_blur:null,callback:f._onPageLinkCallback});i.pageLink&&this.options.dialogOptions.linkPageEditable&&this.fields.$pageLink.editInPlace(h)},_onPageLinkOpen:function(e){var f=this;e.append('<div class="link-page-dropdown" />');var g=e.find(".autocomplete-confluence-content");g.attr({placeholder:"Search page","data-dropdown-target":"#inline-dialog-roadmap-dialog .link-page-dropdown","data-none-message":"No matches found"});Confluence.Binder.autocompleteConfluenceContent(e);g.bind("selected.autocomplete-content",this._onPageLinkSelectCompleted);g.on("blur",function(){setTimeout(f._onPageLinkBlur,150)});var d=this.model.attributes.pageLink;this.fields.$pageLink.data("linkData",d);if(!a.isEmpty(d)){return d.title}return true},_onPageLinkSelectCompleted:function(d,g){d.stopPropagation();var f=this.fields.$pageLink.find(".autocomplete-confluence-content");var e=g.content;f.val(e.title);this.fields.$pageLink.data("linkData",g.content);a.defer(this._onPageLinkBlur)},_onPageLinkBlur:function(){var d=this.fields.$pageLink.find(".autocomplete-confluence-content");var f=c.Event("keyup");f.which=AJS.keyCode.ENTER;d.trigger(f)},_onPageLinkCallback:function(e,f){var d=(f==="")?{}:this.fields.$pageLink.data("linkData");return this._updatePageLink(d)},_updatePageLink:function(e){if(e.id===this.model.attributes.pageLink.id){return}var d=this.fields;if(a.isEmpty(e)){this.options.updatePageLink({});d.$pageLink.hide();d.$pageLinkNew.show();d.$pageLinkUpdate.show();return "No linked page"}else{var f=a.pick(e,"id","title","type","spaceKey","wikiLink");if(!e.spaceKey){f.spaceKey=e.space.key}this.options.updatePageLink(f);d.$pageLink.show();d.$pageLinkNew.hide();d.$pageLinkUpdate.hide();const g=e.id?{id:this._escapeString(e.id)}:{};Object.assign(e,g);if(this.options.renderOption.isEditMode){Confluence.Roadmap.Analytics.addPageLinkEditMode({linkedPageId:e.id,pageId:AJS.Meta.get("page-id")>0?AJS.Meta.get("page-id"):AJS.Meta.get("draft-id"),isDraft:AJS.Meta.get("page-id")<=0})}else{Confluence.Roadmap.Analytics.addPageLinkViewMode({linkedPageId:e.id,pageId:AJS.Meta.get("page-id")})}return Confluence.Templates.Roadmap.buildPageLink({pageLink:e,isEditMode:this.options.renderOption.isEditMode})}},_addEvents:function(){if(c.browser.msie&&parseInt(c.browser.version,10)<=9){var d=function(h,f){if(h.ctrlKey||h.altKey||h.metaKey||h.keyCode===AJS.keyCode.BACKSPACE||h.keyCode===AJS.keyCode.DELETE){return true}var g=c.trim(this.value);return g.length<=f};this.fields.$description.on("keypress",".textarea",function(f){return d.call(this,f,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)});this.fields.$description.on("paste",".textarea",function(g){var f=this;setTimeout(function(){if(d.call(f,g,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)){f.value=f.value.substr(0,Roadmap.BarDialog.MAX_LENGTH_DESCRIPTION)}},0)})}},_onDeleteClick:function(){this.options.deleteBar();this.remove()},_goToCreateLinkPage:function(f){var e=this.options.dialogOptions;if(e.createLinkPageCallback){var d=a.bind(e.createLinkPageCallback,{me:this},f);d()}},_goToUpdateLinkPage:function(d){d.preventDefault();this.fields.$pageLink.show();this.fields.$pageLinkNew.hide();this.fields.$pageLinkUpdate.hide();this.fields.$pageLink.click()}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-bar-dialog-resources', location = 'view/roadmap-editor/bar-dialog/bar-link-new-page.js' */
Confluence.RoadmapLink=(function(f,a){Roadmap.trackingBars=[];function c(i,j){var g={};if(parseInt(i.pageId)<=0){i.parentPageId=AJS.Meta.get("parent-page-id")}var h=f.param(i);window.open(AJS.contextPath()+"/plugins/roadmap/create-page.action?"+h,"_blank");b(i.roadmapBarId).done(function(k){Roadmap.trackingBars.push(i.roadmapBarId)});f(window).off("focus");f(window).on("focus",function(){if(!Roadmap.trackingBars.length){f(window).off("focus")}a.each(Roadmap.trackingBars,function(k){d(k).done(function(m){var l=m.status;if(l=="REDEEM"){e(k);j({barId:k,pageLink:f.parseJSON(m.pageLink)})}else{if(l=="UNKNOWN"){e(k)}}})})})}function e(g){Roadmap.trackingBars.splice(Roadmap.trackingBars.indexOf(g),1)}function b(g){return f.ajax({contentType:"application/json",type:"PUT",url:AJS.contextPath()+"/rest/roadmap/1.0/bar/"+g+"/PENDING"})}function d(g){return f.ajax({contentType:"application/json",type:"GET",url:AJS.contextPath()+"/rest/roadmap/1.0/bar/"+g+"/status"})}return{addCreateLinkPageListener:c}})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-position', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
(function(c){c.ui=c.ui||{};var k=/left|center|right/,l=/top|center|bottom/,n=c.fn.position,o=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);var b=c.extend({},b),a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),f=b.offset?b.offset.split(" "):[0,0],h,j,e;9===d.nodeType?(h=a.width(),j=a.height(),e={top:0,left:0}):d.setTimeout?(h=a.width(),j=a.height(),e={top:a.scrollTop(),left:a.scrollLeft()}):d.preventDefault?(b.at="left top",h=j=0,e={top:b.of.pageY,left:b.of.pageX}):
(h=a.outerWidth(),j=a.outerHeight(),e=a.offset());c.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=k.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=k.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b[this]=a});1===g.length&&(g[1]=g[0]);f[0]=parseInt(f[0],10)||0;1===f.length&&(f[1]=f[0]);f[1]=parseInt(f[1],10)||0;"right"===b.at[0]?e.left+=h:"center"===b.at[0]&&(e.left+=h/2);"bottom"===b.at[1]?e.top+=j:"center"===b.at[1]&&
(e.top+=j/2);e.left+=f[0];e.top+=f[1];return this.each(function(){var a=c(this),d=a.outerWidth(),m=a.outerHeight(),k=parseInt(c.curCSS(this,"marginLeft",true))||0,l=parseInt(c.curCSS(this,"marginTop",true))||0,n=d+k+(parseInt(c.curCSS(this,"marginRight",true))||0),o=m+l+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},e),p;if(b.my[0]==="right")i.left=i.left-d;else if(b.my[0]==="center")i.left=i.left-d/2;if(b.my[1]==="bottom")i.top=i.top-m;else if(b.my[1]==="center")i.top=i.top-m/2;
p={left:i.left-k,top:i.top-l};c.each(["left","top"],function(a,e){if(c.ui.position[g[a]])c.ui.position[g[a]][e](i,{targetWidth:h,targetHeight:j,elemWidth:d,elemHeight:m,collisionPosition:p,collisionWidth:n,collisionHeight:o,offset:f,my:b.my,at:b.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-a.collisionPosition.left,
b.left)},top:function(b,a){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if("center"!==a.at[0]){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft(),g="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,f="left"===a.at[0]?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=0>a.collisionPosition.left?g+f+h:0<d?g+f+h:0}},top:function(b,
a){if("center"!==a.at[1]){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop(),g="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,f="top"===a.at[1]?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=0>a.collisionPosition.top?g+f+h:0<d?g+f+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,a){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),g=d.offset(),f=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,
"left",!0),10)||0,g={top:a.top-g.top+f,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)},c.fn.offset=function(b){var a=this[0];return!a||!a.ownerDocument?null:b?c.isFunction(b)?this.each(function(a){c(this).offset(b.call(this,a,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,b)}):o.call(this)});c.curCSS||(c.curCSS=c.css)})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){"accept"==a&&(this.accept=d.isFunction(b)?b:function(a){return a.is(b)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
a,this.ui(b))},_out:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b))},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=d.data(this,
"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==c.options.scope&&a.accept.call(a.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):
!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.24"});d.ui.intersect=function(a,b,c){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left,g=f+a.helperProportions.width,e=(a.positionAbs||a.position.absolute).top,h=e+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;switch(c){case "fit":return i<=f&&g<=k&&j<=e&&h<=l;
case "intersect":return i<f+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<e+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(e>=j&&e<=l||h>=j&&h<=l||e<j&&h>l)&&(f>=i&&f<=k||g>=i&&g<=k||f<i&&g>k);default:return!1}};
d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],f=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),e=0;a:for(;e<c.length;e++)if(!(c[e].options.disabled||a&&!c[e].accept.call(c[e].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[e].element[0]){c[e].proportions.height=0;continue a}c[e].visible="none"!=c[e].element.css("display");c[e].visible&&("mousedown"==
f&&c[e]._activate.call(c[e],b),c[e].offset=c[e].element.offset(),c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight})}},drop:function(a,b){var c=!1;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&(this.visible&&d.ui.intersect(a,this,this.options.tolerance))&&(c=this._drop.call(this,b)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)))this.isout=1,this.isover=
0,this._deactivate.call(this,b)});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==
this.isover?"isover":null){var f;if(this.options.greedy){var g=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return d.data(this,"droppable").options.scope===g});e.length&&(f=d.data(e[0],"droppable"),f.greedyChild="isover"==c?1:0)}f&&"isover"==c&&(f.isover=0,f.isout=1,f._out.call(f,b));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==c?"_over":"_out"].call(this,b);f&&"isout"==c&&(f.isout=0,f.isover=1,f._over.call(f,b))}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles=
{};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');g.css({zIndex:a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(a){var a=a||this.element,b;for(b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=e(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=
e(this.handles[b],this.element),d=0,d=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(c,d);this._proportionallyResize()}e(this.handles[b])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled&&!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}}));this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=!1,c;for(c in this.handles)e(this.handles[c])[0]==b.target&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=!0;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};(d.is(".ui-draggable")||/absolute/.test(d.css("position")))&&d.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();var c=j(this.helper.css("left")),f=j(this.helper.css("top"));a.containment&&(c+=e(a.containment).scrollLeft()||0,f+=e(a.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:
{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",
"auto"==a?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var a=this.options;if(this._helper){var c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),c=d&&e.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;a.animate||this.element.css(e.extend(d,{top:f,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var a=
this.options,c,d,e,a={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:Infinity,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||b)if(b=a.minHeight*this.aspectRatio,d=a.minWidth/this.aspectRatio,c=a.maxHeight*this.aspectRatio,e=a.maxWidth/this.aspectRatio,b>a.minWidth&&(a.minWidth=b),d>a.minHeight&&(a.minHeight=d),c<a.maxWidth&&(a.maxWidth=c),e<a.maxHeight)a.maxHeight=e;this._vBoundaries=a},_updateCache:function(b){this.offset=
this.helper.offset();i(b.left)&&(this.position.left=b.left);i(b.top)&&(this.position.top=b.top);i(b.height)&&(this.size.height=b.height);i(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;i(b.height)?b.width=b.height*this.aspectRatio:i(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==d&&(b.left=a.left+(c.width-b.width),b.top=null);"nw"==d&&(b.top=a.top+(c.height-b.height),b.left=a.left+(c.width-b.width));return b},_respectSize:function(b){var a=
this._vBoundaries,c=this.axis,d=i(b.width)&&a.maxWidth&&a.maxWidth<b.width,e=i(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=i(b.width)&&a.minWidth&&a.minWidth>b.width,h=i(b.height)&&a.minHeight&&a.minHeight>b.height;g&&(b.width=a.minWidth);h&&(b.height=a.minHeight);d&&(b.width=a.maxWidth);e&&(b.height=a.maxHeight);var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);g&&m&&(b.left=k-a.minWidth);d&&m&&(b.left=k-a.maxWidth);
h&&c&&(b.top=l-a.minHeight);e&&c&&(b.top=l-a.maxHeight);(a=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:a&&(!b.top&&b.left)&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),
c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}if(!e.browser.msie||!e(b).is(":hidden")&&!e(b).parents(":hidden").length)c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');
var a=e.browser.msie&&7>e.browser.version,c=a?1:0,a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-
a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,
c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);"resize"!=b&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.24"});e.ui.plugin.add("resizable","alsoResize",
{start:function(){var b=e(this).data("resizable").options,a=function(a){e(a).each(function(){var a=e(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof b.alsoResize&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],a(b.alsoResize)):e.each(b.alsoResize,function(b){a(b)}):a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable"),d=c.options,
f=c.originalSize,g=c.originalPosition,h={height:c.size.height-f.height||0,width:c.size.width-f.width||0,top:c.position.top-g.top||0,left:c.position.left-g.left||0},i=function(b,c){e(b).each(function(){var b=e(this),d=e(this).data("resizable-alsoresize"),f={},g=c&&c.length?c:b.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(g,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&0<=c&&(f[b]=c||null)});b.css(f)})};"object"==typeof d.alsoResize&&!d.alsoResize.nodeType?
e.each(d.alsoResize,function(a,b){i(a,b)}):i(d.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height,f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g},g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||
null,h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:c.width,height:c.height});a._updateCache(c);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable",
"containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c)if(b.containerElement=e(a),/document/.test(c)||c==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(a,
b){f[a]=j(d.css("padding"+b))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};var c=b.containerOffset,g=b.containerSize.height,h=b.containerSize.width,h=e.ui.hasScroll(a,"left")?a.scrollWidth:h,g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position,b=a._aspectRatio||b.shiftKey,
g={top:0,left:0},h=a.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(g=d);if(f.left<(a._helper?d.left:0))a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left,b&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=c.helper?d.left:0;if(f.top<(a._helper?d.top:0))a.size.height+=a._helper?a.position.top-d.top:a.position.top,b&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?d.top:0;a.offset.left=a.parentData.left+a.position.left;a.offset.top=
a.parentData.top+a.position.top;c=Math.abs(a.offset.left-g.left+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));f&&g&&(c-=a.parentData.left);c+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-c,b&&(a.size.height=a.size.width/a.aspectRatio));d+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-d,
b&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,g=g.outerHeight()-b.sizeDiff.height;b._helper&&(!a.animate&&/relative/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&(!a.animate&&/static/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});
e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=
e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid="number"==typeof a.grid?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1),a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);/^(se|s|e)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):
/^(ne)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a):(/^(sw)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a),b.position.left=f.left-h)}});var j=function(b){return parseInt(b,10)||0},i=function(b){return!isNaN(parseInt(b,10))}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=e(b.options.filter,b.element[0]);f.addClass("ui-selectee");f.each(function(){var b=e(this),c=b.offset();e.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var f=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",b);e(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=e.data(this,"selectable-item");c.startselected=!0;!b.metaKey&&!b.ctrlKey&&(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),
c.unselecting=!0,f._trigger("unselecting",b,{unselecting:c.element}))});e(b.target).parents().andSelf().each(function(){var c=e.data(this,"selectable-item");if(c){var d=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");c.unselecting=!d;c.selecting=d;(c.selected=d)?f._trigger("selecting",b,{selecting:c.element}):f._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var f=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,c=this.opos[0],g=this.opos[1],i=b.pageX,j=b.pageY;if(c>i)var h=i,i=c,c=h;g>j&&(h=j,j=g,g=h);this.helper.css({left:c,top:g,width:i-c,height:j-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(a&&a.element!=f.element[0]){var h=false;d.tolerance=="touch"?h=!(a.left>i||a.right<c||a.top>j||a.bottom<g):d.tolerance=="fit"&&(h=a.left>c&&a.right<i&&a.top>g&&a.bottom<j);if(h){if(a.selected){a.$element.removeClass("ui-selected");
a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",b,{selecting:a.element})}}else{if(a.selecting)if((b.metaKey||b.ctrlKey)&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");
a.unselecting=true}f._trigger("unselecting",b,{unselecting:a.element})}if(a.selected&&!b.metaKey&&!b.ctrlKey&&!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",b,{unselecting:a.element})}}}});return!1}},_mouseStop:function(b){var f=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
!1;d.startselected=!1;f._trigger("unselected",b,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;f._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}});e.extend(e.ui.selectable,{version:"1.8.24"})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
(function(d){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,b=a.options;a.running=0;a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b.disabled||d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b.disabled||d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b.disabled||d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b.disabled||d(this).removeClass("ui-state-focus")});a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(b.navigation){var c=a.element.find("a").filter(b.navigationFilter).eq(0);if(c.length){var f=c.closest(".ui-accordion-header");a.active=f.length?f:c.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.resize();a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",
function(b){return a._keydown(b)}).next().attr("role","tabpanel");a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);d.browser.safari||a.headers.find("a").attr("tabIndex",-1);b.event&&a.headers.bind(b.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this);b.preventDefault()})},_createIcons:function(){var a=
this.options;a.icons&&(d("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");(a.autoHeight||a.fillHeight)&&b.css("height","");return d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"active"==a&&this.activate(b);"icons"==a&&(this._destroyIcons(),
b&&this._createIcons());if("disabled"==a)this.headers.add(this.headers.next())[b?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(!this.options.disabled&&!a.altKey&&!a.ctrlKey){var b=d.ui.keyCode,c=this.headers.length,f=this.headers.index(a.target),g=!1;switch(a.keyCode){case b.RIGHT:case b.DOWN:g=this.headers[(f+1)%c];break;case b.LEFT:case b.UP:g=this.headers[(f-1+c)%c];break;case b.SPACE:case b.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return g?
(d(a.target).attr("tabIndex",-1),d(g).attr("tabIndex",0),g.focus(),!1):!0}},resize:function(){var a=this.options,b;if(a.fillSpace){if(d.browser.msie){var c=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height();d.browser.msie&&this.element.parent().css("overflow",c);this.headers.each(function(){b-=d(this).outerHeight(!0)});this.headers.next().each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow",
"auto")}else a.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,d(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;a=this._findActive(a)[0];this._clickHandler({target:a},a);return this},_findActive:function(a){return a?"number"===typeof a?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):!1===a?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,b){var c=this.options;if(!c.disabled)if(a.target){var f=d(a.currentTarget||
b),g=f[0]===this.active[0];c.active=c.collapsible&&g?!1:this.headers.index(f);if(!(this.running||!c.collapsible&&g)){var i=this.active,e=f.next(),h=this.active.next(),k={options:c,newHeader:g&&c.collapsible?d([]):f,oldHeader:this.active,newContent:g&&c.collapsible?d([]):e,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(f[0]);this.active=g?d([]):f;this._toggle(e,h,k,g,j);i.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);
g||(f.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(c.icons.header).addClass(c.icons.headerSelected),f.next().addClass("ui-accordion-content-active"))}}else if(c.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),
k={options:c,newHeader:d([]),oldHeader:c.active,newContent:d([]),oldContent:h},e=this.active=d([]);this._toggle(e,h,k)}},_toggle:function(a,b,c,f,g){var i=this,e=i.options;i.toShow=a;i.toHide=b;i.data=c;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=0===b.size()?a.size():b.size();if(e.animated){c={};c=e.collapsible&&f?{toShow:d([]),toHide:b,complete:h,down:g,autoHeight:e.autoHeight||e.fillSpace}:{toShow:a,toHide:b,complete:h,down:g,autoHeight:e.autoHeight||
e.fillSpace};e.proxied||(e.proxied=e.animated);e.proxiedDuration||(e.proxiedDuration=e.duration);e.animated=d.isFunction(e.proxied)?e.proxied(c):e.proxied;e.duration=d.isFunction(e.proxiedDuration)?e.proxiedDuration(c):e.proxiedDuration;var f=d.ui.accordion.animations,k=e.duration,j=e.animated;j&&(!f[j]&&!d.easing[j])&&(j="slide");f[j]||(f[j]=function(a){this.slide(a,{easing:j,duration:k||700})});f[j](c)}else e.collapsible&&f?a.toggle():(b.hide(),a.show()),h(!0);b.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});d.extend(d.ui.accordion,{version:"1.8.24",
animations:{slide:function(a,b){a=d.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){var c=a.toShow.css("overflow"),f=0,g={},i={},e,h=a.toShow;e=h[0].style.width;h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0));d.each(["height","paddingTop","paddingBottom"],function(b,c){i[c]="hide";var e=(""+d.css(a.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);
g[c]={value:e[1],unit:e[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(i,{step:function(b,c){"height"==c.prop&&(f=0===c.end-c.start?0:(c.now-c.start)/(c.end-c.start));a.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height","");a.toShow.css({width:e,overflow:c});a.complete()}})}else a.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},a);else a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
(function(d){var c=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,c;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!a.options.disabled&&
!a.element.propAttr("readOnly")){c=!1;var f=d.ui.keyCode;switch(b.keyCode){case f.PAGE_UP:a._move("previousPage",b);break;case f.PAGE_DOWN:a._move("nextPage",b);break;case f.UP:a._keyEvent("previous",b);break;case f.DOWN:a._keyEvent("next",b);break;case f.ENTER:case f.NUMPAD_ENTER:a.menu.active&&(c=!0,b.preventDefault());case f.TAB:if(!a.menu.active)break;a.menu.select(b);break;case f.ESCAPE:a.element.val(a.term);a.close(b);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=
a.element.val()&&(a.selectedItem=null,a.search(null,b))},a.options.delay)}}}).bind("keypress.autocomplete",function(a){c&&(c=!1,a.preventDefault())}).bind("focus.autocomplete",function(){a.options.disabled||(a.selectedItem=null,a.previous=a.element.val())}).bind("blur.autocomplete",function(b){a.options.disabled||(clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b);a._change(b)},150))});this._initSource();this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(b){var c=a.menu.element[0];d(b.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(b){b.target!==a.element[0]&&(b.target!==c&&!d.ui.contains(c,b.target))&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,d){var c=d.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:c})&&/^key/.test(b.originalEvent.type)&&a.element.val(c.value)},selected:function(c,d){var e=d.item.data("item.autocomplete"),
h=a.previous;a.element[0]!==b.activeElement&&(a.element.focus(),a.previous=h,setTimeout(function(){a.previous=h;a.selectedItem=e},1));!1!==a._trigger("select",c,{item:e})&&a.element.val(e.value);a.term=a.element.val();a.close(c);a.selectedItem=e},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe();a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")};
d(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d(window).unbind("beforeunload",this.beforeunloadHandler);d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(d(b||
"body",this.element[0].ownerDocument)[0]);"disabled"===a&&(b&&this.xhr)&&this.xhr.abort()},_initSource:function(){var a=this,b,c;d.isArray(this.options.source)?(b=this.options.source,this.source=function(a,c){c(d.ui.autocomplete.filter(b,a.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},search:function(a,
b){a=null!=a?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&
a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(a){return"string"===typeof a?{label:a,value:a}:d.extend({label:a.label||
a.value,value:a.value||a.label},a)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,b){var c=
this;d.each(b,function(b,d){c._renderItem(a,d)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,
b),b.preventDefault()}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var c=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(a){return c.test(a.label||a.value||a)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){d(a.target).closest(".ui-menu-item a").length&&(a.preventDefault(),c.select(a))});this.refresh()},refresh:function(){var c=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){c.activate(a,d(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(c,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,d=this.element.scrollTop(),g=this.element.height();0>b?this.element.scrollTop(d+b):b>=g&&this.element.scrollTop(d+b-g+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",c,{item:a})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(c,a,b){this.active?(c=this.active[c+"All"](".ui-menu-item").eq(0),c.length?this.activate(b,
c):this.activate(b,this.element.children(a))):this.activate(b,this.element.children(a))},nextPage:function(c){if(this.hasScroll())if(!this.active||this.last())this.activate(c,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(c){if(this.hasScroll())if(!this.active||this.first())this.activate(c,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a+b-d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:first"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
(function(b){var g,h,i,e,k=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},j=function(a){var c=a.name,d=a.form,f=b([]);c&&(f=d?b(d).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",k);"boolean"!==typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,f="ui-state-hover"+(!d?" ui-state-active":"");null===c.label&&(c.label=this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===g&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(a){if(c.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});d&&(this.element.bind("change.button",function(){e||a.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(!c.disabled){e=
false;h=a.pageX;i=a.pageY}}).bind("mouseup.button",function(a){if(!c.disabled&&(h!==a.pageX||i!==a.pageY))e=true}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=
a.element[0];j(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");g=this;b(document).one("mouseup",function(){g=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(a){if(c.disabled)return false;(a.keyCode==b.ui.keyCode.SPACE||
a.keyCode==b.ui.keyCode.ENTER)&&b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if("checkbox"===this.type||
"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=
this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||
this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);"disabled"===a?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?j(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];d.primary||d.secondary?(this.options.text&&e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||
(e.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",c))):e.push("ui-button-text-only");a.addClass(e.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){"disabled"===a&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a="rtl"===
this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
(function(c){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},j={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};c.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;0>b&&c(this).css("top",a.top-b)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=c.ui.dialog.getTitleId(a.element),e=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){if(b.closeOnEscape&&
!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}}).attr({role:"dialog","aria-labelledby":d}).mousedown(function(c){a.moveToTop(false,c)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e);var f=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e),g=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){g.addClass("ui-state-hover")},function(){g.removeClass("ui-state-hover")}).focus(function(){g.addClass("ui-state-focus")}).blur(function(){g.removeClass("ui-state-focus")}).click(function(c){a.close(c);return false}).appendTo(f);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(g);d=c("<span></span>").addClass("ui-dialog-title").attr("id",d).prependTo(f);this._title(d);c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose)&&
(b.beforeClose=b.beforeclose);f.find("*").add(f).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=!1;c.fn.bgiframe&&e.bgiframe()},_title:function(a){this.options.title||a.html("&#160;");a.text(this.options.title)},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(!1!==b._trigger("beforeClose",a))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)}):(b.uiDialog.hide(),b._trigger("close",a)),c.ui.dialog.overlay.resize(),b.options.modal&&(d=0,c(".ui-dialog").each(function(){if(this!==
b.uiDialog[0]){e=c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}}),c.ui.dialog.maxZ=d),b},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this.options;if(d.modal&&!a||!d.stack&&!d.modal)return this._trigger("focus",b);d.zIndex>c.ui.dialog.maxZ&&(c.ui.dialog.maxZ=d.zIndex);this.overlay&&(c.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ));d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};c.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",c.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var a=this.options,b=this.uiDialog;this.overlay=a.modal?new c.ui.dialog.overlay(this):null;this._size();this._position(a.position);b.show(a.show);this.moveToTop(!0);a.modal&&b.bind("keydown.ui-dialog",function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this),f=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey)return f.focus(1),
!1;if(a.target===f[0]&&a.shiftKey)return b.focus(1),!1}});c(this.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(a){var b=this,d=!1,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();"object"===typeof a&&
null!==a&&c.each(a,function(){return!(d=!0)});d&&(c.each(a,function(a,d){var d=c.isFunction(d)?{click:d,text:a}:d,e=c('<button type="button"></button>').click(function(){d.click.apply(b.element[0],arguments)}).appendTo(f);c.each(d,function(a,b){if("click"!==a)if(a in e)e[a](b);else e.attr(a,b)});c.fn.button&&e.button()}),e.appendTo(b.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,d=b.options,e=c(document),f;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(e,h){f="auto"===d.height?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",e,a(h))},drag:function(c,d){b._trigger("drag",c,a(d))},stop:function(g,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(f);b._trigger("dragStop",g,a(h));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}var a=void 0===a?this.options.resizable:a,d=this,e=d.options,f=d.uiDialog.css("position"),a="string"===typeof a?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(a,e){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",a,b(e))},resize:function(a,c){d._trigger("resize",
a,b(c))},stop:function(a,f){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",a,b(f));c.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):
[a[0],a[1]],1===b.length&&(b[1]=b[0]),c.each(["left","top"],function(a,c){+b[a]===b[a]&&(d[a]=b[a],b[a]=c)}),a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")};a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=!1;c.each(a,function(a,c){b._setOption(a,c);a in
i&&(e=!0);a in j&&(d[a]=c)});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?d.addClass("ui-dialog-disabled"):
d.removeClass("ui-dialog-disabled");break;case "draggable":var e=d.is(":data(draggable)");e&&!b&&d.draggable("destroy");!e&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(e=d.is(":data(resizable)"))&&!b&&d.resizable("destroy");e&&"string"===typeof b&&d.resizable("option","handles",b);!e&&!1!==b&&this._makeResizable(b);break;case "title":this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}c.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var a=
this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});a.minWidth>a.width&&(a.width=a.minWidth);b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);"auto"===a.height?c.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(a,d))):this.element.height(Math.max(a.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){0===this.instances.length&&
(setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(a){if(c(a.target).zIndex()<c.ui.dialog.overlay.maxZ)return!1})},1),c(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&(!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===c.ui.keyCode.ESCAPE)&&(a.close(b),b.preventDefault())}),c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;return c.browser.msie&&7>c.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<b?c(window).height()+"px":a+"px"):c(document).height()+"px"},width:function(){var a,b;return c.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<b?c(window).width()+"px":a+"px"):c(document).width()+"px"},resize:function(){var a=c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,
height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
(function(b){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(void 0===a)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.24"})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(!0===b.range&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length))b.values=[b.values[0],b.values[0]];this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))}for(var g=c.length;g<f;g+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(a){d(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(b){var c=d(this).data("index.ui-slider-handle"),e,f,g;if(!a.options.disabled){switch(b.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(b.preventDefault(),!a._keySliding&&(a._keySliding=!0,d(this).addClass("ui-state-active"),e=a._start(b,c),!1===e))return}g=a.options.step;e=a.options.values&&a.options.values.length?
f=a.values(c):f=a.value();switch(b.keyCode){case d.ui.keyCode.HOME:f=a._valueMin();break;case d.ui.keyCode.END:f=a._valueMax();break;case d.ui.keyCode.PAGE_UP:f=a._trimAlignValue(e+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:f=a._trimAlignValue(e-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(e===a._valueMax())return;f=a._trimAlignValue(e+g);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(e===a._valueMin())return;f=a._trimAlignValue(e-
g)}a._slide(b,c,f)}}).keyup(function(b){var c=d(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,c),a._change(b,c),d(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(a){var b=this.options,c,f,e,g,h;if(b.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(b){var a=Math.abs(c-g.values(b));f>a&&(f=a,e=d(this),h=b)});!0===b.range&&this.values(1)===b.min&&(h+=1,e=d(this.handles[h]));if(!1===this._start(a,h))return!1;this._mouseSliding=
!0;g._handleIndex=h;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,h,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,
y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,a=a.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",
a,c)},_slide:function(a,b,c){var d;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d))c=d;c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),!1!==a&&this.values(b,c,!0))}else c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==a&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],
value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(a,b){var c,f,e;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(b),this._refreshValue(),this._change(null,a);else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1)c[e]=this._trimAlignValue(f[e]),this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();else return this._values()},_setOption:function(a,b){var c,
f=0;d.isArray(this.options.values)&&(f=this.options.values.length);d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=
this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b,a=a-c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:!1,e,g=
{},h,k,i,j;if(this.options.values&&this.options.values.length)this.handles.each(function(a){e=100*((c.values(a)-c._valueMin())/(c._valueMax()-c._valueMin()));g["horizontal"===c.orientation?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](g,b.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===a)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({width:e-h+"%"},{queue:!1,duration:b.animate})}else{if(0===a)c.range.stop(1,
1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({height:e-h+"%"},{queue:!1,duration:b.animate})}h=e});else{k=this.value();i=this._valueMin();j=this._valueMax();e=j!==i?100*((k-i)/(j-i)):0;g["horizontal"===c.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](g,b.animate);if("min"===a&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},b.animate);if("max"===a&&"horizontal"===this.orientation)this.range[f?
"animate":"css"]({width:100-e+"%"},{queue:!1,duration:b.animate});if("min"===a&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if("max"===a&&"vertical"===this.orientation)this.range[f?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.24"})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'src/js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
(function(d){var n=0,o=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,d){"selected"==a?this.options.collapsible&&d==this.options.selected||this.select(d):
(this.options[a]=d,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++o);return d.cookie.apply(null,[a].concat(d.makeArray(arguments)))},_ui:function(a,d){return{tab:a,panel:d,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=
d(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(a){function e(b,a){b.css("display","");!d.support.opacity&&a.opacity&&b[0].style.removeAttribute("filter")}var b=this,c=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(a,e){var h=d(e).attr("href"),f=h.split("#")[0],k;if(f&&(f===location.toString().split("#")[0]||
(k=d("base")[0])&&f===k.href))h=e.hash,e.href=h;g.test(h)?b.panels=b.panels.add(b.element.find(b._sanitizeSelector(h))):h&&"#"!==h?(d.data(e,"href.tabs",h),d.data(e,"load.tabs",h.replace(/#.*$/,"")),h=b._tabId(e),e.href="#"+h,f=b.element.find("#"+h),f.length||(f=d(c.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(b.panels[a-1]||b.list),f.data("destroy.tabs",!0)),b.panels=b.panels.add(f)):c.disabled.push(a)});a?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===c.selected?(location.hash&&this.anchors.each(function(b,a){if(a.hash==location.hash)return c.selected=b,!1}),"number"!==typeof c.selected&&c.cookie&&(c.selected=parseInt(b._cookie(),10)),"number"!==typeof c.selected&&this.lis.filter(".ui-tabs-selected").length&&(c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),c.selected=c.selected||(this.lis.length?0:-1)):null===c.selected&&(c.selected=-1),c.selected=0<=c.selected&&this.anchors[c.selected]||0>c.selected?c.selected:0,c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(a){return b.lis.index(a)}))).sort(),-1!=d.inArray(c.selected,c.disabled)&&c.disabled.splice(d.inArray(c.selected,c.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
0<=c.selected&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[c.selected],b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash))[0]))}),this.load(c.selected)),d(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs");b.lis=b.anchors=b.panels=null})):c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);for(var a=0,f;f=this.lis[a];a++)d(f)[-1!=d.inArray(a,c.disabled)&&!d(f).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");!1===c.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==c.event){var k=function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)};this.lis.bind("mouseover.tabs",
function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){d(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){d(this).closest("li").removeClass("ui-state-focus")})}var j,i;c.fx&&(d.isArray(c.fx)?(j=c.fx[0],i=c.fx[1]):j=i=c.fx);var l=i?function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(i,i.duration||"normal",
function(){e(c,i);b._trigger("show",null,b._ui(a,c[0]))})}:function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");b._trigger("show",null,b._ui(a,c[0]))},m=j?function(a,c){c.animate(j,j.duration||"normal",function(){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");e(c,j);b.element.dequeue("tabs")})}:function(a,c){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");b.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var a=this,e=d(a).closest("li"),f=b.panels.filter(":not(.ui-tabs-hide)"),g=b.element.find(b._sanitizeSelector(a.hash));if(e.hasClass("ui-tabs-selected")&&!c.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||b.panels.filter(":animated").length||b._trigger("select",null,b._ui(this,g[0]))===false){this.blur();return false}c.selected=b.anchors.index(this);b.abort();if(c.collapsible){if(e.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){m(a,f)}).dequeue("tabs");this.blur();return false}if(!f.length){c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this));this.blur();return false}}c.cookie&&b._cookie(c.selected,c.cookie);if(g.length){f.length&&b.element.queue("tabs",function(){m(a,f)});b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},destroy:function(){var a=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var a=
d.data(this,"href.tabs");a&&(this.href=a);var b=d(this).unbind(".tabs");d.each(["href","load","cache"],function(a,d){b.removeData(d+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});a.cookie&&this._cookie(null,a.cookie);return this},add:function(a,
e,b){void 0===b&&(b=this.anchors.length);var c=this,g=this.options,e=d(g.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,e)),a=!a.indexOf("#")?a.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=c.element.find("#"+a);f.length||(f=d(g.panelTemplate).attr("id",a).data("destroy.tabs",!0));f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");b>=this.lis.length?(e.appendTo(this.list),f.appendTo(this.list[0].parentNode)):
(e.insertBefore(this.lis[b]),f.insertBefore(this.panels[b]));g.disabled=d.map(g.disabled,function(a){return a>=b?++a:a});this._tabify();1==this.anchors.length&&(g.selected=0,e.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[b],this.panels[b]));return this},remove:function(a){var a=this._getIndex(a),e=this.options,b=this.lis.eq(a).remove(),
c=this.panels.eq(a).remove();b.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(a+(a+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(b){return b!=a}),function(b){return b>=a?--b:b});this._tabify();this._trigger("remove",null,this._ui(b.find("a")[0],c[0]));return this},enable:function(a){var a=this._getIndex(a),e=this.options;if(-1!=d.inArray(a,e.disabled))return this.lis.eq(a).removeClass("ui-state-disabled"),e.disabled=d.grep(e.disabled,function(b){return b!=
a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(a){var a=this._getIndex(a),d=this.options;a!=d.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),d.disabled.push(a),d.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(-1==a)if(this.options.collapsible&&-1!=this.options.selected)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+
".tabs");return this},load:function(a){var a=this._getIndex(a),e=this,b=this.options,c=this.anchors.eq(a)[0],g=d.data(c,"load.tabs");this.abort();if(!g||0!==this.element.queue("tabs").length&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(a).addClass("ui-state-processing");if(b.spinner){var f=d("span",c);f.data("label.tabs",f.html()).html(b.spinner)}this.xhr=d.ajax(d.extend({},b.ajaxOptions,{url:g,success:function(f,g){e.element.find(e._sanitizeSelector(c.hash)).html(f);e._cleanup();
b.cache&&d.data(c,"cache.tabs",!0);e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.success(f,g)}catch(i){}},error:function(d,f){e._cleanup();e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.error(d,f,a,c)}catch(g){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup();
return this},url:function(a,d){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.24"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(a,d){var b=this,c=this.options,g=b._rotate||(b._rotate=function(d){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var a=c.selected;b.select(++a<b.anchors.length?a:0)},a);d&&d.stopPropagation()}),f=b._unrotate||(b._unrotate=!d?function(a){a.clientX&&
b.rotate(null)}:function(){g()});a?(this.element.bind("tabsshow",g),this.anchors.bind(c.event+".tabs",f),g()):(clearTimeout(b.rotation),this.element.unbind("tabsshow",g),this.anchors.unbind(c.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
jQuery.effects||function(d){function l(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[d.trim(a).toLowerCase()]}function n(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var f=a.length;f--;)c=a[f],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function o(a){var b,c;for(b in a)c=a[b],(null==c||d.isFunction(c)||b in q||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(c)))&&delete a[b];return a}function r(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(a,b,c,e){"object"==typeof a&&(e=b,c=null,b=a,a=b.effect);d.isFunction(b)&&(e=b,c=null,b={});if("number"==typeof b||d.fx.speeds[b])e=c,c=b,b={};d.isFunction(c)&&(e=c,c=null);b=b||{};c=c||b.duration;c=d.fx.off?0:"number"==typeof c?
c:c in d.fx.speeds?d.fx.speeds[c]:d.fx.speeds._default;e=e||b.complete;return[a,b,c,e]}function j(a){return!a||("number"===typeof a||d.fx.speeds[a])||"string"===typeof a&&!d.effects[a]?!0:!1}d.effects={};d.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,b){d.fx.step[b]=function(a){if(!a.colorInit){var e;e=a.elem;var f=b,g;do{g=(d.curCSS||d.css)(e,f);if(g!=""&&g!="transparent"||d.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=l(g);a.start=e;a.end=l(a.end);a.colorInit=true}a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.effects.animateClass=function(a,b,c,e){d.isFunction(c)&&(e=c,c=null);return this.queue(function(){var f=
d(this),g=f.attr("style")||" ",h=o(n.call(this)),i,j=f.attr("class")||"";d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});i=o(n.call(this));f.attr("class",j);f.animate(r(h,i),{queue:false,duration:b,easing:c,complete:function(){d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});if(typeof f.attr("style")=="object"){f.attr("style").cssText="";f.attr("style").cssText=g}else f.attr("style",g);e&&e.apply(this,arguments);d.dequeue(this)}})})};d.fn.extend({_addClass:d.fn.addClass,addClass:function(a,
b,c,e){return b?d.effects.animateClass.apply(this,[{add:a},b,c,e]):this._addClass(a)},_removeClass:d.fn.removeClass,removeClass:function(a,b,c,e){return b?d.effects.animateClass.apply(this,[{remove:a},b,c,e]):this._removeClass(a)},_toggleClass:d.fn.toggleClass,toggleClass:function(a,b,c,e,f){return"boolean"==typeof b||void 0===b?c?d.effects.animateClass.apply(this,[b?{add:a}:{remove:a},c,e,f]):this._toggleClass(a,b):d.effects.animateClass.apply(this,[{toggle:a},b,c,e])},switchClass:function(a,b,c,
e,f){return d.effects.animateClass.apply(this,[{add:b,remove:a},c,e,f])}});d.extend(d.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=
1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}a.wrap(c);
(a[0]===e||d.contains(a[0],e))&&d(e).focus();c=a.parent();"static"==a.css("position")?(c.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(b).show()},removeWrapper:function(a){var b,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?
(b=a.parent().replaceWith(a),(a[0]===c||d.contains(a[0],c))&&d(c).focus(),b):a},setTransition:function(a,b,c,e){e=e||{};d.each(b,function(b,d){var h=a.cssUnit(d);0<h[0]&&(e[d]=h[0]*c+h[1])});return e}});d.fn.extend({effect:function(a,b,c,e){var f=i.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,h=d.effects[a];return d.fx.off||!h?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):h.call(this,g)},_show:d.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=i.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:d.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:d.fn.toggle,toggle:function(a){if(j(a)||"boolean"===typeof a||d.isFunction(a))return this.__toggle.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="toggle";return this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
c=[];d.each(["em","px","%","pt"],function(a,d){0<b.indexOf(d)&&(c=[parseFloat(b),d])});return c}});var k={};d.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){k[b]=function(b){return Math.pow(b,a+2)}});d.extend(k,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,
--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});d.each(k,function(a,b){d.easing["easeIn"+a]=b;d.easing["easeOut"+a]=function(a){return 1-b(1-a)};d.easing["easeInOut"+a]=function(a){return 0.5>a?b(2*a)/2:b(-2*a+2)/-2+1}})}(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h="vertical"==d?"height":"width",d="vertical"==d?e.height():e.width();"show"==f&&e.css(h,0);var i={};i[h]="show"==f?d:0;e.animate(i,c.duration,c.options.easing,function(){"hide"==f&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f="up"==d||"down"==d?"top":"left",d="up"==d||"left"==d?"pos":"neg",c=b.options.distance||("top"==f?a.outerHeight(!0)/3:a.outerWidth(!0)/
3);"show"==h&&a.css("opacity",0).css(f,"pos"==d?-c:c);"hide"==h&&(c/=2*m);"hide"!=h&&m--;if("show"==h){var g={opacity:1};g[f]=("pos"==d?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=("pos"==d?"-=":"+=")+c;k[f]=("pos"==d?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c="hide"==h?2*c:c/2}"hide"==h?(g={opacity:0},g[f]=("pos"==d?"-=":"+=")+c,a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})):(j={},k={},j[f]=("pos"==d?"-=":"+=")+c,k[f]=("pos"==d?"+=":"-=")+c,a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)}));a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),h="position top bottom left right height width".split(" "),f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,h);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"}),d="IMG"==a[0].tagName?d:a,i="vertical"==c?"height":"width",j="vertical"==c?"top":"left",c="vertical"==c?d.height():d.width();"show"==f&&(d.css(i,0),d.css(j,c/2));var g={};g[i]="show"==f?c:0;g[j]=
"show"==f?0:c/2;d.animate(g,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,h);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h="position top bottom left right opacity".split(" "),e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",g=d.options.distance||("top"==f?a.outerHeight(!0)/2:a.outerWidth(!0)/2);"show"==e&&a.css("opacity",0).css(f,"pos"==b?-g:g);var i={opacity:"show"==e?1:0};i[f]=("show"==
e?"pos"==b?"+=":"-=":"pos"==b?"-=":"+=")+g;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode="toggle"==a.options.mode?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),e=b.offset();e.top-=parseInt(b.css("marginTop"),10)||0;e.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(!0),i=b.outerHeight(!0),f=0;f<c;f++)for(var g=
0;g<d;g++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*(h/d),top:-f*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:e.left+g*(h/d)+("show"==a.options.mode?(g-Math.floor(d/2))*(h/d):0),top:e.top+f*(i/c)+("show"==a.options.mode?(f-Math.floor(c/2))*(i/c):0),opacity:"show"==a.options.mode?0:1}).animate({left:e.left+g*(h/d)+("show"==a.options.mode?0:(g-Math.floor(d/2))*(h/d)),top:e.top+
f*(i/c)+("show"==a.options.mode?0:(f-Math.floor(c/2))*(i/c)),opacity:"show"==a.options.mode?1:0},a.duration||500);setTimeout(function(){"show"==a.options.mode?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f="show"==d!=h,l=f?["width","height"]:["height","width"],f=f?[e.width(),e.height()]:[e.height(),e.width()],i=/([0-9]+)%/.exec(g);i&&(g=parseInt(i[1],
10)/100*f["hide"==d?0:1]);"show"==d&&e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]="show"==d?f[0]:g;i[l[1]]="show"==d?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){"hide"==d&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};"hide"==d&&(f.opacity=0);b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
(function(e){e.effects.pulsate=function(a){return this.queue(function(){var b=e(this),d=e.effects.setMode(b,a.options.mode||"show"),g=2*(a.options.times||5)-1,h=a.duration?a.duration/2:e.fx.speeds._default/2,f=b.is(":visible"),c=0;f||(b.css("opacity",0).show(),c=1);("hide"==d&&f||"show"==d&&!f)&&g--;for(d=0;d<g;d++)b.animate({opacity:c},h,a.options.easing),c=(c+1)%2;b.animate({opacity:c},h,a.options.easing,function(){c==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,i=e/100,g={height:a.height(),width:a.width()};c.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*i,width:g.width*i}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),d=c.extend(!0,{},b.options),e=c.effects.setMode(a,
b.options.mode||"effect"),i=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",f=b.options.origin;"effect"!=e&&(d.origin=f||["middle","center"],d.restore=!0);f={height:a.height(),width:a.width()};a.from=b.options.from||("show"==e?{height:0,width:0}:f);a.to={height:f.height*("horizontal"!=g?i/100:1),width:f.width*("vertical"!=g?i/100:1)};if(b.options.fade&&("show"==e&&(a.from.opacity=0,a.to.opacity=1),"hide"==e))a.from.opacity=1,a.to.opacity=
0;d.from=a.from;d.to=a.to;d.mode=e;a.effect("size",d,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),i=["width","height","overflow"],g=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=c.effects.setMode(a,
b.options.mode||"effect"),q=b.options.restore||!1,n=b.options.scale||"both",k=b.options.origin,h={height:a.height(),width:a.width()};a.from=b.options.from||h;a.to=b.options.to||h;k&&(k=c.effects.getBaseline(k,h),a.from.top=(h.height-a.from.height)*k.y,a.from.left=(h.width-a.from.width)*k.x,a.to.top=(h.height-a.to.height)*k.y,a.to.left=(h.width-a.to.width)*k.x);var l=a.from.height/h.height,o=a.from.width/h.width,m=a.to.height/h.height,p=a.to.width/h.width;if("box"==n||"both"==n)if(l!=m&&(d=d.concat(f),
a.from=c.effects.setTransition(a,f,l,a.from),a.to=c.effects.setTransition(a,f,m,a.to)),o!=p)d=d.concat(j),a.from=c.effects.setTransition(a,j,o,a.from),a.to=c.effects.setTransition(a,j,p,a.to);if(("content"==n||"both"==n)&&l!=m)d=d.concat(g),a.from=c.effects.setTransition(a,g,l,a.from),a.to=c.effects.setTransition(a,g,m,a.to);c.effects.save(a,q?d:e);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);if("content"==n||"both"==n)f=f.concat(["marginTop","marginBottom"]).concat(g),
j=j.concat(["marginLeft","marginRight"]),i=d.concat(f).concat(j),a.find("*[width]").each(function(){var a=c(this);q&&c.effects.save(a,i);var d=a.height(),e=a.width();a.from={height:d*l,width:e*o};a.to={height:d*m,width:e*p};if(l!=m){a.from=c.effects.setTransition(a,f,l,a.from);a.to=c.effects.setTransition(a,f,m,a.to)}if(o!=p){a.from=c.effects.setTransition(a,j,o,a.from);a.to=c.effects.setTransition(a,j,p,a.to)}a.css(a.from);a.animate(a.to,b.duration,b.options.easing,function(){q&&c.effects.restore(a,
i)})});a.animate(a.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);r=="hide"&&a.hide();c.effects.restore(a,q?d:e);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g="up"==c||"down"==c?"top":"left",h="up"==c||"left"==c?"pos":"neg",c={},i={},k={};c[g]=("pos"==h?"-=":"+=")+e;i[g]=("pos"==h?"+=":"-=")+2*e;k[g]=("pos"==
h?"-=":"+=")+2*e;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",e=d.options.distance||("top"==g?a.outerHeight(!0):a.outerWidth(!0));"show"==f&&a.css(g,"pos"==b?isNaN(e)?"-"+e:-e:e);var i={};i[g]=("show"==f?"pos"==
b?"+=":"-=":"pos"==b?"-=":"+=")+e;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==f&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'src/js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset(),c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()},d=b.offset(),f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'src/js-vendor/jquery/jquery.ui.menu.js' */
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){d(b.target).closest(".ui-menu-item a").length&&(b.preventDefault(),a.select(b))});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),d=this.element.height();0>c?this.element.attr("scrollTop",e+c):c>d&&this.element.attr("scrollTop",e+c-d+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):
this.activate(c,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(":first"));else{var b=this.active.offset().top,c=this.element.height(),e=this.element.children("li").filter(function(){var a=d(this).offset().top-b-c+d(this).height();return 10>a&&-10<a});e.length||(e=this.element.children(":last"));this.activate(a,e)}else this.activate(a,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||
this.first())this.activate(a,this.element.children(":last"));else{var b=this.active.offset().top,c=this.element.height();result=this.element.children("li").filter(function(){var a=d(this).offset().top-b+c-d(this).height();return 10>a&&-10<a});result.length||(result=this.element.children(":first"));this.activate(a,result)}else this.activate(a,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",
a,{item:this.active})}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Roadmap.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Roadmap == 'undefined') { Confluence.Templates.Roadmap = {}; }


Confluence.Templates.Roadmap.roadmapPopupPanel = function(opt_data, opt_ignored) {
  return '<div class="roadmap-editor-popup"><div id=\'' + soy.$$escapeHtml(opt_data.roadmapPopupPanelId) + '\'></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.roadmapPopupPanel.soyTemplateName = 'Confluence.Templates.Roadmap.roadmapPopupPanel';
}


Confluence.Templates.Roadmap.roadmapEditor = function(opt_data, opt_ignored) {
  return '<div id="roadmap-editor-edit-area"><div id="roadmap-editor-edit-content"><!-- START GENERATE ROADMAP --><div id="roadmap-container"><div class="roadmap-drag-area"></div><div class="roadmap-frame"><div class="roadmap-marker"></div></div><div class="roadmap-content"></div></div><!-- END GENERATE ROADMAP --></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.roadmapEditor.soyTemplateName = 'Confluence.Templates.Roadmap.roadmapEditor';
}


Confluence.Templates.Roadmap.lane = function(opt_data, opt_ignored) {
  return '<div class="roadmap-lane-title" style="background-color: ' + soy.$$escapeHtml(opt_data.color.lane) + '; color: ' + soy.$$escapeHtml(opt_data.color.text) + '" title="' + soy.$$escapeHtml(opt_data.title) + '"><div class="title-outer"><div class="title-inner">' + soy.$$escapeHtml(opt_data.title) + '</div></div></div><div class="roadmap-separate-content">&nbsp;</div><div class="roadmap-lane-content"></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.lane.soyTemplateName = 'Confluence.Templates.Roadmap.lane';
}


Confluence.Templates.Roadmap.marker = function(opt_data, opt_ignored) {
  return '<div class="marker-drag-placeholder"></div><div class="marker-title-wrapper"><span class="marker-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.marker.soyTemplateName = 'Confluence.Templates.Roadmap.marker';
}


Confluence.Templates.Roadmap.bar = function(opt_data, opt_ignored) {
  return '<p class="roadmap-bar-title">' + soy.$$escapeHtml(opt_data.title) + '</p>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.bar.soyTemplateName = 'Confluence.Templates.Roadmap.bar';
}


Confluence.Templates.Roadmap.newRowLine = function(opt_data, opt_ignored) {
  return '<hr class="new-row-line" />';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.newRowLine.soyTemplateName = 'Confluence.Templates.Roadmap.newRowLine';
}


Confluence.Templates.Roadmap.deprecationDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h1 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Macro unavailable') + '</h1></header><div class="aui-dialog2-content">' + soy.$$filterNoAutoescape('\x3cp\x3eThe roadmap macro has been deprecated as of version 12. You can still view your existing roadmap macros but you will no longer be able to edit them or create new ones.\x3c/p\x3e\x3cp\x3ePlease use our new Roadmap Planner macro to plan your roadmap.\x3c/p\x3e') + '<div class="new-roadmap-thumb"></div></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="dialog-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Close') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.deprecationDialog.soyTemplateName = 'Confluence.Templates.Roadmap.deprecationDialog';
}


Confluence.Templates.Roadmap.newRowPlaceholder = function(opt_data, opt_ignored) {
  return '<hr class= "new-row-placeholder" />';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.newRowPlaceholder.soyTemplateName = 'Confluence.Templates.Roadmap.newRowPlaceholder';
}


Confluence.Templates.Roadmap.laneDialog = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'add-bar-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Add bar'}, iconClass: 'aui-icon-small aui-iconfont-add'}) + aui.buttons.button({id: 'rename-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Rename lane'}, iconClass: 'aui-icon-small aui-iconfont-edit'}) + Confluence.Templates.Roadmap.laneColorSelect(opt_data) + ((opt_data.canDelete) ? aui.buttons.button({id: 'delete-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Delete lane'}, iconClass: 'aui-icon-small delete-icon'}) : '');
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.laneDialog.soyTemplateName = 'Confluence.Templates.Roadmap.laneDialog';
}


Confluence.Templates.Roadmap.markerDialog = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'rename-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Rename marker'}, iconClass: 'aui-icon-small aui-iconfont-edit'}) + aui.buttons.button({id: 'delete-button', type: 'subtle', iconType: 'aui', extraClasses: 'aui-button-compact', text: '', extraAttributes: {title: 'Delete marker'}, iconClass: 'aui-icon-small delete-icon'});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.markerDialog.soyTemplateName = 'Confluence.Templates.Roadmap.markerDialog';
}


Confluence.Templates.Roadmap.markerRenameDialog = function(opt_data, opt_ignored) {
  return '' + aui.form.form({action: '', content: '' + aui.form.input({extraClasses: 'marker-title', name: 'marker-title', type: 'text', value: opt_data.markerTitle}) + aui.buttons.button({extraClasses: 'rename-button', text: 'Save'})});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.markerRenameDialog.soyTemplateName = 'Confluence.Templates.Roadmap.markerRenameDialog';
}


Confluence.Templates.Roadmap.laneRenameDialog = function(opt_data, opt_ignored) {
  return '' + aui.form.form({action: '', content: '' + aui.form.input({extraClasses: 'lane-title', name: 'lane-title', type: 'text', value: opt_data.laneTitle}) + aui.buttons.button({extraClasses: 'rename-button', text: 'Save'})});
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.laneRenameDialog.soyTemplateName = 'Confluence.Templates.Roadmap.laneRenameDialog';
}


Confluence.Templates.Roadmap.laneColorSelect = function(opt_data, opt_ignored) {
  var output = '<a id="lane-color-select" href="#" aria-owns="lane-color-picker" aria-haspopup="true" class="aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-style-default" title="' + soy.$$escapeHtml('Lane color') + '"><span class="color-item" style="background-color: ' + soy.$$escapeHtml(opt_data.laneColor) + ';">&nbsp;</span></a></a><div id="lane-color-picker" class="aui-dropdown2"><ul class="aui-list-truncate">';
  var colorList120 = opt_data.colors;
  var colorListLen120 = colorList120.length;
  for (var colorIndex120 = 0; colorIndex120 < colorListLen120; colorIndex120++) {
    var colorData120 = colorList120[colorIndex120];
    output += '<li class="color-display-item"><a href="#" ><span class="color-item ' + ((colorData120.lane == opt_data.laneColor) ? 'aui-icon aui-icon-small aui-iconfont-success' : '') + '" style="background-color: ' + soy.$$escapeHtml(colorData120.lane) + ';"></span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.laneColorSelect.soyTemplateName = 'Confluence.Templates.Roadmap.laneColorSelect';
}


Confluence.Templates.Roadmap.linkPageTitle = function(opt_data, opt_ignored) {
  return '<span class="link-page-title" ></span>';
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.linkPageTitle.soyTemplateName = 'Confluence.Templates.Roadmap.linkPageTitle';
}


Confluence.Templates.Roadmap.footerActionContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.roadmapShouldAutoSave) ? '<span class="autosave-text">' + soy.$$escapeHtml('This roadmap planner autosaves every 15 seconds.') + '</span>' : '') + aui.buttons.button({text: 'Insert', id: 'roadmapInsertBtn'}) + ((opt_data.roadmapShouldAutoSave) ? aui.buttons.button({text: 'Close', type: 'link', id: 'roadmapCloseBtn'}) : aui.buttons.button({text: 'Cancel', type: 'link', id: 'roadmapCancelBtn'}));
};
if (goog.DEBUG) {
  Confluence.Templates.Roadmap.footerActionContent.soyTemplateName = 'Confluence.Templates.Roadmap.footerActionContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar.js' */
(function(b,a){Roadmap.BarView=Backbone.View.extend({className:"roadmap-bar",events:{click:"_showDialog",dragstart:"_onDragstart",dragstop:"_onDragStop",dropover:"_onDropOver",dropout:"_onDropOut"},attributes:function(){return{cid:this.cid}},initialize:function(){a.bindAll(this,"render","_updateBar","_beforeResize","updateMaxWidth","_deleteBar","_updateTitle");this._addEvents()},_addEvents:function(){var c=this;this.$el.draggable({opacity:0.3,cursor:"move",appendTo:".roadmap-drag-area",snap:".roadmap-bar-row, .new-bar-row",snapMode:"inner",snapTolerance:17,scroll:true,zIndex:4020,helper:function(){return c.$el.clone().addClass("roadmap-bar-clone").data("View",c)}});this.$el.droppable({accept:".roadmap-bar",tolerance:"touch",hoverClass:"bar-hover-bar"});this.$el.data("View",this)},render:function(){this.updateColor(this.options.color);var c=this.options.timelineView.getBarPosition(this.model.attributes);this.$el.css({left:c.left+"px",width:c.width+"px"});this.$el.attr("title",this.model.get("title"));this.$el.append(Confluence.Templates.Roadmap.bar({title:this.model.get("title")}));this.$el.resizable({handles:"e, w",minWidth:Roadmap.barMinWidth,start:this._beforeResize,stop:this._updateBar});return this},updateMaxWidth:function(d){this.$el.resizable("option","maxWidth",d);var c=this.$el.resizable("option","minWidth");if(d<c){this.$el.resizable("option","minWidth",d)}},_beforeResize:function(d,c){this._barDialog&&this._barDialog.remove();this.trigger("beforeResize",this,this._checkHandleDirection(d))},_checkHandleDirection:function(c){var d=b(c.toElement?c.toElement:c.originalEvent.target);if(d.hasClass("ui-resizable-w")){return"left"}else{if(d.hasClass("ui-resizable-e")){return"right"}}throw"Unsupport resize direction handling = "+d},_updateBar:function(d,c){if(c.originalPosition.left!=c.position.left){this.model.set({startDate:this.options.timelineView.getBarStartDate(c.position.left),duration:this.options.timelineView.getBarDuration(c.element.outerWidth())})}else{if(c.originalSize.width!=c.size.width){this.model.set("duration",this.options.timelineView.getBarDuration(c.element.outerWidth()))}}},appendTo:function(c){this.$el.appendTo(c)},updateColor:function(c){this.$el.css({"background-color":c.bar,"border-color":c.lane,color:c.text})},updatePositionLeft:function(c){this.$el.css("left",c)},_onDragStop:function(d,c){this.options.lane.cleanLaneAfterDrop();this.$el.trigger("BarView.dragstop")},updateDeleteBar:function(c){this.options.deleteBar=c},_showDialog:function(c){if(!b(c.target).is(".ui-resizable-handle")){this._barDialog&&this._barDialog.remove();this._barDialog=this._createDialog();this._barDialog.show();Confluence.Roadmap.Analytics.openBarDialogInEdit()}},_createDialog:function(){return new Roadmap.BarDialogView({trigger:this.$el,model:this.model,timelineWidth:this.options.timelineView.$el.width(),renderOption:{isEditMode:true,editInplace:{title:true,pageLink:true,description:true}},linkPageEditable:true,deleteBar:this._deleteBar,updateTitle:this._updateTitle,updateDescription:this._updateDescription,updatePageLink:this._updatePageLink,createLinkPageCallback:this._goToCreateLinkPage})},_deleteBar:function(){this.options.deleteBar(this)},_updateTitle:function(c){this.model.set("title",c);this.$el.attr("title",c);this.$el.find(".roadmap-bar-title").html(AJS.escapeHtml(c))},_updateDescription:function(c){this.model.set("description",c)},_updatePageLink:function(c){this.model.set("pageLink",c)},_onDragstart:function(d,c){Roadmap.DragDrop.barDraggingOver={};this.$el.trigger("BarView.dragstart",[c])},_onDropOver:function(d,c){Roadmap.DragDrop.barDraggingOver[this.cid]=this.cid;if(Roadmap.DragDrop.barDraggingOver&&c.helper.data("isAddingNewRow")!==true){c.helper.addClass("roadmap-bar-overlapped")}},_onDropOut:function(f,d){var c=this;delete Roadmap.DragDrop.barDraggingOver[c.cid];d.helper.removeClass("roadmap-bar-overlapped");a.each(Roadmap.DragDrop.barDraggingOver,function(g){var e=d.helper.data("isAddingNewRow")!==true;if(e){if(typeof g==="string"){d.helper.addClass("roadmap-bar-overlapped")}else{if(g.className==="roadmap-bar-row"){g.$el.addClass("roadmap-bar-drag-hover")}}}})},_goToCreateLinkPage:function(f){f.preventDefault();var e=this.me;var c=parseInt(AJS.Meta.get("page-id"));var d=c>0?c:AJS.Meta.get("parent-page-id");var g={roadmapBarId:e.model.id,roadmapContentId:d,updateRoadmap:false};Confluence.RoadmapLink.addCreateLinkPageListener(g,function(i){var h=e._updatePageLink(i.pageLink);e.fields.$pageLink.html(h)})}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar-row.js' */
(function(b,a){Roadmap.BarRowView=Backbone.View.extend({className:"roadmap-bar-row",initialize:function(){a.bindAll(this,"_addEvents");this._addEvents();return this},attributes:function(){return{cid:this.cid}},_addEvents:function(){var c=this;this.$el.droppable({greedy:true,tolerance:"pointer",hoverClass:"roadmap-bar-drag-hover",activeClass:"roadmap-bar-drag-active",accept:".roadmap-bar",over:function(f,d){Roadmap.DragDrop.barDraggingOver[c.cid]=c;if(d.helper.data("isAddingNewRow")!==true){var g=b(this);g.closest(".roadmap-content").find(".new-row-placeholder").remove()}else{c.$el.removeClass("roadmap-bar-drag-hover")}},out:function(){var d=b(this);delete Roadmap.DragDrop.barDraggingOver[c.cid];d.closest(".roadmap-content").find(".new-row-placeholder").remove()},drop:function(g,f){var d=a.reject(Roadmap.DragDrop.barDraggingOver,function(e){return(typeof e==="object")}).length>0;if(!f.helper.hasClass("roadmap-bar-overlapped")&&!d){b(this).trigger("BarView.drop",[{$barViewHelper:f.helper,$barViewOriginal:f.draggable,$barRow:b(this)},f])}}})},isEmptyRow:function(){return this.$el.is(":empty")}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/bar/bar-row-new.js' */
(function(b,a){Roadmap.BarRowNewView=Backbone.View.extend({className:"new-bar-row",overlayTop:3,margin:5,events:{drop:"_onDrop",dropover:"_onDropOver",dropout:"_onDropOut"},initialize:function(){a.bindAll(this,"render","_addEvent");return this},render:function(){this.$el.append(Confluence.Templates.Roadmap.newRowLine());this._addEvent();this._setSizePosition();return this},_addEvent:function(){this.$el.droppable({accept:".roadmap-bar",tolerance:"pointer",hoverClass:"new-bar-row-hover"})},_setSizePosition:function(){var f=this.options.$barRow;var c=this.options.renderBottom===false?(this.margin*-1):f.height();var e=f.index()===0;var d=(e)?this.overlayTop+this.margin:this.overlayTop;this.$el.css({top:f.position().top+c-d,width:f.width()})},_onDrop:function(d,c){this.$el.trigger("BarView.drop",[{barRowNewView:this},c])},_onDropOver:function(d,c){this.$el.trigger("BarRowNew.dropover",[this,c])},_onDropOut:function(d,c){this.$el.trigger("BarRowNew.dropout",[this,c])}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane-dialog/lane-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.LaneDialogView=b.extend({events:{"click #delete-button":"_onDeleteClick","click #rename-button":"_onRenameClick","click #add-bar-button":"_onAddBarClick"},initialize:function(){a.bindAll(this,"_onHide");this.options.dialogOptions={width:this._getDialogWidth(),hideCallback:this._onHide};c(".roadmap-editor-popup, .roadmap-macro-view").scroll(function(){c("#lane-color-picker").hide()});b.prototype.initialize.call(this,this.options)},_getContent:function(d){var g=this.options.lane.model.get("color").lane;d.html(Confluence.Templates.Roadmap.laneDialog({canDelete:this.options.canDelete,colors:Roadmap.COLORS,laneColor:g}));this.$el.find(".aui-button").tooltip({gravity:"s"});var e=this;var f=this.$el.find("#lane-color-picker .color-item");f.click(function(i){i.preventDefault();var h=Roadmap.COLORS[f.index(this)];if(h.lane!=g){e.options.changeColor(h)}c("#lane-color-picker").hide()})},_getDialogWidth:function(){var e=29;var f=51;var d=2;if(this.options.canDelete){d++}return d*e+f},_onDeleteClick:function(){this.options.deleteLane();this.remove()},_onRenameClick:function(){if(!this._laneRenameDialog){this._laneRenameDialog=new Roadmap.LaneRenameDialogView({trigger:this.options.trigger,lane:this.options.lane})}this._laneRenameDialog.show();this.hide()},_onAddBarClick:function(){this.options.addBar();this.remove()},_onHide:function(){c("#lane-color-picker").hide();b.prototype._onHide.call(this)}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane-dialog/lane-rename-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.LaneRenameDialogView=b.extend({events:{"click .rename-button":"_onRenameButtonClick","keyup .lane-title":"_onChangeLaneTitle"},initialize:function(){this.options.dialogOptions={width:this._getDialogWidth()};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.laneRenameDialog({laneTitle:this.options.trigger.text()}));this.controls={$renameButton:this.$el.find(".rename-button"),$laneTitle:this.$el.find(".lane-title")}},_getDialogWidth:function(){return 315},_onChangeLaneTitle:function(d){var f=c.trim(this.controls.$laneTitle.val());if(!f){this.controls.$renameButton.disable()}else{this.controls.$renameButton.enable();if(d.which==AJS.$.ui.keyCode.ENTER){this.controls.$renameButton.click()}}},_onShow:function(d){this.controls.$laneTitle.select()},_onRenameButtonClick:function(d){d.preventDefault();this.hide();var e=this.controls.$laneTitle.val();this.options.lane.renameTitle(e)}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker-dialog/marker-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.MarkerDialogView=b.extend({events:{"click #rename-button":"_onRenameButtonClick","click #delete-button":"_onDeleteButtonClick"},initialize:function(){this.options.dialogOptions={width:60};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.markerDialog());this.$el.find(".aui-button.aui-button-compact").tooltip({gravity:"s"})},_onRenameButtonClick:function(){if(!this._markerRenameDialog){this._markerRenameDialog=new Roadmap.MarkerRenameDialogView({trigger:this.options.trigger,marker:this.options.marker})}this._markerRenameDialog.show();this.hide()},_onDeleteButtonClick:function(){this.options.marker.removeMarker();this.hide()}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker-dialog/marker-rename-dialog.js' */
(function(c,a){var b=Roadmap.InlineDialogView;Roadmap.MarkerRenameDialogView=b.extend({events:{"click .rename-button":"_onSaveButtonClick","keyup .marker-title":"_onChangeMarkerTitle"},initialize:function(){this.options.dialogOptions={width:315};b.prototype.initialize.call(this,this.options)},_getContent:function(d){d.html(Confluence.Templates.Roadmap.markerRenameDialog({markerTitle:this.options.marker.model.get("title")}));this.controls={$renameButton:this.$el.find(".rename-button"),$title:this.$el.find(".marker-title")}},_onChangeMarkerTitle:function(d){var f=c.trim(this.controls.$title.val());if(!f){this.controls.$renameButton.disable()}else{this.controls.$renameButton.enable();if(d.which==AJS.$.ui.keyCode.ENTER){this.controls.$renameButton.click()}}},_onShow:function(d){this.controls.$title.select()},_onSaveButtonClick:function(d){d.preventDefault();this.hide();this.options.marker.renameTitle(this.controls.$title.val())}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/lane.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.LaneView=Backbone.View.extend({tagName:"div",className:"roadmap-lane",events:{"click .roadmap-lane-title":"_showDialog","BarView.drop":"_onBarDropped","BarRowNew.dropover":"_onBarRowNewDropover","BarRowNew.dropout":"_onBarRowNewDropout"},attributes:function(){return{cid:this.cid}},initialize:function(){a.bindAll(this,"render","renameTitle","updateRowIndex","removeEmptyRow","cleanLaneAfterDrop","_deleteLane","_updateLaneHeight","_renderComplete","_deleteBar","_addBar","_changeColor","addDefaultBarRow");this._barViews=[];this._barRowViews=[];this.listenTo(this.model.get("bars"),"add",function(d){var c=this._newBarRowView();var e=this._newBarView(d);c.$el.append(e.render().$el);this._$laneContent.append(c.$el);this._barViews.push(e);this.$el.trigger("BarView.add",e);a.defer(this._updateLaneHeight)})},render:function(){var c=this;this.$el.append(Confluence.Templates.Roadmap.lane({title:this.model.get("title"),color:this.model.get("color")}));Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),1);var d=this.model.get("bars").models;d=a.sortBy(d,function(e){return e.attributes.rowIndex});a.each(d,function(e){var f=c._newBarView(e);c._barViews.push(f)});this._renderBars();a.defer(this._renderComplete);return this},_renderComplete:function(){this._updateLaneHeight()},renameTitle:function(c){this.model.set("title",c);this.$el.find(".roadmap-lane-title").attr("title",c);this.$el.find(".title-inner").html(AJS.escapeHtml(c));this._updateLaneHeight()},_updateLaneHeight:function(){var d=this.$el.find(".title-inner");d.hide();var c=this._$laneContent.outerHeight();d.width(c-2*Roadmap.LANE_PADDING);d.show()},_barBeforeResize:function(e,k){var l=e.$el;var g=Math.ceil(l.outerWidth()-l.width());var j;if(k=="left"){var f=this._getNearestBarView(e,k);var c=f==null?0:f.position().left+f.width()+g;var d=l.position().left-c;j=l.width()+d}else{var i=this._getNearestBarView(e,k);var h=i==null?this._getLaneContentWidth()-g:i.position().left-g;j=h-l.position().left}e.updateMaxWidth(j-Roadmap.BAR_MARGIN)},_renderBars:function(){var c=this;this._$laneContent=this.$el.find(".roadmap-lane-content");var d={};a.each(this._barViews,function(f){var g="row-"+f.model.get("rowIndex");var e=d[g];if(!e){e=c._newBarRowView(f.model.get("rowIndex"));d[g]=e}e.$el.append(f.render().$el);c._$laneContent.append(e.$el)})},_newBarRowView:function(){var c=new Roadmap.BarRowView();this._barRowViews.push(c);return c},_newBarView:function(c){var d=new Roadmap.BarView({model:c,lane:this,color:this.model.get("color"),timelineView:this.options.timelineView,deleteBar:this._deleteBar});d.on("beforeResize",a.bind(this._barBeforeResize,this));return d},_getNearestBarView:function(d,e){var f=a.filter(d.options.lane._barViews,function(g){return g.model.get("rowIndex")===d.model.get("rowIndex")});var c=null;if(e=="left"){a.each(f,function(g){if(g.$el.position().left<d.$el.position().left&&(c==null||g.$el.position().left>c.$el.position().left)){c=g}})}else{a.each(f,function(g){if(g.$el.position().left>d.$el.position().left&&(c==null||g.$el.position().left<c.$el.position().left)){c=g}})}return c!=null?c.$el:null},_getLaneContentWidth:function(){return this.$el.find(".roadmap-lane-content").width()},_showDialog:function(){this._laneDialog&&this._laneDialog.remove();this._laneDialog=this._createLaneDialog();this._laneDialog.show()},_createLaneDialog:function(){return new Roadmap.LaneDialogView({trigger:this.$el.find(".title-outer"),canDelete:this.options.canDelete,deleteLane:this._deleteLane,addBar:this._addBar,changeColor:this._changeColor,lane:this})},_onBarDropped:function(i,k,l){var n=!!k.barRowNewView;var f=l.draggable.data("View");var m=f.model;var h=f.options.lane;var j=(h.cid===this.cid);var g=this.model.get("bars");var o=l.position.left;var d=this.options.timelineView.getBarStartDate(o);if(j&&g.models.length===1&&n){return}f.updatePositionLeft(o);f.updateColor(this.model.get("color"));m.attributes.startDate=d;if(n){var c=this._newBarRowView();k.barRowNewView.$el.replaceWith(c.$el);f.appendTo(c.$el)}else{f.appendTo(k.$barRow)}l.helper.remove();if(!j){f.options.lane.removeEmptyRow();g._byId[m.id]=m;this._barViews.push(f);f.updateDeleteBar(this._deleteBar);h.model.get("bars").remove(m);g.models.push(m);h._barViews.splice(a.indexOf(h._barViews,f),1);this.updateRowIndex(h.$el);f.options=a.extend(f.options,{color:this.model.get("color"),lane:this});h._updateLaneHeight()}this.removeEmptyRow();this.updateRowIndex(this.$el);this._updateLaneHeight()},updateRowIndex:function(c){c.find(".roadmap-bar-row").each(function(e,d){b(d).find('.roadmap-bar:not(".roadmap-bar-clone")').each(function(h,f){var g=b(f).data("View");if(g){g.model.attributes.rowIndex=e}})})},removeEmptyRow:function(){var c=0;a.each(this._barRowViews,function(d){if(d.isEmptyRow()){d.remove();c++}});return !!c},cleanLaneAfterDrop:function(){this._$laneContent.find(".roadmap-bar-drag-active").removeClass("roadmap-bar-drag-active");this._$laneContent.find(".new-row-placeholder").remove()},_deleteLane:function(){Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),-1);this.$el.trigger("Lane.delete",this)},updateDeleteStatus:function(c){if(this._laneDialog){this._laneDialog.remove();delete this._laneDialog}this.options.canDelete=c},_deleteBar:function(c){this.model.get("bars").remove(c.model);this._barViews.splice(a.indexOf(this._barViews,c),1);c.remove();if(this.removeEmptyRow()){this.updateRowIndex(this.$el);this._updateLaneHeight();this.$el.trigger("BarRowView.remove")}},_addBar:function(){var c=this.model.get("bars");var e=this.options.timelineView.model;var f=moment(e.get("startDate"));var d=e.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?f.startOf("month"):f.startOf("isoWeek");c.add(new Roadmap.Bar({rowIndex:this.model.getNumberOfRows(),startDate:d.toDate()}))},_changeColor:function(c){Confluence.Roadmap.ColorHelper.adjustColorCount(this.model.get("color"),-1);this.model.set("color",c);Confluence.Roadmap.ColorHelper.adjustColorCount(c,1);this.$el.find(".roadmap-lane-title").css({"background-color":c.lane,color:c.text});a.each(this._barViews,function(d){d.updateColor(c)})},addNewBarRow:function(h){var g=this._$laneContent.find(".roadmap-bar-row");var c=[];var d=function(){g.each(function(){var k=b(this);var j=k.index()===0;if(j){var l=new Roadmap.BarRowNewView({$barRow:k,renderBottom:false});k.before(l.render().$el);c.push(l)}var i=new Roadmap.BarRowNewView({$barRow:k});k.after(i.render().$el);c.push(i)})};if(g.length==0){this.addDefaultBarRow()}else{var e=g.find(".roadmap-bar");if(e.length>0){var f=(e.length>0)&&(e.length==1)&&(e.attr("cid")===h.attr("cid"));if(!f){d()}}}return c},addDefaultBarRow:function(){var c=this._newBarRowView();this._$laneContent.append(c.$el)},_onBarRowNewDropover:function(f,d,c){if(!a.isEmpty(Roadmap.DragDrop.barDraggingOver)){a.each(Roadmap.DragDrop.barDraggingOver,function(e){e.$el&&e.$el.removeClass("new-bar-row-hover roadmap-bar-drag-hover")})}Roadmap.DragDrop.barDraggingOver[d.cid]=d;c.helper.removeClass("roadmap-bar-overlapped");c.helper.data("isAddingNewRow",true)},_onBarRowNewDropout:function(f,d,c){c.helper.data("isAddingNewRow",false);delete Roadmap.DragDrop.barDraggingOver[d.cid];a.each(Roadmap.DragDrop.barDraggingOver,function(e){if(typeof e==="string"){c.helper.addClass("roadmap-bar-overlapped")}else{if(e.className==="roadmap-bar-row"&&c.helper.data("isAddingNewRow")!==true){e.$el.addClass("roadmap-bar-drag-hover")}}})}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/marker.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.MarkerView=Backbone.View.extend({className:"vertical-line",events:{dragstop:"_onDragStop",dragstart:"_onDragStart"},initialize:function(){a.bindAll(this,"render","updateHeight","renameTitle","_renderComplete","_onMarkerClick")},render:function(){var d=this.options.roadmap._timelineView.model;var c;if(d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){c=Confluence.Roadmap.Helper.getPosXOnMonthTimeline(d.attributes,this.model.get("markerDate"))}else{c=Confluence.Roadmap.Helper.getPosXOnWeekTimeline(d.attributes,this.model.get("markerDate"))}if(c<0||c>this.options.roadmap._timelineView.$el.width()){return false}this.$el.css({left:(c+Roadmap.LANE_TITLE_WIDTH)+"px"});this.$el.append(Confluence.Templates.Roadmap.marker({title:this.model.get("title")}));this.updateHeight(this.options.roadmap._getLaneHeight());a.defer(this._renderComplete);return this},_renderComplete:function(){this._setupMarkerDragging();this.$el.click(this._onMarkerClick);this.$el.find(".marker-title").ellipsis({row:Roadmap.MARKER_TITLE_LINE})},_setupMarkerDragging:function(){this.$el.draggable({axis:"x",zIndex:4013,containment:".roadmap-frame-content",cursor:"move"})},_onDragStop:function(g,f){var c=f.position.left-Roadmap.LANE_TITLE_WIDTH;var d=this.options.roadmap._timelineView.model.attributes;var h;if(d.displayOption===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH){h=Confluence.Roadmap.Helper.getMonthStartDateByPosition(d,c)}else{h=Confluence.Roadmap.Helper.getWeekStartDateByPosition(d,c)}this.model.set("markerDate",h)},_onDragStart:function(d,c){this.options.roadmap.hideDialog()},_onMarkerClick:function(c){if(!b(c.target).hasClass("marker-title")){return}this._markerDialog&&this._markerDialog.remove();this._markerDialog=this._createMarkerDialog();this._markerDialog.show()},_createMarkerDialog:function(){return new Roadmap.MarkerDialogView({trigger:this.$el.find(".marker-title"),marker:this})},updateHeight:function(c){this.$el.height(c+Roadmap.MARKER_HEIGHT_PADDING)},renameTitle:function(d){this.model.set("title",d);var c=this.$el.find(".marker-title");c.attr("title",d);c.html(AJS.escapeHtml(d)).ellipsis({row:Roadmap.MARKER_TITLE_LINE})},removeMarker:function(){this.model.collection.remove(this.model);this.remove()}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-view-resources', location = 'view/roadmap-editor/roadmap.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.RoadmapEditorView=Backbone.View.extend({className:"roadmap-editor-container",events:{"BarView.add":"_onAddBar","BarView.dragstart":"_onBarDragstart","BarView.dragstop":"_onBarDragstop","BarView.drop":"_onBarDropped","LaneView.drop":"_onBarDropped","Lane.delete":"_onDeleteLane","BarRowView.remove":"_onBarRowViewRemove","sortstart .roadmap-content":"_onSortStart","sortstop .roadmap-content":"_onSortStop",remove:"_onRemove"},initialize:function(){a.bindAll(this,"render");this.listenTo(this.model.get("lanes"),"add",function(c){var d=new Roadmap.LaneView({model:c,timelineView:this._timelineView,canDelete:true});if(this._laneViews.length===1){this._laneViews[0].updateDeleteStatus(true)}this._laneViews.push(d);this.$roadmapContent.append(d.render().$el);this._updateTimelineColumnHeight();this._scrollToBottom()});this.listenTo(this.model.get("markers"),"add",function(c){var d=new Roadmap.MarkerView({model:c,roadmap:this});this.$roadmapMarker.append(d.render().$el);this._markerViews.push(d)});this.listenTo(this.model.get("timeline"),"change",function(){if(this._isTimelineChanged()){this._calculateMinWidthOfABar();this._timelineView.update();this._timelineColumnView.update();this.$roadmapContent.empty();a.each(this._laneViews,function(c){c.remove()});this._laneViews=[];this._renderLanes();this.$roadmapMarker.empty();this._markerViews=[];this._renderMarkers();this._updateDragArea()}})},render:function(){this.$el.html(Confluence.Templates.Roadmap.roadmapEditor());this._calculateMinWidthOfABar();this._initVariables();this._renderToolbar();this._renderTimeline();this._renderLanes();this._renderMarkers();this._renderTimelineColumn();this._updateDragArea();return this},_calculateMinWidthOfABar:function(){Roadmap.barMinWidth=this.model.get("timeline").get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?Roadmap.MONTH_BAR_MIN_WIDTH:Roadmap.WEEK_BAR_MIN_WIDTH},_initVariables:function(){this.$roadmapContainer=this.$el.find("#roadmap-container");this.$roadmapTimeline=this.$roadmapContainer.find(".roadmap-frame");this.$roadmapContent=this.$roadmapContainer.find(".roadmap-content");this.$roadmapMarker=this.$roadmapContainer.find(".roadmap-marker");this._timelineView=new Roadmap.TimelineView({model:this.model.get("timeline")});this._timelineColumnView=new Roadmap.TimelineColumnView({model:this.model.get("timeline")});this._laneViews=[];this._markerViews=[]},_renderTimeline:function(){this.$roadmapTimeline.prepend(this._timelineView.render().$el)},_renderTimelineColumn:function(){this._updateTimelineColumnHeight();this.$roadmapTimeline.append(this._timelineColumnView.render().$el)},_renderMarkers:function(){var c=this;this.model.get("markers").each(function(d){var e=new Roadmap.MarkerView({model:d,roadmap:c});c.$roadmapMarker.append(e.render().$el);c._markerViews.push(e)})},_renderLanes:function(){Confluence.Roadmap.ColorHelper.resetColorCounts();var d=this;this._updateLaneWidth();var c=this.model.get("lanes").models.length>1;this.model.get("lanes").each(function(e){var f=new Roadmap.LaneView({model:e,timelineView:d._timelineView,canDelete:c});d._laneViews.push(f);d.$roadmapContent.append(f.render().$el)});this._setupLaneReordering()},_onAddBar:function(d,c){this._updateTimelineColumnHeight();var e=c.$el;if(!this._isInViewScreen(e)){this._scrollToBar(e)}},_renderToolbar:function(){var d=b("#"+this.options.dialogId+" .aui-dialog2-content");d.find(".roadmap-toolbar").remove();var c=new Roadmap.ToolbarView({model:this.model,timelineView:this._timelineView});d.prepend(c.render().$el)},_getTimelineWidth:function(){return this.$roadmapTimeline.find(".roadmap-frame-title").width()},_getLaneHeight:function(){return this.$roadmapContent.height()},_updateLaneWidth:function(){this.$roadmapContent.width(this._getTimelineWidth()+Roadmap.LANE_TITLE_WIDTH)},_scrollToBottom:function(){this.options.roadmapEditorPopup.scrollTop(this._getLaneHeight())},_isInViewScreen:function(c){return b.inviewport(c,{threshold:-200})},_scrollToBar:function(c){this.options.roadmapEditorPopup.scrollTop(c.parent().position().top);this.options.roadmapEditorPopup.scrollLeft(0)},_onBarDropped:function(){this._updateTimelineColumnHeight()},_onDeleteLane:function(d,c){this.model.get("lanes").remove(c.model);this._laneViews.splice(a.indexOf(this._laneViews,c),1);c.remove();this._updateTimelineColumnHeight();if(this._laneViews.length===1){this._laneViews[0].updateDeleteStatus(false)}},_onBarRowViewRemove:function(){this._updateTimelineColumnHeight()},_updateTimelineColumnHeight:function(){var c=this._getLaneHeight();this._timelineColumnView.updateHeight(c);a.each(this._markerViews,function(d){d.updateHeight(c)})},hideDialog:function(){b("#inline-dialog-roadmap-dialog, #inline-dialog-timeline-options").hide()},removeDialog:function(){b("#inline-dialog-roadmap-dialog, #inline-dialog-timeline-options").remove()},_onBarDragstart:function(f,d){var c=this;this.hideDialog();this._updateDragArea();this._barRowNewViewList=[];a.each(this._laneViews,function(e){c._barRowNewViewList.push(e.addNewBarRow(d.helper))})},_updateDragArea:function(){var c=this.$roadmapContainer.find(".roadmap-drag-area");c.css(this._timelineColumnView.getSizeAndPosition())},_onBarDragstop:function(){a.each(a.flatten(this._barRowNewViewList),function(c){c.remove()});delete this._barRowNewViewList;a.each(this._laneViews,function(c){c.removeEmptyRow()})},_setupLaneReordering:function(){this.$roadmapContent.sortable({axis:"y",cursor:"move",handle:".roadmap-lane-title",opacity:0.3,placeholder:"roadmap-lane lane-sorting-placeholder",helper:function(d,c){return b(c).clone().addClass("lane-sorting-hepler")}})},_onSortStart:function(d,c){this.hideDialog();this._timelineColumnView.$el.hide();c.placeholder.css({height:Math.min(c.helper.height(),100),width:c.helper.width()}).html(Confluence.Templates.Roadmap.lane(Roadmap.TRANSPARENT_LANE));c.helper.find(".roadmap-lane-content").css({width:c.helper.width()-(c.helper.find(".roadmap-lane-title").outerWidth()+c.helper.find(".roadmap-separate-content").outerWidth())})},_onSortStop:function(h,g){this._timelineColumnView.$el.show();var d=g.item.attr("cid");var f=a.find(this._laneViews,function(e){return e.cid===d});var c=f.model;var i=this.model.get("lanes");i.remove(c);i.models.splice(g.item.index(),0,c);i._byId[c.cid]=c},_onRemove:function(){this.$roadmapTimeline.remove()},_isMonthYearChanged:function(){var d=function(f,e){if(f.getMonth()!==e.getMonth()||f.getYear()!==e.getYear()){return true}return false};var c=this.model.get("timeline");return d(c._previousAttributes.startDate,c.attributes.startDate)||d(c._previousAttributes.endDate,c.attributes.endDate)},_isWeekChanged:function(){var c=function(l,k){var j=moment(l);var i=moment(k);return j.get("year")===i.get("year")&&j.isoWeek()===i.isoWeek()};var d=this.model.get("timeline");var g=d._previousAttributes.startDate;var h=d.attributes.startDate;var f=d._previousAttributes.endDate;var e=d.attributes.endDate;return !(c(g,h)&&c(f,e))},_isTimelineChanged:function(){var d=this.model.get("timeline");var c=d.changed.displayOption;if(c){this.model.updateDurationUnit(d.get("displayOption"))}else{c=d.get("displayOption")===Roadmap.TIMELINE_DISPLAY_OPTION.MONTH?this._isMonthYearChanged():this._isWeekChanged()}return c},resize:function(){this._updateLaneWidth();this._updateTimelineColumnHeight();this.$roadmapContent.css({top:this.$roadmapTimeline.find(".roadmap-column-title:first").innerHeight()})}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-analytics-resources', location = 'analytics/roadmap-analytics.js' */
Confluence.Roadmap=Confluence.Roadmap||{};Confluence.Roadmap.Analytics=(function(f,j){var c={INSERT:"confluence.roadmap.insert",CREATE:"confluence.roadmap.create",EDIT:"confluence.roadmap.edit",EDIT_ACTIONS:{OPEN_BAR_DIALOG:"confluence.roadmap.editmode.open_bar_dialog",ADD_DESCRIPTION:"confluence.roadmap.editmode.add_description",ADD_PAGE_LINK:"confluence.roadmap.editmode.add_page_link"},VIEW_ACTIONS:{OPEN_BAR_DIALOG:"confluence.roadmap.viewmode.open_bar_dialog",CLICK_PAGE_LINK:"confluence.roadmap.viewmode.click_page_link",ADD_PAGE_LINK:"confluence.roadmap.viewmode.add_page_link"}};function h(o,p){AJS.trigger("analytics",{name:o,data:p})}function m(p){var o=0;j.each(p.lanes,function(q){o=o+q.bars.length});return{lanes:p.lanes.length,bars:o,markers:p.markers.length,months:Confluence.Roadmap.DateUtilities.getNumberOfMonths(p.timeline.startDate,p.timeline.endDate)+1}}function k(){h(c.INSERT)}function d(p){var o=m(p);h(c.CREATE,o)}function e(p){var o=m(p);h(c.EDIT,o)}function a(){h(c.EDIT_ACTIONS.OPEN_BAR_DIALOG)}function n(){h(c.VIEW_ACTIONS.OPEN_BAR_DIALOG)}function b(){h(c.VIEW_ACTIONS.CLICK_PAGE_LINK)}function l(){h(c.EDIT_ACTIONS.ADD_DESCRIPTION)}function g(o){h(c.EDIT_ACTIONS.ADD_PAGE_LINK,o)}function i(o){h(c.VIEW_ACTIONS.ADD_PAGE_LINK,o)}return{insertRoadmap:k,createRoadmap:d,editRoadmap:e,openBarDialogInEdit:a,addDescription:l,addPageLinkEditMode:g,addPageLinkViewMode:i,openBarDialogInView:n,clickPageLink:b}})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-dialog-resources-for-editor', location = 'view/dialog-view.js' */
(function(b,a){window.Roadmap=window.Roadmap||{};Roadmap.InlineDialogView=Backbone.View.extend({initialize:function(c){a.bindAll(this,"_onDocumentClick","_onKeyDown","_shouldHide","_onHide");this._trigger=c.trigger;this._dialogOptions=c.dialogOptions;this._reset();var d=this;b(".roadmap-editor-popup, .roadmap-macro-view").scroll(function(){d.hide()})},_shouldHideWhenClick:function(c){return !b.contains(this._inlineDialog[0],c.target)},_createInlineDialog:function(d,f){var e,g=this;function h(l,k,j){g._getContent(l);j()}function c(){g._onBeforeShow();a.delay(function(){AJS.InlineDialog.current=null;g._onShow();b(document).on({click:g._onDocumentClick,keydown:g._onKeyDown})},g._inlineDialog.getOptions().fadeTime)}var i={hideCallback:this._onHide,initCallback:c,noBind:true,persistent:true,preHideCallback:this._shouldHide};if(f&&f.isSideInlineDialog){a.extend(i,{calculatePositions:a.compose(this._calculateSidePositions,this._getSideDimensions),offsetX:8,offsetY:0});if(Raphael.version){a.extend(i,{getArrowPath:this._getSideArrowPath})}}e=new AJS.InlineDialog(d,"roadmap-dialog",h,a.extend({},i,f));return e},_onHide:function(){b(document).off({click:this._onDocumentClick,keydown:this._onKeyDown})},hide:function(){this._inlineDialog.remove()},_onDocumentClick:function(c){this._shouldHideWhenClick(c)&&this.hide()},_onBeforeShow:b.noop,_onKeyDown:function(f){var c=f.which===b.ui.keyCode.ESCAPE,d=b(f.target).is(":input");if(c&&!d){this.hide()}},_onShow:b.noop,_reset:function(){this._inlineDialog=this._createInlineDialog(this._trigger,this._dialogOptions);this.setElement(this._inlineDialog)},_shouldHide:function(){return true},show:function(){this._inlineDialog.show()},disable:function(){this.$el.find(":input").attr("disabled","disabled")},enable:function(){this.$el.find(":input").removeAttr("disabled")},_onSubmit:function(){throw new Error("DialogView subclasses must implement _onSubmit().")},_getSideDimensions:function(e,i,p,c){var k=c.container.toLowerCase()!=="body";var d=AJS.$(c.container);var l=k?AJS.$(c.container).parent():AJS.$(window);var n=k?d.offset():{left:0,top:0};var j=k?l.offset():{left:0,top:0};var g=i.target;var q=g.offset();var m=g[0].getBoundingClientRect&&g[0].getBoundingClientRect();var f=m?m.width:g.outerWidth();if(c.timelineWidth){var h=g.position();if(h.left+f>c.timelineWidth){f=c.timelineWidth-h.left-1}}var o={screenPadding:10,arrowMargin:5,window:{top:j.top,left:j.left,scrollTop:l.scrollTop(),scrollLeft:l.scrollLeft(),width:l.width(),height:l.height()},scrollContainer:{width:d.width(),height:d.height()},trigger:{top:q.top-n.top,left:q.left-n.left,width:f,height:m?m.height:g.outerHeight()},dialog:{width:e.width(),height:e.height(),offset:{top:c.offsetY,left:c.offsetX}},arrow:{height:e.find(".arrow").outerHeight()}};return o},_calculateSidePositions:function(i){var g=i.screenPadding;var h=i.window;var o=i.trigger;var y=i.dialog;var f=i.arrow;var s=i.scrollContainer;var A={top:o.top-h.scrollTop,left:o.left-h.scrollLeft};var t=Math.floor(o.height/2);var q=Math.floor(y.height/2);var p=Math.floor(f.height/2);var x=A.left-y.offset.left-g;var B=s.width-A.left-o.width-y.offset.left-g;var u=x>=y.width;var e=B>=y.width;var w=!e&&u?"left":"right";var k=A.top+t-p;var m=h.height-k-f.height;g=Math.min(g,k-i.arrowMargin);g=Math.min(g,m-i.arrowMargin);var l=Math.max(A.top-g,0);var c=Math.max(h.height-A.top-o.height-g,0);var d=Math.max(q-t-y.offset.top-l,0);var v=Math.max(q-t+y.offset.top-c,0);var j=d||-v||0;var r={top:o.top+t-q+y.offset.top+j,left:w==="right"?o.left+o.width+y.offset.left:o.left-y.width-y.offset.left};var z="w";var n={position:"absolute",top:q-p-j};if(w==="right"){n.right="auto";n.left=Raphael.version?"-7px":"0px"}else{n.right="-7px";n.left="auto";z="e"}return{dialogLocation:w,popupCss:r,arrowCss:n,gravity:z}},_getSideArrowPath:function(c){return c.dialogLocation==="right"?"M8,0L0,8,8,16":"M8,0L16,8,8,16"},refresh:function(){this._inlineDialog&&this._inlineDialog.refresh()}})})(AJS.$,window._);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend', location = 'lib/jquery.viewport.js' */
(function(a){a.belowthefold=function(c,d){var b=a(window).height()+a(window).scrollTop();return b<=a(c).offset().top-d.threshold};a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold};a.rightofscreen=function(c,d){var b=a(window).width()+a(window).scrollLeft();return(b<=a(c).offset().left-d.threshold)||a(c).offset().left<0};a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold};a.inviewport=function(b,c){return !a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(c,d,b){return a.belowthefold(c,{threshold:0})},"above-the-top":function(c,d,b){return a.abovethetop(c,{threshold:0})},"left-of-screen":function(c,d,b){return a.leftofscreen(c,{threshold:0})},"right-of-screen":function(c,d,b){return a.rightofscreen(c,{threshold:0})},"in-viewport":function(c,d,b){return a.inviewport(c,{threshold:0})}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend', location = 'lib/jquery.ellipsis.min.js' */
/*! jQuery ellipsis - v1.1.1 - 2014-02-23
* https://github.com/STAR-ZERO/jquery-ellipsis
* Copyright (c) 2014 Kenji Abe; Licensed MIT */
!function(a){a.fn.ellipsis=function(b){var c={row:1,onlyFullWords:!1,"char":"...",callback:function(){},position:"tail"};return b=a.extend(c,b),this.each(function(){var c=a(this),d=c.text(),e=d,f=e.length,g=c.height();c.text("a");var h=parseFloat(c.css("lineHeight"),10),i=c.height(),j=h>i?h-i:0,k=j*(b.row-1)+i*b.row;if(k>=g)return c.text(d),void b.callback.call(this);var l=1,m=0,n=d.length;if("tail"===b.position){for(;n>l;)m=Math.ceil((l+n)/2),c.text(d.slice(0,m)+b["char"]),c.height()<=k?l=m:n=m-1;d=d.slice(0,l),b.onlyFullWords&&(d=d.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),d+=b["char"]}else if("middle"===b.position){for(var o=0;n>l;)m=Math.ceil((l+n)/2),o=Math.max(f-m,0),c.text(e.slice(0,Math.floor((f-o)/2))+b["char"]+e.slice(Math.floor((f+o)/2),f)),c.height()<=k?l=m:n=m-1;o=Math.max(f-l,0);var p=e.slice(0,Math.floor((f-o)/2)),q=e.slice(Math.floor((f+o)/2),f);b.onlyFullWords&&(p=p.replace(/[\u00AD\w\uac00-\ud7af]+$/,"")),d=p+b["char"]+q}c.text(d),b.callback.call(this)}),this}}(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend', location = 'editor/md5.js' */
var hexcase=0;var b64pad="";function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)))}function b64_md5(a){return rstr2b64(rstr_md5(str2rstr_utf8(a)))}function any_md5(a,b){return rstr2any(rstr_md5(str2rstr_utf8(a)),b)}function hex_hmac_md5(a,b){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function b64_hmac_md5(a,b){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function any_hmac_md5(a,c,b){return rstr2any(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(c)),b)}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),a.length*8))}function rstr_hmac_md5(c,f){var e=rstr2binl(c);if(e.length>16){e=binl_md5(e,c.length*8)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828}var g=binl_md5(a.concat(rstr2binl(f)),512+f.length*8);return binl2rstr(binl_md5(d.concat(g),512+128))}function rstr2hex(c){try{hexcase}catch(g){hexcase=0}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15)}return b}function rstr2b64(c){try{b64pad}catch(h){b64pad=""}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var f=0;f<a;f+=3){var k=(c.charCodeAt(f)<<16)|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0);for(var d=0;d<4;d++){if(f*8+d*6>c.length*8){b+=b64pad}else{b+=g.charAt((k>>>6*(3-d))&63)}}}return b}function rstr2any(m,c){var b=c.length;var l,f,a,n,e;var k=Array(Math.ceil(m.length/2));for(l=0;l<k.length;l++){k[l]=(m.charCodeAt(l*2)<<8)|m.charCodeAt(l*2+1)}var h=Math.ceil(m.length*8/(Math.log(c.length)/Math.log(2)));var g=Array(h);for(f=0;f<h;f++){e=Array();n=0;for(l=0;l<k.length;l++){n=(n<<16)+k[l];a=Math.floor(n/b);n-=a*b;if(e.length>0||a>0){e[e.length]=a}}g[f]=n;k=e}var d="";for(l=g.length-1;l>=0;l--){d+=c.charAt(g[l])}return d}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++}if(a<=127){b+=String.fromCharCode(a)}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63))}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63))}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63))}}}}}return b}function str2rstr_utf16le(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode(b.charCodeAt(c)&255,(b.charCodeAt(c)>>>8)&255)}return a}function str2rstr_utf16be(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode((b.charCodeAt(c)>>>8)&255,b.charCodeAt(c)&255)}return a}function rstr2binl(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(c%32)}return a}function binl2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(c%32))&255)}return a}function binl_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,k,j,e,i,h){return md5_cmn((f&k)|((~f)&j),g,f,e,i,h)}function md5_gg(g,f,k,j,e,i,h){return md5_cmn((f&j)|(k&(~j)),g,f,e,i,h)}function md5_hh(g,f,k,j,e,i,h){return md5_cmn(f^k^j,g,f,e,i,h)}function md5_ii(g,f,k,j,e,i,h){return md5_cmn(k^(f|(~j)),g,f,e,i,h)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend', location = 'editor/roadmap-editor.js' */
AJS.toInit(function(f){var d,b,h,i,k,g;var a="~~~~~";var j=window.tinymce;var e=AJS.DarkFeatures.isEnabled("frontend.roadmap.planner.macro.incremental.save");AJS.MacroBrowser.setMacroJsOverride("roadmap",{opener:function(n){var r=function(y,w,x,z){var v=x?x.split(a):[];var u=w?w.split(a):[];if(!_.isEmpty(v)){f.ajax({type:"POST",contentType:"application/json",url:AJS.contextPath()+"/rest/roadmap/1.0/extractPageLinks",data:JSON.stringify({wikiLinks:_.object(v,u),roadmapSpace:AJS.Meta.get("space-key")}),success:function(A){_.each(y.lanes,function(B){_.chain(B.bars).filter(function(C){return _.contains(v,C.id)}).each(function(C){if(A[C.id]){C.pageLink=A[C.id]}})});z&&z()},error:function(A){AJS.log(A);z&&z()}})}else{z&&z()}},s=function(v){var w=[];var u=[];v.lanes.forEach(function(x){x.bars.forEach(function(y){if(!_.isEmpty(y.pageLink)){var z=y.pageLink.wikiLink.replace(/[\][]/g,"");w.push(_.escape(z));u.push(y.id)}})});return{pageLinks:w.join(a),mapLinks:u.join(a),}};if(n.params&&n.params.timeline!=="true"){var t="roadmap-deprecation-dialog";var p=f(Confluence.Templates.Roadmap.deprecationDialog({id:t}));AJS.dialog2(p).on("hide",function(){f("#"+t).remove()}).on("show",function(){f("#dialog-close-button",p).click(function(u){u.preventDefault();AJS.dialog2("#"+t).hide()})}).show();return false}var q;var l=j&&!!j.activeEditor;var o=!l&&e;var m=function(){var E="confluence-roadmap-dialog";var x="roadmap-popup-panel";var A;var C=function(){b.find("#roadmapInsertBtn").attr("disabled","disabled");b.find("#roadmapCancelBtn").attr("disabled","disabled");if(o){z()}};var v=function(){b.find("#roadmapInsertBtn").removeAttr("disabled");b.find("#roadmapCancelBtn").removeAttr("disabled")};window.addEventListener("offline",C);window.addEventListener("online",v);var F=function(){window.removeEventListener("online",v);window.removeEventListener("offline",C)};function w(){if(g){clearInterval(g)}g=setInterval(function(){B()},15000)}function z(){clearInterval(g)}function B(){var H=i.model.toMacroData();var J=encodeURIComponent(JSON.stringify(H));var K=hex_md5(J);var L=s(H);var G={timeline:"true",source:J,hash:K,title:encodeURIComponent(H.title),pagelinks:L.pageLinks,maplinks:L.mapLinks,};var I=require("confluence-macro-browser/macro-browser-facade");I.saveMacro({name:"roadmap",params:G})}if(typeof d=="undefined"){d=aui.dialog.dialog2({id:E,size:"xlarge",titleText:"Insert Roadmap Planner",content:Confluence.Templates.Roadmap.roadmapPopupPanel({roadmapPopupPanelId:x}),footerActionContent:Confluence.Templates.Roadmap.footerActionContent({roadmapShouldAutoSave:o}),modal:true});b=f(d).appendTo(f("body"));b.find("#roadmapInsertBtn").on("click",function(L){i.removeDialog();var H=i.model.toMacroData();var J=encodeURIComponent(JSON.stringify(H));var K=hex_md5(J);var M=s(H);var G={timeline:"true",source:J,hash:K,title:encodeURIComponent(H.title),pagelinks:M.pageLinks,maplinks:M.mapLinks,};var I=require("confluence-macro-browser/macro-browser-facade");I.insert({name:"roadmap",params:G});i.remove();A.hide();if(k){Confluence.Roadmap.Analytics.createRoadmap(H)}else{Confluence.Roadmap.Analytics.editRoadmap(H)}if(o){z()}F()});if(o){b.find("#roadmapCloseBtn").on("click",function(G){i.removeDialog();i.remove();A.hide();F();z()})}else{b.find("#roadmapCancelBtn").on("click",function(G){i.removeDialog();i.remove();A.hide();F()})}h=b.find(".roadmap-editor-popup")}A=AJS.dialog2("#"+E).show();var u=f("#"+x);var D=u.find(".roadmap-view");if(!D.length){D=f('<div class="roadmap-view"/>');u.append(D)}var y=new Roadmap.Roadmap(q,{parse:true});i=new Roadmap.RoadmapEditorView({model:y,dialogId:E,el:D,roadmapEditorPopup:h});i.render();if(o){w()}c()};if(n.params&&n.params.source){k=false;q=JSON.parse(decodeURIComponent(n.params.source));r(q,n.params.pagelinks,n.params.maplinks,m)}else{k=true;Confluence.Roadmap.Analytics.insertRoadmap();m()}}});function c(){setTimeout(function(){if(b&&b.is(":visible")){var o=b.height(),n=b.find(".aui-dialog2-header").outerHeight(),p=b.find(".aui-dialog2-footer").outerHeight(),m=b.find("#roadmap-editor-toolbar").outerHeight(),l=b.find(".roadmap-editor-popup");l.css("height",o-n-p-m)}},0)}f(window).resize(function(){c();i&&i.resize()})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-roadmap-plugin:roadmap-editor-resources-conf-frontend', location = 'editor/roadmap-editor-config.js' */
(function(){window.Roadmap=window.Roadmap||{};Roadmap.COLORS=[{lane:"#f6c342",bar:"#fadb8e",text:"#594300"},{lane:"#3b7fc4",bar:"#6c9fd3",text:"#ffffff"},{lane:"#d04437",bar:"#dc7369",text:"#ffffff"},{lane:"#8eb021",bar:"#aac459",text:"#ffffff"},{lane:"#ea632b",bar:"#ef8a60",text:"#ffffff"},{lane:"#654982",bar:"#8c77a1",text:"#ffffff"},{lane:"#f15c75",bar:"#f58598",text:"#ffffff"},{lane:"#815b3a",bar:"#a1846b",text:"#ffffff"}];Roadmap.TIMELINE_DISPLAY_OPTION={MONTH:"MONTH",WEEK:"WEEK"};Roadmap.SHORT_DATE_FORMAT="YYYY-MM-DD";Roadmap.TWO_YY_SHORT_DATE_FORMAT="YY-MM-DD";Roadmap.DATE_FORMAT="YYYY-MM-DD HH:mm:ss";Roadmap.WEEK_FORMAT="DD-MMM";Roadmap.MONTH_FORMAT="MMM";Roadmap.TIMELINE_YEARS_LIMIT=5;Roadmap.LANE_TITLE_WIDTH=45;Roadmap.MARKER_HEIGHT_PADDING=10;Roadmap.MARKER_TITLE_LINE=2;Roadmap.LANE_PADDING=11;Roadmap.BAR_PADDING=8;Roadmap.BAR_MARGIN=1;Roadmap.BAR_BORDER=1;Roadmap.MONTH_WIDTH=101;Roadmap.WEEK_WIDTH=101;Roadmap.EXTRA_SPACE_AROUND=Roadmap.BAR_PADDING*2+Roadmap.BAR_BORDER*2;Roadmap.MONTH_BAR_MIN_WIDTH=Roadmap.MONTH_WIDTH/4-Roadmap.EXTRA_SPACE_AROUND;Roadmap.WEEK_BAR_MIN_WIDTH=Roadmap.WEEK_WIDTH-Roadmap.EXTRA_SPACE_AROUND;Roadmap.barMinWidth=Roadmap.MONTH_BAR_MIN_WIDTH;Roadmap.TRANSPARENT_LANE={title:"",color:{lane:"#ffffff",bar:"#ffffff",text:"#ffffff"}};Roadmap.DragDrop={};Roadmap.BarDialog={MAX_LENGTH_TITLE:100,MAX_LENGTH_DESCRIPTION:150};Roadmap.getDefaultRoadmapData=function(){var a=moment(new Date()).hours(0).minutes(0).seconds(0).milliseconds(0).toDate();var b=moment(a).add(11,"months").toDate();return{title:"Roadmap Planner",timeline:{startDate:new Date(a),endDate:b,displayOption:Roadmap.TIMELINE_DISPLAY_OPTION.MONTH},lanes:[{title:"Lane 1",color:Roadmap.COLORS[0],bars:[{title:"Bar 1",description:"This is the first bar.",startDate:new Date(a.setDate(1)),duration:2,rowIndex:0},{title:"Bar 2",description:"This is the second bar.",startDate:new Date(a),duration:1,rowIndex:1}]},{title:"Lane 2",color:Roadmap.COLORS[1],bars:[{title:"Bar 3",description:"This is the third bar.",startDate:a,duration:2.5,rowIndex:0}]}],markers:[{title:"Marker 1",markerDate:moment(a).date(15).toDate()}]}}})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:navigator-context', location = 'includes/js/api/navigator-context.js' */
define("confluence/api/navigator-context",["confluence/meta","document","window"],function(b,c,h){function n(a){var b={};if(a){"?"===a.substr(0,1)&&(a=a.substr(1));a=a.split("\x26");for(var c=0;c<a.length;c++){var d=a[c].split("\x3d");b[d[0]]||(b[d[0]]=[]);b[d[0]].push(a[c].substring(d[0].length+1))}}return b}var e=function(a){a=b.get(a);return!!a&&"0"!==a},k=function(a){return(a=a.match(/[^/?#]*\/plugins\/servlet\/ac\/([^/?#]*)\/([^/?#]*)$/))?{addonKey:a[1],moduleKey:a[2]}:null},l=function(){return 0<
c.querySelectorAll("[data-fabric-mode]").length},m=function(){return!!c.querySelector(".page.view")||!!c.querySelector(".blogpost.view")},f=function(){return!!c.querySelector(".page.edit")||!!c.querySelector(".blogpost.edit")||l()},g=function(){return b.get("content-type")},p=function(a){var b=k(a.pathname),c=n(a.search);a=Object.keys(c).reduce(function(a,b){a[decodeURIComponent(b).replace(/^ac\./g,"")]=c[b].map(decodeURIComponent);return a},{});return{target:"addonmodule",context:{addonKey:decodeURIComponent(b.addonKey),
moduleKey:decodeURIComponent(b.moduleKey),context:a}}};return{getCurrent:function(){return f()&&!e("page-id")&&e("draft-id")||0<c.querySelectorAll("[data-fabric-mode\x3d'create']").length?{target:"contentcreate",context:{contentId:l()?b.get("page-id"):b.get("draft-id"),contentType:g(),spaceKey:b.get("space-key")}}:f()&&!m()&&e("page-id")||0<c.querySelectorAll("[data-fabric-mode\x3d'edit']").length?{target:"contentedit",context:{contentId:b.get("page-id"),contentType:g(),spaceKey:b.get("space-key")}}:
!f()&&m()&&e("page-id")?{target:"contentview",context:{contentId:b.get("page-id"),contentType:g(),spaceKey:b.get("space-key")}}:null!=k(h.location.pathname)?p(h.location):{target:"unknown",context:{}}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:dialog-options-v5', location = 'v5/js/iframe/host/dialog-options.js' */
!function(){window._AP=window._AP||{};var a=WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:dialog-options.data");for(var n in a)a.hasOwnProperty(n)&&(window._AP[n]=a[n])}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-utils-v5', location = 'v5/js/iframe/host/util.js' */
window._AP=window._AP||{};_AP.util={escapeSelector:function(e){if(!e)throw new Error("No selector to escape");return e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")},isGlobalDefined:function(e){return void 0!==window[e]},awaitGlobal:function(e,r,t){t=t||100;if(_AP.util.isGlobalDefined(e))r(window[e]);else var a=setInterval((function(){if(_AP.util.isGlobalDefined(e)){clearInterval(a);r(window[e])}}),t)},getBooleanFeatureFlag:function(e){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled&&AJS.DarkFeatures.isEnabled(e))return!0;var r=document.querySelector('meta[name="ajs-fe-feature-flags"]');if(!r)return!1;var t=r.getAttribute("content");if(!t)return!1;var a={};try{a=JSON.parse(t)}catch(e){return!1}return!(!a[e]||"boolean"!=typeof a[e].value)&&a[e].value}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).connectHost=t()}(this,(function(){"use strict";function e(){e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};return e.apply(this,arguments)}function t(e,n){t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){e.__proto__=t;return e};return t(e,n)}function n(e,n){e.prototype=Object.create(n.prototype);e.prototype.constructor=e;t(e,n)}function i(){}i.prototype=Object.create(null);function o(){o.init.call(this)}o.EventEmitter=o;o.usingDomains=!1;o.prototype.domain=void 0;o.prototype._events=void 0;o.prototype._maxListeners=void 0;o.defaultMaxListeners=10;o.init=function(){this.domain=null;o.usingDomains&&undefined.active;if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new i;this._eventsCount=0}this._maxListeners=this._maxListeners||void 0};o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');this._maxListeners=e;return this};function r(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}o.prototype.getMaxListeners=function(){return r(this)};function a(e,t,n){if(t)e.call(n);else for(var i=e.length,o=g(e,i),r=0;r<i;++r)o[r].call(n)}function s(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,r=g(e,o),a=0;a<o;++a)r[a].call(n,i)}function d(e,t,n,i,o){if(t)e.call(n,i,o);else for(var r=e.length,a=g(e,r),s=0;s<r;++s)a[s].call(n,i,o)}function c(e,t,n,i,o,r){if(t)e.call(n,i,o,r);else for(var a=e.length,s=g(e,a),d=0;d<a;++d)s[d].call(n,i,o,r)}function l(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,r=g(e,o),a=0;a<o;++a)r[a].apply(n,i)}o.prototype.emit=function(e){var t,n,i,o,r,u,f,p="error"===e;if(u=this._events)p=p&&null==u.error;else if(!p)return!1;f=this.domain;if(p){t=arguments[1];if(!f){if(t instanceof Error)throw t;var g=new Error('Uncaught, unspecified "error" event. ('+t+")");g.context=t;throw g}t||(t=new Error('Uncaught, unspecified "error" event'));t.domainEmitter=this;t.domain=f;t.domainThrown=!1;f.emit("error",t);return!1}if(!(n=u[e]))return!1;var h="function"==typeof n;switch(i=arguments.length){case 1:a(n,h,this);break;case 2:s(n,h,this,arguments[1]);break;case 3:d(n,h,this,arguments[1],arguments[2]);break;case 4:c(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:o=new Array(i-1);for(r=1;r<i;r++)o[r-1]=arguments[r];l(n,h,this,o)}return!0};function u(e,t,n,o){var a,s,d,c;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(s=e._events){if(s.newListener){e.emit("newListener",t,n.listener?n.listener:n);s=e._events}d=s[t]}else{s=e._events=new i;e._eventsCount=0}if(d){"function"==typeof d?d=s[t]=o?[n,d]:[d,n]:o?d.unshift(n):d.push(n);if(!d.warned&&(a=r(e))&&a>0&&d.length>a){d.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning";l.emitter=e;l.type=t;l.count=d.length;c=l,"function"==typeof console.warn?console.warn(c):console.log(c)}}else{d=s[t]=n;++e._eventsCount}return e}o.prototype.addListener=function(e,t){return u(this,e,t,!1)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function(e,t){return u(this,e,t,!0)};function f(e,t,n){var i=!1;function o(){e.removeListener(t,o);if(!i){i=!0;n.apply(e,arguments)}}o.listener=n;return o}o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');this.on(e,f(this,e,t));return this};o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');this.prependListener(e,f(this,e,t));return this};o.prototype.removeListener=function(e,t){var n,o,r,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener&&n.listener===t)if(0==--this._eventsCount)this._events=new i;else{delete o[e];o.removeListener&&this.emit("removeListener",e,n.listener||t)}else if("function"!=typeof n){r=-1;for(a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=n[a].listener;r=a;break}if(r<0)return this;if(1===n.length){n[0]=void 0;if(0==--this._eventsCount){this._events=new i;return this}delete o[e]}else!function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(n,r);o.removeListener&&this.emit("removeListener",e,s||t)}return this};o.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener){if(0===arguments.length){this._events=new i;this._eventsCount=0}else n[e]&&(0==--this._eventsCount?this._events=new i:delete n[e]);return this}if(0===arguments.length){for(var o,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(o=r[a])&&this.removeAllListeners(o);this.removeAllListeners("removeListener");this._events=new i;this._eventsCount=0;return this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this};o.prototype.listeners=function(e){var t,n,i=this._events;n=i&&(t=i[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[];return n};o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)};o.prototype.listenerCount=p;function p(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function g(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}var h=function(e){n(t,e);function t(){var t;(t=e.call(this)||this).setMaxListeners(20);return t}var i=t.prototype;i.dispatch=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emit.apply(this,["before:"+e].concat(n));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+e].concat(n))};i.registerOnce=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.once(e,t)};i.register=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.on(e,t)};i.unregister=function(e,t){if("string"!=typeof e)throw"ACJS: event name must be string";this.removeListener(e,t)};return t}(o),m=new h,y=function(e,t){m.dispatch("iframe-bridge-timeout",{$el:e,extension:t})},v=function(e,t){m.dispatch("iframe-bridge-cancelled",{$el:e,extension:t})},_=window.AJS&&window.AJS.$||function(){},x="ap-status-indicator",b='<div class="ap-loading"><div class="small-spinner"></div>Loading app...</div>',w='<div class="ap-load-timeout"><div class="small-spinner"></div>App is not responding. Wait or <a href="#" class="ap-btn-cancel">cancel</a>?</div>',k="App failed to load.",E=new(function(){function e(){this._stateRegistry={}}var t=e.prototype;t._loadingContainer=function(e){return e.find(".ap-status-indicator")};t.render=function(){var e=document.createElement("div");e.classList.add(x);e.innerHTML=b;var t=_(e);this._startSpinner(t);return t};t._startSpinner=function(e){setTimeout((function(){var t=e.find(".small-spinner");t.length&&t.spin&&t.spin({lines:12,length:3,width:2,radius:3,trail:60,speed:1.5,zIndex:1})}),10)};t.hide=function(e,t){this._clearTimeout(t);this._loadingContainer(e)[0].style.display="none"};t.cancelled=function(e,t){var n=k;this._loadingContainer(e).empty().text(n)};t._setupTimeout=function(e,t){this._stateRegistry[t.id]=setTimeout((function(){y(e,t)}),12e3)};t._clearTimeout=function(e){if(this._stateRegistry[e]){clearTimeout(this._stateRegistry[e]);delete this._stateRegistry[e]}};t.timeout=function(e,t){var n=_(w),i=this._loadingContainer(e);i.empty().append(n);this._startSpinner(i);_("a.ap-btn-cancel",i).click((function(){v(e,t)}));this._clearTimeout(t);return i};return e}());m.register("iframe-create",(function(e){e.extension.options.noDom||E._setupTimeout(e.$el.parents(".ap-iframe-container"),e.extension)}));m.register("iframe-bridge-established",(function(e){e.extension.options.noDom||E.hide(e.$el.parents(".ap-iframe-container"),e.extension.id)}));m.register("iframe-bridge-timeout",(function(e){e.extension.options.noDom||E.timeout(e.$el,e.extension.id)}));m.register("iframe-bridge-cancelled",(function(e){e.extension.options.noDom||E.cancelled(e.$el,e.extension.id)}));m.register("iframe-destroyed",(function(e){E._clearTimeout(e.extension.extension_id)}));function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}function C(e,n,i){C=A()?Reflect.construct.bind():function(e,n,i){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(e,o));i&&t(r,i.prototype);return r};return C.apply(null,arguments)}var O="[Simple-XDM] ",I=Function.prototype.bind,S={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},randomString:function(){return Math.floor(1e9*Math.random()).toString(16)},isString:function(e){return"string"==typeof e||e instanceof String},argumentsToArray:function(e){return Array.prototype.slice.call(e)},argumentNames:function(e){return e.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/gm,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(e){var t=e.length;return t>0&&"function"==typeof e[t-1]},error:function(e){if(window.console&&window.console.error){var t=[];if("string"==typeof e){t.push(O+e);t=t.concat(Array.prototype.slice.call(arguments,1))}else{t.push(O);t=t.concat(Array.prototype.slice.call(arguments))}window.console.error.apply(null,t)}},warn:function(e){window.console&&console.warn(O+e)},log:function(e){window.console&&window.console.log(O+e)},_bind:function(e,t){return I&&t.bind===I?t.bind(e):function(){return t.apply(e,arguments)}},throttle:function(e,t,n){var i=0;return function(){var o=Date.now();if(o-i>t){i=o;e.apply(n,arguments)}}},each:function(e,t){var n,i;if(e)if(null!=(n=e.length)&&"function"!=typeof e){i=0;for(;i<n&&!1!==t.call(e[i],i,e[i]);)i+=1}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))break},extend:function(e){var t=arguments,n=[].slice.call(t,1,t.length);n.forEach((function(t){"object"==typeof t&&Object.getOwnPropertyNames(t).forEach((function(n){e[n]=t[n]}))}));return e},sanitizeStructuredClone:function(e){var t=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],n=[Error,Node],i=S.warn,o=[];return function e(r){if("function"==typeof r){i("A function was detected and removed from the message.");return null}if(n.some((function(e){if(r instanceof e){i(e.name+" object was detected and removed from the message.");return!0}return!1})))return{};if(r&&"object"==typeof r&&t.every((function(e){return!(r instanceof e)}))){var a;if(Array.isArray(r))a=r.map((function(t){return e(t)}));else{if(o.indexOf(r)>-1){i("A circular reference was detected and removed from the message.");return null}o.push(r);a={};for(var s in r)if(r.hasOwnProperty(s)){var d=e(r[s]);null!==d&&(a[s]=d)}o.pop()}return a}return r}(e)},getOrigin:function(e,t){if("function"==typeof URL)try{return new URL(e,t).origin}catch(e){}var n=document.implementation.createHTMLDocument("");if(t){var i=n.createElement("base");i.href=t;n.head.appendChild(i)}var o=n.createElement("a");o.href=e;n.body.appendChild(o);var r=o.protocol+"//"+o.hostname;e.match(/\/\/[^/]+:[0-9]+\//)&&(r+=o.port?":"+o.port:"");return r}},P=function(e){n(i,e);var t=i.prototype;t._padUndefinedArguments=function(e,t){return e.length>=t?e:e.concat(new Array(t-e.length))};function i(t){var n;t=t||{};(n=e.call(this,t)||this)._registeredExtensions=t.extensions||{};n._registeredAPIModules={};n._registeredAPIModules._globals={};n._pendingCallbacks={};n._keycodeCallbacks={};n._clickHandler=null;n._pendingEvents={};n._messageHandlers={init:n._handleInit,req:n._handleRequest,resp:n._handleResponse,broadcast:n._handleBroadcast,event_query:n._handleEventQuery,key_triggered:n._handleKeyTriggered,addon_clicked:n._handleAddonClick,get_host_offset:n._getHostOffset,unload:n._handleUnload};return n}t._verifyAPI=function(e,t){var n=e.data.targets;if(n){var i=this.getApiSpec(),o=!1;!function e(t,n){Object.getOwnPropertyNames(n).forEach((function(i){"object"==typeof n[i]&&t[i]?e(t[i],n[i]):"parent"===n[i]&&t[i]&&(o=!0)}))}(i,n);e.source.postMessage({type:"api_tamper",tampered:o},t.extension.url)}};t._handleInit=function(e,t){e.source.postMessage({type:"init_received"},t.extension.url);this._registeredExtensions[t.extension_id].source=e.source;if(t.initCallback){t.initCallback(e.data.eid);delete t.initCallback}e.data.targets&&this._verifyAPI(e,t)};t._getHostOffset=function(e,t){var n=e.source,i=null,o=t||window;o===o.top&&"function"==typeof o.getHostOffsetFunctionOverride&&(i=o.getHostOffsetFunctionOverride(n));if("number"!=typeof i){i=0;for(;!this._hasSameOrigin(n);){i++;n=n.parent}}e.source.postMessage({hostFrameOffset:i},e.origin)};t._hasSameOrigin=function(e){if(e===e.top)return!0;try{var t="test_var_"+Math.random().toString(16).substr(2);e[t]=!0;return e[t]}catch(e){}return!1};t._handleResponse=function(e){var t=e.data,n=this._pendingCallbacks[t.mid];if(n){delete this._pendingCallbacks[t.mid];n.apply(window,t.args)}};t.registerRequestNotifier=function(e){this._registeredRequestNotifier=e};t._handleRequest=function(e,t){function n(){var n=S.sanitizeStructuredClone(S.argumentsToArray(arguments));e.source.postMessage({mid:e.data.mid,type:"resp",forPlugin:!0,args:n},t.extension.url)}var i=e.data,o=this._registeredAPIModules[i.mod],r=this.getRegisteredExtensions(t.extension)[0];if(o){var a=i.fn;if(i._cls){var s=o[i._cls],d=i.mod+"-"+i._cls+"-";n._id=i._id;if("constructor"===a){if(!s._construct){s.constructor.prototype._destroy=function(){delete this._context._proxies[d+this._id]};s._construct=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=C(s.constructor,t),o=t[t.length-1];i._id=o._id;i._context=o._context;i._context._proxies[d+i._id]=i;return i}}o=s;a="_construct"}else o=r._proxies[d+i._id]}var c=o[a];if(c){var l=i.args,u=c.length-1;"_construct"===a&&(u=o.constructor.length-1);n._context=r;(l=this._padUndefinedArguments(l,u)).push(n);var f=c.apply(o,l);c.returnsPromise&&("object"!=typeof f&&"function"!=typeof f||"function"!=typeof f.then?n("Defined module method did not return a promise."):f.then((function(e){n(void 0,e)})).catch((function(e){n(e=e instanceof Error?e.message:e)})));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:i.mod,fn:i.fn,type:i.type,addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id})}}};t._handleBroadcast=function(e,t){var n=e.data;this.dispatch(n.etyp,(function(e){return e.extension.addon_key===t.extension.addon_key&&e.extension_id!==t.extension_id}),n.evnt,null,null)};t._handleKeyTriggered=function(e,t){var n=e.data,i=this._keycodeKey(n.keycode,n.modifiers,t.extension_id),o=this._keycodeCallbacks[i];o&&o.forEach((function(e){e.call(null,{addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id,keycode:n.keycode,modifiers:n.modifiers})}),this)};t.defineAPIModule=function(e,t){t=t||"_globals";this._registeredAPIModules[t]=S.extend({},this._registeredAPIModules[t]||{},e);return this._registeredAPIModules};t.isAPIModuleDefined=function(e){return void 0!==this._registeredAPIModules[e]};t._pendingEventKey=function(e,t){var n=e.addon_key||"global";e.key&&(n=n+"@@"+e.key);return n=n+"@@"+t};t.queueEvent=function(e,t,n,i){if(this._findRegistrations(t).some((function(e){return void 0!==e.registered_events}),this))this.dispatch(e,t,n,i);else{this._cleanupInvalidEvents();var o=(new Date).getTime();this._pendingEvents[this._pendingEventKey(t,o)]={type:e,targetSpec:t,event:n,callback:i,time:o,uid:S.randomString()}}};t._cleanupInvalidEvents=function(){var e=this,t=(new Date).getTime();Object.keys(this._pendingEvents).forEach((function(n){var i=e._pendingEvents[n];t-i.time<=3e4||delete e._pendingEvents[n]}))};t._handleEventQuery=function(e,t){var n=this,i={},o=(new Date).getTime();Object.keys(this._pendingEvents).forEach((function(r){var a=n._pendingEvents[r],s=o-a.time<=3e4,d=!a.targetSpec||0!==n._findRegistrations(a.targetSpec).length;d&&a.targetSpec.key&&(d=a.targetSpec.addon_key===t.extension.addon_key&&a.targetSpec.key===t.extension.key);if(s&&d){i[r]=a;a.targetSpec=a.targetSpec||{};n.dispatch(a.type,a.targetSpec,a.event,a.callback,e.source)}else s||delete n._pendingEvents[r]}));this._registeredExtensions[t.extension_id].registered_events=e.data.args;return i};t._handleUnload=function(e,t){if(t){t.extension_id&&this._registeredExtensions[t.extension_id]&&delete this._registeredExtensions[t.extension_id].source;t.unloadCallback&&t.unloadCallback(e.data.eid)}};t.dispatch=function(e,t,n,i,o){function r(t,n){if(t.source&&t.source.postMessage){var o;if(i){o=S.randomString();this._pendingCallbacks[o]=i}t.source.postMessage({type:"evt",mid:o,etyp:e,evnt:n},t.extension.url)}}this._findRegistrations(t||{}).forEach((function(e){o&&!e.source&&(e.source=o);e.source&&S._bind(this,r)(e,n)}),this)};t._findRegistrations=function(e){var t=this;if(0===this._registeredExtensions.length){S.error("no registered extensions",this._registeredExtensions);return[]}var n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(this._registeredExtensions).map((function(e){return t._registeredExtensions[e]}));return e instanceof Function?i.filter(e):i.filter((function(t){return n.every((function(n){return t.extension[n]===e[n]}))}))};t.registerExtension=function(e,t){t._proxies={};t.extension_id=e;this._registeredExtensions[e]=t};t._keycodeKey=function(e,t,n){var i=e;if(t){"string"==typeof t&&(t=[t]);t.sort();t.forEach((function(e){i+="$$"+e}),this)}return i+"__"+n};t.registerKeyListener=function(e,t,n,i){"string"==typeof n&&(n=[n]);var o=this._registeredExtensions[e],r=this._keycodeKey(t,n,e);if(!this._keycodeCallbacks[r]){this._keycodeCallbacks[r]=[];o.source.postMessage({type:"key_listen",keycode:t,modifiers:n,action:"add"},o.extension.url)}this._keycodeCallbacks[r].push(i)};t.unregisterKeyListener=function(e,t,n,i){var o=this._keycodeKey(t,n,e),r=this._keycodeCallbacks[o],a=this._registeredExtensions[e];if(r){if(i){var s=r.indexOf(i);this._keycodeCallbacks[o].splice(s,1)}else delete this._keycodeCallbacks[o];a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:t,modifiers:n,action:"remove"},a.extension.url)}};t.registerClickHandler=function(e){if("function"!=typeof e)throw new Error("callback must be a function");if(null!==this._clickHandler)throw new Error("ClickHandler already registered");this._clickHandler=e};t._handleAddonClick=function(e,t){"function"==typeof this._clickHandler&&this._clickHandler({addon_key:t.extension.addon_key,key:t.extension.key,extension_id:t.extension_id})};t.unregisterClickHandler=function(){this._clickHandler=null};t.getApiSpec=function(e){var t=this;function n(e){return Object.getOwnPropertyNames(e).reduce((function(t,i){var o=e[i];switch(typeof o){case"function":t[i]={args:S.argumentNames(o),returnsPromise:o.returnsPromise||!1};break;case"object":o.hasOwnProperty("constructor")&&(t[i]=n(o))}return t}),{})}return Object.getOwnPropertyNames(this._registeredAPIModules).reduce((function(i,o){var r=t._registeredAPIModules[o];void 0!==r.addonKey&&r.addonKey!==e||(i[o]=n(r));return i}),{})};t._originEqual=function(e,t){function n(e){return"string"==typeof e&&e.length>0}var i=S.getOrigin(e);return!!(n(e)&&n(t)&&n(i))&&t===i};t._checkOrigin=function(e,t){var n=t&&!t.source&&["init"].indexOf(e.data.type)>-1,i=t&&e.source===t.source,o=t&&this._originEqual(t.extension.url,e.origin)&&(n||i);"get_host_offset"===e.data.type&&window===window.top&&(o=!0);"unload"!==e.data.type||!i&&void 0!==e.source||(o=!0);return o};t.getRegisteredExtensions=function(e){return e?this._findRegistrations(e):this._registeredExtensions};t.unregisterExtension=function(e){var t=this._findRegistrations(e);0!==t.length&&t.forEach((function(e){var t=this;Object.keys(this._pendingEvents).forEach((function(n){var i=t._pendingEvents[n].targetSpec||{};i.addon_key===e.extension.addon_key&&i.key===e.extension.key&&delete t._pendingEvents[n]}));delete this._registeredExtensions[e.extension_id]}),this)};t.setFeatureFlagGetter=function(e){this._getBooleanFeatureFlag=e};return i}(function(){function e(e){var t=e||{};this._registerListener(t.listenOn)}var t=e.prototype;t._registerListener=function(e){e&&e.addEventListener||(e=window);e.addEventListener("message",S._bind(this,this._receiveMessage),!1)};t._receiveMessage=function(e){var t,n=this._messageHandlers[e.data.type],i=e.data.eid;i&&this._registeredExtensions&&(t=this._registeredExtensions[i]);if(!n||!this._checkOrigin(e,t))return!1;n.call(this,e,t)};return e}()),T=function(){function e(){this._xdm=new P}var t=e.prototype;t.dispatch=function(e,t,n,i){this._xdm.queueEvent(e,t,n,i);return this.getExtensions(t)};t.broadcast=function(e,t,n){this._xdm.dispatch(e,t,n,null,null);return this.getExtensions(t)};t._createId=function(e){if(!e.addon_key||!e.key)throw Error("Extensions require addon_key and key");return e.addon_key+"__"+e.key+"__"+S.randomString()};t.create=function(e,t,n){var i=this.registerExtension(e,t,n),o=e.options||{},r={extension_id:i,api:this._xdm.getApiSpec(e.addon_key),origin:S.locationOrigin(),options:o};return{id:i,name:JSON.stringify(r),src:e.url}};t.registerRequestNotifier=function(e){this._xdm.registerRequestNotifier(e)};t.registerExtension=function(e,t,n){var i=this._createId(e);this._xdm.registerExtension(i,{extension:e,initCallback:t,unloadCallback:n});return i};t.registerKeyListener=function(e,t,n,i){this._xdm.registerKeyListener(e,t,n,i)};t.unregisterKeyListener=function(e,t,n,i){this._xdm.unregisterKeyListener(e,t,n,i)};t.registerClickHandler=function(e){this._xdm.registerClickHandler(e)};t.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};t.defineModule=function(e,t,n){this._xdm.defineAPIModule(t,e,n)};t.isModuleDefined=function(e){return this._xdm.isAPIModuleDefined(e)};t.defineGlobals=function(e){this._xdm.defineAPIModule(e)};t.getExtensions=function(e){return this._xdm.getRegisteredExtensions(e)};t.unregisterExtension=function(e){return this._xdm.unregisterExtension(e)};t.returnsPromise=function(e){e.returnsPromise=!0};t.setFeatureFlagGetter=function(e){this._xdm.setFeatureFlagGetter(e)};t.registerExistingExtension=function(e,t){return this._xdm.registerExtension(e,t)};return e}(),M=new T,j=["contextJwt","url"],D=function(e,t,n){M.dispatch(e,t,n);m.dispatch("event-dispatch",{type:e,targetSpec:t,event:n})},L=function(e,t,n){m.dispatch("event-public-dispatch",{type:e,event:t,sender:n});var i=n.options||{};i.contextJwt;i.url;var o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++){n=r[i];t.indexOf(n)>=0||(o[n]=e[n])}return o}(i,j);M.dispatch(e,{},{sender:{addonKey:n.addon_key,key:n.key,options:S.sanitizeStructuredClone(o)},event:t})};function F(e){if(!e)throw new Error("No selector to escape");return e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}var B,N={escapeSelector:F,stringToDimension:function(e){var t=!1,n="px";if("string"==typeof e){t=e.indexOf("%")===e.length-1;e=parseInt(e,10);t&&(n="%")}if(!isNaN(e))return e+n},getIframeByExtensionId:function(e){return _("iframe#"+F(e))},first:function(e,t){return t?e.slice(0,t):e[0]},last:function(e){return e[e.length-1]},pick:function(e,t){return"object"!=typeof e?{}:Object.keys(e).filter((function(e){return t.indexOf(e)>=0})).reduce((function(t,n){var i;return Object.assign(t,((i={})[n]=e[n],i))}),{})},debounce:function(e,t){var n;return function(){var i=this,o=[].slice.call(arguments);function r(){n=null;e.apply(i,o)}n&&clearTimeout(n);n=setTimeout(r,t||50)}},isSupported:function(e,t,n,i){return e&&e[t]&&e[t].supports?e[t].supports(n):i},extend:Object.assign,guessProductFromModuleDefined:function(e){return e.isModuleDefined("jira")?"Jira":e.isModuleDefined("confluence")?"Confluence":""}},$={emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=N.last(n);n=N.first(n,-1);D(e,{addon_key:o._context.extension.addon_key},n)},emitPublic:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=N.last(n),r=o._context.extension;n=N.first(n,-1);L(e,n,r)},emitToDataProvider:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=N.last(t);i._context.extension;t=N.first(t,-1);D("dataProviderEvent",{addon_key:i._context.extension.addon_key},t)}},J=function(e,t){m.dispatch("dialog-extension-open",{extension:e,options:t})},R=function(){m.dispatch("dialog-close-active",{})},z=function(e,t){m.dispatch("dialog-button-add",{button:{text:e.text,identifier:e.identifier,data:{userButton:!0}},extension:t})},H={close:function(e){m.dispatch("dialog-close",{dialog:e.dialog,extension:e.extension,customData:e.customData})},closeActive:function(e){m.dispatch("dialog-close-active",e)},clickButton:function(e,t,n){m.dispatch("dialog-button-click",{identifier:e,$el:t,extension:n})},toggleButton:function(e){m.dispatch("dialog-button-toggle",e)},toggleButtonVisibility:function(e){m.dispatch("dialog-button-toggle-visibility",e)}},U=function(e){M.registerKeyListener(e.extension_id,e.key,e.modifiers,e.callback);m.dispatch("dom-event-register",e)},K=function(e){M.unregisterKeyListener(e.extension_id,e.key,e.modifiers,e.callback);m.dispatch("dom-event-unregister",e)},q=function(e){window.addEventListener("keydown",(function(t){t.keyCode===e.keyCode&&e.callback()}))},V=function(e){M.registerClickHandler((function(t){var n=document.getElementById(t.extension_id);n&&e(n)}))},G=function(){M.unregisterClickHandler()},W=new(function(){function e(){}e.prototype.randomIdentifier=function(){return Math.random().toString(16).substring(7)};return e}()),X=[];if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var Y=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.intersectionRatio,n=e.target;if(t>0){Y.unobserve(n);!function(e){X=X.filter((function(t){var n=t.element,i=t.callback;if(n===e){i();return!1}return!0}))}(n)}}))}),{threshold:.25});B=Y.observe.bind(Y)}var Q=function(){function e(){this._addons={}}var t=e.prototype;t._shouldSampleEvent=function(e){return 100*Math.random()<=e};t._track=function(e,t){var n=window,i="connect.addon."+e;(t=t||{}).version=n._AP&&n._AP.version?n._AP.version:void 0;t.userAgent=n.navigator.userAgent;if(!n.AJS)return!1;if(n.AJS.Analytics)n.AJS.Analytics.triggerPrivacyPolicySafeEvent(i,t);else{if(!n.AJS.trigger)return!1;AJS.trigger("analyticsEvent",{name:i,data:t})}return!0};t._trackGasV3=function(e,t){try{window.require("ac/analytics").emitGasV3(e,t)}catch(e){window.Confluence||window.__karma__||console.info("Connect GasV3 catch",e)}};t._time=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};t.trackLoadingStarted=function(e){if(this._addons&&e&&e.id){e.startLoading=this._time();this._addons[e.id]=e}else console.error("ACJS: cannot track loading analytics",this._addons,e)};t.trackLoadingEnded=function(e){var t=this;if(this._addons&&e&&this._addons[e.id]){var n,i=e.url,o=void 0!==i&&-1===i.indexOf("xdm_e="),r=this._time()-this._addons[e.id].startLoading,a=this.getIframeLoadApdex(r);try{n=Object.keys(JSON.parse(this._addons[e.id].$el[0].name).api).sort().toString()}catch(e){n="error"}var s={addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false",iframeLoadMillis:r,iframeLoadApdex:a,iframeIsCacheable:o,value:r>2e4?"x":Math.ceil(r/100),api:n};"function"==typeof window.requestIdleCallback?window.requestIdleCallback((function(){return t._track("iframe.performance.load",s)}),{timeout:100}):this._track("iframe.performance.load",s)}else console.error("ACJS: cannot track loading end analytics",this._addons,e)};t.getIframeLoadApdex=function(e){return e<=300?1:e<=1200?.5:0};t.trackLoadingTimeout=function(e){var t=window.navigator.onLine;"boolean"!=typeof t&&(t="not-supported");this._track("iframe.performance.timeout",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false",connectedStatus:t.toString()});this.trackLoadingEnded(e)};t.trackLoadingCancel=function(e){this._track("iframe.performance.cancel",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,moduleLocation:e.options?e.options.moduleLocation:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false"})};t.trackUseOfDeprecatedMethod=function(e,t){this._track("jsapi.deprecated",{addonKey:t.addon_key,moduleKey:t.key,methodUsed:e})};t.trackMultipleDialogOpening=function(e,t){this._track("jsapi.dialog.multiple",{addonKey:t.addon_key,moduleKey:t.key,dialogType:e})};t.trackVisible=function(e){this._track("iframe.is_visible",{addonKey:e.addon_key,moduleKey:e.key,moduleType:e.options?e.options.moduleType:void 0,pearApp:e.options&&"true"===e.options.pearApp?"true":"false"})};t.trackIframePerformance=function(e,t){this._trackGasV3("operational",{source:t.addon_key,action:"iframeRendered",actionSubject:"connectAddon",actionSubjectId:t.addon_key,attributes:{key:t.key,pearApp:this._getPearApp(t),moduleType:this._getModuleType(t),iframeIsCacheable:this._isCacheable(t),moduleLocation:this._getModuleLocation(t),domainLookupTime:e.domainLookupTime,connectionTime:e.connectionTime,decodedBodySize:e.decodedBodySize,domContentLoadedTime:e.domContentLoadedTime,fetchTime:e.fetchTime}})};t.dispatch=function(e,t){this._track(e,t)};t.trackExternal=function(e,t){this._track(e,t)};t._resetAnalyticsDueToUnreliable=function(e){if(!e)throw new Error("Cannot reset analytics due to no extension id");if(this._addons[e]){clearTimeout(this._addons[e]);delete this._addons[e]}else console.info("Cannot clear analytics, cache does not contain extension id")};t._isCacheable=function(e){var t=e.url;return void 0!==t&&-1===t.indexOf("xdm_e=")};t._getModuleType=function(e){return e.options?e.options.moduleType:void 0};t._getModuleLocation=function(e){return e.options?e.options.moduleLocation:void 0};t._getPearApp=function(e){return e.options&&"true"===e.options.pearApp};t.trackGasV3Visible=function(e){this._trackGasV3("operational",{action:"iframeViewed",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};t.trackGasV3InvokeMethod=function(e,t,n){this._shouldSampleEvent(1)&&this._trackGasV3("operational",{action:"invokeMethod",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{module:t,method:n,moduleType:this._getModuleType(e),moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};t.trackGasV3ContentResolver=function(e,t){if(this._shouldSampleEvent(5)){var n=t.extension,i=t.attrs,o=e?"contentResolverSucceeded":"contentResolverFailed";this._trackGasV3("operational",{action:o,actionSubject:"connectAddon",actionSubjectId:n.addon_key,attributes:Object.assign({},i,{moduleType:this._getModuleType(n),moduleKey:n.key,moduleLocation:this._getModuleLocation(n),pearApp:this._getPearApp(n)}),source:n.addon_key})}};t.trackGasV3LoadingEnded=function(e){var t=this._time()-this._addons[e.id].startLoading;this._trackGasV3("operational",{action:"iframeLoaded",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),iframeLoadMillis:t,moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};t.trackGasV3LoadingTimeout=function(e){this._trackGasV3("operational",{action:"iframeTimeout",actionSubject:"connectAddon",actionSubjectId:e.addon_key,attributes:{moduleType:this._getModuleType(e),iframeIsCacheable:this._isCacheable(e),moduleKey:e.key,moduleLocation:this._getModuleLocation(e),pearApp:this._getPearApp(e)},source:e.addon_key})};return e}(),Z=new Q;_.fn&&m.register("iframe-create",(function(e){Z.trackLoadingStarted(e.extension)}));m.register("method-invoked",(function(e){Z.trackGasV3InvokeMethod(e.extension,e.module,e.fn)}));m.register("iframe-bridge-start",(function(e){Z.trackLoadingStarted(e.extension)}));m.register("iframe-bridge-established",(function(e){Z.trackLoadingEnded(e.extension);!function(e,t){if("function"==typeof t&&e instanceof Element){X.push({element:e,callback:t});B(e)}}(document.getElementById(e.extension.id),(function(){m.dispatch("iframe-visible",e.extension);Z.trackVisible(e.extension);Z.trackGasV3Visible(e.extension)}))}));m.register("iframe-bridge-established",(function(e){Z.trackGasV3LoadingEnded(e.extension)}));m.register("iframe-bridge-timeout",(function(e){Z.trackLoadingTimeout(e.extension)}));m.register("iframe-bridge-cancelled",(function(e){Z.trackLoadingCancel(e.extension)}));m.register("analytics-deprecated-method-used",(function(e){Z.trackUseOfDeprecatedMethod(e.methodUsed,e.extension)}));m.register("analytics-iframe-performance",(function(e){Z.trackIframePerformance(e.metrics,e.extension)}));m.register("iframe-destroyed",(function(e){Z._resetAnalyticsDueToUnreliable(e.extension.extension_id)}));m.register("analytics-external-event-track",(function(e){Z.trackExternal(e.eventName,e.values)}));m.register("analytics-content-resolver-track",(function(e){var t=e.success,n=e.extra;Z.trackGasV3ContentResolver(t,n)}));m.register("iframe-bridge-timeout",(function(e){Z.trackGasV3LoadingTimeout(e.extension)}));var ee=new(function(){function e(){}var t=e.prototype;t._maxDimension=function(e,t){var n=N.stringToDimension(e),i=parseInt(n,10),o=parseInt(t,10);return n.indexOf("%")>-1&&i>=100||i>o?"100%":n};t._closeOnEscape=function(e){return!1!==e.closeOnEscape};t._size=function(e){var t=e.size;"x-large"===e.size&&(t="xlarge");"maximum"!==e.size&&"100%"===e.width&&"100%"===e.height&&(t="fullscreen");return t};t._header=function(e){var t="";switch(typeof e){case"string":t=e;break;case"object":t=e.value}return t};t._hint=function(e){return"string"==typeof e?e:""};t._chrome=function(e){var t=!1;"boolean"==typeof e.chrome&&(t=e.chrome);"fullscreen"===e.size&&(t=!0);"maximum"===e.size&&(t=!1);return t};t._width=function(e){if(!e.size)return e.width?this._maxDimension(e.width,_(window).width()):"50%"};t._height=function(e){if(!e.size)return e.height?this._maxDimension(e.height,_(window).height()):"50%"};t._actions=function(e){var t=[];(e=e||{}).actions||(t=[{name:"submit",identifier:"submit",text:e.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:e.cancelText||"Cancel",type:"link",immutable:!0}]);e.buttons&&(t=t.concat(this._buttons(e)));return t};t._id=function(e){"string"!=typeof e&&(e=Math.random().toString(36).substring(2,8));return e};t._buttons=function(e){var t=[];e.buttons&&Array.isArray(e.buttons)&&e.buttons.forEach((function(e){var n,i,o=!1;e.text&&"string"==typeof e.text&&(n=e.text);i=e.identifier&&"string"==typeof e.identifier?e.identifier:W.randomIdentifier();e.disabled&&!0===e.disabled&&(o=!0);t.push({text:n,identifier:i,type:"secondary",custom:!0,disabled:o})}));return t};t._onHide=function(e){return"function"==typeof e.onHide?e.onHide:function(){}};t.sanitizeOptions=function(e){e=e||{};var t={chrome:this._chrome(e),header:this._header(e.header),hint:this._hint(e.hint),width:this._width(e),height:this._height(e),$content:e.$content,extension:e.extension,actions:this._actions(e),id:this._id(e.id),size:e.size,closeOnEscape:this._closeOnEscape(e),onHide:this._onHide(e)};t.size=this._size(t);return t};t.moduleOptionsFromGlobal=function(e,t){return!!(window._AP&&window._AP.dialogModules&&window._AP.dialogModules[e]&&window._AP.dialogModules[e][t])&&N.extend({},{chrome:!0},window._AP.dialogModules[e][t].options)};t.trackMultipleDialogOpening=function(e,t){var n,i=this._size(t);if(_(".ap-aui-dialog2:visible").length){n=_("#macro-browser-dialog").length||AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===i?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple";Z.trackMultipleDialogOpening(n,e)}};t.assertActiveDialogOrThrow=function(e,t){if(!e.isActiveDialog(t))throw new Error("Failed to find an active dialog for: "+t)};return e}()),te={notifyIframeCreated:function(e,t){m.dispatch("iframe-create",{$el:e,extension:t})},notifyBridgeEstablished:function(e,t){m.dispatch("iframe-bridge-established",{$el:e,extension:t})},notifyIframeDestroyed:function(e){"string"==typeof e&&(e={id:e});M.getExtensions(e).forEach((function(e){m.dispatch("iframe-destroyed",{extension:e});M.unregisterExtension({id:e.extension_id})}),this)},notifyUnloaded:function(e,t){m.dispatch("iframe-unload",{$el:e,extension:t})}},ne={},ie=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},oe="%[a-f0-9]{2}",re=new RegExp("("+oe+")|([^%]+?)","gi"),ae=new RegExp("("+oe+")+","gi");function se(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],se(n),se(i))}function de(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(re)||[],n=1;n<t.length;n++)t=(e=se(t,n).join("")).match(re)||[];return e}}var ce=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{e=e.replace(/\+/g," ");return decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=ae.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=de(n[0]);i!==n[0]&&(t[n[0]]=i)}n=ae.exec(e)}t["%C2"]="";for(var o=Object.keys(t),r=0;r<o.length;r++){var a=o[r];e=e.replace(new RegExp(a,"g"),t[a])}return e}(e)}},le=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},ue=function(e,t){for(var n={},i=Object.keys(e),o=Array.isArray(t),r=0;r<i.length;r++){var a=i[r],s=e[a];(o?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n};!function(e){const t=ie,n=ce,i=le,o=ue,r=Symbol("encodeFragmentIdentifier");function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function d(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function l(e){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t));return e}function u(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase());return e}function p(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e);e=e.replace(/\[\d*\]$/,"");if(t){void 0===i[e]&&(i[e]={});i[e][t[1]]=n}else i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e);e=e.replace(/\[\]$/,"");t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"colon-list-separator":return(e,n,i)=>{t=/(:list)$/.exec(e);e=e.replace(/:list$/,"");t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),r="string"==typeof n&&!o&&d(n,e).includes(e.arrayFormatSeparator);n=r?d(n,e):n;const a=o||r?n.split(e.arrayFormatSeparator).map((t=>d(t,e))):null===n?n:d(n,e);i[t]=a};case"bracket-separator":return(t,n,i)=>{const o=/(\[\])$/.test(t);t=t.replace(/\[\]$/,"");if(!o){i[t]=n?d(n,e):n;return}const r=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>d(t,e)));void 0!==i[t]?i[t]=[].concat(i[t],r):i[t]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const r of e.split("&")){if(""===r)continue;let[e,a]=i(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:d(a,t);n(d(e,t),a,o)}for(const e of Object.keys(o)){const n=o[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else o[e]=f(n,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const n=o[t];Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n;return e}),Object.create(null))}e.extract=u;e.parse=p;e.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const o=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[",o,"]"].join("")]:[...n,[s(t,e),"[",s(o,e),"]=",s(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(i,e)].join("")];case"colon-list-separator":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[s(t,e),":list="].join("")]:[...n,[s(t,e),":list=",s(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(i,o)=>{if(void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o)return i;o=null===o?"":o;return 0===i.length?[[s(n,e),t,s(o,e)].join("")]:[[i,s(o,e)].join(e.arrayFormatSeparator)]}}default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,s(t,e)]:[...n,[s(t,e),"=",s(i,e)].join("")]}}(t),o={};for(const t of Object.keys(e))n(t)||(o[t]=e[t]);const r=Object.keys(o);!1!==t.sort&&r.sort(t.sort);return r.map((n=>{const o=e[n];return void 0===o?"":null===o?s(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":o.reduce(i(n),[]).join("&"):s(n,t)+"="+s(o,t)})).filter((e=>e.length>0)).join("&")};e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,o]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(u(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:d(o,t)}:{})};e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[r]:!0},n);const i=l(t.url).split("?")[0]||"",o=e.extract(t.url),a=e.parse(o,{sort:!1}),d=Object.assign(a,t.query);let c=e.stringify(d,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");-1!==n&&(t=e.slice(n));return t}(t.url);t.fragmentIdentifier&&(u=`#${n[r]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`);return`${i}${c}${u}`};e.pick=(t,n,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[r]:!1},i);const{url:a,query:s,fragmentIdentifier:d}=e.parseUrl(t,i);return e.stringifyUrl({url:a,query:o(s,n),fragmentIdentifier:d},i)};e.exclude=(t,n,i)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,o,i)}}(ne);for(var fe=function(e){for(var t,n=function(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);return[n,n===t?0:4-n%4]}(e),i=n[0],o=n[1],r=new he(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),a=0,s=o>0?i-4:i,d=0;d<s;d+=4){t=ge[e.charCodeAt(d)]<<18|ge[e.charCodeAt(d+1)]<<12|ge[e.charCodeAt(d+2)]<<6|ge[e.charCodeAt(d+3)];r[a++]=t>>16&255;r[a++]=t>>8&255;r[a++]=255&t}if(2===o){t=ge[e.charCodeAt(d)]<<2|ge[e.charCodeAt(d+1)]>>4;r[a++]=255&t}if(1===o){t=ge[e.charCodeAt(d)]<<10|ge[e.charCodeAt(d+1)]<<4|ge[e.charCodeAt(d+2)]>>2;r[a++]=t>>8&255;r[a++]=255&t}return r},pe=[],ge=[],he="undefined"!=typeof Uint8Array?Uint8Array:Array,me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0,ve=me.length;ye<ve;++ye){pe[ye]=me[ye];ge[me.charCodeAt(ye)]=ye}ge["-".charCodeAt(0)]=62;ge["_".charCodeAt(0)]=63;function _e(e){var t=4-e.length%4;1===t?e+="=":2===t&&(e+="==");return(new TextDecoder).decode(fe(e))}var xe=60;function be(e){if(null===e||""===e)throw"Invalid JWT: must be neither null nor empty-string.";var t=e.indexOf("."),n=e.indexOf(".",t+1);if(t<0||n<=t)throw'Invalid JWT: must contain 2 period (".") characters.';var i=e.substring(t+1,n);if(null===i||""===i)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";var o=_e.call(window,i);return JSON.parse(o)}m.register("jwt-skew-set",(function(e){xe=e.skew}));var we={parseJwtIssuer:function(e){return be(e).iss},parseJwtClaims:be,isJwtExpired:function(e,t){void 0===t&&(t=xe);var n=be(e),i=0,o=Math.floor(Date.now()/1e3);n&&n.exp&&(i=n.exp);return i-t<o}};function ke(e){return ne.parse(ne.extract(e)).jwt}var Ee={hasJwt:function(e){return ke(e)&&0!==ke(e).length},isJwtExpired:function(e){var t=ke(e);return we.isJwtExpired(t)}},Ae=function(e){m.dispatch("content-resolver-register-by-extension",e)},Ce=function(e){if(!e.resolver)throw Error("ACJS: No content resolver supplied");var t=e.resolver.call(null,N.extend({classifier:"json"},e.extension));t.fail((function(t,n){m.dispatch("jwt-url-refreshed-failed",{extension:e.extension,$container:e.$container,errorText:n.text})}));t.done((function(t){var n={};if("object"==typeof t)n=t;else if("string"==typeof t)try{n=JSON.parse(t)}catch(e){console.error("ACJS: invalid response from content resolver")}e.extension.url=n.url;N.extend(e.extension.options,n.options);m.dispatch("jwt-url-refreshed",{extension:e.extension,$container:e.$container,url:e.extension.url})}));m.dispatch("jwt-url-refresh-request",{data:e})},Oe=function(e){"number"==typeof e?m.dispatch("jwt-skew-set",{skew:e}):console.error("ACJS: invalid JWT clock skew set")},Ie=function(e){var t={};if(e&&"object"==typeof e){e.width&&(t.width=N.stringToDimension(e.width));e.height&&(t.height=N.stringToDimension(e.height));if("string"==typeof e.sandbox){var n=document.createElement("iframe");t.sandbox=e.sandbox.split(" ").filter((function(e){return N.isSupported(n,"sandbox",e,!0)})).join(" ")}}return t},Se=new(function(){function e(){this.store={}}var t=e.prototype;t.set=function(e,t){if(t){var n={};n[e]=t}else n=e;N.extend(this.store,n)};t.get=function(e){return e?this.store[e]:N.extend({},this.store)};return e}());function Pe(e){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled&&AJS.DarkFeatures.isEnabled(e))return!0;var t,n,i=window.featureFlags||(t="fe-feature-flags",null===(n=document.querySelector("meta[name='ajs-"+t+"']"))?void 0:n.getAttribute("content")||void 0);if(!i)return!1;var o={};try{o="object"==typeof i?i:JSON.parse(i)}catch(e){return!1}return!(!o[e]||"boolean"!=typeof o[e].value)&&o[e].value}var Te={getBooleanFeatureFlag:Pe,isSetBlockDisplayFlagEnabled:function(){return Pe("com.atlassian.connect.acjs.onecloud-1878-set-block-display")}},Me=!1,je="com.codebarrel.addons.automation";var De=!1;function Le(e){return{addon_key:e.addon_key,key:e.key,url:e.url,options:e.options}}var Fe={createSimpleXdmExtension:function(e){var t=Le(e),n=Se.get();e.options=t.options=N.extend({},t.options);e.options.globalOptions=n;!function(e){e===je&&function(){if(!Me){Me=!0;var e={getPerformanceTiming:function(e){return new Promise((function(n,i){t(e)||i(new Error("This is a restricted API"));n(JSON.parse(JSON.stringify(window.performance.timing)))}))},getPerformanceNavigationTiming:function(e){return new Promise((function(n,i){t(e)||i(new Error("This is a restricted API"));window.PerformanceNavigationTiming||n(void 0);var o=window.performance.getEntriesByType("navigation");n(JSON.parse(JSON.stringify(o)))}))}};M.returnsPromise(e.getPerformanceTiming);M.returnsPromise(e.getPerformanceNavigationTiming);M.defineModule("_performance",e)}function t(e){return e._context.extension.addon_key===je}}();!function(){if(!De){De=!0;var e={getBooleanFeatureFlag:function(e){return new Promise((function(t,n){0===e.indexOf("com.atlassian.connect.acjs.iframe.")?t(Pe(e)):n(new Error("Only allowlisted flags can be accessed from the iframe."))}))}};M.returnsPromise(e.getBooleanFeatureFlag);M.defineModule("_featureFlag",e)}}()}(e.addon_key);var i=M.create(t,(function(){e.options.noDOM||(e.$el=_(document.getElementById(e.id)));te.notifyBridgeEstablished(e.$el,e)}),(function(){te.notifyUnloaded(e.$el,e)}));t.id=i.id;e.id=i.id;N.extend(i,Ie(e.options));return{iframeAttributes:i,extension:e}},extensionConfigSanitizer:Le},Be=new(function(){function e(){this._contentResolver=!1}var t=e.prototype;t.setContentResolver=function(e){this._contentResolver=e};t.resize=function(e,t,n){e=N.stringToDimension(e);t=N.stringToDimension(t);n.css({width:e,height:t});n.trigger("resized",{width:e,height:t})};t.simpleXdmExtension=function(e,t){!e.url||Ee.hasJwt(e.url)&&Ee.isJwtExpired(e.url)?this._contentResolver?Ce({extension:e,resolver:this._contentResolver,$container:t}):console.error("JWT is expired and no content resolver was specified"):this._appendExtension(t,this._simpleXdmCreate(e))};t._simpleXdmCreate=function(e){var t=Fe.createSimpleXdmExtension(e);e.id=t.iframeAttributes.id;e.$el=this.render(t.iframeAttributes);return e};t._appendExtension=function(e,t){var n=e.find("iframe");n.length>0&&n.destroy();t.options.hideIframeUntilLoad&&t.$el.css({visibility:"hidden"}).load((function(){t.$el.css({visibility:""})}));e.prepend(t.$el);te.notifyIframeCreated(t.$el,t)};t._appendExtensionError=function(e,t){var n=_('<div class="connect-resolve-error"></div>'),i=_("<p />").text(t);n.append('<p class="error">Error: The content resolver threw the following error:</p>');n.append(i);e.prepend(n)};t.resolverResponse=function(e){var t=this._simpleXdmCreate(e.extension);this._appendExtension(e.$container,t)};t.resolverFailResponse=function(e){this._appendExtensionError(e.$container,e.errorText)};t.render=function(e){(e=e||{}).referrerpolicy="no-referrer";return _("<iframe />").attr(e).addClass("ap-iframe")};return e}());m.register("iframe-resize",(function(e){Be.resize(e.width,e.height,e.$el)}));m.register("content-resolver-register-by-extension",(function(e){Be.setContentResolver(e.callback)}));m.register("jwt-url-refreshed",(function(e){Be.resolverResponse(e)}));m.register("jwt-url-refreshed-failed",(function(e){Be.resolverFailResponse(e)}));m.register("after:iframe-bridge-established",(function(e){e.extension.options.noDom?e.extension.options.bridgeEstablished=!0:e.$el[0].bridgeEstablished=!0}));var Ne=function(e){m.dispatch("button-clicked",{$el:e})},$e=function(e,t){m.dispatch("button-toggle",{$el:e,disabled:t})},Je=function(e,t){m.dispatch("button-toggle-visibility",{$el:e,hidden:t})},Re=["primary","link","secondary"],ze=0,He=function(){function e(){this.AP_BUTTON_CLASS="ap-aui-button"}var t=e.prototype;t.setType=function(e,t){t&&Re.indexOf(t)>=0&&e.addClass("aui-button-"+t);return e};t.setDisabled=function(e,t){void 0===t||e.data("immutable")||e.attr("aria-disabled",t);return e};t.setHidden=function(e,t){void 0===t||e.data("immutable")||e.toggle(!t);return e};t._setId=function(e,t){if(!t){t="ap-button-"+ze;ze++}e.attr("id",t);return e};t._additionalClasses=function(e,t){if(t){"string"!=typeof t&&(t=t.join(" "));e.addClass(t)}return e};t.getName=function(e){return _(e).data("name")};t.getText=function(e){return _(e).text()};t.getIdentifier=function(e){return _(e).data("identifier")};t.isVisible=function(e){return _(e).is(":visible")};t.isEnabled=function(e){return!("true"===_(e).attr("aria-disabled"))};t.render=function(e){var t=_("<button />");e=e||{};t.addClass("aui-button "+this.AP_BUTTON_CLASS);t.text(e.text);t.data(e.data);t.data({name:e.name||e.identifier,identifier:e.identifier||W.randomIdentifier(),immutable:e.immutable||!1});this._additionalClasses(t,e.additionalClasses);this.setType(t,e.type);this.setDisabled(t,e.disabled||!1);this._setId(t,e.id);return t};return e}(),Ue=new He;_((function(){_("body").on("click","."+Ue.AP_BUTTON_CLASS,(function(e){var t=_(e.target).closest("."+Ue.AP_BUTTON_CLASS);"true"!==t.attr("aria-disabled")&&Ne(t)}))}));m.register("button-toggle",(function(e){Ue.setDisabled(e.$el,e.disabled)}));m.register("button-toggle-visibility",(function(e){Ue.setHidden(e.$el,e.hidden)}));var Ke=["ap-iframe-container"],qe=new(function(){function e(){}var t=e.prototype;t.createExtension=function(e,t){var n=this._renderContainer();t&&!1===t.loadingIndicator||n.append(this._renderLoadingIndicator());Be.simpleXdmExtension(e,n);return n};t._renderContainer=function(e){var t=_("<div />").attr(e||{});t.addClass(Ke.join(" "));return t};t._renderLoadingIndicator=function(){return E.render()};return e}());m.register("iframe-create",(function(e){var t="embedded-"+e.extension.id;e.extension.$el.parents(".ap-iframe-container").attr("id",t)}));function Ve(e){return qe.createExtension(e)}var Ge=function(e,t){var n={};if(t){n.methods=t;n.name=e}else n.methods=e;m.dispatch("module-define-custom",n)},We=function(e,t){m.dispatch("analytics-deprecated-method-used",{methodUsed:e,extension:t})},Xe=function(e){m.dispatch("iframe-bridge-start",{extension:e})},Ye=function(e,t){m.dispatch("analytics-external-event-track",{eventName:e,values:t})},Qe=function(e,t){m.dispatch("analytics-content-resolver-track",{success:e,extra:t})},Ze=function(e,t){e&&Object.getOwnPropertyNames(e).length>0&&m.dispatch("analytics-iframe-performance",{metrics:e,extension:t})};function et(e){var t=e.attr("class"),n=t?t.match(/ap-plugin-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}function tt(e){var t=e.attr("class"),n=t?t.match(/ap-module-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}function nt(e){return et(e)+"__"+tt(e)}function it(e,t,n){var i=e+"Modules";if(window._AP&&window._AP[i]&&window._AP[i][t]&&window._AP[i][t][n])return N.extend({},window._AP[i][t][n].options)}function ot(e,t){var n=et(t),i=function(e){var t=e.attr("class"),n=t?t.match(/ap-target-key-([^\s]*)/):null;return!!Array.isArray(n)&&n[1]}(t);return it(e,n,i)}function rt(e){var t,n=e.attr("href"),i={};n||(n=e.find("a").attr("href"));if(n){var o=n.indexOf("#");if(o>=0){var r=n.substring(o+1);try{t=JSON.parse(decodeURI(r))}catch(e){console.error("ACJS: cannot decode webitem anchor")}t&&window._AP&&window._AP._convertConnectOptions?i=window._AP._convertConnectOptions(t):console.error("ACJS: cannot convert webitem url to connect iframe options")}else{var a=nt(e),s=e.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",d=ot(s,e);!d&&window._AP&&window._AP[s+"Options"]&&(d=N.extend({},window._AP[s+"Options"][a])||{});if(!d){d={};console.warn("no webitem "+s+"Options for "+a)}d.productContext=d.productContext||{};var c=ne.parse(ne.extract(n));N.extend(d.productContext,c);i={addon_key:et(e),key:tt(e),options:d}}}return i}var at={sanitizeTriggers:function(e){var t;Array.isArray(e)?t=e.join(" "):"string"==typeof e&&(t=e.trim());return t},uniqueId:function(){return"webitem-"+Math.floor(1e9*Math.random()).toString(16)},getExtensionKey:et,getKey:tt,getOptionsForWebItem:function(e){var t=nt(e),n=e.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",i=ot(n,e);!i&&window._AP&&window._AP[n+"Options"]&&(i=N.extend({},window._AP[n+"Options"][t])||{});if(!i){i={};console.warn("no webitem "+n+"Options for "+t)}i.productContext=i.productContext||{};i.structuredContext=i.structuredContext||{};var o=rt(e);if(o&&o.options){N.extend(i.productContext,o.options.productContext);N.extend(i.structuredContext,o.options.structuredContext);i.contextJwt=o.options.contextJwt}return i},getModuleOptionsByAddonAndModuleKey:it,getConfigFromTarget:rt},st=new function(){var e=this;this._providers={};this.registerProvider=function(t,n){e._providers[t]=n};this.getProvider=function(t){return e._providers[t]}},dt=new(function(){function e(){this.moduleNamesToModules=new Map}e.prototype.registerModule=function(e,t){var n=e.getModuleRegistrationName();this.moduleNamesToModules.set(n,e)};e.prototype.getModuleByName=function(e){return this.moduleNamesToModules.get(e)};e.prototype.getProviderByModuleName=function(e){var t=this.moduleNamesToModules.get(e);return t&&t.isEnabled()?t.getProvider():void 0};return e}()),ct=function(){function e(){var e=this;this.create=function(e){return Ve(Fe.extensionConfigSanitizer(e))};this.dialog={create:function(e,t){var n=at.getModuleOptionsByAddonAndModuleKey("dialog",e.addon_key,e.key),i=N.extend({},n||{},t);J(e,i)},close:function(t,n){var i=e.getFrameworkAdaptor().getProviderByModuleName("dialog");if(i){ee.assertActiveDialogOrThrow(i,t);D("dialog.close",{addon_key:t},n);i.close()}else R()}};this.registerContentResolver={resolveByExtension:function(t){e._contentResolver=t;Ae({callback:t})}};this.getContentResolver=function(){return e._contentResolver};this.registerProvider=function(e,t){st.registerProvider(e,t)};this.getProvider=function(e){return st.getProvider(e)};this.frameworkAdaptor=dt}var t=e.prototype;t.createExtension=function(e){e.options=e.options||{};e.options.noDom=!0;var t=Fe.createSimpleXdmExtension(e);Xe(t.extension);return t};t.registerExistingExtension=function(e,t){return M.registerExistingExtension(e,t)};t.setFrameworkAdaptor=function(e){this.frameworkAdaptor=e};t.getFrameworkAdaptor=function(){return this.frameworkAdaptor};t._cleanExtension=function(e){return N.pick(e,["id","addon_key","key","options","url"])};t.onIframeEstablished=function(e){e._wrapper=function(t){e.call({},{$el:t.$el,extension:this._cleanExtension(t.extension)})}.bind(this);m.register("after:iframe-bridge-established",e._wrapper)};t.offIframeEstablished=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:iframe-bridge-established",e._wrapper)};t.onIframeUnload=function(e){var t=this;m.register("after:iframe-unload",(function(n){e.call({},{$el:n.$el,extension:t._cleanExtension(n.extension)})}))};t.onPublicEventDispatched=function(e){e._wrapper=function(t){e.call({},{type:t.type,event:t.event,extension:this._cleanExtension(t.sender)})}.bind(this);m.register("after:event-public-dispatch",e._wrapper)};t.offPublicEventDispatched=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:event-public-dispatch",e._wrapper)};t.onKeyEvent=function(e,t,n,i){U({extension_id:e,key:t,modifiers:n,callback:i})};t.offKeyEvent=function(e,t,n,i){K({extension_id:e,key:t,modifiers:n,callback:i})};t.onFrameClick=function(e){if("function"!=typeof e)throw new Error("handleIframeClick must be a function");V(e)};t.offFrameClick=function(){G()};t.destroy=function(e){te.notifyIframeDestroyed({id:e})};t.defineModule=function(e,t){Ge(e,t)};t.isModuleDefined=function(e){return M.isModuleDefined(e)};t.broadcastEvent=function(e,t,n){D(e,t,n)};t.getExtensions=function(e){return M.getExtensions(e)};t.trackDeprecatedMethodUsed=function(e,t){We(e,t)};t.trackAnalyticsEvent=function(e,t){Ye(e,t)};t.trackContentResolverEvent=function(e,t){Qe(e,t)};t.setJwtClockSkew=function(e){Oe(e)};t.isJwtExpired=function(e,t){return t?we.isJwtExpired(e):Ee.isJwtExpired(e)};t.hasJwt=function(e){return Ee.hasJwt(e)};t.getBooleanFeatureFlag=function(e){return Pe(e)};t.setExtensionConfigurationOptions=function(e,t){Se.set(e,t)};t.getExtensionConfigurationOption=function(e){return Se.get(e)};t.onIframeTimeout=function(e){e._wrapper=function(t){e.call({},{extension:this._cleanExtension(t.extension)})}.bind(this);m.register("after:iframe-bridge-timeout",e._wrapper)};t.offIframeTimeout=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:iframe-bridge-timeout",e._wrapper)};t.onIframePerformanceTelemetry=function(e){e._wrapper=function(t){e.call({},{metrics:t.metrics,extension:this._cleanExtension(t.extension)})}.bind(this);m.register("after:analytics-iframe-performance",e._wrapper)};t.offIframePerformanceTelemetry=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:analytics-iframe-performance",e._wrapper)};t.onIframeVisible=function(e){e._wrapper=function(t){e.call({},{extension:this._cleanExtension(t)})}.bind(this);m.register("after:iframe-visible",e._wrapper)};t.offIframeVisible=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:iframe-visible",e._wrapper)};t.onContentResolverEvent=function(e){e._wrapper=function(t){e.call({},t)}.bind(this);m.register("after:analytics-content-resolver-track",e._wrapper)};t.offContentResolverEvent=function(e){if(!e._wrapper)throw new Error("cannot unregister event dispatch listener without _wrapper reference");m.unregister("after:analytics-content-resolver-track",e._wrapper)};return e}(),lt=new ct,ut="ap-dialog-",ft="ap-aui-dialog2",pt=new RegExp("^ap-dialog-[0-9A-Za-z]+$"),gt=["small","medium","large","xlarge","fullscreen","maximum"],ht="ap-aui-dialog-button",mt="aui-dialog2-footer-actions";function yt(){var e=AJS.LayerManager.global.getTopLayer();if(e&&pt.test(e.attr("id"))){var t=AJS.dialog2(e);t._id=t.$el.attr("id").replace(ut,"");return t}}function vt(e){var t=e.find(".header-control-panel");t.length||(t=e.find(".aui-dialog2-footer-actions"));return t}function _t(e,t){return vt(t).find(".aui-button").filter((function(){return Ue.getIdentifier(this)===e}))}var xt=function(){function e(){}var t=e.prototype;t._renderHeaderCloseBtn=function(){var e=_("<a />").addClass("aui-dialog2-header-close"),t=_("<span />").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");e.append(t);return e};t._renderFullScreenHeader=function(e,t){var n=_("<div />").addClass("header-title-container aui-item expanded"),i=_("<div />").append(_("<span />").addClass("header-title").text(t.header||""));n.append(i);e.append(n).append(this._renderHeaderActions(t.actions,t.extension));return e};t._renderHeader=function(e){var t=_("<header />").addClass("aui-dialog2-header");if("fullscreen"===e.size)return this._renderFullScreenHeader(t,e);if(e.header){var n=_("<h2 />").addClass("aui-dialog2-header-main").text(e.header);t.append(n)}t.append(this._renderHeaderCloseBtn());return t};t._renderHeaderActions=function(e,t){var n=_("<div />").addClass("aui-item header-control-panel");e[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];e[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(e,t).forEach((function(e){n.append(e)}));return n};t._renderContent=function(e){var t=_("<div />").addClass("aui-dialog2-content");e&&t.append(e);return t};t._renderFooter=function(e){var t=_("<footer />").addClass("aui-dialog2-footer");if("fullscreen"!==e.size){var n=this._renderFooterActions(e.actions,e.extension);t.append(n)}if(e.hint){var i=_("<div />").addClass("aui-dialog2-footer-hint").text(e.hint);t.append(i)}return t};t._renderActionButtons=function(e,t){var n=this,i=[];[].concat(e).forEach((function(e){i.push(n._renderDialogButton({text:e.text,name:e.name,type:e.type,additionalClasses:e.additionalClasses,custom:e.custom||!1,identifier:e.identifier,immutable:e.immutable,disabled:e.disabled||!1},t))}));return i};t._renderFooterActions=function(e,t){var n=_("<div />").addClass(mt);this._renderActionButtons(e,t).forEach((function(e){n.append(e)}));return n};t._renderDialogButton=function(e,t){e.additionalClasses=e.additionalClasses||[];e.additionalClasses.push(ht);e.custom&&e.additionalClasses.push("ap-dialog-custom-button");var n=Ue.render(e);n.extension=t;return n};t.render=function(e){var t=N.extend({},e),n=ee.sanitizeOptions(e),i=_("<section />").attr({role:"dialog",id:ut+n.id});i.attr("data-aui-modal","true");i.data({"aui-remove-on-hide":!0,extension:n.extension});i.addClass("aui-layer aui-dialog2 "+ft);gt.indexOf(n.size)>=0&&i.addClass("aui-dialog2-"+n.size);if("fullscreen"===n.size||"maximum"===n.size){n.chrome&&i.addClass("ap-header-controls");i.addClass("aui-dialog2-maximum")}i.append(this._renderContent(n.$content));if(n.chrome){i.prepend(this._renderHeader({header:n.header,actions:n.actions,size:n.size}));i.append(this._renderFooter({extension:n.extension,actions:n.actions,hint:n.hint,size:n.size}))}else i.addClass("aui-dialog2-chromeless");var o=AJS.dialog2(i);o._id=n.id;"fullscreen"===n.size&&(n.height=n.width="100%");n.size&&"fullscreen"!==n.size||AJS.layer(i).changeSize(n.width,n.height);n.onHide&&o.on("hide",n.onHide);o.show();o.$el.data("extension",n.extension);o.$el.data("originalOptions",t);return i};t.setIframeDimensions=function(e){Be.resize("100%","100%",e)};t.getActive=function(){return yt()};t.buttonIsEnabled=function(e){var t=yt();if(t){var n=_t(e,t.$el);return Ue.isEnabled(n)}};t.buttonIsVisible=function(e){var t=yt();if(t){var n=_t(e,t.$el);return Ue.isVisible(n)}};t.getByExtension=function(e){var t;if("function"==typeof e)t=e;else{var n=Object.getOwnPropertyNames(e);t=function(t){var i=_(t).data("extension");return n.every((function(t){return i[t]===e[t]}))}}return _("."+ft).toArray().filter(t).map((function(e){return AJS.dialog2(e)}))};t.addButton=function(e,t){t.custom=!0;var n=this._renderDialogButton(t,e),i=this.getByExtension({addon_key:e.addon_key,key:e.key})[0].$el;vt(i).append(n);return i};return e}(),bt=new xt;m.register("iframe-bridge-established",(function(e){if(e.extension.options.isDialog){var t,n=lt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(n){t=n.close;n.setButtonDisabled("submit",!1)}else{H.toggleButton({identifier:"submit",enabled:!0});t=function(){H.close({dialog:yt(),extension:e.extension})}}if(!e.extension.options.preventDialogCloseOnEscape){U({extension_id:e.extension.id,key:27,callback:t});m.registerOnce("dialog-close",(function(t){K({extension_id:e.extension.id,key:27})}))}}}));m.register("dialog-close-active",(function(e){var t=yt();t&&H.close({customData:e.customData,dialog:t,extension:e.extension})}));m.register("dialog-close",(function(e){e.dialog&&e.dialog.hide()}));m.register("dialog-button-toggle",(function(e){var t=yt();if(t){var n=_t(e.identifier,t.$el);$e(n,!e.enabled)}}));m.register("dialog-button-toggle-visibility",(function(e){var t=yt();if(t){var n=_t(e.identifier,t.$el);Je(n,e.hidden)}}));m.register("button-clicked",(function(e){var t=e.$el;if(t.hasClass(ht)){var n=t.parents("."+ft),i=n.find("iframe");i.length&&i[0].bridgeEstablished?H.clickButton(Ue.getIdentifier(t),t,n.data("extension")):H.close({dialog:yt(),extension:t.extension})}}));if(_.fn){m.register("iframe-create",(function(e){e.extension.options&&e.extension.options.isDialog&&bt.setIframeDimensions(e.extension.$el)}));m.register("dialog-button-add",(function(e){bt.addButton(e.extension,e.button)}));m.register("host-window-resize",N.debounce((function(){_("."+ft).each((function(e,t){var n=_(t),i=ee.sanitizeOptions(n.data("originalOptions"));t.style.width=i.width;t.style.height=i.height}))}),100))}q({keyCode:27,callback:function(){H.closeActive({customData:{},extension:null})}});function wt(t){var n;if(null!=t&&t.options&&null!=(n=AJS)&&null!=(n=n.Meta)&&n.get){var i=e({},t.options.productContext||{});AJS.Meta.get("space-key")&&(i["an.spaceKey"]=AJS.Meta.get("space-key"));return e({},t,{options:e({},t.options,{productContext:i})})}return t}var kt=new(function(){function e(){}var t=e.prototype;t.render=function(e,t){e.options=e.options||{};t=t||{};e.options.isDialog=!0;e.options.dialogId=t.id;e.options.callbackExtensionId=e.callback_extension_id;e.options.preventDialogCloseOnEscape=!1===t.closeOnEscape;e.options.hostFrameOffset=t.hostFrameOffset;e.options.hideIframeUntilLoad=!0;var n=qe.createExtension(e);return bt.render({extension:e,$content:n,chrome:t.chrome,width:t.width,height:t.height,size:t.size,header:t.header,hint:t.hint,submitText:t.submitText,cancelText:t.cancelText,buttons:t.buttons,onHide:t.onHide})};t.getActiveDialog=function(){return bt.getActive()};t.buttonIsEnabled=function(e){return bt.buttonIsEnabled(e)};t.buttonIsVisible=function(e){return bt.buttonIsVisible(e)};t.getByExtension=function(e){"string"==typeof e&&(e={id:e});return bt.getByExtension(e)};return e}());m.register("dialog-extension-open",(function(e){var t=wt(e.extension),n=ee.sanitizeOptions(e.options),i=lt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(i){var o=function(e){var n=t.key,i=t.addon_key,o={button:{identifier:e.identifier,name:e.identifier,text:e.text}};["submit","cancel"].indexOf(e.identifier)>=0&&D("dialog."+e.identifier,{addon_key:i,key:n},o);D("dialog.button.click",{addon_key:i,key:n},o)};t.options.preventDialogCloseOnEscape=!1===n.closeOnEscape;n.actions.map((function(e){return e.onClick=o.bind(null,e)}));i.create(n,t)}else kt.render(t,e.options)}));var Et={};m.register("dialog-close",(function(e){if(e.dialog&&e.extension){var t={addon_key:e.extension.addon_key,id:e.extension.options.callbackExtensionId};D("dialog.close",t,e.customData)}}));m.register("dialog-button-click",(function(e){var t={button:{name:Ue.getName(e.$el),identifier:Ue.getIdentifier(e.$el),text:Ue.getText(e.$el)}},n={addon_key:e.extension.addon_key,key:e.extension.key};n.id=e.extension.id;e.$el.hasClass("ap-dialog-custom-button")||D("dialog."+t.button.name,n,t);D("dialog.button.click",n,t)}));var At=function(){function e(e,t){t=N.last(arguments);var n=lt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){ee.assertActiveDialogOrThrow(i,t._context.extension.addon_key);this.name=e;this.identifier=e}else{if(!kt.getActiveDialog())throw new Error("Failed to find an active dialog.");this.name=e;this.identifier=e;this.enabled=kt.buttonIsEnabled(e);this.hidden=!kt.buttonIsVisible(e)}}var t=e.prototype;t.enable=function(){this.setState({enabled:!0})};t.disable=function(){this.setState({enabled:!1})};t.isEnabled=function(e){e=N.last(arguments);var t=lt.getFrameworkAdaptor(),n=t.getProviderByModuleName("dialog");e(n?!n.isButtonDisabled(this.identifier):this.enabled)};t.toggle=function(){var e=lt.getFrameworkAdaptor().getProviderByModuleName("dialog");e?e.toggleButton(this.identifier):this.setState({enabled:!this.enabled})};t.setState=function(e){var t=lt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(t)t.setButtonDisabled(this.identifier,!e.enabled);else{this.enabled=e.enabled;H.toggleButton({identifier:this.identifier,enabled:this.enabled})}};t.trigger=function(e){e=N.last(arguments);this.enabled&&H.dialogMessage({name:this.name,extension:e._context.extension})};t.isHidden=function(e){e=N.last(arguments);var t=lt.getFrameworkAdaptor(),n=t.getProviderByModuleName("dialog");e(n?n.isButtonHidden(this.identifier):this.hidden)};t.hide=function(){this.setHidden(!0)};t.show=function(){this.setHidden(!1)};t.setHidden=function(e){var t=lt.getFrameworkAdaptor().getProviderByModuleName("dialog");if(t)t.setButtonHidden(this.identifier,e);else{this.hidden=e;H.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden})}};return e}();function Ct(e){return Et[e.extension.options.dialogId]}var Ot={create:{constructor:function(e,t){var n=(t=N.last(arguments))._id,i=t._context.extension,o={addon_key:i.addon_key,key:e.key,options:N.pick(i.options,["customData","productContext"]),callback_extension_id:i.id};o.options.customData=e.customData;var r=ee.moduleOptionsFromGlobal(o.addon_key,o.key);"number"==typeof(r||{}).hostFrameOffset&&(o.options.hostFrameOffset=r.hostFrameOffset);(e=N.extend({},r||{},e)).id=n;ee.trackMultipleDialogOpening(o,e);J(o,e);this.customData=e.customData;Et[n]=this}},close:function(e,t){t=N.last(arguments);var n=lt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){ee.assertActiveDialogOrThrow(i,t._context.extension.addon_key);D("dialog.close",{addon_key:t._context.extension.addon_key},e);i.close()}else{var o;o=t._context.extension.options.isDialog?kt.getByExtension(t._context.extension.id)[0]:kt.getActiveDialog();H.close({customData:e,dialog:o,extension:t._context.extension})}},getCustomData:function(e){var t=Ct((e=N.last(arguments))._context);e(t?t.customData:void 0)},getButton:{constructor:At,enable:At.prototype.enable,disable:At.prototype.disable,toggle:At.prototype.toggle,isEnabled:At.prototype.isEnabled,trigger:At.prototype.trigger,hide:At.prototype.hide,show:At.prototype.show,isHidden:At.prototype.isHidden},createButton:{constructor:function(e,t){t=N.last(arguments);var n=lt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dialog");if(i){ee.assertActiveDialogOrThrow(i,t._context.extension.addon_key);i.createButton({identifier:e.identifier,text:e.text,hidden:!1,disabled:e.disabled||!1,onClick:function(){D("dialog.button.click",{addon_key:t._context.extension.addon_key,key:t._context.extension.key},{button:{identifier:e.identifier,text:e.text}})}})}else z({identifier:e.identifier,text:e.text},t._context.extension)}}};m.register("iframe-resize",(function(e){Be.resize(e.width,e.height,e.$el)}));m.register("iframe-size-to-parent",(function(e){var t,n=N.getIframeByExtensionId(e.extensionId);t=_(window).height()-n.offset().top-1+"px";n.get(0).name.length>0&&"jiraProjectPages"===JSON.parse(n.get(0).name).options.moduleType&&(t="100%");m.dispatch("iframe-resize",{width:"100%",height:t,$el:n})}));m.register("hide-footer",(function(e){e&&_("#footer").css({display:"none"})}));window.addEventListener("resize",(function(e){m.dispatch("host-window-resize",e)}),!0);var It=function(e,t,n){var i;i=n.extension_id?N.getIframeByExtensionId(n.extension_id):n;m.dispatch("iframe-resize",{width:e,height:t,$el:i,extension:n.extension})},St=function(e,t){m.dispatch("iframe-size-to-parent",{hideFooter:t,extensionId:e})},Pt=function(e){m.dispatch("hide-footer",e)},Tt=N.debounce,Mt={},jt=[],Dt={},Lt={getLocation:function(e){e=N.last(arguments);var t=st.getProvider("get-location");e("function"==typeof t?t():window.location.href)},resize:function(e,t,n){n=N.last(arguments);var i=st.getProvider("addon");if(i)i.resize(e,t,n._context);else{var o=n._context.extension.id,r=n._context.extension.options;if(-1!==jt.indexOf(o)||r&&r.isDialog)return!1;Mt[o]||(Mt[o]=Tt((function(e,t,n){It(e,t,n._context)}),50));Mt[o](e,t,n)}return!0},sizeToParent:Tt((function(e,t){t=N.last(arguments);var n=st.getProvider("addon");if(n)n.sizeToParent(e,t._context);else if(t._context.extension.options.isFullPage){N.getIframeByExtensionId(t._context.extension_id).addClass("full-size-general-page");Te.isSetBlockDisplayFlagEnabled()&&N.getIframeByExtensionId(t._context.extension_id).addClass("sized-to-parent");St(t._context.extension_id,e);Dt[t._context.extension_id]={hideFooter:e}}else N.getIframeByExtensionId(t._context.extension_id).addClass("full-size-general-page-fail")})),hideFooter:function(e){e&&Pt(e)}},Ft=function(e){delete Mt[e];delete Dt[e];-1!==jt.indexOf(e)&&jt.splice(jt.indexOf(e),1)};m.register("host-window-resize",(function(e){Object.getOwnPropertyNames(Dt).forEach((function(e){St(e,Dt[e].hideFooter)}))}));m.register("after:iframe-unload",(function(e){Ft(e.extension.id)}));m.register("after:iframe-destroyed",(function(e){Ft(e.extension.extension.id)}));m.register("before:iframe-size-to-parent",(function(e){-1===jt.indexOf(e.extensionId)&&jt.push(e.extensionId)}));var Bt=function(e){m.dispatch("inline-dialog-refresh",{$el:e})},Nt=function(){m.dispatch("inline-dialog-close",{})},$t=function(e){m.dispatch("inline-dialog-opened",{$el:e.$el,trigger:e.trigger,extension:e.extension})},Jt={hide:function(e){e=N.last(arguments);var t=lt.getFrameworkAdaptor(),n=t.getProviderByModuleName("inlineDialog");n?n.hide(e._context):Nt()}},Rt="ac-message-container",zt=["generic","error","warning","success","info","hint"],Ht="ap-message-",Ut=new RegExp("^ap-message-[0-9A-fa-f]+$"),Kt={};function qt(e){return Ut.test(e)}var Vt=!1;function Gt(e,t,n,i){if(!Vt){_(document).on("aui-message-close",(function(e,t){var n=t.attr("id").replace(Ht,"");if(Kt[n]){_.isFunction(Kt[n].onCloseTrigger)&&Kt[n].onCloseTrigger();Kt[n]._destroy()}}));Vt=!0}var o=function(){var e=_("#"+Rt);e.length<1&&(e=_('<div id="'+Rt+'" />').appendTo("body"));return e}();i=function(e){var t={};"object"==typeof e&&["closeable","fadeout","delay","duration","id"].forEach((function(n){n in e&&(t[n]=e[n])}));return t}(i);_.extend(i,{title:t,body:AJS.escapeHtml(n)});if(zt.indexOf(e)<0)throw"Invalid message type. Must be: "+zt.join(", ");if(qt(i.id)){AJS.messages[e](o,i);o.css("margin-left","-"+o.innerWidth()/2+"px")}}function Wt(e,t,n,i,o){var r="AP.messages."+e;console.warn("DEPRECATED API - AP.messages."+e+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");We(r,o._context.extension);var a=lt.getFrameworkAdaptor().getProviderByModuleName("messages");if(a){var s=e,d=a[s];d||(a[s]=a.generic);d(t,n,i)}else Gt(e,t,n,i)}function Xt(e){return{constructor:function(t,n,i,o){var r=(o=N.last(arguments))._id;"string"!=typeof t&&(t="");"string"!=typeof n&&(n="");"object"!=typeof i&&(i={});i.id=Ht+r;Wt(e,t,n,i,o);Kt[r]=this}}}var Yt={clear:function(e){var t=Ht+e._id;if(qt(t)){var n=lt.getFrameworkAdaptor().getProviderByModuleName("messages");n?n.clear(t):_("#"+t).closeMessage()}},onClose:function(e,t){t=N.last(arguments);var n=e._id,i=lt.getFrameworkAdaptor(),o=i.getProviderByModuleName("messages");if(o){var r=Ht+e._id;o.onClose(r,t)}else Kt[n]&&(Kt[n].onCloseTrigger=t)},generic:Xt("generic"),error:Xt("error"),warning:Xt("warning"),success:Xt("success"),info:Xt("info"),hint:Xt("hint")},Qt={actionInvoked:function(e,t){m.dispatch("flag-action-invoked",{id:t,actionId:e})},open:function(e){m.dispatch("flag-open",{id:e})},close:function(e){m.dispatch("flag-close",{id:e})},closed:function(e){m.dispatch("flag-closed",{id:e})}},Zt="ap-flag-",en="ac-flag-actions",tn=function(){function e(){}var t=e.prototype;t.cleanKey=function(e){var t=new RegExp("^ap-flag-(.+)$"),n=e.match(t);return n&&n[1]?n[1]:null};t._toHtmlString=function(e){return"string"===_.type(e)?e:"object"===_.type(e)&&e instanceof _?e.html():void 0};t._renderBody=function(e){e=this._toHtmlString(e);var t=_("<div />").html(e);_("<p />").addClass(en).appendTo(t);return t.html()};t._renderActions=function(e,t,n){var i,o=e.find(".ac-flag-actions");n=n||{};Object.getOwnPropertyNames(n).forEach((function(e){i=_("<a />").attr("href","#").data({key:e,flag_id:t}).text(n[e]);o.append(i)}),this);return e};t.render=function(e){!function(){if(on)return;_(document).on("aui-flag-close",(function(e){var t=e.target.id,n=nn.cleanKey(t);Qt.closed(n)}));_(document).on("click",".ac-flag-actions",(function(e){var t=_(e.target),n=t.data("key"),i=t.data("flag_id");Qt.actionInvoked(n,i)}));on=!0}();var t=Zt+e.id,n=AJS.flag({type:e.type,title:e.title,body:this._renderBody(e.body),close:e.close});n.setAttribute("id",t);var i=_(n);this._renderActions(i,e.id,e.actions);i.addClass("ac-aui-flag");i.close=n.close;return i};t.close=function(e){document.getElementById(e).close()};return e}(),nn=new tn,on=!1;m.register("flag-close",(function(e){nn.close(e.id)}));var rn={},an=function(){function e(e,t){t=N.last(arguments);if("object"==typeof e){var n=t._id,i=lt.getFrameworkAdaptor(),o=i.getProviderByModuleName("flag");if(o){var r=[];"object"==typeof e.actions&&(r=Object.getOwnPropertyNames(e.actions).map((function(t){return{actionKey:t,actionText:e.actions[t],executeAction:Qt.actionInvoked.bind(null,t,n)}})));var a=e.type||"info",s={id:n,title:e.title,body:e.body,actions:r,onClose:Qt.closed,close:e.close,type:a.toLowerCase()};this.flag=o.create(s);var d=st.getProvider("addon");d&&d.registerUnmountCallback&&d.registerUnmountCallback(this.close.bind(this),t._context)}else{this.flag=nn.render({type:e.type,title:e.title,body:AJS.escapeHtml(e.body),actions:e.actions,close:e.close,id:n});Qt.open(this.flag.attr("id"))}this.onTriggers={};this.extension=t._context.extension;rn[t._id]=this;t.call(null,t._id)}}e.prototype.close=function(){this.flag.close()};return e}();function sn(e,t,n){if(rn[e]){var i=rn[e].extension;(n=n||{}).flagIdentifier=e;var o={id:i.id};D(t,o,n)}}m.register("flag-closed",(function(e){sn(e.id,"flag.close");rn[e.id]&&delete rn[e.id]}));m.register("flag-action-invoked",(function(e){sn(e.id,"flag.action",{actionIdentifier:e.actionId})}));var dn,cn,ln={create:{constructor:an,close:an.prototype.close}},un={trackDeprecatedMethodUsed:function(e,t){t=N.last(arguments);We(e,t._context.extension)},trackIframePerformanceMetrics:function(e,t){t=N.last(arguments);Ze(e,t._context.extension)}};m.register("iframe-bridge-established",(function(e){if(e.extension.options.isFullPage){window.addEventListener("scroll",pn);dn=e.extension.id}}));m.register("iframe-destroyed",(function(e){fn()}));m.register("iframe-unload",(function(e){fn()}));function fn(){window.removeEventListener("scroll",pn);dn=void 0;cn=void 0}function pn(){var e=document.documentElement.scrollHeight,t=window.innerHeight,n=.1*e;window.pageYOffset<=n?gn("nearTop"):t+window.pageYOffset+n>=e?gn("nearBottom"):cn=void 0}function gn(e){if(cn!==e){D("scroll."+e,{id:dn},{});cn=e}}var hn={getPosition:function(e){if((e=N.last(arguments))._context.extension.options.isFullPage){var t=N.getIframeByExtensionId(e._context.extension_id),n=t.offset(),i=_(window);e({scrollY:i.scrollTop()-n.top,scrollX:i.scrollLeft()-n.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(e,t){if((t=N.last(arguments))._context.extension.options&&t._context.extension.options.isFullPage){var n=N.getIframeByExtensionId(t._context.extension_id),i=n.offset();"number"==typeof e&&(document.documentElement.scrollTop=i.top+e)}}},mn=function(e,t,n){m.dispatch("dropdown-item-selected",{id:e,item:t,extension:n})};function yn(e){return e.map((function(e){if(e.list&&Array.isArray(e.list)){var t={heading:e.heading};t.items=e.list.map((function(e){return function(e){var t={};if("string"==typeof e)t.content=e;else{if(!e.text||"string"!=typeof e.text)throw new Error("Unknown dropdown list item format.");t.content=e.text;"boolean"==typeof e.disabled&&(t.disabled=e.disabled);void 0!==e.itemId&&(t.itemId=e.itemId)}return t}(e)}));return t}}))}var vn={create:function(e,t){t=N.last(arguments);if("object"==typeof e){var n=lt.getFrameworkAdaptor(),i=n.getProviderByModuleName("dropdown");if(i){var o=yn(e.list),r={dropdownId:e.dropdownId,dropdownGroups:o,dropdownItemNotifier:function(e){mn(e.dropdownId,e.item,t._context.extension)}};i.create(r,t._context);return r}}},showAt:function(e,t,n,i){var o=N.last(arguments),r={left:0,top:0},a=document.getElementById(o._context.extension_id);a?r=a.getBoundingClientRect():console.error("ACJS: no iframe found for dropdown");var s=lt.getFrameworkAdaptor(),d=s.getProviderByModuleName("dropdown");if(d){var c={dropdownId:e,x:t,y:n,width:i};d.showAt(c,{iframeDimensions:r,onItemSelection:function(e,t){mn(e,t,o._context.extension)}})}},hide:function(e){var t=lt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.hide(e)},itemDisable:function(e,t){var n=lt.getFrameworkAdaptor().getProviderByModuleName("dropdown");n&&n.itemDisable(e,t)},itemEnable:function(e,t){var n=lt.getFrameworkAdaptor().getProviderByModuleName("dropdown");n&&n.itemEnable(e,t)}};m.register("dropdown-item-selected",(function(e){D("dropdown-item-selected",{addon_key:e.extension.addon_key,key:e.extension.key},{dropdownId:e.id,item:e.item})}));m.register("iframe-destroyed",(function(e){var t=lt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.destroyByExtension(e.extension.extension_id)}));m.register("after:iframe-unload",(function(e){var t=lt.getFrameworkAdaptor().getProviderByModuleName("dropdown");t&&t.destroyByExtension(e.extension.extension_id)}));var _n,xn,bn,wn,kn,En={focus:function(){window.document.querySelector("a").focus({preventScroll:!0});window.document.querySelector("a").blur()},getSelectedText:(_n=function(e){e("")},xn="AP.host.getSelectedText()",kn=!1,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!kn&&"undefined"!=typeof console&&console.warn){kn=!0;console.warn("DEPRECATED API - "+xn+" has been deprecated "+(wn?"since ACJS "+wn:"in ACJS")+" and will be removed in a future release. "+(bn?"Use "+bn+" instead.":"No alternative will be provided."));var i=N.last(t);i&&i._context&&i._context.extension&&un.trackDeprecatedMethodUsed(xn,i)}return _n.apply(void 0,t)})},An=["light","dark","auto"],Cn=["light-increased-contrast","light","dark","dark-increased-contrast","legacy-light","legacy-dark","spacing","typography","shape","typography-adg3","typography-minor3"],On="data-theme",In="data-color-mode",Sn="--".concat("ds","-elevation-surface-current");function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],d=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){c=!0,o=e}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function jn(e){var t=function(e,t){if("object"!==Mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Mn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mn(t)?t:String(t)}function Dn(e,t,n){(t=jn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var Ln=["light","dark","spacing","typography","shape"],Fn="UNSAFE_themeOptions",Bn=function(e){return e.split(" ").map((function(e){return e.split(/:([\s\S]*)/)})).reduce((function(e,t){var n,i,o=Tn(t,2),r=o[0],a=o[1];"colorMode"===r&&["light","dark","auto"].includes(a)&&(e[r]=a);(i=r,void 0!==Ln.find((function(e){return e===i})))&&(n=a,void 0!==Cn.find((function(e){return e===n})))&&(e[r]=a);if(r===Fn)try{e.UNSAFE_themeOptions=JSON.parse(a)}catch(e){}return e}),{})};function Nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(e,jn(i.key),i)}}function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=function(){if("undefined"==typeof document)return{};var e=document.documentElement,t=e.getAttribute(In)||"",n=e.getAttribute(On)||"";return Jn(Jn({},Bn(n)),function(e){return void 0!==An.find((function(t){return t===e}))}(t)&&{colorMode:t})},zn=function(){return Pe("connect-codesplitting_1tqgw")||Pe("com.atlassian.connect.codesplitting")},Hn=function(e){var t=document.getElementById(e);if(t){var n=getComputedStyle(t),i=n.getPropertyValue(Sn),o=n.getPropertyValue("--ds-surface-raised"),r=n.getPropertyValue("--ds-surface-overlay");return i===o?"raised":i===r?"overlay":void 0}},Un={extensionIds:[],themeObserver:new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);Dn(this,"observer",null);Dn(this,"mediaObserver",null);this.callback=t}!function(e,t,n){t&&Nn(e.prototype,t);n&&Nn(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"observe",value:function(){var e=this;this.observer||(this.observer=new MutationObserver((function(){e.callback(Rn())})));this.observer.observe(document.documentElement,{attributeFilter:[On,In]})}},{key:"disconnect",value:function(){this.observer&&this.observer.disconnect()}}]);return e}())((function(e){var t={isTokensCodesplittingEnabled:zn()};Un.extensionIds.length&&Un.extensionIds.forEach((function(n){var i=Hn(n);M.broadcast("theme_changed",{id:n},{newTheme:e,featureFlags:t,surface:i})}))})),initializeTheming:function(){var e=N.last(arguments),t=1!==arguments.length&&arguments[0];if(e&&e._context&&e._context.extension_id){var n=e._context.extension_id;if(n){var i=Rn(),o=Hn(n),r={isTokensCodesplittingEnabled:zn()};M.broadcast("theme_initialized",{id:n},{initialTheme:i,featureFlags:r,surface:o,forceNoCleanup:t});if(!this.extensionIds.includes(n)){this.extensionIds.push(n);this.themeObserver.observe(document.documentElement)}}}}},Kn={setTitle:function(e,t){if((t=N.last(arguments))._context.extension.options&&t._context.extension.options.isFullPage){var n=" - "+N.guessProductFromModuleDefined(window.connectHost);document.title=e+n}}},qn=function(){function e(){this._webitems={};this._contentResolver=function(){}}var t=e.prototype;t.setContentResolver=function(e){this._contentResolver=e};t.requestContent=function(e){if(e.addon_key&&e.key)return this._contentResolver.call(null,N.extend({classifier:"json"},e))};t.getWebItemsBySelector=function(e){var t,n=this;Object.getOwnPropertyNames(this._webitems).some((function(i){var o=n._webitems[i];if(o.selector&&o.selector.trim()===e.trim()){t=o;return!0}return!1}));return t};t.setWebItem=function(e){return this._webitems[e.name]={name:e.name,selector:e.selector,triggers:e.triggers}};t._removeTriggers=function(e){var t=this,n=at.sanitizeTriggers(e.triggers);_((function(){_("body").off(n,e.selector,t._webitems[e.name]._on)}));delete this._webitems[e.name]._on};t._addTriggers=function(e){var t=at.sanitizeTriggers(e.triggers);e._on=function(t){t.preventDefault();var n=_(t.target).closest(e.selector),i=at.getConfigFromTarget(n),o=i&&i.url?i.url:void 0,r={addon_key:at.getExtensionKey(n),key:at.getKey(n),options:at.getOptionsForWebItem(n),url:o};"com.addonengine.analytics"!==r.addon_key||lt.isModuleDefined("analytics")?Gn.webitemInvoked(e,t,r):console.log("ACJS-1164 Dropping event "+t.type+" for plugin "+r.addon_key+" until AP.analytics loads...")};_((function(){_("body").on(t,e.selector,e._on);_("head").append('<style type="text/css">'+e.selector+".ap-link-webitem {pointer-events: auto;}</style>")}))};return e}(),Vn=new qn;m.register("webitem-added",(function(e){Vn._addTriggers(e.webitem)}));m.register("content-resolver-register-by-extension",(function(e){Vn.setContentResolver(e.callback)}));document.addEventListener("aui-responsive-menu-item-created",(function(e){var t=e.detail.originalItem.querySelector('a[class*="ap-"]');if(t){var n=e.detail.newItem.querySelector("a");[].slice.call(t.classList).forEach((function(e){/^ap-/.test(e)&&n.classList.add(e)}))}}));var Gn={addWebItem:function(e){var t;if(Vn.getWebItemsBySelector(e.selector))return!1;t=Vn.setWebItem(e);m.dispatch("webitem-added",{webitem:t})},webitemInvoked:function(e,t,n){m.dispatch("webitem-invoked:"+e.name,{webitem:e,event:t,extension:n})}},Wn=function(e){m.dispatch("inline-dialog-extension",{$el:e.$el,extension:e.extension})},Xn=new(function(){function e(){}var t=e.prototype;t.resize=function(e){var t=N.stringToDimension(e.width),n=N.stringToDimension(e.height),i=e.$el.find(".contents");if(1===i.length){i.css({width:t,height:n});Bt(e.$el)}};t.refresh=function(e){e.is(":visible")&&e[0].popup.reset()};t._getInlineDialog=function(e){return AJS.InlineDialog(e)};t._renderContainer=function(){return _("<div />").addClass("aui-inline-dialog-contents")};t._displayInlineDialog=function(e){$t({$el:e.$el,trigger:e.trigger,extension:e.extension})};t.hideInlineDialog=function(e){e.hide()};t.closeInlineDialog=function(){_(".aui-inline-dialog").filter((function(){return _(this).find(".ap-iframe-container").length>0})).hide()};t.render=function(e){var t=this,n=_(document.getElementById("inline-dialog-"+e.id));0!==n.length&&n.remove();return AJS.InlineDialog(e.bindTo,e.id,(function(n,i,o){n.append(e.$content);t._displayInlineDialog({extension:e.extension,$el:n,trigger:i});o()}),e.inlineDialogOptions)};return e}());m.register("iframe-resize",(function(e){var t=e.$el.parents(".aui-inline-dialog");1===t.length&&Xn.resize({width:e.width,height:e.height,$el:t})}));m.register("inline-dialog-refresh",(function(e){Xn.refresh(e.$el)}));m.register("inline-dialog-hide",(function(e){Xn.hideInlineDialog(e.$el)}));m.register("inline-dialog-close",(function(e){Xn.closeInlineDialog()}));var Yn="inline-dialog-target-uid",Qn=new(function(){function e(){this._inlineDialogWebItemSpec={name:"inline-dialog",selector:".ap-inline-dialog",triggers:["mouseenter","click"]};this._inlineDialogWebItems={}}var t=e.prototype;t.getWebItem=function(){return this._inlineDialogWebItemSpec};t._createInlineDialog=function(e){return Xn.render({extension:e.extension,id:e.id,bindTo:e.$target,$content:_("<div />"),inlineDialogOptions:e.extension.options})};t.triggered=function(e){if("click"===e.event.type||e.extension.options.onHover){var t=_(e.event.currentTarget),n=t.data(Yn);this._createInlineDialog({id:n,extension:e.extension,$target:t,options:e.extension.options||{}}).show()}};t.opened=function(e){var t=e.$el.find("iframe");if(t&&1===t.length){var n=t.attr("src");if(n.length>0){var i=Ee.hasJwt(n);if(i&&!Ee.isJwtExpired(n)||!i)return!1}}var o=wt(e.extension),r=Vn.requestContent(o);if(!r){console.warn("no content resolver found");return!1}r.then((function(t){t.options=t.options||{};N.extend(t.options,{autoresize:!0,widthinpx:!0});Wn({$el:e.$el,extension:t})}));return!0};t.addExtension=function(e){var t=Ve(e.extension);e.$el.empty().append(t)};t.createIfNotExists=function(e){var t=_(e.event.currentTarget),n=t.data(Yn);if(!n){n=at.uniqueId();t.data(Yn,n)}};return e}()),Zn=Qn.getWebItem();m.register("before:webitem-invoked:"+Zn.name,(function(e){Qn.createIfNotExists(e)}));m.register("webitem-invoked:"+Zn.name,(function(e){Qn.triggered(e)}));m.register("inline-dialog-opened",(function(e){Qn.opened(e)}));m.register("inline-dialog-extension",(function(e){Qn.addExtension(e)}));Gn.addWebItem(Zn);var ei=["click"],ti="dialog-target-uid",ni={chrome:!0},ii=new(function(){function e(){this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:ei}}var t=e.prototype;t.getWebItem=function(){return this._dialogWebItem};t._dialogOptions=function(e){return N.extend({},ni,e||{})};t.triggered=function(e){var t=_(e.event.currentTarget).data(ti),n=this._dialogOptions(e.extension.options);n.id=t;J(e.extension,n)};t.createIfNotExists=function(e){var t=_(e.event.currentTarget),n=t.data(ti);if(!n){n=at.uniqueId();t.data(ti,n)}};return e}()),oi=ii.getWebItem();m.register("webitem-invoked:"+oi.name,(function(e){ii.triggered(e)}));m.register("before:webitem-invoked:"+oi.name,ii.createIfNotExists);Gn.addWebItem(oi);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.3.123");M.defineModule("messages",Yt);M.defineModule("flag",ln);M.defineModule("dialog",Ot);M.defineModule("inlineDialog",Jt);M.defineModule("env",Lt);M.defineModule("events",$);M.defineModule("_analytics",un);M.defineModule("scrollPosition",hn);M.defineModule("dropdown",vn);M.defineModule("host",En);M.defineModule("theming",Un);M.defineModule("page",Kn);m.register("module-define-custom",(function(e){M.defineModule(e.name,e.methods)}));M.registerRequestNotifier((function(t){var n=function(){if("req"===t.type){var n=M.getExtensions((function(e){return e.extension_id===t.extension_id}))[0].extension;m.dispatch("method-invoked",e({},t,{extension:n}))}};"function"==typeof window.requestIdleCallback?window.requestIdleCallback(n,{timeout:1e3}):n()}));M.setFeatureFlagGetter(Pe);return lt}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-spa-context-v5', location = 'v5/js/spa-context/main.js' */
define("ac/spa-context",(function(){var n=null,i=null;return{provideContainerApi:function(i){n=i},provideNavigationApi:function(n){i=n},isInIframe:function(){return null!==n},canSpaTransition:function(){return null!==i},getContainerApi:function(){return n},getNavigationApi:function(){return i}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/iframe/host/_uritemplate.js' */
!function(e){"use strict";var t=function(){function e(e){this.options=e}e.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options};return e}(),n=function(){function e(t){return"function"==typeof Object.freeze?function(t){if("object"!=typeof t||null===t)return t;Object.freeze(t);var n,r;for(r in t)t.hasOwnProperty(r)&&"object"==typeof(n=t[r])&&e(n);return t}(t):t}return{isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isString:function(e){return"[object String]"===Object.prototype.toString.apply(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.apply(e)},isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.apply(e)},join:function(e,t){var n,r="",i=!0;for(n=0;n<e.length;n+=1){i?i=!1:r+=t;r+=e[n]}return r},map:function(e,t){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n},filter:function(e,t){for(var n=[],r=0;r<e.length;r+=1)t(e[r])&&n.push(e[r]);return n},deepFreeze:e}}(),r=function(){function e(e){return e>="0"&&e<="9"}return{isAlpha:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},isDigit:e,isHexDigit:function(t){return e(t)||t>="a"&&t<="f"||t>="A"&&t<="F"}}}(),i=function(){var e=function(e){return unescape(encodeURIComponent(e))},t=function(e){return e<=127?1:194<=e&&e<=223?2:224<=e&&e<=239?3:240<=e&&e<=244?4:0},n=function(e){return 128<=e&&e<=191};function i(e,t){return"%"===e.charAt(t)&&r.isHexDigit(e.charAt(t+1))&&r.isHexDigit(e.charAt(t+2))}function o(e,t){return parseInt(e.substr(t,2),16)}return{encodeCharacter:function(t){var n,r,i="",o=e(t);for(r=0;r<o.length;r+=1)i+="%"+((n=o.charCodeAt(r))<16?"0":"")+n.toString(16).toUpperCase();return i},isPctEncoded:function(e){if(!i(e,0))return!1;var r=o(e,1),s=t(r);if(0===s)return!1;for(var a=1;a<s;a+=1)if(!i(e,3*a)||!n(o(e,3*a+1)))return!1;return!0},pctCharAt:function(e,r){var s=e.charAt(r);if(!i(e,r))return s;var a=o(e,r+1),u=t(a);if(0===u)return s;for(var f=1;f<u;f+=1)if(!i(e,r+3*f)||!n(o(e,r+3*f+1)))return s;return e.substr(r,3*u)}}}(),o={isVarchar:function(e){return r.isAlpha(e)||r.isDigit(e)||"_"===e||i.isPctEncoded(e)},isUnreserved:function(e){return r.isAlpha(e)||r.isDigit(e)||"-"===e||"."===e||"_"===e||"~"===e},isReserved:function(e){return":"===e||"/"===e||"?"===e||"#"===e||"["===e||"]"===e||"@"===e||"!"===e||"$"===e||"&"===e||"("===e||")"===e||"*"===e||"+"===e||","===e||";"===e||"="===e||"'"===e}},s=function(){function e(e,t){var n,r="",s="";"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString());for(n=0;n<e.length;n+=s.length){s=e.charAt(n);r+=o.isUnreserved(s)||t&&o.isReserved(s)?s:i.encodeCharacter(s)}return r}return{encode:e,encodePassReserved:function(t){return e(t,!0)},encodeLiteral:function(e){var t,n="",r="";for(t=0;t<e.length;t+=r.length)(r=i.pctCharAt(e,t)).length>1?n+=r:n+=o.isReserved(r)||o.isUnreserved(r)?r:i.encodeCharacter(r);return n},encodeLiteralCharacter:function(e,t){var n=i.pctCharAt(e,t);return n.length>1||o.isReserved(n)||o.isUnreserved(n)?n:i.encodeCharacter(n)}}}(),a=function(){var e={};function t(t){e[t]={symbol:t,separator:"?"===t?"&":""===t||"+"===t||"#"===t?",":t,named:";"===t||"&"===t||"?"===t,ifEmpty:"&"===t||"?"===t?"=":"",first:"+"===t?"":t,encode:"+"===t||"#"===t?s.encodePassReserved:s.encode,toString:function(){return this.symbol}}}t("");t("+");t("#");t(".");t("/");t(";");t("?");t("&");return{valueOf:function(t){return e[t]?e[t]:"=,!@|".indexOf(t)>=0?null:e[""]}}}();function u(e){var t;if(null==e)return!1;if(n.isArray(e))return e.length>0;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return!0;for(t in e)if(e.hasOwnProperty(t)&&u(e[t]))return!0;return!1}var f=function(){function e(e){this.literal=s.encodeLiteral(e)}e.prototype.expand=function(){return this.literal};e.prototype.toString=e.prototype.expand;return e}(),p=function(){function e(e){var n,s,u=[],f=null,p=null,l=null,h="";function d(){var n=e.substring(p,s);if(0===n.length)throw new t({expressionText:e,message:"a varname must be specified",position:s});f={varname:n,exploded:!1,maxLength:null};p=null}function g(){if(l===s)throw new t({expressionText:e,message:"after a ':' you have to specify the length",position:s});f.maxLength=parseInt(e.substring(l,s),10);l=null}n=function(n){var r=a.valueOf(n);if(null===r)throw new t({expressionText:e,message:"illegal use of reserved operator",position:s,operator:n});return r}(e.charAt(0));s=n.symbol.length;p=s;for(;s<e.length;s+=h.length){h=i.pctCharAt(e,s);if(null!==p){if("."===h){if(p===s)throw new t({expressionText:e,message:"a varname MUST NOT start with a dot",position:s});continue}if(o.isVarchar(h))continue;d()}if(null!==l){if(s===l&&"0"===h)throw new t({expressionText:e,message:"A :prefix must not start with digit 0",position:s});if(r.isDigit(h)){if(s-l>=4)throw new t({expressionText:e,message:"A :prefix must have max 4 digits",position:s});continue}g()}if(":"!==h)if("*"!==h){if(","!==h)throw new t({expressionText:e,message:"illegal character",character:h,position:s});u.push(f);f=null;p=s+1}else{if(null===f)throw new t({expressionText:e,message:"exploded without varspec",position:s});if(f.exploded)throw new t({expressionText:e,message:"exploded twice",position:s});if(f.maxLength)throw new t({expressionText:e,message:"an explode (*) MUST NOT follow to a prefix",position:s});f.exploded=!0}else{if(null!==f.maxLength)throw new t({expressionText:e,message:"only one :maxLength is allowed per varspec",position:s});if(f.exploded)throw new t({expressionText:e,message:"an exploeded varspec MUST NOT be varspeced",position:s});l=s+1}}null!==p&&d();null!==l&&g();u.push(f);return new c(e,n,u)}return function(n){var r,i,o=[],s=null,a=0;for(r=0;r<n.length;r+=1){i=n.charAt(r);if(null===a){if(null===s)throw new Error("reached unreachable code");if("{"===i)throw new t({templateText:n,message:"brace already opened",position:r});if("}"===i){if(s+1===r)throw new t({templateText:n,message:"empty braces",position:s});try{o.push(e(n.substring(s+1,r)))}catch(e){if(e.prototype===t.prototype)throw new t({templateText:n,message:e.options.message,position:s+e.options.position,details:e.options});throw e}s=null;a=r+1}}else{if("}"===i)throw new t({templateText:n,message:"unopened brace closed",position:r});if("{"===i){a<r&&o.push(new f(n.substring(a,r)));a=null;s=r}}}if(null!==s)throw new t({templateText:n,message:"unclosed brace",position:s});a<n.length&&o.push(new f(n.substr(a)));return new l(n,o)}}(),c=function(){function e(e){return JSON&&JSON.stringify?JSON.stringify(e):e}function t(e){if(!u(e))return!0;if(n.isString(e))return""===e;if(n.isNumber(e)||n.isBoolean(e))return!1;if(n.isArray(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push({name:t,value:e[t]});return n}function i(e,t,n){this.templateText=e;this.operator=t;this.varspecs=n}i.prototype.toString=function(){return this.templateText};function o(e,t,n){var r="";n=n.toString();if(t.named){r+=s.encodeLiteral(e.varname);if(""===n)return r+=t.ifEmpty;r+="="}null!==e.maxLength&&(n=n.substr(0,e.maxLength));return r+=t.encode(n)}function a(e){return u(e.value)}function f(e,i,o){var f=[],p="";if(i.named){p+=s.encodeLiteral(e.varname);if(t(o))return p+=i.ifEmpty;p+="="}if(n.isArray(o)){f=o;f=n.filter(f,u);f=n.map(f,i.encode);p+=n.join(f,",")}else{f=r(o);f=n.filter(f,a);f=n.map(f,(function(e){return i.encode(e.name)+","+i.encode(e.value)}));p+=n.join(f,",")}return p}function p(e,i,o){var f=[];if(n.isArray(o)){f=o;f=n.filter(f,u);f=n.map(f,(function(n){var r=s.encodeLiteral(e.varname);t(n)?r+=i.ifEmpty:r+="="+i.encode(n);return r}))}else{f=r(o);f=n.filter(f,a);f=n.map(f,(function(e){var n=s.encodeLiteral(e.name);t(e.value)?n+=i.ifEmpty:n+="="+i.encode(e.value);return n}))}return n.join(f,i.separator)}function c(e,t){var i=[],o="";if(n.isArray(t)){i=t;i=n.filter(i,u);i=n.map(i,e.encode);o+=n.join(i,e.separator)}else{i=r(t);i=n.filter(i,(function(e){return u(e.value)}));i=n.map(i,(function(t){return e.encode(t.name)+"="+e.encode(t.value)}));o+=n.join(i,e.separator)}return o}i.prototype.expand=function(r){var i,s,a,l=[],h=this.operator;for(i=0;i<this.varspecs.length;i+=1)if(null!=(a=r[(s=this.varspecs[i]).varname])){s.exploded&&!0;n.isArray(a);if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)l.push(o(s,h,a));else{if(s.maxLength&&u(a))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+e(a));s.exploded?u(a)&&(h.named?l.push(p(s,h,a)):l.push(c(h,a))):!h.named&&t(a)||l.push(f(s,h,a))}}return 0===l.length?"":h.first+n.join(l,h.separator)};return i}(),l=function(){function e(e,t){this.templateText=e;this.expressions=t;n.deepFreeze(this)}e.prototype.toString=function(){return this.templateText};e.prototype.expand=function(e){var t,n="";for(t=0;t<this.expressions.length;t+=1)n+=this.expressions[t].expand(e);return n};e.parse=p;e.UriTemplateError=t;return e}();!function(e){"function"==typeof define?define("_uritemplate",[],(function(){return e})):"undefined"!=typeof window?window.UriTemplate=e:global.UriTemplate=e}(l)}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/context.js' */
define("ac/navigator/context",(function(){var n;return{setContextFunction:function(t){n=t},getContextFunction:function(){return n}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/module.js' */
define("ac/navigator/module",["ac/navigator/utils","ac/navigator/routes","ac/navigator/context","ac/spa-context"],(function(t,o,e,n){return{getLocation:function(o){var n=e.getContextFunction();if("function"!=typeof n)console.error("no context function defined");else{context=n();if("object"!=typeof context||Array.isArray(context)||null===context)console.error("navigator context callback did not return an object");else{context.href=t.getTopmostSameOriginWindow(window).location.href;o(context)}}},go:function(e,n,a){e=e.toLowerCase();(n=n||{}).addonKey||(n.addonKey=a._context.extension.addon_key);if(t.isApiEnabled()){var r=o.getRoutes();o.hasRoutes()&&e in r?"function"==typeof r[e]?r[e](n,t.goToUrl):t.goToUrl(t.buildUrl(r[e],n)):console.error("The URL target "+e+" is not available. Valid targets are: "+Object.keys(r).toString())}else console.error("connect navigation api not yet implemented for this product")},_shouldThrottle:function(t,o){var e=Number(window.localStorage.getItem("lastReloadTimestamp")),n=Number(window.localStorage.getItem("reloadAttempts")),a=Date.now();a-e>t&&(n=0);if(n>=o){console.error("Reloads must be "+t+"ms apart after "+n+" reload attempts.");return!0}e=a;n+=1;window.localStorage.setItem("lastReloadTimestamp",e);window.localStorage.setItem("reloadAttempts",n);return!1},reload:function(){this._shouldThrottle(12e4,5)||(n.isInIframe()?t.getTopmostSameOriginWindow(window).location.reload():window.location.reload())}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/routes.js' */
define("ac/navigator/routes",(function(){var e={addonmodule:function(e,t){var o=e&&e.addonKey,n=e&&e.moduleKey;if(!o)throw new Error("Missing addonKey parameter in the context.");if(!n)throw new Error("Missing moduleKey parameter in the context.");var r=function(e){const t=e.map(encodeURIComponent).join("/");return new URL(t,window.location.origin).pathname.slice(1)}([o,n]),a=AJS.contextPath()+"/plugins/servlet/ac/"+r;if(null!=e.context){console.warn("DEPRECATED API - The context field has been deprecated in favor of customData.");connectHost.trackDeprecatedMethodUsed("AP.navigate-context",{addon_key:o,moduleKey:n})}var i,l=AJS.$.extend({},e.context||{},e.customData||{}),c=(i=l,Object.keys(i).map((function(e){return["ac."+e,i[e]].map(encodeURIComponent).join("=")})).join("&"));a=""!=c?a+"?"+c:a;t.apply(this,[a])},site:function(e,t){function o(e){if(-1!==new URL(e,document.baseURI).pathname.replace(/\/+/g,"/").toLowerCase().indexOf("plugins/servlet/ac-redirect"))throw new Error("Cannot use legacy redirect filter in Navigator API")}if(e.relativeUrl){if("string"!=typeof e.relativeUrl||"/"!==e.relativeUrl[0])throw new Error("Invalid relativeUrl passed in context");o(e.relativeUrl);var n=0===e.relativeUrl.indexOf(AJS.contextPath())?"":AJS.contextPath(),r=window.location.protocol+"//"+window.location.hostname+n+e.relativeUrl;t.apply(this,[r])}else{if(!e.absoluteUrl)throw new Error("No context supplied to Navigator API");var a=window.location.protocol+"//"+window.location.hostname+"/";if("string"!=typeof e.absoluteUrl||0!==e.absoluteUrl.indexOf(a))throw new Error("Invalid absoluteUrl passed in context");o(e.absoluteUrl);t.apply(this,[e.absoluteUrl])}}};return{hasRoutes:function(){return e&&0!==Object.getOwnPropertyNames(e).length},addRoutes:function(t){e=AJS.$.extend(e,t)},getRoutes:function(){return e}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/utils.js' */
define("ac/navigator/utils",["_uritemplate","ac/spa-context"],(function(n,t){var r=!1;return{enableApi:function(){r=!0},disableApi:function(){r=!1},isApiEnabled:function(){return r},buildUrl:function(t,r){"/"!==t[0]&&(t="/"+t);return AJS.contextPath()+n.parse(t).expand(r)},goToUrl:function(n){var r=function(){window.location.href=n};t.isInIframe()?t.getContainerApi().navigate(n,r):t.canSpaTransition()?t.getNavigationApi().navigate(n):r()},hasContext:function(n,t){if(!n[t]){AJS.error("Missing "+t+" in navigator context");return!1}return!0},appendQueryParam:function(n,t,r){return n+(n.indexOf("?")>-1?"&":"?")+t+"="+encodeURIComponent(r)},getTopmostSameOriginWindow:function(n){function t(n){try{if(null==n.location.href)return!1}catch(n){return!1}return!0}for(var r,e=n;!(r=e,r===r.parent)&&t(e.parent);)e=e.parent;return e}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-cookie.js' */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).connectHostCookie=e()}}((function(){return function e(n,t,r){function o(f,a){if(!t[f]){if(!n[f]){var c="function"==typeof require&&require;if(!a&&c)return c(f,!0);if(i)return i(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[f]={exports:{}};n[f][0].call(l.exports,(function(e){var t=n[f][1][e];return o(t||e)}),l,l.exports,e,n,t,r)}return t[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="AJS.conglomerate.cookie",o=/(\\|^"|"$)/g,i=/\|\|+/g,f=/"/g,a=/[.*+?|^$()[\]{\\]/g,c=encodeURIComponent("|"),u=encodeURIComponent("|").toLowerCase(),l="**PIPE**",p="**PIPE_PERCENT_ENCODED_UPPER**",E="**PIPE_PERCENT_ENCODED_LOWER**",g="**PERCENT**",d="**EQUALS**";function s(e){if("string"!=typeof e)return e;if(-1!==e.indexOf(l)||-1!==e.indexOf(p)||-1!==e.indexOf(E))throw new Error("Cannot use cookies that contain **PIPE** or **PIPE_PERCENT_ENCODED_UPPER****PIPE_PERCENT_ENCODED_LOWER**");if(-1!==e.indexOf(g))throw new Error("Cannot use cookies that contain **PERCENT**");if(-1!==e.indexOf(d))throw new Error("Cannot use cookies that contain **EQUALS**");return e=(e=(e=(e=(e=e.replace(new RegExp(x("|"),"g"),l)).replace(new RegExp(c,"g"),p)).replace(new RegExp(u,"g"),E)).replace(new RegExp("%","g"),g)).replace(new RegExp("=","g"),d)}function w(e){return"string"!=typeof e?e:e=(e=(e=(e=(e=e.replace(new RegExp(x(l),"g"),"|")).replace(new RegExp(x(p),"g"),c)).replace(new RegExp(x(E),"g"),u)).replace(new RegExp(x(g),"g"),"%")).replace(new RegExp(x(d),"g"),"=")}function x(e){return e.replace(a,"\\$&")}function v(e){var n=new RegExp("\\b"+x(e)+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)"),t=document.cookie.match(n);return t&&function(e){return e.replace(o,"")}(t[1])}function m(e,n,t){var o=v(r);o=function(e,n,t){var r=new RegExp("(\\s|\\|)*\\b"+x(e)+"=[^|]*[|]*");t=(t=t||"").replace(r,"|");if(""!==n){var o=e+"="+n;t.length+o.length<4020&&(t+="|"+o)}return t.replace(i,"|")}(e,n,o);!function(e,n,t){var r,o="",i='"'+n.replace(f,'\\"')+'"';if(t){(r=new Date).setTime(+r+24*t*60*60*1e3);o="; expires="+r.toGMTString()}document.cookie=e+"="+i+o+";path=/"}(r,o,t||365)}function R(e,n){var t=function(e,n){n=n||"";var t=new RegExp(x(e)+"=([^|]+)"),r=n.match(t);return r&&r[1]}(e,v(r));return null!=t?t:n}function P(e){m(e,"")}function h(e,n){if(!e||0===e.length)throw new Error("addon key must be defined on cookies");if(!n||0===n.length)throw new Error("Name must be defined")}function y(e,n){h(e,n);return e+"$$"+n}function _(e,n){h(e,n);return"connect.cookie:"+e+"$$"+n}function C(e){if(e&&e._context)return e._context.extension.addon_key;throw new Error("addon key not found in callback")}function O(e,n,t,r){var o=new Date;o.setTime(o.getTime()+24*(r||365)*60*60*1e3);localStorage.setItem(_(e,n),JSON.stringify({expiry:o.getTime(),value:t}))}function N(e,n){var t=localStorage.getItem(_(e,n));if(null!==t){var r=JSON.parse(t);if(!(r.expiry&&(new Date).getTime()>r.expiry)){var o=r.value;return"string"==typeof o?o:JSON.stringify(o)}localStorage.removeItem(n)}}t.default={save:function(e,n,t){var r=arguments[arguments.length-1],o=C(r);r._context&&O(o,e,n,t)},read:function(e,n){var t=N(C(n=arguments[arguments.length-1]),e);if(void 0!==t){n(t);return t}var r=y(C(n),s(e)),o=w(R(r));n(o);return o},erase:function(e){var n=arguments[arguments.length-1],t=y(C(n),s(e));P(t);localStorage.removeItem(_(C(n),e))}};n.exports=t.default},{}]},{},[1])(1)}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-history.js' */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).connectHostHistory=t()}}((function(){return function t(e,n,r){function o(a,i){if(!n[a]){if(!e[a]){var h="function"==typeof require&&require;if(!i&&h)return h(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return o(n||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./constants"),o=t("./models"),s=t("./utils");function a(t,e){(0,s.callConnectHost)((function(n){(0,s.values)(n.getExtensions()).forEach((function(r){var s=r.extension.addon_key,a=new o.Current({url:window.location.href,state:e.state}),i=new o.Route(a);n.broadcastEvent(t,{addon_key:s},i.render(s))}))}))}var i=!1;function h(t){var e=t.state.render(),n=t.url.render();window.history.pushState((0,s.wrapState)(e),n.title,n.url)}function u(t){var e=t.state.render(),n=t.url.render();window.history.replaceState((0,s.wrapState)(e),n.title,n.url)}n.default={_registerWindowListeners:function(){!function(){if(!i){window.addEventListener("popstate",(function(t){var e=(0,s.createEvent)("ap_popstate");e.state=(0,s.unwrapState)(t.state);window.dispatchEvent(e)}));window.addEventListener("ap_popstate",(function(t){var e=(0,s.createEvent)("ap_changestate");e.state=t.state;window.dispatchEvent(e);a(r.HISTORY_POPSTATE,t)}));window.addEventListener("ap_pushstate",(function(t){var e=(0,s.createEvent)("ap_changestate");e.state=t.state;window.dispatchEvent(e);a(r.HISTORY_PUSHSTATE,t)}));window.addEventListener("ap_replacestate",(function(t){var e=(0,s.createEvent)("ap_changestate");e.state=t.state;window.dispatchEvent(e);a(r.HISTORY_REPLACESTATE,t)}));window.addEventListener("ap_changestate",(function(t){a(r.HISTORY_CHANGESTATE,t)}));i=!0}}()},back:function(t){t=arguments[arguments.length-1];this.go(-1,t)},forward:function(t){t=arguments[arguments.length-1];this.go(1,t)},go:function(t){var e=arguments[arguments.length-1];e._context.extension.options.isFullPage?window.history.go(t):(0,s.log)("History is only available to page modules")},getState:function(t,e){var n=(e=arguments[arguments.length-1])._context.extension.addon_key,r=new o.Current({url:window.location.href,state:(0,s.unwrapState)(window.history.state)}),a=new o.Route(r),i=a.render(n);if("hash"===(t=t&&"string"==typeof t?t:"hash"))e(i.hash);else{if("all"!==t)throw new Error("invalid type for getState");e(i)}},pushState:function(t,e){var n=(e=arguments[arguments.length-1])._context.extension.addon_key,r=new o.Current({url:window.location.href,state:(0,s.unwrapState)(window.history.state)}),a=new o.Route(r),i=new o.Change(t,n),l=new o.Route(i);if(e._context.extension.options.isFullPage){if(l.url.isURLEqual(a.url)){a.merge(l);u(a)}else if(l.url.isPathnameEqual(a.url)){a.merge(l);h(a)}else h(l);var f=(0,s.createEvent)("ap_pushstate");f.state=(0,s.unwrapState)(window.history.state);window.dispatchEvent(f)}else(0,s.log)("History is only available to page modules")},replaceState:function(t,e){var n=(e=arguments[arguments.length-1])._context.extension.addon_key,r=new o.Current({url:window.location.href,state:(0,s.unwrapState)(window.history.state)}),a=new o.Route(r),i=new o.Change(t,n),h=new o.Route(i);if(e._context.extension.options.isFullPage){if(h.url.isURLEqual(a.url)){a.merge(h);u(a)}else if(h.url.isPathnameEqual(a.url)){a.merge(h);u(a)}else u(h);var l=(0,s.createEvent)("ap_replacestate");l.state=(0,s.unwrapState)(window.history.state);window.dispatchEvent(l)}else(0,s.log)("History is only available to page modules")}};e.exports=n.default},{"./constants":7,"./models":8,"./utils":9}],2:[function(t,e,n){(function(t){!function(r){var o="object"==typeof n&&n,s="object"==typeof e&&e&&e.exports==o&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(r=a);var i,h,u=2147483647,l=36,f=/^xn--/,c=/[^ -~]/,p=/\x2E|\u3002|\uFF0E|\uFF61/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,m=String.fromCharCode;function v(t){throw RangeError(d[t])}function w(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function g(t,e){return w(t.split(p),e).join(".")}function E(t){for(var e,n,r=[],o=0,s=t.length;o<s;)if((e=t.charCodeAt(o++))>=55296&&e<=56319&&o<s)if(56320==(64512&(n=t.charCodeAt(o++))))r.push(((1023&e)<<10)+(1023&n)+65536);else{r.push(e);o--}else r.push(e);return r}function _(t){return w(t,(function(t){var e="";if(t>65535){e+=m((t-=65536)>>>10&1023|55296);t=56320|1023&t}return e+=m(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,n){var r=0;t=n?y(t/700):t>>1;t+=y(t/e);for(;t>455;r+=l)t=y(t/35);return y(r+36*t/(t+38))}function x(t){var e,n,r,o,s,a,i,h,f,c,p,d=[],m=t.length,w=0,g=128,E=72;(n=t.lastIndexOf("-"))<0&&(n=0);for(r=0;r<n;++r){t.charCodeAt(r)>=128&&v("not-basic");d.push(t.charCodeAt(r))}for(o=n>0?n+1:0;o<m;){for(s=w,a=1,i=l;;i+=l){o>=m&&v("invalid-input");((h=(p=t.charCodeAt(o++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:l)>=l||h>y((u-w)/a))&&v("overflow");w+=h*a;if(h<(f=i<=E?1:i>=E+26?26:i-E))break;a>y(u/(c=l-f))&&v("overflow");a*=c}E=A(w-s,e=d.length+1,0==s);y(w/e)>u-g&&v("overflow");g+=y(w/e);w%=e;d.splice(w++,0,g)}return _(d)}function R(t){var e,n,r,o,s,a,i,h,f,c,p,d,w,g,_,x=[];d=(t=E(t)).length;e=128;n=0;s=72;for(a=0;a<d;++a)(p=t[a])<128&&x.push(m(p));r=o=x.length;o&&x.push("-");for(;r<d;){for(i=u,a=0;a<d;++a)(p=t[a])>=e&&p<i&&(i=p);i-e>y((u-n)/(w=r+1))&&v("overflow");n+=(i-e)*w;e=i;for(a=0;a<d;++a){(p=t[a])<e&&++n>u&&v("overflow");if(p==e){for(h=n,f=l;!(h<(c=f<=s?1:f>=s+26?26:f-s));f+=l){_=h-c;g=l-c;x.push(m(b(c+_%g,0)));h=y(_/g)}x.push(m(b(h,0)));s=A(n,w,r==o);n=0;++r}}++n;++e}return x.join("")}i={version:"1.2.4",ucs2:{decode:E,encode:_},decode:x,encode:R,toASCII:function(t){return g(t,(function(t){return c.test(t)?"xn--"+R(t):t}))},toUnicode:function(t){return g(t,(function(t){return f.test(t)?x(t.slice(4).toLowerCase()):t}))}};if(o&&!o.nodeType)if(s)s.exports=i;else for(h in i)i.hasOwnProperty(h)&&(o[h]=i[h]);else r.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){var r=t("punycode");n.parse=v;n.resolve=function(t,e){return v(t,!1,!0).resolve(e)};n.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e};n.format=function(t){w(t)&&(t=v(t));return t instanceof o?t.format():o.prototype.format.call(t)};n.Url=o;function o(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(i),u=["%","/","?",";","#"].concat(h),l=["/","?","#"],f=/^[a-z0-9A-Z_-]{0,63}$/,c=/^([a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=t("querystring");function v(t,e,n){if(t&&g(t)&&t instanceof o)return t;var r=new o;r.parse(t,e,n);return r}o.prototype.parse=function(t,e,n){if(!w(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t;o=o.trim();var a=s.exec(o);if(a){var i=(a=a[0]).toLowerCase();this.protocol=i;o=o.substr(a.length)}if(n||a||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===o.substr(0,2);if(v&&(!a||!d[a])){o=o.substr(2);this.slashes=!0}}if(!d[a]&&(v||a&&!y[a])){for(var g,E,_=-1,b=0;b<l.length;b++){-1!==(A=o.indexOf(l[b]))&&(-1===_||A<_)&&(_=A)}if(-1!==(E=-1===_?o.lastIndexOf("@"):o.lastIndexOf("@",_))){g=o.slice(0,E);o=o.slice(E+1);this.auth=decodeURIComponent(g)}_=-1;for(b=0;b<u.length;b++){var A;-1!==(A=o.indexOf(u[b]))&&(-1===_||A<_)&&(_=A)}-1===_&&(_=o.length);this.host=o.slice(0,_);o=o.slice(_);this.parseHost();this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var R=this.hostname.split(/\./),O=(b=0,R.length);b<O;b++){var j=R[b];if(j&&!j.match(f)){for(var q="",S=0,C=j.length;S<C;S++)j.charCodeAt(S)>127?q+="x":q+=j[S];if(!q.match(f)){var P=R.slice(0,b),I=R.slice(b+1),T=j.match(c);if(T){P.push(T[1]);I.unshift(T[2])}I.length&&(o="/"+I.join(".")+o);this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase();if(!x){var k=this.hostname.split("."),H=[];for(b=0;b<k.length;++b){var U=k[b];H.push(U.match(/[^A-Za-z0-9_-]/)?"xn--"+r.encode(U):U)}this.hostname=H.join(".")}var Y=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+Y;this.href+=this.host;if(x){this.hostname=this.hostname.substr(1,this.hostname.length-2);"/"!==o[0]&&(o="/"+o)}}if(!p[i])for(b=0,O=h.length;b<O;b++){var L=h[b],K=encodeURIComponent(L);K===L&&(K=escape(L));o=o.split(L).join(K)}var F=o.indexOf("#");if(-1!==F){this.hash=o.substr(F);o=o.slice(0,F)}var M=o.indexOf("?");if(-1!==M){this.search=o.substr(M);this.query=o.substr(M+1);e&&(this.query=m.parse(this.query));o=o.slice(0,M)}else if(e){this.search="";this.query={}}o&&(this.pathname=o);y[i]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search){Y=this.pathname||"",U=this.search||"";this.path=Y+U}this.href=this.format();return this};o.prototype.format=function(){var t=this.auth||"";if(t){t=(t=encodeURIComponent(t)).replace(/%3A/i,":");t+="@"}var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";if(this.host)o=t+this.host;else if(this.hostname){o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]");this.port&&(o+=":"+this.port)}this.query&&g(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";e&&":"!==e.substr(-1)&&(e+=":");if(this.slashes||(!e||y[e])&&!1!==o){o="//"+(o||"");n&&"/"!==n.charAt(0)&&(n="/"+n)}else o||(o="");r&&"#"!==r.charAt(0)&&(r="#"+r);a&&"?"!==a.charAt(0)&&(a="?"+a);return e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r};o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()};o.prototype.resolveObject=function(t){if(w(t)){var e=new o;e.parse(t,!1,!0);t=e}var n=new o;Object.keys(this).forEach((function(t){n[t]=this[t]}),this);n.hash=t.hash;if(""===t.href){n.href=n.format();return n}if(t.slashes&&!t.protocol){Object.keys(t).forEach((function(e){"protocol"!==e&&(n[e]=t[e])}));y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/");n.href=n.format();return n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){Object.keys(t).forEach((function(e){n[e]=t[e]}));n.href=n.format();return n}n.protocol=t.protocol;if(t.host||d[t.protocol])n.pathname=t.pathname;else{for(var r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host="");t.hostname||(t.hostname="");""!==r[0]&&r.unshift("");r.length<2&&r.unshift("");n.pathname=r.join("/")}n.search=t.search;n.query=t.query;n.host=t.host||"";n.auth=t.auth;n.hostname=t.hostname||t.host;n.port=t.port;if(n.pathname||n.search){var s=n.pathname||"",a=n.search||"";n.path=s+a}n.slashes=n.slashes||t.slashes;n.href=n.format();return n}var i,h=n.pathname&&"/"===n.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=u||h||n.host&&t.pathname,f=l,c=n.pathname&&n.pathname.split("/")||[],p=(r=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(p){n.hostname="";n.port=null;n.host&&(""===c[0]?c[0]=n.host:c.unshift(n.host));n.host="";if(t.protocol){t.hostname=null;t.port=null;t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host));t.host=null}l=l&&(""===r[0]||""===c[0])}if(u){n.host=t.host||""===t.host?t.host:n.host;n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname;n.search=t.search;n.query=t.query;c=r}else if(r.length){c||(c=[]);c.pop();c=c.concat(r);n.search=t.search;n.query=t.query}else if(!(i=t.search,null==i)){if(p){n.hostname=n.host=c.shift();if(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@")){n.auth=A.shift();n.host=n.hostname=A.shift()}}n.search=t.search;n.query=t.query;E(n.pathname)&&E(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:""));n.href=n.format();return n}if(!c.length){n.pathname=null;n.search?n.path="/"+n.search:n.path=null;n.href=n.format();return n}for(var m=c.slice(-1)[0],v=(n.host||t.host)&&("."===m||".."===m)||""===m,g=0,_=c.length;_>=0;_--)if("."==(m=c[_]))c.splice(_,1);else if(".."===m){c.splice(_,1);g++}else if(g){c.splice(_,1);g--}if(!l&&!f)for(;g--;g)c.unshift("..");!l||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift("");v&&"/"!==c.join("/").substr(-1)&&c.push("");var b=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(p){n.hostname=n.host=b?"":c.length?c.shift():"";var A;if(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@")){n.auth=A.shift();n.host=n.hostname=A.shift()}}(l=l||n.host&&c.length)&&!b&&c.unshift("");if(c.length)n.pathname=c.join("/");else{n.pathname=null;n.path=null}E(n.pathname)&&E(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:""));n.auth=t.auth||n.auth;n.slashes=n.slashes||t.slashes;n.href=n.format();return n};o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);if(e){":"!==(e=e[0])&&(this.port=e.substr(1));t=t.substr(0,t.length-e.length)}t&&(this.hostname=t)};function w(t){return"string"==typeof t}function g(t){return"object"==typeof t&&null!==t}function E(t){return null===t}},{punycode:2,querystring:6}],4:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,s){e=e||"&";n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var i=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var f,c,p,d,y=t[l].replace(i,"%20"),m=y.indexOf(n);if(m>=0){f=y.substr(0,m);c=y.substr(m+1)}else{f=y;c=""}p=decodeURIComponent(f);d=decodeURIComponent(c);r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],5:[function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,i){e=e||"&";n=n||"=";null===t&&(t=void 0);return"object"==typeof t?s(a(t),(function(a){var i=encodeURIComponent(r(a))+n;return o(t[a])?s(t[a],(function(t){return i+encodeURIComponent(r(t))})).join(e):i+encodeURIComponent(r(t[a]))})).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],6:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode");n.encode=n.stringify=t("./encode")},{"./decode":4,"./encode":5}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.STATE_AP_KEY="_AP";n.QUERY_KEY_PREFIX="ac";n.QUERY_KEY_DELIMITER=".";n.ANCHOR_PREFIX="!";n.HISTORY_POPSTATE="history_popstate";n.HISTORY_PUSHSTATE="history_pushstate";n.HISTORY_REPLACESTATE="history_replacestate";n.HISTORY_CHANGESTATE="history_changestate"},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Addon=i;n.Addons=h;n.Current=function(t){if(!(t=t||{}).url)throw new Error("missing url");var e=s.default.parse(t.url),n=new h,r=(0,a.parseQuery)(e.query).map(a.stripAddonQueryPrefix),o=(0,a.normalizeQueryByAddons)(r),f=o.filter((function(t){return t.key})),c=o.filter((function(t){return!t.key}));f.forEach((function(t){var e=new i(t);n.add(e)}));this.url=new l({url:t.url,addons:n,global:c});this.state=new u(t.state);return this};n.Change=function(t,e){var n=typeof t,r=s.default.parse(window.location.href),o={},f={};if("string"===n){o.protocol=r.protocol;o.slashes=r.slashes;o.hostname=r.hostname;o.pathname=r.pathname;o.port=r.port;o.search=r.search;o.query=r.query;o.hash=(0,a.addHash)((0,a.addHashPrefix)(t))}else{if("object"!==n)throw new Error("invalid option type");var c=t.href?s.default.parse(t.href):r;o.protocol=r.protocol;o.slashes=r.slashes;o.hostname=r.hostname;o.port=r.port;o.pathname=c.pathname||r.pathname;o.search=null;o.query=null;o.hash=t.hash?(0,a.addHash)((0,a.addHashPrefix)(t.hash)):null;f.state=t.state;f.query=t.query}var p=new h,d=new h;if(f.state){var y=new i({key:e,state:f.state});p.add(y)}if(f.query){var m=new i({key:e,query:f.query});d.add(m)}var v=new u({addons:p}),w=new l({url:s.default.format(o),addons:d});this.state=v;this.url=w;return this};n.State=u;n.URL=l;n.Route=f;var r,o=t("url"),s=(r=o)&&r.__esModule?r:{default:r},a=t("./utils");function i(t){if(!(t=t||{}).key)throw new Error("missing key for addon");this.key=t.key;this.state=t.state;this.query=t.query||{};return this}function h(t){(t=t||{}).models=t.models||[];t.models instanceof Array||(t.models=[t.models]);t.models=t.models.map((function(t){return t instanceof i?t:new i(t)}));this.models=t.models;return this}h.prototype.add=function(t){this.models.push(t)};h.prototype.remove=function(t){this.models.splice(this.models.indexOf(t),1)};h.prototype.find=function(t){return(0,a.find)(this.models,(function(e){return e.key===t}))};h.prototype.merge=function(t){var e=this.find(t.key);e&&this.remove(e);this.add(t)};function u(t){(t=t||{}).addons=t.addons||[];t.addons instanceof h||(t.addons=new h(t.addons));this.addons=t.addons;return this}u.prototype.merge=function(t){var e=this;t.addons.models.forEach((function(t){e.addons.merge(t)}))};u.prototype.render=function(){return(0,a.deepCopy)(this)};function l(t){(t=t||{}).addons=t.addons||[];t.global=t.global||[];t.parsed instanceof s.default.Url||(t.parsed=s.default.parse(t.url));t.addons instanceof h||(t.addons=new h(t.addons));this.parsed=t.parsed;this.addons=t.addons;this.global=t.global;this.title=t.title||window.document.title}l.prototype.isURLEqual=function(t){return this.render().url===t.render().url};l.prototype.isPathnameEqual=function(t){var e=this.parsed.protocol===t.parsed.protocol,n=this.parsed.slashes===t.parsed.slashes,r=this.parsed.hostname===t.parsed.hostname,o=this.parsed.pathname===t.parsed.pathname;return e&&n&&r&&o};l.prototype.merge=function(t){var e=this;e.parsed.hash=t.parsed.hash;t.addons.models.forEach((function(t){e.addons.merge(t)}))};l.prototype.render=function(){var t=(0,a.deepCopy)(this),e=t.parsed,n=(0,a.denormalizeQueryByAddons)(this.addons.models),r=(0,a.denormalizeQueryByAddons)(this.global),o=n.concat(r).map(a.addAddonQueryPrefix),i=(0,a.formatQuery)(o);e.query=i;e.search=e.query?"?"+e.query:null;t.url=s.default.format(e);return t};function f(t){if(!(t=t||{}).url)throw new Error("missing url option");t.url instanceof l||(t.url=new l(t.url));if(!t.state)throw new Error("missing state option");t.state instanceof u||(t.state=new u(t.state));this.url=t.url;this.state=t.state}f.prototype.merge=function(t){this.url.merge(t.url);this.state.merge(t.state)};f.prototype.render=function(t){return(0,a.deepCopy)({key:t,hash:(0,a.stripHashPrefix)((0,a.stripHash)(this.url.parsed.hash)),query:this.url.addons.find(t)?this.url.addons.find(t).query:null,title:this.url.title,href:this.url.parsed.href,state:this.state.addons.find(t)?this.state.addons.find(t).state:null})}},{"./utils":9,url:3}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.find=function(t,e){for(var n=0,r=t.length;n<r;n+=1)if(e(t[n]))return t[n]};n.values=function(t){var e=[];if(!t)return e;for(var n in t)e.push(t[n]);return e};n.stripHash=function(t){return t?t.slice(t.search("#")+1):null};n.stripHashPrefix=s;n.addHash=function(t){return"#"+t};n.addHashPrefix=function(t){if(null==t)throw"You must supply text to prefix";return o.ANCHOR_PREFIX+s(t)};n.splitQueryParam=a;n.joinQueryParam=i;n.parseQuery=function(t){return(t?t.split("&"):[]).map((function(t){return a(t)})).filter((function(t){return t}))};n.formatQuery=function(t){var e=t.map((function(t){return i(t)})).filter((function(t){return t}));return e.length?e.join("&"):null};n.stripAddonQueryPrefix=function(t){var e=t.key?t.key.split(o.QUERY_KEY_DELIMITER):[],n=o.QUERY_KEY_PREFIX;if(e.length>=3){if(n===e[0]){var r=e.slice(1,e.length-1).join(o.QUERY_KEY_DELIMITER),s=e.slice(e.length-1).join(o.QUERY_KEY_DELIMITER);return{addonKey:r,key:s,value:t.value}}return t}return t};n.addAddonQueryPrefix=function(t){var e=o.QUERY_KEY_PREFIX;if("addonKey"in t&&t.addonKey){return{key:[e,t.addonKey,t.key].join(o.QUERY_KEY_DELIMITER),value:t.value}}return t};n.normalizeQueryByAddons=function(t){var e=[];t.forEach((function(t){var n=t.key,o=t.value,s=t.addonKey,a=e.filter((function(t){return t.key===s}));if(a&&a.length){a[0].query[n]=o}else e.push({key:s,query:r({},n,o)})}));return e};n.denormalizeQueryByAddons=function(t){var e=[];t.forEach((function(t){var n=t.key;Object.keys(t.query).forEach((function(r){var o=t.query[r];e.push({addonKey:n,key:r,value:o})}))}));return e};n.deepCopy=function(t){return JSON.parse(JSON.stringify(t))};n.wrapState=function(t){var e={};e[o.STATE_AP_KEY]=t;return e};n.unwrapState=function(t){return t&&t[o.STATE_AP_KEY]?t[o.STATE_AP_KEY]:null};n.createEvent=function(t){if("function"==typeof Event){return e=new Event(t)}var e;(e=document.createEvent("Event")).initEvent(t,!1,!1);return e};n.callConnectHost=function(e){t&&t.amd?t(["connect-host"],(function(t){e(t)})):e(window.connectHost)};n.log=function(t,e){e||(e="log");console[e].call(null,"Atlassian Connect JS History: ",t)};function r(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}var o=t("./constants");function s(t){return null==t||""===t?"":t.toString().replace(new RegExp("^"+o.ANCHOR_PREFIX),"")}function a(t){var e=t?t.split("="):[];e[0],e[1];if(2===e.length){return{key:e[0],value:e[1]}}return null}function i(t){return"key"in t&&"value"in t?[t.key,"=",t.value].join(""):null}},{"./constants":7}]},{},[1])(1)}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-request.js' */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).connectHostRequest=e()}}((function(){return function e(t,n,a){function o(s,c){if(!n[s]){if(!t[s]){var i="function"==typeof require&&require;if(!c&&i)return i(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};t[s][0].call(f.exports,(function(e){var n=t[s][1][e];return o(n||e)}),f,f.exports,e,t,n,a)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=["status","statusText","responseText"],r=["status","statusText","response"],s=["Content-Type","ETag","Link"];if(function(e,t){if(window.connectHost&&window.connectHost.getBooleanFeatureFlag)return window.connectHost.getBooleanFeatureFlag(e);return t}("com.atlassian.connect.acjs.hc-43-whitelist-language-headers",!1))var c=["If-Match","If-None-Match","X-Atlassian-Force-Account-ID","X-Force-Accept-Language","Accept-Language"];else c=["If-Match","If-None-Match","X-Atlassian-Force-Account-ID"];function i(){if(window.AJS&&window.AJS.contextPath)return window.AJS.contextPath();var e=document.querySelector("meta[name=ajs-context-path]");return e?e.getAttribute("content"):""}function u(e){return e.replace(/(http[s]?:\/\/[^"]*?&jwt=[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*.*?)\\"/gi,'\\"')}function f(e,t){var n={headers:{}};t?r.forEach((function(t,a){n[t]=e[t];if("response"===t)try{JSON.parse(e[t]);n[t]=u(e[t])}catch(e){}}),this):o.forEach((function(t,a){n[t]=e[t];if("responseText"===t)try{JSON.parse(e[t]);n[t]=u(e[t])}catch(e){}}),this);s.forEach((function(t,a){n.headers[t]=e.getResponseHeader(t)}),this);return n}function d(e,t,n){n._isBlob&&n.blob&&n.name?e.append(t,n.blob,n.name):e.append(t,n);return e}function p(e){e.contentType=!1;e.processData=!1;if(!e.data||"object"!=typeof e.data)throw new Error("For a Multipart request, data must to be an Object");var t=new FormData;Object.keys(e.data).forEach((function(n){var a=e.data[n];Array.isArray(a)?a.forEach((function(e,a){t=d(t,n+"["+a+"]",e)})):t=d(t,n,a)}));e.data=t;e.headers["X-Atlassian-Token"]="no-check";return e}n.stripJWTUrls=u;n.addRequestMarshal=function(e){if("function"!=typeof e)throw new Error("ACJS request marshal must be a function");a=e};n.removeRequestMarshal=function(){a=void 0};n.default={request:function(e,t){var n=i(),o={},r=(t=arguments[arguments.length-1])._context.extension,s=r.addon_key,u=r.key,d=r.options.allowPathTraversal;"string"==typeof e&&(e={url:e});var l=n+e.url;if(!d){var h=new URL(l,document.baseURI);if(!h.pathname.startsWith(n)){window.connectHost&&window.connectHost.trackAnalyticsEvent&&window.connectHost.trackAnalyticsEvent("jsapi.request.prevent-path-traversal",{addonKey:s,moduleKey:u,url:l});return t("Request url must include context path '"+n+"'",{})}}e.headers=e.headers||{};Object.getOwnPropertyNames(e.headers).forEach((function(t){o[t.toLowerCase()]=e.headers[t]}),this);function y(e,n,a){t(!1,f(a,x),e)}function w(e,n,a){t(a,f(e,x),a)}var m={url:l,type:e.type||"GET",data:e.data,dataType:"text",contentType:e.contentType,cache:void 0!==e.cache?!!e.cache:void 0,headers:{Accept:o.accept||"*/*","AP-Client-Key":s}};"multipart/form-data"===m.contentType&&(m=p(m));m.data&&"object"==typeof m.data&&"GET"===m.type.toUpperCase()&&Object.keys(m.data).forEach((function(e){m.url+=(m.url.indexOf("?")>=0?"&":"?")+encodeURIComponent(e)+"="+encodeURIComponent(m.data[e])}));!0===e.experimental&&(m.headers["X-ExperimentalApi"]="opt-in");c.forEach((function(e,t){o[e.toLowerCase()]&&(m.headers[e]=o[e.toLowerCase()])}),this);m.cache||(m.url+=(m.url.indexOf("?")>=0?"&":"?")+"_r="+(new Date).getTime());var v=new XMLHttpRequest;v.open(m.type,m.url,!0);var x=!1;if(e.binaryAttachment){x=!0;v.responseType="arraybuffer"}m.contentType&&(m.headers["Content-type"]=m.contentType);Object.getOwnPropertyNames(m.headers).forEach((function(e){v.setRequestHeader(e,m.headers[e])}));v.onload=function(){this.status>=200&&this.status<300?y(x?v.response:v.responseText,v.statusText,v):w(v,v.statusText,x?v.response:v.responseText)};v.onerror=function(){w(v,v.statusText,x?v.response:v.responseText)};try{var T=!0;a&&(T=a.call(null,m));if(!0===T)v.send(m.data||null);else{v.abort();w(v,0,T)}}catch(e){v.abort();w(v,0,e);console.error("ACJS Request: ",e.message,e)}}}},{}]},{},[1])(1)}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-user-v5', location = 'v5/js/iframe/host/user.js' */
define("ac/user",(function(){return{getUser:function(e){var t=e._context.extension.options.user;e({fullName:void 0===t.uid&&void 0===t.ukey?null:AJS.Meta.get("remote-user-fullname")||AJS.Meta.get("current-user-fullname")||null,id:t.uid,key:t.ukey})},getCurrentUser:function(e){e({atlassianAccountId:AJS.Meta.get("atlassian-account-id")||null,accountType:AJS.Meta.get("account-type")||null})},getTimeZone:function(e){e(e._context.extension.options.user.timeZone)},getLocale:function(e){e(AJS.Meta.get("user-locale"))}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:content-resolver-v5', location = 'v5/js/iframe/host/content-resolver.js' */
!function(){function e(e){var t={};_.keys(e).forEach((function(n){t["ac."+n]=e[n]}));return t}function t(e){var t,n=e.getResponseHeader("Date"),o=Math.round(Date.parse(n)/1e3),r=Math.round(Date.now()/1e3);if(!isNaN(o)){t=Math.abs(r-o);window.connectHost.setJwtClockSkew(t+60)}}function n(n,o){return AJS.$.Deferred((function(r){var i=function(e){var t=e.addon_key+"__"+e.key;if(window._AP&&window._AP.cacheableIframeUrls&&window._AP.cacheableIframeUrls[t])return window._AP.cacheableIframeUrls[t]}(n);if(!i||o){var s={"plugin-key":n.addon_key,"product-context":JSON.stringify(n.options.productContext||{}),key:n.key,width:n.width||"100%",height:n.height||"100%",classifier:n.classifier||"raw"};n.options.contentClassifier&&(s.classifier=[n.options.contentClassifier,s.classifier]);var a,c,d=function(e,t){var n={};_.keys(e).forEach((function(o){t(o,e[o])&&(n[o]=e[o])}));return n}(n.options.customData||{},(function(e,t){return!_.isObject(t)&&(!("string"==typeof t||t instanceof String)||t.length<255)})),f=window.connectHost&&window.connectHost.trackContentResolverEvent,u=(a=n.addon_key,c=n.key,AJS.contextPath()+"/plugins/servlet/ac/"+encodeURIComponent(a)+"/"+encodeURIComponent(c));AJS.$.ajax(u,{dataType:"json"===n.classifier?"json":"html",data:AJS.$.extend({},s,e(d)),type:"POST"}).then((function(e,n,i){t(i);o?r.resolve(window._AP._convertConnectOptions(e)):require(["ac/create"],(function(t){r.resolve(window._AP._convertConnectOptions(e))}))})).fail((function(e,o,i){t(e);if(f&&e.status){var s={extension:n,attrs:{contentResolverUrl:u,httpStatusCode:e.status,errorText:i||e.statusText,responseText:"string"==typeof e.responseText?e.responseText.substring(0,1e3):"",traceId:e.getResponseHeader("atl-traceid")}};window.connectHost.trackContentResolverEvent(!1,s)}r.reject({addon_key:n.addon_key,key:n.key,options:n.options},{text:"Unable to retrieve addon module URL. Please check your specified module key."})}))}else r.resolve(window._AP._convertConnectOptions({addon_key:n.addon_key,key:n.key,url:i,productCtx:JSON.stringify(n.options.productContext||{})}))})).promise()}function o(e){return function(t){if("set_inner_iframe_url"===t.data.type){t.data.iframeData.classifier="json";return n(t.data.iframeData,!0).then((function(n){n.id=t.data.extension_id;e.registerExistingExtension(n.id,{extension:n});t.source.location=n.url}))}}}define("ac/content-resolver",(function(){return{resolveByExtension:n,getIframeUrlSetter:o}}));_AP.util.awaitGlobal("connectHost",(function(e){e.registerContentResolver.resolveByExtension(n);window.addEventListener("message",o(e))}))}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-context-v5', location = 'v5/js/context/util.js' */
define("ac/context/util",(function(){return{isValidExtensionOptionsForCache:function(t){var e=(!t.contextJwt||!connectHost.isJwtExpired(t.contextJwt,!0))&&!!t.structuredContext;if(e){var n=t.productContext&&Object.getOwnPropertyNames(t.productContext).length>0,o=Object.getOwnPropertyNames(t.structuredContext).length>0;!n||o||(e=!1)}return e}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-context-v5', location = 'v5/js/context/main.js' */
define("ac/context",["ac/content-resolver","ac/context/util"],(function(t,n){var e={};function o(t){if(t.id&&t.id.length>1)return t.id;throw new Error("ACJS: cannot generate cache key for extension")}function i(t){return e[t].context.contextObj}function c(t,n){return{cachedAt:Date.now(),contextJwt:n,contextObj:t}}function r(n){var i=o(n);if(!e[i]||!e[i].promise&&e[i].context&&3e4+e[i].context.cachedAt<Date.now()){n.classifier="json";e[i]=e[i]||{};e[i].promise=t.resolveByExtension(n,!0).done((function(t){t&&(e[i].context=c(t.options.structuredContext,t.options.contextJwt))}))}}function s(t){if(!t||t.length<2)throw new Error("ACJS: Cannot get token. Add-on does not support JWT authentication")}function x(t){if(n.isValidExtensionOptionsForCache(t.extension.options)){var i=o(t.extension);e[i]={context:c(t.extension.options.structuredContext,t.extension.options.contextJwt)}}else r(t.extension)}_AP.util.awaitGlobal("connectHost",(function(t){t.onIframeEstablished(x);t.onIframeUnload((function(t){delete e[o(t.extension)]}))}));var a={getToken:function(t){return new Promise((function(n,i){var c=o(t._context.extension);r(t._context.extension);if(e[c].promise)e[c].promise.done(function(t){s(t.options.contextJwt);try{n(t.options.contextJwt)}catch(t){}}.bind(this)).fail((function(){i("ACJS: content resolver failed to get context jwt token")})).always(function(){delete e[c].promise}.bind(this));else{s(e[c].context.contextJwt);n(e[c].context.contextJwt)}}))},getContext:function(t){return new Promise((function(n,c){var s=o(t._context.extension);t._context.extension.addon_key;r(t._context.extension);e[s].promise?e[s].promise.done(function(t){try{n(i(s))}catch(t){}}.bind(this)).fail((function(){c("ACJS: content resolver failed to get context")})).always(function(){delete e[s].promise}.bind(this)):n(i(s))}))}};a.getContext.returnsPromise=!0;a.getToken.returnsPromise=!0;return a}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:module-loader-v5', location = 'v5/js/iframe/host/module-loader.js' */
_AP.util.awaitGlobal("connectHost",(function(e){e.defineModule("cookie",connectHostCookie);e.defineModule("history",connectHostHistory);e.defineModule(connectHostRequest.default);e.defineModule("navigator",require("ac/navigator/module"));e.defineModule("user",require("ac/user"));e.defineModule("context",require("ac/context"))}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-insertion-v5', location = 'v5/js/iframe/combined/iframe-insertion.js' */
!function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,50)},t=function(e,n,o){try{var i=require(e);n(i)}catch(i){if(o<=0){console.error("Unable to load module: "+e);n(null)}else setTimeout((function(){t(e,n,o-1)}),500)}},n=function(e,t,o,i,a){void 0===i&&(i=20);a=a||500;!e.isModuleDefined||i<=0?o():e.isModuleDefined(t)?o(!0):setTimeout((function(){n(e,t,o,i-1,a)}),a)};function o(e){var t;if("string"==typeof e&&e.length>1)try{t=JSON.parse(e)}catch(t){console.error("ACJS: failed to decode context",e)}"object"!=typeof t&&(t={});return t}window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(e){var t={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,moduleType:e.moduleType,moduleLocation:e.moduleLocation,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:o(e.productCtx),structuredContext:o(e.structuredContext),contextJwt:e.contextJwt,contextPath:e.cp,width:e.w||e.width,height:e.h||e.height,sandbox:e.sandbox,pearApp:e.pearApp,noSub:e.noSub,allowPathTraversal:e.allowPathTraversal,targets:{env:{resize:"both"}}}};"string"==typeof e.contentClassifier&&(t.options.contentClassifier=e.contentClassifier);"number"==typeof e.hostFrameOffset&&(t.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(t.options.history.state=window.location.hash?window.location.hash.substr(2):"");return t};window._AP._createSub=function(e){var t=document.createElement("iframe"),n=(window.connectHost||window.AP).subCreate(e);n.width=e.options.width||"";n.height=e.options.height||"";n.style="border:0;";n.class="ap-iframe";n["data-addon-key"]=e.addon_key;n["data-key"]=e.key;delete n.src;Object.getOwnPropertyNames(n).forEach((function(e){t.setAttribute(e,n[e])}));return t};function i(e){return void 0!==window[e]}function a(e,t,n){n=n||100;if(i(e))t(window[e]);else var o=setInterval((function(){if(i(e)){clearInterval(o);t(window[e])}}),n)}function d(e){window._AP.isSubHost=function(e,t){if("number"!=typeof e)return window.top;for(var n=t||window,o=0;o<e;o++)n=n.parent;return n}(e.hostFrameOffset)!==window;var t=window._AP._convertConnectOptions(e);window._AP.addonAttemptCounter[t.containerId]=0;if(window._AP.isSubHost){window.AP&&window.AP._data&&window.AP._data.options&&window.AP._data.options.globalOptions&&(t.options.globalOptions=window.AP._data.options.globalOptions);r(window._AP._createSub(t),t)}else a("connectHost",(function(e){var n,o;(n=e,o={addon_key:t.addon_key,key:t.key},n.getExtensions(o).filter((function(e){return Boolean(document.getElementById(e.extension_id))}))).forEach((function(n){if(n.extension.options.uniqueKey===t.options.uniqueKey){var o=document.getElementById(n.extension_id);e.destroy(n.extension_id);o&&AJS.$(o).closest(".ap-iframe-container").remove()}}),this);r(e.create(t),t)}))}function r(t,n){var o=document.getElementById(n.containerId);window._AP.addonAttemptCounter[n.containerId]++;if(o){delete window._AP.addonAttemptCounter[n.containerId];if(window._AP.isSubHost){o.appendChild(t);!function(e,t){var n=e.contentDocument,o={type:"set_inner_iframe_url",iframeData:t,extension_id:JSON.parse(e.name).extension_id},i="(function(){ var w = window; for (var i=0; i<"+t.options.hostFrameOffset+"; i++){w = w.parent; } w.postMessage("+JSON.stringify(o)+', "*");}());';n.open();n.write("<script>"+i+"<\/script>");n.close()}(t,n)}else{var i=o.querySelector(".ap-iframe-container");if(i){i.parentNode.removeChild(i);AJS.log&&AJS.log("AJS: duplicate iframe removed",n,o)}t.appendTo(o);t.data("addon-key",n.addon_key);t.data("key",n.key)}}else window._AP.addonAttemptCounter[n.containerId]<=10&&e((function(){r(t,n)}))}window._AP.appendConnectAddon=function(e){var o=!1;try{window.top.karma&&(o=!0)}catch(e){}void 0===e.hostFrameOffset&&void 0!==window.connectHostFrameOffset&&(e.hostFrameOffset=window.connectHostFrameOffset);-1!==window.name.indexOf("embedded-confluence-iframe")&&(e.hostFrameOffset=0);if(window===window.top||o||void 0!==e.hostFrameOffset){/^com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g.test(e.addon_key)?t("ac/marketplace",(function(t){t&&a("connectHost",(function(e){e.defineModule("marketplace",t)}));d(e)}),20):"com.addonengine.analytics"===e.addon_key?a("connectHost",(function(t){n(t,"analytics",(function(){d(e)}))})):d(e)}else{var i=function(t){if(t.source===window.top&&t.data&&void 0!==t.data.hostFrameOffset){window.removeEventListener("message",i);e.hostFrameOffset=t.data.hostFrameOffset;d(e)}};window.addEventListener("message",i);window.top.postMessage({type:"get_host_offset"},"*")}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js-v5', location = 'v5/js/iframe/host/main.js' */
_AP.addonAttemptCounter={};_AP.util.awaitGlobal("connectHost",(function(n){n.setExtensionConfigurationOptions("crev",window._AP.allJsVersion);n.setExtensionConfigurationOptions("resolve_inner_iframe_url",!0);n.onIframeEstablished((function(n){n.$el.closest(".ap-iframe-container").addClass("iframe-init")}));n.onFrameClick((function(n){n.click()}))}));define("ac/create",(function(){return{appendConnectAddon:function(n){return window._AP.appendConnectAddon(n)}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-content-property-api-v5', location = 'v5/js/confluence/contentproperty/content-property.js' */
!function(t,e){"use strict";e("ac/confluence/content-property",["confluence/root","ajs"],(function(e,n){function o(t,o){var c=e.getContentId();return(o?"":n.contextPath())+"/rest/api/content/"+c+"/property/"+t}function c(t){n.log(t);n.flag({type:"error",title:t,body:"<p>There was a problem communicating with the server. Please refresh the page and try again</p>"})}function r(e,n){const r=window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request"),s=o(e,r);if(r){const t=function(t,o){let r;try{r=JSON.parse(o.responseText)}catch(e){t=e}t?404===o.status?n(null):c("Unable to check item state: "+e):n(r)};t._context=n._context;window.connectHostRequest.default.request({url:s},t)}else t.getJSON(s).done(n).fail((function(t){404===t.status?n(null):c("Unable to check item state: "+e)}))}function s(t,e){n.trigger("contentProperty.update",{contentProperty:t,extension:e})}return{getContentProperty:function(t,e){r(t,e)},syncPropertyFromServer:function(t,e){const n=function(t){s(t,e._context.extension);e(t)};window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request")&&(n._context=e._context);r(t,n)},setContentProperty:function(e,r){s(e,r._context.extension);!function(e,r){const s=window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request");var a=e.key,i={url:o(a,s),contentType:"application/json",data:JSON.stringify(e)};e.version&&e.version.number&&e.version.number>1?i.type="PUT":i.type="POST";if(s){const t=function(t,e){let o;try{o=JSON.parse(e.responseText)}catch(e){t=e}if(t){r({error:e.statusText});c("Unable to "+i.type+" item: "+a)}else{n.log("contentProperty "+a+" "+i.type+" successful");r(o)}};t._context=r._context;window.connectHostRequest.default.request(i,t)}else t.ajax(i).done((function(t){n.log("contentProperty "+a+" "+i.type+" successful");"function"==typeof r&&r(t)})).fail((function(t,e,n){c("Unable to "+i.type+" item: "+a);"function"==typeof r&&r({error:n})}))}(e,r)}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-api-v5', location = 'v5/js/confluence/utils.js' */
define("ac/confluence/utils",["document"],(function(e){return{isFabricEditor:function(){return e.querySelectorAll("[data-fabric-mode]").length>0}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-api-v5', location = 'v5/js/confluence/macro/macro.js' */
define("ac/confluence/macro",["confluence/root","ajs","ac/confluence/utils"],(function(o,e,r){var a=void 0,t={};function n(){var o=require("confluence-macro-browser/macro-browser");void 0===o&&(o={getMacroName:function(o){},getMacroParams:function(o){},getMacroBody:function(){throw new Error("confluence-macro-browser/macro-browser is unavailable")}});return o}function c(o){const e=o.indexOf("=");if(e>0){return{key:o.slice(0,e),value:o.slice(e+1)}}return{}}function i(o){return o.split("|").reduce((function(o,e){const r=c(e);r.key&&(o[r.key]=r.value);return o}),{})}return{convertRawParamToObject:c,convertRawParamSeriesToObject:i,getMacroBody:function(o){var r=o._context.extension.options.productContext["macro.id"],a=$('[data-macro-body][data-fabric-macro="'+r+'"]');if(a.length)o(a.attr("data-macro-body")||"");else if(t&&"string"==typeof t.body)o(t.body);else try{var c=n().getMacroBody(),i=$($.parseXML('<root xmlns:ac="guid">'+c+"</root>")).find("[ac\\:macro-id='"+r+"']");if(1==i.length){o(i.html().replace('xmlns:ac="guid"',""));return}o(c);return}catch(a){var s=o._context.extension.options.productContext;if("false"===s["macro.truncated"]){o(s["macro.body"]);return}var u=s["page.id"],d=s["page.version"];e.$.ajax({url:e.contextPath()+"/rest/api/content/"+u+"/history/"+d+"/macro/id/"+r,dataType:"json",success:function(e){o(e.body)}})}},closeCurrentMacroPropertyPanel:function(){e.Confluence.PropertyPanel.destroy()},setLastSelectedConnectMacroNode:function(o){t.locationToInsert=void 0;t.params=void 0;t.body=void 0;t.name=void 0;var e=n().getMacroName(o);a=void 0!==e?o:void 0},setUnsavedMacroData:function(o,e,r,a){t.body=e;t.params=r;t.locationToInsert=a;t.name=o},clearMacroDataParams:function(){t.params=null},getMacroData:function(o){var e=o._context.extension.options.productContext["macro.id"],r=$('[data-fabric-macro="'+e+'"]');if(r.length)o(JSON.parse(r.attr("data-macro-parameters")||"{}"));else if(void 0===a&&t.params)o(t.params);else if(a)o(n().getMacroParams(a));else{o(i(o._context.extension.options.productContext[": = | RAW | = :"]||""))}},getCurrentMacroParameters:function(){return void 0===a?t.params:n().getMacroParams(a)},saveMacro:function(){return tinymce.confluence.MacroUtils.updateMacro.apply(this,arguments)},saveCurrentMacro:function(c,i){if(r.isFabricEditor()){return require("confluence-macro-browser/macro-browser-facade").insert({name:t.name,params:c,body:i})}if(void 0===a){t.params=c;t.body=i;var s={contentId:o.getContentId(),macro:{name:t.name,params:t.params,body:null===t.body?"":t.body}};e.Rte.getEditor().selection.moveToBookmark(t.locationToInsert);return tinymce.confluence.MacroUtils.insertMacro(s).done((function(o){a=o}))}var u=n().getMacroName(a);if(void 0!==u)return tinymce.confluence.MacroUtils.updateMacro(c,i,u,a).done((function(o){a=o}))}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-v5', location = 'v5/js/confluence/macro/bookmark.js' */
!function(o,e){e("ac/confluence/macro/bookmark",["ajs"],(function(o){var e;return{createBookmark:function(){return e=o.Rte.getEditor().selection.getBookmark()},destroyBookmark:function(){if(e){e.keep=!1;o.Rte.getEditor().selection.moveToBookmark(e);e=null}}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-v5', location = 'v5/js/confluence/macro/editor.js' */
!function(e,o){o("ac/confluence/macro/editor",["ac/confluence/macro","ac/confluence/macro/bookmark","ajs","ac/confluence/utils"],(function(o,t,a,n){var r;return{close:function(){connectHost.dialog.close()},getMacroData:function(e){const t=o.getCurrentMacroParameters();if(t)return e(t);var a=e._context.extension.options.productContext["macro.id"];return e(o.getMacroData(a))},getMacroBody:function(e){return e(r)},openCustomEditor:function(c,i){var d;if(!n.isFabricEditor()){a.Rte.getEditor().focus();var s=a.Rte.getEditor().selection.getNode();d=t.createBookmark();o.setLastSelectedConnectMacroNode(s)}o.setUnsavedMacroData(c.name,c.body?c.body:"",c.params,d);r=c.body;var u=e.extend(c.productContext||{},{"page.id":a.Meta.get("page-id")}),l={addon_key:i.addonKey,key:c.name,options:{productContext:u}},m=i.width||null,f=i.height||null,g={header:c.params?i.editTitle:i.insertTitle,submitText:c.params?"Save":"Insert",width:m,height:f,onHide:a.DarkFeatures.isEnabled("com.atlassian.connect.acjs.onecloud-1272-clear-macro-parameters-on-custom-editor-close")?function(){t.destroyBookmark();o.clearMacroDataParams()}:t.destroyBookmark};"100%"!==m&&"100%"!==f&&(g.chrome=!0);connectHost.dialog.create(l,g)}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-v5', location = 'v5/js/confluence/macro/property-panel-iframe.js' */
!function(e,n){n("ac/confluence/macro/property-panel-iframe",["ac/confluence/macro","ajs"],(function(n,a){return function(t){return{propertyPanelIFrameInjector:function(o){var c={classifier:"property-panel","page.id":a.Meta.get("page-id")},r=a.Rte.getEditor().selection;n.setLastSelectedConnectMacroNode(r.getNode());e.ajax(t,{data:c}).done((function(n){var a=e(n);a.css("display","none");o.panel.append(a)}))}}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-v5', location = 'v5/js/confluence/macro/property-panel-controls.js' */
!function(n,t){t("ac/confluence/macro/property-panel-controls",["underscore"],(function(n){return function(t){var c;return{getControls:function(r){r(c=c||function(c){try{return n.first(n.filter(n.pluck(c,t),n.isObject))}catch(n){return null}}(WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:confluence-macro.property-panel-controls")))}}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-v5', location = 'v5/js/confluence/macro/property-panel-event.js' */
!function(n,e){e("ac/confluence/macro/property-panel-event",[],(function(){var e,t=[],r=function(n,e,t){connectHost.broadcastEvent(n,(function(n){return-1!==n.extension_id.indexOf(e)}));t()};return{waitForPropertyPanelEventBindings:function(){e=!1;t=[]},propertyPanelEventsBound:function(){e=!0;for(;t.length>0;){var n=t.shift();r(n.eventKey,n.macroName,n.doneCallback)}},handlePropertyPanelEvent:function(o,c,a){var i=n.Deferred();if("click"===o){var u=function(n,e){return"click."+n+"."+e+".macro.property-panel"}(c,a);e?r(u,a,i.resolve):function(n,e,r){t.length<10&&t.push({eventKey:n,macroName:e,doneCallback:r})}(u,a,i.resolve)}return i},_getQueueLength:function(){return t.length}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-navigator-routes-v5', location = 'v5/js/confluence/navigator/routes.js' */
!function(e,t){"use strict";t(["ac/navigator/routes","ac/navigator/utils"],(function(t,n){var o=["page","blogpost","attachment","comment"],a=AJS.contextPath(),c=(AJS.Meta.get("enabled-dark-features"),n.hasContext),r=n.appendQueryParam,i={dashboard:"",contentedit:function(e,t){if(c(e,"contentId")){e.contentId;s(e.contentId,(function(e){var n=e.type;d(n)?t(a+"/display/"+e.space.key+"/customcontent/edit/"+e.id):!function(e){return-1!==o.indexOf(e)}(n)?AJS.error('Cannot navigate to "contentedit" target for content (ID='+e.id+"). Content type <"+n+"> is not supported."):t(a+"/pages/edit"+n+".action?pageId="+e.id)}))}},spacetools:"/spaces/viewspacesummary.action?key={spaceKey}",spaceview:"/spaces/{spaceKey}",userprofile:function(e,t){var n;c(e,"userAccountId")?n="/people/"+e.userAccountId:c(e,"username")&&(n=a+"/display/~"+e.username);n&&t(n)},contentview:function(e,t){c(e,"contentId")&&s(e.contentId,(function(n){var o=a+n._links.webui;c(e,"versionOverride")&&(o=r(o,"versionOverride",e.versionOverride));c(e,"embeddedContentRender")&&(o=r(o,"embeddedContentRender",e.embeddedContentRender));o&&t(o)}))},contentlist:function(e,t){var n=encodeURIComponent(e.spaceKey),o=e.contentType;"page"===o?t(a+"/spaces/"+n+"/pages"):"blogpost"===o?t(a+"/spaces/"+n+"/blog"):d(o)?t(a+"/display/"+n+"/customcontent/list/"+encodeURIComponent(o)):AJS.error('Cannot navigate to "contentlist" target for content type <'+o+">")}};t.addRoutes(i);n.enableApi();function s(t,n){e.ajax({url:a+"/rest/api/content/"+t,dataType:"json"}).done(n).fail((function(){AJS.error("Content not found (ID="+t+")")}))}function d(e){return/^ac:/.test(e)}}))}(AJS.$,require);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-navigator-routes-v5', location = 'v5/js/confluence/navigator/context.js' */
!function(t,n){"use strict";n(["ac/navigator/context","confluence/api/navigator-context"],(function(t,n){t.setContextFunction(n.getCurrent)}))}(AJS.$,require);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-customcontent-v5', location = 'v5/js/confluence/customcontent/custom-content-api.js' */
define("ac/confluence/custom-content-api",[],(function(){var e="confluence.customcontent.submit",t={},n={};function o(e){return function(o,c){if(t[e]&&n[e]){var r,u=n[e];clearTimeout(u.timeout);delete n[e];try{!1===o?u.reject((r=c,"[object String]"===Object.prototype.toString.call(r)?c:"")):u.proceed(o)}finally{u.done&&u.done()}}else AJS.error("Event callback for "+e+" has been invoked before a event happens.")}}function c(){}c.prototype.intercept=function(e){t[e]=!0};c.prototype.submitCallback=o(e);c.prototype.submitErrorCallback=o("confluence.customcontent.submitError");c.prototype.submitSuccessCallback=o("confluence.customcontent.submitSuccess");c.prototype.cancelCallback=o("confluence.customcontent.cancel");return{trigger:function(o,c,r,u,i){if(!t[o]){if(o===e)throw new Error("Add-on must intercept confluence.customcontent.submit event");return r()}n[o]&&clearTimeout(n[o].timeout);n[o]={proceed:r,reject:u,done:i,timeout:setTimeout((function(){delete n[o];AJS.error("Event handler for "+o+" did not call callback function in 10000ms.");u("Timed out when waiting for callback of "+o+" event.")}),1e4)};connectHost.broadcastEvent(o,{},c)},EditComponent:c}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-spa-inlinedialog-cleanup', location = 'v5/js/iframe/host/spa-inline-dialog-cleanup.js' */
require(["skate"],(function(e){e("ap-inline-dialog",{type:function(){var i;(i=e&&e.types&&e.types.CLASS)||(i=e&&e.type&&e.type.CLASSNAME);return i}(),detached:function(e){var i=document.querySelectorAll('iframe[id^="'+window._AP.util.escapeSelector(e.id)+'"]');[].forEach.call(i,(function(e){AJS.$(e).parents(".aui-inline-dialog").remove()}))}})}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-request-marshal-v5', location = 'v5/js/confluence/request-marshal/request-marshal.js' */
define("ac/confluence/request-marshal",(function(){var n=["/rest/","/rpc/","/download/","/images/","/plugins/"];return{getWhitelist:function(){return n},marshal:function(t){var e=!1;n.forEach((function(n){0===t.url.indexOf(AJS.contextPath()+n)&&(e=!0)}),this);window.connectHost.trackAnalyticsEvent("jsapi.request.filter",{value:e,url:t.url});return!0}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-request-marshal-v5', location = 'v5/js/confluence/request-marshal/request-marshal-loader.js' */
require(["ac/confluence/request-marshal"],(function(e){connectHostRequest.addRequestMarshal(e.marshal)}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-product-extensions-v5', location = 'v5/js/confluence/main.js' */
define("ac/confluence",["ac/confluence/macro/editor","ac/confluence/macro","ac/confluence/macro/property-panel-event","ac/confluence/content-property"],(function(e,r,o,t){return{saveMacro:r.saveCurrentMacro,closeMacroEditor:e.close,getMacroData:r.getMacroData,getMacroBody:r.getMacroBody,onMacroPropertyPanelEvent:o.propertyPanelEventsBound,closeMacroPropertyPanel:r.closeCurrentMacroPropertyPanel,getContentProperty:t.getContentProperty,setContentProperty:t.setContentProperty,syncPropertyFromServer:t.syncPropertyFromServer}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-product-extensions-v5', location = 'v5/js/confluence/custom-content.js' */
define("ac/customContent",["ac/confluence/custom-content-api"],(function(t){return{getEditComponent:{constructor:t.EditComponent,intercept:t.EditComponent.prototype.intercept,submitCallback:t.EditComponent.prototype.submitCallback,submitErrorCallback:t.EditComponent.prototype.submitErrorCallback,submitSuccessCallback:t.EditComponent.prototype.submitSuccessCallback,cancelCallback:t.EditComponent.prototype.cancelCallback}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-module-loader-v5', location = 'v5/js/confluence/module-loader.js' */
_AP.util.awaitGlobal("connectHost",(function(e){e.defineModule("confluence",require("ac/confluence"));e.defineModule("custom-content",require("ac/customContent"));e.defineModule("customContent",require("ac/customContent"))}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5', location = 'v5/js/confluence/macro/metadata-cache.js' */
define("ac/confluence/macro/metadata-cache",[],(function(){var a={};return{getMetaData:function(t){if(a.hasOwnProperty(t))return a[t];var e=WRM.data.claim(t);a[t]=e;return e},setMetaData:function(t,e){a[t]=e}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5', location = 'v5/js/confluence/macro/macro-preview-override-no-transformer.js' */
AJS.bind("init.rte",(function(){require(["ac/confluence/macro/editor","confluence/macro-js-overrides","ac/confluence/macro/metadata-cache"],(function(e,a,r){function n(e){var a=document.createElement("div");a.innerHTML=e;var r=a.getElementsByClassName("ap-container");if(r.length)return r[0].outerHTML}var t=r.getMetaData("com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5.macroPreviewData"),c=r.getMetaData("com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5.editorData");for(var i in t)t.hasOwnProperty(i)&&a.assignFunction(i,{updateMacroPreviewIframe:function(e){return function(a,r,t){var i=$(r).parent(),o=n(t);if(o){i.empty();i.html(c.hasOwnProperty(e)?"":o);i.find(".ap-container").addClass("ac-macro-preview-override");AJS.trigger("macro-browser.preview-ready");return!0}return!1}}(i)})}))}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5', location = 'v5/js/confluence/macro/property-panel-override-no-transformer.js' */
require(["ac/confluence/macro/property-panel-controls","ac/confluence/macro/property-panel-iframe","ac/confluence/macro/property-panel-event","confluence/macro-js-overrides","ac/confluence/macro/metadata-cache"],(function(n,a,e,c,o){AJS.bind("init.rte",(function(){var r=o.getMetaData("com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5.propertyPanelData");for(var t in r)if(r.hasOwnProperty(t)){!function(o,r){c.assignFunction(o,a(r));c.assignFunction(o,n(o));c.assignFunction(o,e)}(t,AJS.params.contextPath+r[t].URL)}}))}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5', location = 'v5/js/confluence/macro/editor-override-no-transformer.js' */
!function(){function e(e){e=e||{};require(["wrm","ac/confluence/macro/editor","confluence/macro-js-overrides","ac/confluence/macro/metadata-cache"],(function(t,n,r,i){var a="com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5.editorData";function o(){var t=i.getMetaData(a);for(var o in t)if(t.hasOwnProperty(o)){var c=t[o];!function(e,t){r.assignFunction(e,{opener:function(r){r=$.extend({name:e},r);n.openCustomEditor(r,t)}})}(o,{width:c.WIDTH,height:c.HEIGHT,addonKey:c.ADDON_KEY,editTitle:c.EDIT_TITLE,insertTitle:c.INSERT_TITLE,url:AJS.params.contextPath+c.URL})}e.trigger&&"function"==typeof e.trigger&&e.trigger()}if(e.forceRequire){t.forceRequire("wr!com.atlassian.plugins.atlassian-connect-plugin:macro-editor-resources-v5",{contexts:["editor"]},(function(e){try{var n=JSON.parse(t._unparsedData[a]);i.setMetaData(a,n)}catch(e){console.warn(e)}o()}))}else o()}))}AJS.bind("init.rte",(function(){e()}));AJS.bind("reset.rte",(function(t){e({forceRequire:!0,trigger:function(){AJS.trigger("reset.complete")}})}))}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:moment', location = 'includes/js/dist/moment.js' */
(function(h,C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define(C):h.moment=C()})(this,function(){function h(){return tb.apply(null,arguments)}function C(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function da(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function q(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function Sa(a){if(Object.getOwnPropertyNames)return 0===
Object.getOwnPropertyNames(a).length;for(var b in a)if(q(a,b))return!1;return!0}function E(a){return void 0===a}function Y(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function oa(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function ub(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function Z(a,b){for(var c in b)q(b,c)&&(a[c]=b[c]);q(b,"toString")&&(a.toString=b.toString);q(b,"valueOf")&&(a.valueOf=b.valueOf);
return a}function N(a,b,c,d){return vb(a,b,c,d,!0).utc()}function m(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function Ta(a){if(null==a._isValid){var b=m(a),c=wb.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidEra&&
!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function ya(a){var b=N(NaN);null!=a?Z(m(b),a):m(b).userInvalidated=!0;return b}function Ua(a,b){var c,d,e;E(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);E(b._i)||(a._i=b._i);E(b._f)||
(a._f=b._f);E(b._l)||(a._l=b._l);E(b._strict)||(a._strict=b._strict);E(b._tzm)||(a._tzm=b._tzm);E(b._isUTC)||(a._isUTC=b._isUTC);E(b._offset)||(a._offset=b._offset);E(b._pf)||(a._pf=m(b));E(b._locale)||(a._locale=b._locale);if(0<Va.length)for(c=0;c<Va.length;c++)d=Va[c],e=b[d],E(e)||(a[d]=e);return a}function pa(a){Ua(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Wa&&(Wa=!0,h.updateOffset(this),Wa=!1)}function K(a){return a instanceof pa||null!=
a&&null!=a._isAMomentObject}function xb(a){!1===h.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function H(a,b){var c=!0;return Z(function(){null!=h.deprecationHandler&&h.deprecationHandler(null,a);if(c){var d=[],e,n,t;for(n=0;n<arguments.length;n++){e="";if("object"===typeof arguments[n]){e+="\n["+n+"] ";for(t in arguments[0])q(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[n];d.push(e)}xb(a+"\nArguments: "+
Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function yb(a,b){null!=h.deprecationHandler&&h.deprecationHandler(a,b);zb[a]||(xb(b),zb[a]=!0)}function O(a){return"undefined"!==typeof Function&&a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function Xa(a,b){var c=Z({},a),d;for(d in b)q(b,d)&&(da(a[d])&&da(b[d])?(c[d]={},Z(c[d],a[d]),Z(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);for(d in a)q(a,d)&&!q(b,d)&&da(a[d])&&
(c[d]=Z({},c[d]));return c}function Ya(a){null!=a&&this.set(a)}function P(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function k(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(ha[a]=e);b&&(ha[b[0]]=function(){return P(e.apply(this,arguments),b[1],b[2])});c&&(ha[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function oc(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):
a.replace(/\\/g,"")}function pc(a){var b=a.match(Za),c,d;c=0;for(d=b.length;c<d;c++)b[c]=ha[b[c]]?ha[b[c]]:oc(b[c]);return function(c){var e="",t;for(t=0;t<d;t++)e+=O(b[t])?b[t].call(c,a):b[t];return e}}function za(a,b){if(!a.isValid())return a.localeData().invalidDate();b=Ab(b,a.localeData());$a[b]=$a[b]||pc(b);return $a[b](a)}function Ab(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Aa.lastIndex=0;0<=d&&Aa.test(a);)a=a.replace(Aa,c),Aa.lastIndex=0,--d;return a}function B(a,b){var c=
a.toLowerCase();qa[c]=qa[c+"s"]=qa[b]=a}function I(a){return"string"===typeof a?qa[a]||qa[a.toLowerCase()]:void 0}function ab(a){var b={},c,d;for(d in a)q(a,d)&&(c=I(d))&&(b[c]=a[d]);return b}function qc(a){var b=[],c;for(c in a)q(a,c)&&b.push({unit:c,priority:A[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function aa(a){return 0===a%4&&0!==a%100||0===a%400}function J(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function l(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=J(a));return b}
function ia(a,b){return function(c){return null!=c?(Bb(this,a,c),h.updateOffset(this,b),this):Ba(this,a)}}function Ba(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Bb(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&aa(a.year())&&1===a.month()&&29===a.date())c=l(c),a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Ca(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function g(a,b,c){Da[a]=O(b)?b:function(a,e){return a&&c?c:b}}function rc(a,b){return q(Da,a)?Da[a](b._strict,
b._locale):new RegExp(sc(a))}function sc(a){return F(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,c,d,e,n){return c||d||e||n}))}function F(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function u(a,b){var c,d=b;"string"===typeof a&&(a=[a]);Y(b)&&(d=function(a,c){c[b]=l(a)});for(c=0;c<a.length;c++)bb[a[c]]=d}function ra(a,b){u(a,function(a,d,e,n){e._w=e._w||{};b(a,e._w,e,n)})}function Ca(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?
aa(a+(b-c)/12)?29:28:31-c%7%2}function Cb(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=l(b);else if(b=a.localeData().monthsParse(b),!Y(b))return a;c=Math.min(a.date(),Ca(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function Db(a){return null!=a?(Cb(this,a),h.updateOffset(this,!0),this):Ba(this,"Month")}function Eb(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e,n;for(e=0;12>e;e++)n=N([2E3,e]),b.push(this.monthsShort(n,"")),c.push(this.months(n,
"")),d.push(this.months(n,"")),d.push(this.monthsShort(n,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=F(b[e]),c[e]=F(c[e]);for(e=0;24>e;e++)d[e]=F(d[e]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function tc(a,b,c,d,e,n,t){100>a&&0<=a?(b=new Date(a+400,b,c,d,e,n,t),isFinite(b.getFullYear())&&b.setFullYear(a)):b=new Date(a,b,c,
d,e,n,t);return b}function sa(a){var b;100>a&&0<=a?(b=Array.prototype.slice.call(arguments),b[0]=a+400,b=new Date(Date.UTC.apply(null,b)),isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a)):b=new Date(Date.UTC.apply(null,arguments));return b}function Ea(a,b,c){c=7+b-c;return-((7+sa(a,0,c).getUTCDay()-b)%7)+c-1}function Fb(a,b,c,d,e){c=(7+c-d)%7;d=Ea(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(aa(b)?366:365)+d):d>(aa(a)?366:365)?(b=a+1,a=d-(aa(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function ta(a,
b,c){var d=Ea(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+R(a,b,c)):d>R(a.year(),b,c)?(b=d-R(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function R(a,b,c){var d=Ea(a,b,c);b=Ea(a+1,b,c);return((aa(a)?366:365)-d+b)/7}function cb(a,b){return a.slice(b,7).concat(a.slice(0,b))}function uc(a,b,c){var d,e;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)e=N([2E3,
1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(e,"").toLocaleLowerCase();if(c)b="dddd"===b?y.call(this._weekdaysParse,a):"ddd"===b?y.call(this._shortWeekdaysParse,a):y.call(this._minWeekdaysParse,a);else if("dddd"===b){b=y.call(this._weekdaysParse,a);if(-1!==b)return b;b=y.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=y.call(this._minWeekdaysParse,
a)}else if("ddd"===b){b=y.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=y.call(this._weekdaysParse,a);if(-1!==b)return b;b=y.call(this._minWeekdaysParse,a)}else{b=y.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=y.call(this._weekdaysParse,a);if(-1!==b)return b;b=y.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function db(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e=[],n,t,f,h;for(n=0;7>n;n++)t=N([2E3,1]).day(n),f=F(this.weekdaysMin(t,"")),h=F(this.weekdaysShort(t,
"")),t=F(this.weekdays(t,"")),b.push(f),c.push(h),d.push(t),e.push(f),e.push(h),e.push(t);b.sort(a);c.sort(a);d.sort(a);e.sort(a);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function eb(){return this.hours()%12||12}function Gb(a,b){k(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function Hb(a,b){return b._meridiemParse}function Ib(a){return a?a.toLowerCase().replace("_","-"):a}function Fa(a){var b=null,c;if(void 0===x[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=ua._abbr,c=require,c("./locale/"+a),ba(b)}catch(d){x[a]=null}return x[a]}function ba(a,b){a&&((b=E(b)?S(a):fb(a,b))?ua=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return ua._abbr}function fb(a,b){if(null!==b){var c;
c=Jb;b.abbr=a;if(null!=x[a])yb("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=x[a]._config;else if(null!=b.parentLocale)if(null!=x[b.parentLocale])c=x[b.parentLocale]._config;else if(c=Fa(b.parentLocale),null!=c)c=c._config;else return va[b.parentLocale]||(va[b.parentLocale]=[]),va[b.parentLocale].push({name:a,
config:b}),null;x[a]=new Ya(Xa(c,b));va[a]&&va[a].forEach(function(a){fb(a.name,a.config)});ba(a);return x[a]}delete x[a];return null}function S(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return ua;if(!C(a)){if(b=Fa(a))return b;a=[a]}a:{b=0;for(var c,d,e,n;b<a.length;){n=Ib(a[b]).split("-");c=n.length;for(d=(d=Ib(a[b+1]))?d.split("-"):null;0<c;){if(e=Fa(n.slice(0,c).join("-"))){a=e;break a}if(e=d&&d.length>=c){b:{var f=Math.min(n.length,d.length);for(e=0;e<f;e+=1)if(n[e]!==
d[e])break b;e=f}e=e>=c-1}if(e)break;c--}b++}a=ua}return a}function gb(a){var b;(b=a._a)&&-2===m(a).overflow&&(b=0>b[T]||11<b[T]?T:1>b[Q]||b[Q]>Ca(b[D],b[T])?Q:0>b[z]||24<b[z]||24===b[z]&&(0!==b[L]||0!==b[U]||0!==b[ea])?z:0>b[L]||59<b[L]?L:0>b[U]||59<b[U]?U:0>b[ea]||999<b[ea]?ea:-1,m(a)._overflowDayOfYear&&(b<D||b>Q)&&(b=Q),m(a)._overflowWeeks&&-1===b&&(b=vc),m(a)._overflowWeekday&&-1===b&&(b=wc),m(a).overflow=b);return a}function Kb(a){var b,c;b=a._i;var d=xc.exec(b)||yc.exec(b),e,n,f,h;if(d){m(a).iso=
!0;b=0;for(c=Ga.length;b<c;b++)if(Ga[b][1].exec(d[1])){n=Ga[b][0];e=!1!==Ga[b][2];break}if(null==n)a._isValid=!1;else{if(d[3]){b=0;for(c=hb.length;b<c;b++)if(hb[b][1].exec(d[3])){f=(d[2]||" ")+hb[b][0];break}if(null==f){a._isValid=!1;return}}if(e||null==f){if(d[4])if(zc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=n+(f||"")+(h||"");ib(a)}else a._isValid=!1}}else a._isValid=!1}function Lb(a){var b=Ac.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,
""));if(b){var c=b[3],d=b[2],e=b[5],n=b[6],f=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,Mb.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(n,10)];f&&c.push(parseInt(f,10));a:{if(f=b[1])if(f=Nb.indexOf(f),d=(new Date(c[0],c[1],c[2])).getDay(),f!==d){m(a).weekdayMismatch=!0;f=a._isValid=!1;break a}f=!0}f&&(a._a=c,(f=b[8])?b=Bc[f]:b[9]?b=0:(b=parseInt(b[10],10),f=b%100,b=(b-f)/100*60+f),a._tzm=b,a._d=sa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),m(a).rfc2822=!0)}else a._isValid=
!1}function Cc(a){var b=Dc.exec(a._i);null!==b?a._d=new Date(+b[1]):(Kb(a),!1===a._isValid&&(delete a._isValid,Lb(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:h.createFromInputFallback(a))))}function ja(a,b,c){return null!=a?a:null!=b?b:c}function jb(a){var b,c=[],d;if(!a._d){d=new Date(h.now());d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];if(a._w&&null==a._a[Q]&&null==a._a[T]){var e,f,t,g,k,l;e=a._w;if(null!=e.GG||null!=
e.W||null!=e.E){if(k=1,l=4,f=ja(e.GG,a._a[D],ta(v(),1,4).year),t=ja(e.W,1),g=ja(e.E,1),1>g||7<g)b=!0}else if(k=a._locale._week.dow,l=a._locale._week.doy,t=ta(v(),k,l),f=ja(e.gg,a._a[D],t.year),t=ja(e.w,t.week),null!=e.d){if(g=e.d,0>g||6<g)b=!0}else if(null!=e.e){if(g=e.e+k,0>e.e||6<e.e)b=!0}else g=k;1>t||t>R(f,k,l)?m(a)._overflowWeeks=!0:null!=b?m(a)._overflowWeekday=!0:(b=Fb(f,t,g,k,l),a._a[D]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=ja(a._a[D],d[D]);if(a._dayOfYear>(aa(b)?366:365)||
0===a._dayOfYear)m(a)._overflowDayOfYear=!0;b=sa(b,0,a._dayOfYear);a._a[T]=b.getUTCMonth();a._a[Q]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[z]&&0===a._a[L]&&0===a._a[U]&&0===a._a[ea]&&(a._nextDay=!0,a._a[z]=0);a._d=(a._useUTC?sa:tc).apply(null,c);c=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[z]=24);a._w&&"undefined"!==typeof a._w.d&&
a._w.d!==c&&(m(a).weekdayMismatch=!0)}}function ib(a){if(a._f===h.ISO_8601)Kb(a);else if(a._f===h.RFC_2822)Lb(a);else{a._a=[];m(a).empty=!0;var b=""+a._i,c,d,e,f,g,k=b.length,l=0;e=Ab(a._f,a._locale).match(Za)||[];for(c=0;c<e.length;c++){f=e[c];if(d=(b.match(rc(f,a))||[])[0])g=b.substr(0,b.indexOf(d)),0<g.length&&m(a).unusedInput.push(g),b=b.slice(b.indexOf(d)+d.length),l+=d.length;if(ha[f]){if(d?m(a).empty=!1:m(a).unusedTokens.push(f),g=a,null!=d&&q(bb,f))bb[f](d,g._a,g,f)}else a._strict&&!d&&m(a).unusedTokens.push(f)}m(a).charsLeftOver=
k-l;0<b.length&&m(a).unusedInput.push(b);12>=a._a[z]&&!0===m(a).bigHour&&0<a._a[z]&&(m(a).bigHour=void 0);m(a).parsedDateParts=a._a.slice(0);m(a).meridiem=a._meridiem;b=a._a;c=z;k=a._locale;e=a._a[z];l=a._meridiem;null!=l&&(null!=k.meridiemHour?e=k.meridiemHour(e,l):null!=k.isPM&&((k=k.isPM(l))&&12>e&&(e+=12),k||12!==e||(e=0)));b[c]=e;b=m(a).era;null!==b&&(a._a[D]=a._locale.erasConvertYear(b,a._a[D]));jb(a);gb(a)}}function Ec(a){if(!a._d){var b=ab(a._i);a._a=ub([b.year,b.month,void 0===b.day?b.date:
b.day,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});jb(a)}}function Ob(a){var b=a._i,c=a._f;a._locale=a._locale||S(a._l);if(null===b||void 0===c&&""===b)return ya({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(K(b))return new pa(gb(b));if(oa(b))a._d=b;else if(C(c)){var d,e,f,h,g=!1;if(0===a._f.length)m(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++)if(c=0,h=!1,d=Ua({},a),null!=a._useUTC&&(d._useUTC=a._useUTC),d._f=a._f[b],
ib(d),Ta(d)&&(h=!0),c+=m(d).charsLeftOver,c+=10*m(d).unusedTokens.length,m(d).score=c,g)c<f&&(f=c,e=d);else if(null==f||c<f||h)f=c,e=d,h&&(g=!0);Z(a,e||d)}}else c?ib(a):Fc(a);Ta(a)||(a._d=null);return a}function Fc(a){var b=a._i;E(b)?a._d=new Date(h.now()):oa(b)?a._d=new Date(b.valueOf()):"string"===typeof b?Cc(a):C(b)?(a._a=ub(b.slice(0),function(a){return parseInt(a,10)}),jb(a)):da(b)?Ec(a):Y(b)?a._d=new Date(b):h.createFromInputFallback(a)}function vb(a,b,c,d,e){var f={};if(!0===b||!1===b)d=b,
b=void 0;if(!0===c||!1===c)d=c,c=void 0;if(da(a)&&Sa(a)||C(a)&&0===a.length)a=void 0;f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new pa(gb(Ob(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function v(a,b,c,d){return vb(a,b,c,d,!1)}function Pb(a,b){var c,d;1===b.length&&C(b[0])&&(b=b[0]);if(!b.length)return v();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function Gc(a){var b,c=!1;for(b in a)if(q(a,b)&&(-1===y.call(wa,b)||
null!=a[b]&&isNaN(a[b])))return!1;for(b=0;b<wa.length;++b)if(a[wa[b]]){if(c)return!1;parseFloat(a[wa[b]])!==l(a[wa[b]])&&(c=!0)}return!0}function Ha(a){a=ab(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||a.isoWeek||0,f=a.day||0,h=a.hour||0,g=a.minute||0,k=a.second||0,l=a.millisecond||0;this._isValid=Gc(a);this._milliseconds=+l+1E3*k+6E4*g+36E5*h;this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=S();this._bubble()}function Ia(a){return a instanceof Ha}function kb(a){return 0>
a?-1*Math.round(-1*a):Math.round(a)}function Qb(a,b){k(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+P(~~(a/60),2)+b+P(~~a%60,2)})}function lb(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(Hc)||["-",0,0];b=+(60*a[1])+l(a[2]);return 0===b?0:"+"===a[0]?b:-b}function mb(a,b){return b._isUTC?(b=b.clone(),a=(K(a)||oa(a)?a.valueOf():v(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),h.updateOffset(b,!1),b):v(a).local()}function Rb(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function M(a,b){var c=a;Ia(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:Y(a)||!isNaN(+a)?(c={},b?c[b]=+a:c.milliseconds=+a):(b=Ic.exec(a))?(c="-"===b[1]?-1:1,c={y:0,d:l(b[Q])*c,h:l(b[z])*c,m:l(b[L])*c,s:l(b[U])*c,ms:l(kb(1E3*b[ea]))*c}):(b=Jc.exec(a))?(c="-"===b[1]?-1:1,c={y:fa(b[2],c),M:fa(b[3],c),w:fa(b[4],c),d:fa(b[5],c),h:fa(b[6],c),m:fa(b[7],c),s:fa(b[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(b=v(c.from),c=v(c.to),b.isValid()&&c.isValid()?
(c=mb(c,b),b.isBefore(c)?c=Sb(b,c):(c=Sb(c,b),c.milliseconds=-c.milliseconds,c.months=-c.months),b=c):b={milliseconds:0,months:0},c={},c.ms=b.milliseconds,c.M=b.months);c=new Ha(c);Ia(a)&&q(a,"_locale")&&(c._locale=a._locale);Ia(a)&&q(a,"_isValid")&&(c._isValid=a._isValid);return c}function fa(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Sb(a,b){var c={};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=
+b-+a.clone().add(c.months,"M");return c}function Tb(a,b){return function(c,d){var e;null===d||isNaN(+d)||(yb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=M(c,d);Ub(this,c,a);return this}}function Ub(a,b,c,d){var e=b._milliseconds,f=kb(b._days);b=kb(b._months);a.isValid()&&(d=null==d?!0:d,b&&Cb(a,Ba(a,"Month")+b*c),f&&Bb(a,"Date",Ba(a,"Date")+f*c),e&&a._d.setTime(a._d.valueOf()+
e*c),d&&h.updateOffset(a,f||b))}function Vb(a){return"string"===typeof a||a instanceof String}function Kc(a){var b=C(a),c=!1;b&&(c=0===a.filter(function(b){return!Y(b)&&Vb(a)}).length);return b&&c}function Ja(a,b){if(a.date()<b.date())return-Ja(b,a);var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Wb(a){if(void 0===a)return this._locale._abbr;a=S(a);
null!=a&&(this._locale=a);return this}function Xb(){return this._locale}function ka(a,b){return(a%b+b)%b}function Yb(a,b,c){return 100>a&&0<=a?new Date(a+400,b,c)-126227808E5:(new Date(a,b,c)).valueOf()}function Zb(a,b,c){return 100>a&&0<=a?Date.UTC(a+400,b,c)-126227808E5:Date.UTC(a,b,c)}function nb(a,b){return b.erasAbbrRegex(a)}function ob(){var a=[],b=[],c=[],d=[],e,f,h=this.eras();e=0;for(f=h.length;e<f;++e)b.push(F(h[e].name)),a.push(F(h[e].abbr)),c.push(F(h[e].narrow)),d.push(F(h[e].name)),
d.push(F(h[e].abbr)),d.push(F(h[e].narrow));this._erasRegex=new RegExp("^("+d.join("|")+")","i");this._erasNameRegex=new RegExp("^("+b.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+c.join("|")+")","i")}function Ka(a,b){k(0,[a,a.length],0,b)}function $b(a,b,c,d,e){var f;if(null==a)return ta(this,d,e).year;f=R(a,d,e);b>f&&(b=f);a=Fb(a,b,c,d,e);a=sa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());
return this}function Lc(a,b){b[ea]=l(1E3*("0."+a))}function ac(a){return a}function La(a,b,c,d){var e=S();b=N().set(d,b);return e[c](b,a)}function bc(a,b,c){Y(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return La(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=La(a,b,c,"month");return d}function pb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);Y(b)&&(c=b,b=void 0);b=b||"";var e=S();a=a?e._week.dow:0;e=[];if(null!=c)return La(b,(c+a)%7,d,"day");for(c=0;7>c;c++)e[c]=La(b,(c+a)%7,d,"day");return e}function cc(a,
b,c,d){b=M(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function dc(a){return 0>a?Math.floor(a):Math.ceil(a)}function V(a){return function(){return this.as(a)}}function ga(a){return function(){return this.isValid()?this._data[a]:NaN}}function Mc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function la(a){return(0<a)-(0>a)||+a}function Ma(){if(!this.isValid())return this.localeData().invalidDate();var a=qb(this._milliseconds)/1E3,b=qb(this._days),
c=qb(this._months),d,e,f,h,g=this.asSeconds(),k,l,m;if(!g)return"P0D";d=J(a/60);e=J(d/60);a%=60;d%=60;f=J(c/12);c%=12;h=a?a.toFixed(3).replace(/\.?0+$/,""):"";k=0>g?"-":"";l=la(this._months)!==la(g)?"-":"";m=la(this._days)!==la(g)?"-":"";g=la(this._milliseconds)!==la(g)?"-":"";return k+"P"+(f?l+f+"Y":"")+(c?l+c+"M":"")+(b?m+b+"D":"")+(e||d||a?"T":"")+(e?g+e+"H":"")+(d?g+d+"M":"")+(a?g+h+"S":"")}var tb,wb;wb=Array.prototype.some?Array.prototype.some:function(a){var b=Object(this),c=b.length>>>0,d;
for(d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Va=h.momentProperties=[],Wa=!1,zb={};h.suppressDeprecationWarnings=!1;h.deprecationHandler=null;var ec;ec=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)q(a,b)&&c.push(b);return c};var Za=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Aa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
$a={},ha={},qa={},A={},fc=/\d/,G=/\d\d/,gc=/\d{3}/,rb=/\d{4}/,Na=/[+-]?\d{6}/,w=/\d\d?/,hc=/\d\d\d\d?/,ic=/\d\d\d\d\d\d?/,Oa=/\d{1,3}/,sb=/\d{1,4}/,Pa=/[+-]?\d{1,6}/,ma=/\d+/,Qa=/[+-]?\d+/,Nc=/Z|[+-]\d\d:?\d\d/gi,Ra=/Z|[+-]\d\d(?::?\d\d)?/gi,xa=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Da;Da={};var bb={},D=0,T=1,Q=2,z=3,L=4,U=5,ea=6,vc=7,wc=8,y;y=Array.prototype.indexOf?Array.prototype.indexOf:
function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};k("M",["MM",2],"Mo",function(){return this.month()+1});k("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});k("MMMM",0,0,function(a){return this.localeData().months(this,a)});B("month","M");A.month=8;g("M",w);g("MM",w,G);g("MMM",function(a,b){return b.monthsShortRegex(a)});g("MMMM",function(a,b){return b.monthsRegex(a)});u(["M","MM"],function(a,b){b[T]=l(a)-1});u(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,
d,c._strict);null!=d?b[T]=d:m(c).invalidMonth=a});var Mb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),jc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;k("Y",0,0,function(){var a=this.year();return 9999>=a?P(a,4):"+"+a});k(0,["YY",2],0,function(){return this.year()%100});k(0,["YYYY",4],0,"year");k(0,["YYYYY",5],0,"year");k(0,["YYYYYY",6,!0],0,"year");B("year","y");A.year=1;g("Y",Qa);g("YY",w,G);g("YYYY",sb,rb);g("YYYYY",Pa,Na);g("YYYYYY",Pa,Na);u(["YYYYY","YYYYYY"],D);u("YYYY",function(a,b){b[D]=
2===a.length?h.parseTwoDigitYear(a):l(a)});u("YY",function(a,b){b[D]=h.parseTwoDigitYear(a)});u("Y",function(a,b){b[D]=parseInt(a,10)});h.parseTwoDigitYear=function(a){return l(a)+(68<l(a)?1900:2E3)};var kc=ia("FullYear",!0);k("w",["ww",2],"wo","week");k("W",["WW",2],"Wo","isoWeek");B("week","w");B("isoWeek","W");A.week=5;A.isoWeek=5;g("w",w);g("ww",w,G);g("W",w);g("WW",w,G);ra(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=l(a)});k("d",0,"do","day");k("dd",0,0,function(a){return this.localeData().weekdaysMin(this,
a)});k("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});k("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});k("e",0,0,"weekday");k("E",0,0,"isoWeekday");B("day","d");B("weekday","e");B("isoWeekday","E");A.day=11;A.weekday=11;A.isoWeekday=11;g("d",w);g("e",w);g("E",w);g("dd",function(a,b){return b.weekdaysMinRegex(a)});g("ddd",function(a,b){return b.weekdaysShortRegex(a)});g("dddd",function(a,b){return b.weekdaysRegex(a)});ra(["dd","ddd","dddd"],function(a,b,
c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:m(c).invalidWeekday=a});ra(["d","e","E"],function(a,b,c,d){b[d]=l(a)});var Nb="Sun Mon Tue Wed Thu Fri Sat".split(" ");k("H",["HH",2],0,"hour");k("h",["hh",2],0,eb);k("k",["kk",2],0,function(){return this.hours()||24});k("hmm",0,0,function(){return""+eb.apply(this)+P(this.minutes(),2)});k("hmmss",0,0,function(){return""+eb.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)});k("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),
2)});k("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)});Gb("a",!0);Gb("A",!1);B("hour","h");A.hour=13;g("a",Hb);g("A",Hb);g("H",w);g("h",w);g("k",w);g("HH",w,G);g("hh",w,G);g("kk",w,G);g("hmm",hc);g("hmmss",ic);g("Hmm",hc);g("Hmmss",ic);u(["H","HH"],z);u(["k","kk"],function(a,b,c){a=l(a);b[z]=24===a?0:a});u(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});u(["h","hh"],function(a,b,c){b[z]=l(a);m(c).bigHour=!0});u("hmm",function(a,b,c){var d=
a.length-2;b[z]=l(a.substr(0,d));b[L]=l(a.substr(d));m(c).bigHour=!0});u("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[z]=l(a.substr(0,d));b[L]=l(a.substr(d,2));b[U]=l(a.substr(e));m(c).bigHour=!0});u("Hmm",function(a,b,c){c=a.length-2;b[z]=l(a.substr(0,c));b[L]=l(a.substr(c))});u("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[z]=l(a.substr(0,c));b[L]=l(a.substr(c,2));b[U]=l(a.substr(d))});var Oc=ia("Hours",!0),Jb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",
yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Mb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Nb,meridiemParse:/[ap]\.?m?\.?/i},x={},va={},ua,xc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
zc=/Z|[+-]\d\d(?::?\d\d)?/,Ga=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],hb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],
["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dc=/^\/?Date\((-?\d+)/i,Ac=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};h.createFromInputFallback=H("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});h.ISO_8601=function(){};h.RFC_2822=function(){};var Pc=H("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=v.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:ya()}),Qc=H("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=v.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:
a:ya()}),wa="year quarter month week day hour minute second millisecond".split(" ");Qb("Z",":");Qb("ZZ","");g("Z",Ra);g("ZZ",Ra);u(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=lb(Ra,a)});var Hc=/([\+\-]|\d\d)/gi;h.updateOffset=function(){};var Ic=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;M.fn=Ha.prototype;M.invalid=
function(){return M(NaN)};var Rc=Tb(1,"add"),Sc=Tb(-1,"subtract");h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lc=H("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});k("N",0,0,"eraAbbr");k("NN",0,0,"eraAbbr");k("NNN",0,0,"eraAbbr");k("NNNN",0,0,"eraName");k("NNNNN",0,0,"eraNarrow");k("y",["y",1],"yo",
"eraYear");k("y",["yy",2],0,"eraYear");k("y",["yyy",3],0,"eraYear");k("y",["yyyy",4],0,"eraYear");g("N",nb);g("NN",nb);g("NNN",nb);g("NNNN",function(a,b){return b.erasNameRegex(a)});g("NNNNN",function(a,b){return b.erasNarrowRegex(a)});u(["N","NN","NNN","NNNN","NNNNN"],function(a,b,c,d){(b=c._locale.erasParse(a,d,c._strict))?m(c).era=b:m(c).invalidEra=a});g("y",ma);g("yy",ma);g("yyy",ma);g("yyyy",ma);g("yo",function(a,b){return b._eraYearOrdinalRegex||ma});u(["y","yy","yyy","yyyy"],D);u(["yo"],function(a,
b,c,d){var e;c._locale._eraYearOrdinalRegex&&(e=a.match(c._locale._eraYearOrdinalRegex));b[D]=c._locale.eraYearOrdinalParse?c._locale.eraYearOrdinalParse(a,e):parseInt(a,10)});k(0,["gg",2],0,function(){return this.weekYear()%100});k(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ka("gggg","weekYear");Ka("ggggg","weekYear");Ka("GGGG","isoWeekYear");Ka("GGGGG","isoWeekYear");B("weekYear","gg");B("isoWeekYear","GG");A.weekYear=1;A.isoWeekYear=1;g("G",Qa);g("g",Qa);g("GG",w,G);g("gg",w,G);g("GGGG",
sb,rb);g("gggg",sb,rb);g("GGGGG",Pa,Na);g("ggggg",Pa,Na);ra(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=l(a)});ra(["gg","GG"],function(a,b,c,d){b[d]=h.parseTwoDigitYear(a)});k("Q",0,"Qo","quarter");B("quarter","Q");A.quarter=7;g("Q",fc);u("Q",function(a,b){b[T]=3*(l(a)-1)});k("D",["DD",2],"Do","date");B("date","D");A.date=9;g("D",w);g("DD",w,G);g("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});u(["D","DD"],Q);u("Do",
function(a,b){b[Q]=l(a.match(w)[0])});var mc=ia("Date",!0);k("DDD",["DDDD",3],"DDDo","dayOfYear");B("dayOfYear","DDD");A.dayOfYear=4;g("DDD",Oa);g("DDDD",gc);u(["DDD","DDDD"],function(a,b,c){c._dayOfYear=l(a)});k("m",["mm",2],0,"minute");B("minute","m");A.minute=14;g("m",w);g("mm",w,G);u(["m","mm"],L);var Tc=ia("Minutes",!1);k("s",["ss",2],0,"second");B("second","s");A.second=15;g("s",w);g("ss",w,G);u(["s","ss"],U);var Uc=ia("Seconds",!1);k("S",0,0,function(){return~~(this.millisecond()/100)});k(0,
["SS",2],0,function(){return~~(this.millisecond()/10)});k(0,["SSS",3],0,"millisecond");k(0,["SSSS",4],0,function(){return 10*this.millisecond()});k(0,["SSSSS",5],0,function(){return 100*this.millisecond()});k(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});k(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});k(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});k(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});B("millisecond","ms");A.millisecond=16;g("S",
Oa,fc);g("SS",Oa,G);g("SSS",Oa,gc);var ca,nc;for(ca="SSSS";9>=ca.length;ca+="S")g(ca,ma);for(ca="S";9>=ca.length;ca+="S")u(ca,Lc);nc=ia("Milliseconds",!1);k("z",0,0,"zoneAbbr");k("zz",0,0,"zoneName");var f=pa.prototype;f.add=Rc;f.calendar=function(a,b){if(1===arguments.length)if(arguments[0]){var c=arguments[0],d;if(!(d=K(c)||oa(c)||Vb(c)||Y(c)||Kc(c))){d=da(c)&&!Sa(c);var e=!1,f="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
g,k;for(g=0;g<f.length;g+=1)k=f[g],e=e||q(c,k);d=d&&e}if(d||null===c||void 0===c)a=arguments[0],b=void 0;else{c=arguments[0];d=da(c)&&!Sa(c);e=!1;f="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(g=0;g<f.length;g+=1)k=f[g],e=e||q(c,k);d&&e&&(b=arguments[0],a=void 0)}}else b=a=void 0;c=a||v();d=mb(c,this).startOf("day");d=h.calendarFormat(this,d)||"sameElse";e=b&&(O(b[d])?b[d].call(this,c):b[d]);return this.format(e||this.localeData().calendar(d,this,v(c)))};f.clone=function(){return new pa(this)};
f.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=mb(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=I(b);switch(b){case "year":b=Ja(this,a)/12;break;case "month":b=Ja(this,a);break;case "quarter":b=Ja(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-a}return c?b:J(b)};f.endOf=function(a){var b,c;a=I(a);
if(void 0===a||"millisecond"===a||!this.isValid())return this;c=this._isUTC?Zb:Yb;switch(a){case "year":b=c(this.year()+1,0,1)-1;break;case "quarter":b=c(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":b=c(this.year(),this.month()+1,1)-1;break;case "week":b=c(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":b=c(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":b=c(this.year(),this.month(),this.date()+1)-1;break;
case "hour":b=this._d.valueOf();b+=36E5-ka(b+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":b=this._d.valueOf();b+=6E4-ka(b,6E4)-1;break;case "second":b=this._d.valueOf(),b+=1E3-ka(b,1E3)-1}this._d.setTime(b);h.updateOffset(this,!0);return this};f.format=function(a){a||(a=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);a=za(this,a);return this.localeData().postformat(a)};f.from=function(a,b){return this.isValid()&&(K(a)&&a.isValid()||v(a).isValid())?M({to:this,from:a}).locale(this.locale()).humanize(!b):
this.localeData().invalidDate()};f.fromNow=function(a){return this.from(v(),a)};f.to=function(a,b){return this.isValid()&&(K(a)&&a.isValid()||v(a).isValid())?M({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};f.toNow=function(a){return this.to(v(),a)};f.get=function(a){a=I(a);return O(this[a])?this[a]():this};f.invalidAt=function(){return m(this).overflow};f.isAfter=function(a,b){a=K(a)?a:v(a);if(!this.isValid()||!a.isValid())return!1;b=I(b)||"millisecond";return"millisecond"===
b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};f.isBefore=function(a,b){a=K(a)?a:v(a);if(!this.isValid()||!a.isValid())return!1;b=I(b)||"millisecond";return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};f.isBetween=function(a,b,c,d){a=K(a)?a:v(a);b=K(b)?b:v(b);if(!(this.isValid()&&a.isValid()&&b.isValid()))return!1;d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,
c))};f.isSame=function(a,b){a=K(a)?a:v(a);if(!this.isValid()||!a.isValid())return!1;b=I(b)||"millisecond";if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};f.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};f.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};f.isValid=function(){return Ta(this)};f.lang=lc;f.locale=Wb;f.localeData=Xb;f.max=Qc;f.min=Pc;
f.parsingFlags=function(){return Z({},m(this))};f.set=function(a,b){if("object"===typeof a){a=ab(a);b=qc(a);var c;for(c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=I(a),O(this[a]))return this[a](b);return this};f.startOf=function(a){var b,c;a=I(a);if(void 0===a||"millisecond"===a||!this.isValid())return this;c=this._isUTC?Zb:Yb;switch(a){case "year":b=c(this.year(),0,1);break;case "quarter":b=c(this.year(),this.month()-this.month()%3,1);break;case "month":b=c(this.year(),this.month(),
1);break;case "week":b=c(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":b=c(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":b=c(this.year(),this.month(),this.date());break;case "hour":b=this._d.valueOf();b-=ka(b+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":b=this._d.valueOf();b-=ka(b,6E4);break;case "second":b=this._d.valueOf(),b-=ka(b,1E3)}this._d.setTime(b);h.updateOffset(this,!0);return this};f.subtract=Sc;f.toArray=
function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};f.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};f.toDate=function(){return new Date(this.valueOf())};f.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?za(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":
"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",za(b,"Z")):za(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};f.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="",c;this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");a="["+a+'("]';c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+
c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(f[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});f.toJSON=function(){return this.isValid()?this.toISOString():null};f.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};f.unix=function(){return Math.floor(this.valueOf()/1E3)};f.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};f.creationData=function(){return{input:this._i,
format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};f.eraName=function(){var a,b,c,d=this.localeData().eras();a=0;for(b=d.length;a<b;++a)if(c=this.clone().startOf("day").valueOf(),d[a].since<=c&&c<=d[a].until||d[a].until<=c&&c<=d[a].since)return d[a].name;return""};f.eraNarrow=function(){var a,b,c,d=this.localeData().eras();a=0;for(b=d.length;a<b;++a)if(c=this.clone().startOf("day").valueOf(),d[a].since<=c&&c<=d[a].until||d[a].until<=c&&c<=d[a].since)return d[a].narrow;return""};
f.eraAbbr=function(){var a,b,c,d=this.localeData().eras();a=0;for(b=d.length;a<b;++a)if(c=this.clone().startOf("day").valueOf(),d[a].since<=c&&c<=d[a].until||d[a].until<=c&&c<=d[a].since)return d[a].abbr;return""};f.eraYear=function(){var a,b,c,d,e=this.localeData().eras();a=0;for(b=e.length;a<b;++a)if(c=e[a].since<=e[a].until?1:-1,d=this.clone().startOf("day").valueOf(),e[a].since<=d&&d<=e[a].until||e[a].until<=d&&d<=e[a].since)return(this.year()-h(e[a].since).year())*c+e[a].offset;return this.year()};
f.year=kc;f.isLeapYear=function(){return aa(this.year())};f.weekYear=function(a){return $b.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};f.isoWeekYear=function(a){return $b.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};f.quarter=f.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};f.month=Db;f.daysInMonth=function(){return Ca(this.year(),this.month())};f.week=f.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};f.isoWeek=f.isoWeeks=function(a){var b=ta(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};f.weeksInYear=function(){var a=this.localeData()._week;return R(this.year(),a.dow,a.doy)};f.weeksInWeekYear=function(){var a=this.localeData()._week;return R(this.weekYear(),a.dow,a.doy)};f.isoWeeksInYear=function(){return R(this.year(),1,4)};f.isoWeeksInISOWeekYear=function(){return R(this.isoWeekYear(),1,4)};f.date=mc;f.day=f.days=function(a){if(!this.isValid())return null!=
a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};f.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};f.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===
typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};f.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};f.hour=f.hours=Oc;f.minute=f.minutes=Tc;f.second=f.seconds=Uc;f.millisecond=f.milliseconds=nc;f.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=lb(Ra,a),null===a)return this}else 16>
Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=-Math.round(this._d.getTimezoneOffset()));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Ub(this,M(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:-Math.round(this._d.getTimezoneOffset())};f.utc=function(a){return this.utcOffset(0,a)};f.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(-Math.round(this._d.getTimezoneOffset()),
"m"));return this};f.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=lb(Nc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};f.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?v(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};f.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};f.isLocal=function(){return this.isValid()?
!this._isUTC:!1};f.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};f.isUtc=Rb;f.isUTC=Rb;f.zoneAbbr=function(){return this._isUTC?"UTC":""};f.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};f.dates=H("dates accessor is deprecated. Use date instead.",mc);f.months=H("months accessor is deprecated. Use month instead",Db);f.years=H("years accessor is deprecated. Use year instead",kc);f.zone=H("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});f.isDSTShifted=H("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!E(this._isDSTShifted))return this._isDSTShifted;var a={},b;Ua(a,this);a=Ob(a);if(a._a){b=a._isUTC?N(a._a):v(a._a);var c;if(c=this.isValid()){a=a._a;b=b.toArray();c=Math.min(a.length,b.length);var d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)l(a[f])!==l(b[f])&&
e++;c=0<e+d}this._isDSTShifted=c}else this._isDSTShifted=!1;return this._isDSTShifted});var r=Ya.prototype;r.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return O(a)?a.call(b,c):a};r.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.match(Za).map(function(a){return"MMMM"===a||"MM"===a||"DD"===a||"dddd"===a?a.slice(1):a}).join("");return this._longDateFormat[a]};r.invalidDate=function(){return this._invalidDate};
r.ordinal=function(a){return this._ordinal.replace("%d",a)};r.preparse=ac;r.postformat=ac;r.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return O(e)?e(a,b,c,d):e.replace(/%d/i,a)};r.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return O(a)?a(b):a.replace(/%s/i,b)};r.set=function(a){var b,c;for(c in a)q(a,c)&&(b=a[c],O(b)?this[c]=b:this["_"+c]=b);this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+
"|"+/\d{1,2}/.source)};r.eras=function(a,b){var c,d=this._eras||S("en")._eras;a=0;for(b=d.length;a<b;++a){switch(typeof d[a].since){case "string":c=h(d[a].since).startOf("day"),d[a].since=c.valueOf()}switch(typeof d[a].until){case "undefined":d[a].until=Infinity;break;case "string":c=h(d[a].until).startOf("day").valueOf(),d[a].until=c.valueOf()}}return d};r.erasParse=function(a,b,c){var d,e,f=this.eras(),g,h,k;a=a.toUpperCase();d=0;for(e=f.length;d<e;++d)if(g=f[d].name.toUpperCase(),h=f[d].abbr.toUpperCase(),
k=f[d].narrow.toUpperCase(),c)switch(b){case "N":case "NN":case "NNN":if(h===a)return f[d];break;case "NNNN":if(g===a)return f[d];break;case "NNNNN":if(k===a)return f[d]}else if(0<=[g,h,k].indexOf(a))return f[d]};r.erasConvertYear=function(a,b){var c=a.since<=a.until?1:-1;return void 0===b?h(a.since).year():h(a.since).year()+(b-a.offset)*c};r.erasAbbrRegex=function(a){q(this,"_erasAbbrRegex")||ob.call(this);return a?this._erasAbbrRegex:this._erasRegex};r.erasNameRegex=function(a){q(this,"_erasNameRegex")||
ob.call(this);return a?this._erasNameRegex:this._erasRegex};r.erasNarrowRegex=function(a){q(this,"_erasNarrowRegex")||ob.call(this);return a?this._erasNarrowRegex:this._erasRegex};r.months=function(a,b){return a?C(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||jc).test(b)?"format":"standalone"][a.month()]:C(this._months)?this._months:this._months.standalone};r.monthsShort=function(a,b){return a?C(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[jc.test(b)?
"format":"standalone"][a.month()]:C(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};r.monthsParse=function(a,b,c){var d,e;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)e=N([2E3,d]),this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase();if(c)b="MMM"===b?y.call(this._shortMonthsParse,a):
y.call(this._longMonthsParse,a);else if("MMM"===b){b=y.call(this._shortMonthsParse,a);if(-1!==b)break a;b=y.call(this._longMonthsParse,a)}else{b=y.call(this._longMonthsParse,a);if(-1!==b)break a;b=y.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=N([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=
new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};r.monthsRegex=function(a){if(this._monthsParseExact)return q(this,"_monthsRegex")||Eb.call(this),a?this._monthsStrictRegex:this._monthsRegex;q(this,"_monthsRegex")||
(this._monthsRegex=xa);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};r.monthsShortRegex=function(a){if(this._monthsParseExact)return q(this,"_monthsRegex")||Eb.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;q(this,"_monthsShortRegex")||(this._monthsShortRegex=xa);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};r.week=function(a){return ta(a,this._week.dow,this._week.doy).week};r.firstDayOfYear=function(){return this._week.doy};
r.firstDayOfWeek=function(){return this._week.dow};r.weekdays=function(a,b){b=C(this._weekdays)?this._weekdays:this._weekdays[a&&!0!==a&&this._weekdays.isFormat.test(b)?"format":"standalone"];return!0===a?cb(b,this._week.dow):a?b[a.day()]:b};r.weekdaysMin=function(a){return!0===a?cb(this._weekdaysMin,this._week.dow):a?this._weekdaysMin[a.day()]:this._weekdaysMin};r.weekdaysShort=function(a){return!0===a?cb(this._weekdaysShort,this._week.dow):a?this._weekdaysShort[a.day()]:this._weekdaysShort};r.weekdaysParse=
function(a,b,c){var d,e;if(this._weekdaysParseExact)return uc.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=N([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+
this.weekdaysMin(e,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};r.weekdaysRegex=function(a){if(this._weekdaysParseExact)return q(this,"_weekdaysRegex")||
db.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;q(this,"_weekdaysRegex")||(this._weekdaysRegex=xa);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};r.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return q(this,"_weekdaysRegex")||db.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;q(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=xa);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};
r.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return q(this,"_weekdaysRegex")||db.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;q(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xa);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};r.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};r.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};ba("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",
narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===l(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});h.lang=H("moment.lang is deprecated. Use moment.locale instead.",ba);h.langData=H("moment.langData is deprecated. Use moment.localeData instead.",S);var W=Math.abs,Vc=V("ms"),Wc=V("s"),Xc=V("m"),Yc=V("h"),Zc=V("d"),$c=V("w"),ad=V("M"),bd=
V("Q"),cd=V("y"),dd=ga("milliseconds"),ed=ga("seconds"),fd=ga("minutes"),gd=ga("hours"),hd=ga("days"),id=ga("months"),jd=ga("years"),X=Math.round,na={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},qb=Math.abs,p=Ha.prototype;p.isValid=function(){return this._isValid};p.abs=function(){var a=this._data;this._milliseconds=W(this._milliseconds);this._days=W(this._days);this._months=W(this._months);a.milliseconds=W(a.milliseconds);a.seconds=W(a.seconds);a.minutes=W(a.minutes);a.hours=W(a.hours);a.months=W(a.months);
a.years=W(a.years);return this};p.add=function(a,b){return cc(this,a,b,1)};p.subtract=function(a,b){return cc(this,a,b,-1)};p.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=I(a);if("month"===a||"quarter"===a||"year"===a)switch(b=this._days+c/864E5,b=this._months+4800*b/146097,a){case "month":return b;case "quarter":return b/3;case "year":return b/12}else switch(b=this._days+Math.round(146097*this._months/4800),a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;
case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};p.asMilliseconds=Vc;p.asSeconds=Wc;p.asMinutes=Xc;p.asHours=Yc;p.asDays=Zc;p.asWeeks=$c;p.asMonths=ad;p.asQuarters=bd;p.asYears=cd;p.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*l(this._months/12):NaN};p._bubble=function(){var a=this._milliseconds,
b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*dc(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=J(a/1E3);d.seconds=a%60;a=J(a/60);d.minutes=a%60;a=J(a/60);d.hours=a%24;b+=J(a/24);a=J(4800*b/146097);c+=a;b-=dc(146097*a/4800);a=J(c/12);d.days=b;d.months=c%12;d.years=a;return this};p.clone=function(){return M(this)};p.get=function(a){a=I(a);return this.isValid()?this[a+"s"]():NaN};p.milliseconds=dd;p.seconds=ed;p.minutes=fd;p.hours=gd;p.days=hd;p.weeks=function(){return J(this.days()/
7)};p.months=id;p.years=jd;p.humanize=function(a,b){if(!this.isValid())return this.localeData().invalidDate();var c=!1,d=na;"object"===typeof a&&(b=a,a=!1);"boolean"===typeof a&&(c=a);"object"===typeof b&&(d=Object.assign({},na,b),null!=b.s&&null==b.ss&&(d.ss=b.s-1));a=this.localeData();b=!c;var e=M(this).abs(),f=X(e.as("s")),g=X(e.as("m")),h=X(e.as("h")),k=X(e.as("d")),l=X(e.as("M")),m=X(e.as("w")),e=X(e.as("y")),f=f<=d.ss&&["s",f]||f<d.s&&["ss",f]||1>=g&&["m"]||g<d.m&&["mm",g]||1>=h&&["h"]||h<d.h&&
["hh",h]||1>=k&&["d"]||k<d.d&&["dd",k];null!=d.w&&(f=f||1>=m&&["w"]||m<d.w&&["ww",m]);f=f||1>=l&&["M"]||l<d.M&&["MM",l]||1>=e&&["y"]||["yy",e];f[2]=b;f[3]=0<+this;f[4]=a;b=Mc.apply(null,f);c&&(b=a.pastFuture(+this,b));return a.postformat(b)};p.toISOString=Ma;p.toString=Ma;p.toJSON=Ma;p.locale=Wb;p.localeData=Xb;p.toIsoString=H("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ma);p.lang=lc;k("X",0,0,"unix");k("x",0,0,"valueOf");g("x",Qa);g("X",/[+-]?\d+(\.\d{1,3})?/);
u("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a))});u("x",function(a,b,c){c._d=new Date(l(a))});h.version="2.29.1";tb=v;h.fn=f;h.min=function(){var a=[].slice.call(arguments,0);return Pb("isBefore",a)};h.max=function(){var a=[].slice.call(arguments,0);return Pb("isAfter",a)};h.now=function(){return Date.now?Date.now():+new Date};h.utc=N;h.unix=function(a){return v(1E3*a)};h.months=function(a,b){return bc(a,b,"months")};h.isDate=oa;h.locale=ba;h.invalid=ya;h.duration=M;h.isMoment=K;h.weekdays=
function(a,b,c){return pb(a,b,c,"weekdays")};h.parseZone=function(){return v.apply(null,arguments).parseZone()};h.localeData=S;h.isDuration=Ia;h.monthsShort=function(a,b){return bc(a,b,"monthsShort")};h.weekdaysMin=function(a,b,c){return pb(a,b,c,"weekdaysMin")};h.defineLocale=fb;h.updateLocale=function(a,b){if(null!=b){var c,d=Jb;null!=x[a]&&null!=x[a].parentLocale?x[a].set(Xa(x[a]._config,b)):(c=Fa(a),null!=c&&(d=c._config),b=Xa(d,b),null==c&&(b.abbr=a),b=new Ya(b),b.parentLocale=x[a],x[a]=b);ba(a)}else null!=
x[a]&&(null!=x[a].parentLocale?(x[a]=x[a].parentLocale,a===ba()&&ba(a)):null!=x[a]&&delete x[a]);return x[a]};h.locales=function(){return ec(x)};h.weekdaysShort=function(a,b,c){return pb(a,b,c,"weekdaysShort")};h.normalizeUnits=I;h.relativeTimeRounding=function(a){return void 0===a?X:"function"===typeof a?(X=a,!0):!1};h.relativeTimeThreshold=function(a,b){if(void 0===na[a])return!1;if(void 0===b)return na[a];na[a]=b;"s"===a&&(na.ss=b-1);return!0};h.calendarFormat=function(a,b){a=a.diff(b,"days",!0);
return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};h.prototype=f;h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return h});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:moment', location = 'includes/js/amd/shim/moment-amd.js' */
define("moment",function(){return moment});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:collaborative-helper', location = 'loader/collaborative-helper.js' */
define("confluence-editor/loader/collaborative-helper",["jquery","ajs","confluence/meta","confluence/api/event","confluence/get-content-id"],function(c,g,r,f,k){function h(){var b=k();b!==l&&(i=c.Deferred(),l=b,c.when(i,m).done(function(){d.load()}));return i}function n(){e()?(h().resolve(),o.resolve(g.Rte.getEditor())):p("off")}function p(b){c('meta[name="ajs-collaborative-editor-status"]').attr("content",b)}function e(b){var a=b||{},b=a.id||k(),a=a.type||r.get("content-type");return("page"===a||
"blogpost"===a)&&"0"!==b}var d,m=c.Deferred(),l,i,q=c.Deferred(),j=c.Deferred(),o=c.Deferred();return{_init:function(){f.bind("rte-loaded",function(b,a){a.editPermission&&e(a)&&h().resolve()});f.bind("rte-quick-edit-init rte-initial-raw-content-ready",function(b,a){h().done(function(){if(e(a)){if(a){var b=a.syncRevSource&&!("synchrony"===a.syncRevSource||"synchrony-ack"===a.syncRevSource)?"unreconciled-recovery":c("<div>"+a.editorContent+"</div>").find(".fatal-render-error").length?"render":!1;b?
j.reject(b):j.resolve(a)}q.resolve()}})});f.bind("rte-quick-edit-ready",function(){n()});f.bind("rte-ready",function(){g.Rte.isQuickEdit||n()})},registerPlugin:function(b){d=b;m.resolve();q.done(function(){d.edit(j.promise(),o.promise())})},setStatus:p,isCollaborativeEditingAvailable:e,getEditorContent:function(){return e()&&"fake"!==c('meta[name="ajs-collaborative-editor-status"]').attr("content")?d.getSynchronisedEditorContent():{content:g.Rte.getEditor().getContent()}},hasUnsavedChanges:function(){return d.hasUnsavedChanges()}}});
require("confluence/module-exporter").safeRequire("confluence-editor/loader/collaborative-helper",function(c){c._init()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:cql-user-information', location = '/js/cql-user-information.js' */
define("confluence-collaborative-editor-plugin/cql-user-information",["jquery","confluence/meta","confluence/api/constants"],function(l,b,m){function g(a){return a.map(function(c){var a=e.ACCOUNT_IDS[c.accountId||i]||e.USERNAMES[c.username||i]||n,c=Object.assign({},c);c.displayName=a.displayName;c.fullname=a.displayName;c.avatarURL=a.avatarURL;c.sub=c.sub||a.sub;return c})}function j(a){return a.map(function(a){return'"'+a+'"'})}var i="__UNDEFINED_OBJECT_KEY__",k=b.get("static-resource-url-prefix")+
"/images/icons/profilepics/default.png",n={sub:0,avatarURL:k,displayName:"Current User"},f=[],e={ACCOUNT_IDS:{},USERNAMES:{}},o=b.get("atlassian-account-id"),d=b.get("current-user-fullname"),d={displayName:d,displayname:d,fullName:d,fullname:d,avatarURL:b.get("current-user-avatar-uri-reference"),sub:0};e.ACCOUNT_IDS[o]=d;(b=b.get("remote-user"))&&(e.USERNAMES[b]=d);return function(a){Array.isArray(a)||(a=[a]);return!a.length?Promise.resolve([]):new Promise(function(c){var b=a.filter(function(a){return a.accountId&&
!e.ACCOUNT_IDS[a.accountId]&&"anonymous"!==a.accountId}).map(function(a){return a.accountId}),d=a.filter(function(a){return a.username&&!e.USERNAMES[a.username]&&"anonymous"!==a.username}).map(function(a){return a.username});if(!b.length&&!d.length)return c(g(a));var h=[];b.length&&h.push("user.accountid in ("+j(b).join(",")+")");d.length&&h.push("user in ("+j(d).join(",")+")");b="?cql="+encodeURIComponent(h.join(" or "));l.ajax({url:m.CONTEXT_PATH+"/rest/api/search/user"+b,dataType:"json",type:"GET",
contentType:"application/json",success:function(b){(b.results||[]).forEach(function(a){var a=(a||{}).user||{},b=f.indexOf(a.accountId);-1===f.indexOf(a.accountId)&&(f.push(a.accountId),b=f.length-1);b={sub:b,displayName:a.displayName||"anonymous",avatarURL:(a.profilePicture||{}).path||k};a.accountId&&"anonymous"!==a.accountId&&(e.ACCOUNT_IDS[a.accountId]=b);a.username&&"anonymous"!==a.username&&(e.USERNAMES[a.username]=b)});c(g(a))},failure:function(){c(g(a))}})})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:user-information', location = '/js/user-information.js' */
define("confluence-collaborative-editor-plugin/user-information",["jquery","confluence/meta","confluence/api/constants"],function(i,b,j){function e(a){return a.map(function(a){a=d[a]||k;return{avatarURL:a.avatarURL,displayName:a.displayName,fullname:a.fullname,sub:a.sub}})}var g=b.get("static-resource-url-prefix")+"/images/icons/profilepics/default.png",f=[],l=b.get("atlassian-account-id"),h=b.get("current-user-fullname"),b={displayName:h,fullname:h,avatarURL:b.get("current-user-avatar-uri-reference"),
sub:0},d={};d[l]=b;var k={avatarURL:g,displayName:"Current User",fullname:"Current User",sub:0};return function(a){if(!a)return Promise.resolve([]);Array.isArray(a)||(a=[a]);return new Promise(function(b){var c=a.filter(function(a){return a&&"anonymous"!==a&&!d[a]});if(!c.length)return b(e(a));c="?accountId="+c.join(",");i.ajax({url:j.CONTEXT_PATH+"/rest/api/user/bulk"+c,dataType:"json",type:"GET",contentType:"application/json",success:function(c){(c.results||[]).forEach(function(a){if(a){var b=f.indexOf(a.accountId);
-1===b&&(f.push(a.accountId),b=f.length-1);b={sub:b,displayName:a.displayName||"anonymous",fullname:a.displayName||"anonymous",avatarURL:(a.profilePicture||{}).path||g};a.accountId&&"anonymous"!==a.accountId&&(d[a.accountId]=b)}});b(e(a))},error:function(c){console.error("Failed to fetch user data: "+c.statusText);b(e(a))}})})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-quit-dialog', location = 'editor/page-editor-quit-dialog.js' */
define("confluence-editor/editor/page-editor-quit-dialog","jquery confluence/templates ajs confluence/meta window document confluence-editor/editor/page-editor-message confluence/api/constants underscore confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/dark-features confluence-collaborative-editor-plugin/cql-user-information confluence-collaborative-editor-plugin/user-information".split(" "),function(c,s,d,e,i,P,m,n,B,f,C,D,E){function F(a){a.stopPropagation();a.preventDefault();d.trigger("analyticsEvent",
{name:"confluence.synchrony.editor.quit-dialog.show-diff-clicked"});b.showDiffButton.hide();w(false);b.hideDiffButton.show()}function G(a){a.stopPropagation();a.preventDefault();d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.hide-diff-clicked"});b.hideDiffButton.hide();b.closeButton.show();b.dialogEl.removeClass("aui-dialog2-xlarge").addClass("aui-dialog2-medium");o(j)}function H(a){d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard"});a.stopPropagation();
a.preventDefault();f.UI.setButtonsState(false,b.buttonsAll);var p=e.get("content-id"),a=d.contextPath(),a=g?a+"/rest/synchrony/1.0/content/"+p+"/changes/unpublished":a+"/rest/api/content/"+p+"?status=draft";if(g){m.suppressMessage("editor.synchrony.revert-page");c(i).trigger("revert.tinymce",{pageVersion:d.params.pageVersion||"null"})}else c(i).trigger("delete.tinymce");c.ajax({url:a,type:"DELETE",data:{draftId:p},contentType:"application/json",dataType:"json"}).done(function(){g&&m.handleMessage("collaborative-editor-discard-error",
{type:"success",close:"auto",message:"Successfully reverted to the last published version"});d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard-success",data:{contentId:p}});x()}).fail(function(a){var c=JSON.parse(a.responseText),e="There were errors discarding your draft.",a=a.errors||"An unknown error has occurred. Please check your logs.";if(c.data&&c.data.errors&&c.data.errors[0]&&c.data.errors[0].message.key==="content.delete.published"){e="This page has already been published";
a="You can no longer discard this draft because its not a draft anymore!"}m.handleMessage("collaborative-editor-discard-error",{type:"error",title:g?"Can\'t revert to last published version":e,message:g?"We can\'t get the last published version of the page at the moment. Give it a few moments then try discarding the draft again.":a});d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.discard-error",data:{contentId:p}});b.dialog.hide();f.UI.setButtonsState(true,b.buttonsAll)})}function x(){b.editorForm.append(s.Editor.Page.hiddenInputCancel()).submit()}
function y(a){if(a){a.stopPropagation();a.preventDefault()}x()}function I(a){f.UI.setButtonsState(false,b.buttonsAll);t.save(a).done(function(){q.resolve()})}function J(a){a.stopPropagation();a.preventDefault();j=null;d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.draft-status-indicator.click"});b.closeButton.show();w(true)}function K(a){a.stopPropagation();a.preventDefault();b.closeButton.show();e.get("new-page")?o(h.DELETE):o(h.REVERT)}function L(a){a.stopPropagation();a.preventDefault();
f.Drafts.isDraftDirty()?r(z):z()}function z(){var a=e.get("content-id"),b=e.get("space-key"),d=n.CONTEXT_PATH+"/spaces/"+b+"/pages/edit-v2/"+a;c.ajax({url:n.CONTEXT_PATH+"/rest/api/content/"+a+"?status=draft&expand=body.atlas_doc_format,metadata.properties.editor",type:"GET"}).success(function(b){b.body.atlas_doc_format.value.includes('"extensionKey":"__confluenceADFMigrationUnsupportedContentInternalExtension__"')?m.handleMessage("collaborative-editor-discard-error",{type:"error",title:"Your page is not migratable to Fabric Editor!",
message:"Your page contains content, that is not migratable to Fabric Editor."}):b.metadata.properties.editor?c.ajax({url:n.CONTEXT_PATH+"/rest/api/content/"+a+"/property/editor",type:"PUT",data:JSON.stringify({key:"editor",value:"v2",version:{number:b.metadata.properties.editor.version.number+1,minorEdit:false}}),contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(){i.location.href=d}).fail(function(){u()}):c.ajax({url:n.CONTEXT_PATH+"/rest/api/content/"+a+"/property",
type:"POST",data:JSON.stringify({key:"editor",value:"v2",version:{number:1,minorEdit:false}}),contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(){i.location.href=d}).fail(function(){u()})}).fail(function(){u()})}function u(){m.handleMessage("collaborative-editor-discard-error",{type:"error",title:"Something went wrong migrating page to Fabric Editor!",message:"Please reload your editor and try again."})}function M(a){a.stopPropagation();a.preventDefault();b.dialog.hide()}
function w(a){function d(){c.ajax({url:n.CONTEXT_PATH+"/rest/tinymce/1/content/"+e.get("page-id")+"/draft/diff",type:"GET"}).success(function(a){c(".diff-spinner").hide();b.dialogContent.find(".wiki-content").html(a).children().first().hasClass("diff-context-placeholder")&&b.dialogContent.find("hr").hide()})}b.dialogEl.removeClass("aui-dialog2-medium").addClass("aui-dialog2-xlarge");o(h.SHOW_DIFF);c(".diff-spinner").show();a?r(d):d()}function o(a){function d(){return a===h.SHOW_DIFF&&(j===h.REVERT||
j===h.DELETE)}function f(g){b.dialogHeader.html(s.Editor.Page.quitDialogHeader({dialogType:i,contentType:e.get("content-type"),newPage:e.get("new-page")}));b.dialogContent.html(s.Editor.Page.quitDialogContent({dialogType:a,contributors:g,contentType:e.get("content-type"),newDialog:j==null}));b.hideDiffButton=c("#qed-hide-diff-button").click(G);if(!e.get("new-page")){a!==h.SHOW_DIFF&&(j=a);b.showDiffButton=c("#qed-show-diff-button").click(F);b.showDiffButton.show();b.buttonsAll.push(b.showDiffButton)}if(a===
h.DELETE||a===h.REVERT||d()){b.discardButton.show();b.dialogEl.addClass("aui-dialog2-warning")}else b.dialogEl.removeClass("aui-dialog2-warning");b.closeButton.show();b.dialogFooter.find("."+a).show();b.dialog.show()}var g=k.requireSynchronyPresence();l=l.map(function(a){if(g)a.active=g.isUserActive(a.accountId);return a}).sort(function(a,b){return a.active&&!b.active?false:!a.active&&b.active?true:a.lastModification<b.lastModification});var i=a;d()&&(i=j);C.isEnabled("synchrony.user-info-bulk-api")?
E(l.map(function(a){return a.accountId})).then(f):D(l).then(f)}function N(){d.trigger("analyticsEvent",{name:"confluence.synchrony.editor.quit-dialog.dialog-closed"});b.dialogEl.removeClass("aui-dialog2-xlarge").addClass("aui-dialog2-medium");f.UI.toggleSavebarBusy(false);b.dialogFooter.find(".aui-button").hide();b.dialogContent.empty()}function O(a,b){b&&b.contributors&&(l=B.reject(b.contributors,function(a){return a.accountId===e.get("atlassian-account-id")||a.name===e.get("remote-user")}))}function r(a){f.Drafts.save({forceSave:g,
skipErrorHandler:true,onSuccessHandler:a||c.noop})}var k={},b={},g,A,h={DELETE:"delete",REVERT:"revert",PUBLISH:"publish",UPDATE:"update",SHOW_DIFF:"diff"},l=[],v=false,t={},j,q;k.init=function(a){if(A=e.get("content-type")==="page"||e.get("content-type")==="blogpost"){if(!v){g=!e.get("new-page");b.discardButton=c("#qed-discard-button").tooltip({gravity:"s",className:"quit-editor-dialog"});b.discardButton.click(H);b.saveExitButton=c("#qed-save-exit-button").click(y);b.publishButton=c("#qed-publish-button");
b.closeButton=c("#qed-close-button").click(M);b.buttonsAll=[b.discardButton,b.saveExitButton,b.hideDiffButton,b.publishButton];b.dialog=d.dialog2("#quit-editor-dialog");b.dialogEl=b.dialog.$el;b.dialogHeader=b.dialogEl.find(".aui-dialog2-header");b.dialogContent=b.dialogEl.find(".aui-dialog2-content");b.dialogFooter=b.dialogEl.find(".aui-dialog2-footer");b.editorForm=c("#wysiwyg").closest("form");c("#rte-show-changes").on("click",J);c("#rte-show-revert").on("click",K);c("#rte-show-migrate").on("click",
L);b.dialog.on("hide",N);d.bind("editor-heartbeat",O);v=true}if(a){t.save=a.saveHandler;b.publishButton.click(I)}}};k.process=function(a){if(A){a.stopPropagation();a.preventDefault();c(i).one("editor-heartbeat",function(){switch(a.target.id){case f.UI.saveButton.attr("id"):case f.UI.versionCommentInput.attr("id"):f.UI.toggleSavebarBusy(true);if(l.length===0)t.save().done(function(){q.resolve()});else{r();o(g?h.UPDATE:h.PUBLISH)}break;case f.UI.cancelButton.attr("id"):f.Drafts.isDraftDirty()&&r();
y()}});f.heartbeat();q=c.Deferred();return q.promise()}var b=c.Deferred();b.fail();return b.promise()};k.requireSynchronyPresence=function(){return require("confluence-collaborative-editor-plugin/synchrony-presence")};k._destroy=function(){v=false};return k});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-soy', location = 'editor/page-editor.soy' */
// This file was automatically generated from page-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Editor.Page.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.Page == 'undefined') { Confluence.Templates.Editor.Page = {}; }


Confluence.Templates.Editor.Page.saveButton = function(opt_data, opt_ignored) {
  return '<button id="rte-button-publish" data-test-id="tiny-publish-button" class="aui-button aui-button-primary default-submit" type="submit" name="confirm" value="Save" title="' + Confluence.Templates.Editor.Page.saveButtonTitle(opt_data) + '" tabindex="101">' + Confluence.Templates.Editor.Page.saveButtonText(opt_data) + '</button>';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButton.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButton';
}


Confluence.Templates.Editor.Page.saveButtonTitle = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Publish your blog post') : (opt_data.contentType == 'page') ? (opt_data.isNewPage) ? soy.$$escapeHtml('Publish changes') : soy.$$escapeHtml('Update the published page') : soy.$$escapeHtml('Save'));
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButtonTitle.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButtonTitle';
}


Confluence.Templates.Editor.Page.previewButton = function(opt_data, opt_ignored) {
  return '<button class="aui-button toolbar-item aui-button-light" id="rte-button-preview" data-test-id="tiny-preview-button" title="' + soy.$$escapeHtml('Preview') + '" type="button"><span class="trigger-text">' + soy.$$escapeHtml('Preview') + '</span></button>';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.previewButton.soyTemplateName = 'Confluence.Templates.Editor.Page.previewButton';
}


Confluence.Templates.Editor.Page.saveButtonText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'blogpost' || opt_data.contentType == 'page') ? soy.$$escapeHtml('Publish') : (opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Publish') : soy.$$escapeHtml('Save'));
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButtonText.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButtonText';
}


Confluence.Templates.Editor.Page.cancelButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'page' || opt_data.contentType == 'blogpost') ? '<ul class="aui-buttons rte-toolbar-group-done close"><button class="aui-button shared-drafts" type="submit" id="rte-button-cancel" data-test-id="tiny-cancel-button" name="cancel" value="cancel"><span class="icon aui-icon aui-icon-small aui-iconfont-close-dialog"></span></button></ul>' : '<button class="toolbar-item-link aui-button aui-button-link" type="submit" id="rte-button-cancel" data-test-id="tiny-cancel-button" name="cancel" value="cancel"><span class="trigger-text">' + ((opt_data.contentType == 'page' || opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Close') : soy.$$escapeHtml('Cancel')) + '</span></button>');
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.cancelButton.soyTemplateName = 'Confluence.Templates.Editor.Page.cancelButton';
}


Confluence.Templates.Editor.Page.quitDialogHeader = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.dialogType) {
    case 'delete':
    case 'revert':
      output += (opt_data.newPage) ? (opt_data.contentType == 'blogpost') ? '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete unpublished blog post?') + '</h2>' : '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete unpublished page?') + '</h2>' : '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Revert to last published version?') + '</h2>';
      break;
    case 'publish':
    case 'update':
      output += '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Publish the page?') + '</h2>';
      break;
    case 'diff':
      output += '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Unpublished changes') + '</h2>';
      break;
  }
  output += '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.quitDialogHeader.soyTemplateName = 'Confluence.Templates.Editor.Page.quitDialogHeader';
}


Confluence.Templates.Editor.Page.quitDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.dialogType) {
    case 'revert':
      output += (opt_data.contributors.length == 0) ? ((opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('This will permanently delete all the changes you made since this blog post was last published') : soy.$$filterNoAutoescape('This will permanently delete all the changes you made since this page was last published.')) + '<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Show changes') + '</a></div>' : soy.$$filterNoAutoescape('This will permanently delete all the changes that the following people have made, since this page was last published.') + '<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Show changes') + '</a></div>' + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'delete':
      output += (opt_data.contributors.length == 0) ? (opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('Once you delete an unpublished blog post, it\x27s gone for good.') : soy.$$filterNoAutoescape('If you delete an unpublished page, it\x27s gone for good.') : ((opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('This will permanently delete this blog post, which you and these other people have worked on.') : soy.$$filterNoAutoescape('This will permanently delete this page, which you and these other people have worked on.')) + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'publish':
    case 'update':
      output += soy.$$filterNoAutoescape('You\x27ll also be publishing changes made by these people:') + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'diff':
      output += '<div><div class="legend"><span class="legend-title">' + soy.$$escapeHtml('Key') + ': </span><span class="diff-html-added">' + soy.$$escapeHtml('This line was added.') + '</span><span class="diff-html-removed">' + soy.$$escapeHtml('This line was removed.') + '</span><span class="diff-html-changed">' + soy.$$escapeHtml('Formatting was changed.') + '</span></div>' + ((! opt_data.newDialog) ? '<a class="aui-button aui-button-link" id="qed-hide-diff-button">' + soy.$$escapeHtml('Show contributors') + '</a>' : '') + '<hr/><div class="wiki-content"></div><span class="aui-icon aui-icon-wait diff-spinner"></span></div>';
      break;
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.quitDialogContent.soyTemplateName = 'Confluence.Templates.Editor.Page.quitDialogContent';
}


Confluence.Templates.Editor.Page.hiddenInputCancel = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="cancel" value="cancel">';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.hiddenInputCancel.soyTemplateName = 'Confluence.Templates.Editor.Page.hiddenInputCancel';
}


Confluence.Templates.Editor.Page.contributorList = function(opt_data, opt_ignored) {
  var output = '<ul class="contributor-list">';
  var contributorList147 = opt_data.contributors;
  var contributorListLen147 = contributorList147.length;
  for (var contributorIndex147 = 0; contributorIndex147 < contributorListLen147; contributorIndex147++) {
    var contributorData147 = contributorList147[contributorIndex147];
    output += '<li data-username="' + soy.$$escapeHtml(contributorData147.name) + '" data-account-id="' + soy.$$escapeHtml(contributorData147.accountId) + '"><div class="contributor-avatar ' + ((contributorData147.active) ? 'active' : '') + '"><img src="' + soy.$$escapeHtml(contributorData147.avatarURL) + '"></div><div class="contributor-detail"><p class="contributor-detail-name"><span>' + soy.$$escapeHtml(contributorData147.fullname) + '</span></p><p class="contributor-detail-last-modification"><span>' + soy.$$escapeHtml('Last edited') + ' ' + soy.$$escapeHtml(contributorData147.formattedLastModification) + '</span></p></div></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.contributorList.soyTemplateName = 'Confluence.Templates.Editor.Page.contributorList';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:editor-notifications', location = 'includes/js/editor-notifications.js' */
define("confluence/editor-notifications",[],function(){var a;return{notify:function(b,d,c){var e=require("aui/flag");void 0!==a&&"true"!==a.getAttribute("aria-hidden")&&a.close();void 0===c&&(c="error"===b?"manual":"auto");a=e({type:b,body:d,close:c})}}});require("confluence/module-exporter").safeRequire("confluence/editor-notifications",function(a){var b=require("ajs");b.bind("init.rte",function(){b.Confluence.EditorNotification=a})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-location', location = 'includes/js/page-location.js' */
define("confluence/page-location",["ajs","confluence/meta"],function(d,b){var c=null;return{get:function(){return c?c:{spaceName:b.get("space-name"),spaceKey:b.get("space-key"),parentPageTitle:b.get("parent-page-title")}},set:function(a){a&&(b.set("space-name",a.spaceName),b.set("space-key",a.spaceKey),a.hasOwnProperty("parentPageTitle")&&b.set("parent-page-title",a.parentPageTitle),a.hasOwnProperty("parentPageId")&&b.set("parent-page-id",a.parentPageId));c=a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:breadcrumbs-js', location = 'includes/js/breadcrumbs.js' */
define("confluence/breadcrumbs",["jquery","ajs","document","confluence/templates"],function(b,c,e,f){function d(a){return b.ajax({type:"GET",dataType:"json",data:a,url:c.contextPath()+"/pages/breadcrumb.action",error:function(){},success:function(a){a&&a.breadcrumbs&&b("ol#breadcrumbs").html(f.Breadcrumbs.render({breadcrumbs:a.breadcrumbs,ellipsisIndex:a.ellipsisIndex,ellipsisLength:a.ellipsisLength}))}})}return{init:function(){b(e).on("click","#ellipsis",function(){try{b("#breadcrumbs .hidden-crumb").removeClass("hidden-crumb"),
b(this).addClass("hidden-crumb"),c.trigger("breadcrumbs.expanded")}catch(a){c.log(a)}})},updateWithPageId:function(a){return d({pageId:a})},update:function(a,b){return d({spaceKey:a,title:b})}}});require("confluence/module-exporter").safeRequire("confluence/breadcrumbs",function(b){require("ajs").toInit(b.init)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-object', location = 'js/link-object.js' */
define("confluence-link-browser/link-object",["jquery","ajs","confluence-rest/confluence-rest"],function(d,h,p){function l(a){return d.nodeName(a,"img")?a:a.hasChildNodes()&&1===a.childNodes.length&&d.nodeName(a,"a")&&d.nodeName(a.firstChild,"img")?a.firstChild:null}function m(a){return a?d(a).attr("data-linked-resource-default-alias")||d(a).attr("src"):""}function n(a){var b={};"A"===a.nodeName&&d(a.attributes).each(function(){b[this.name]=this.value});return b}function k(a,b){for(;a&&a!=b;){if(3!=
a.nodeType)return!1;a=a.nextSibling}return 3===b.nodeType}var e={isLink:function(a){return a&&!!a.fillNode}},f=function(a){if(e.isLink(a))return a;var b={insert:function(){return require("confluence-link-browser/link-adapter").setLink(b)},fillNode:function(a){var b=this.attrs;b.href=b.href||"#";a.attr(b);this.classes&&this.classes.length&&a.addClass(this.classes.join(" "));a.html(this.body.html);return a},getData:function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&!d.isFunction(this[b])&&
(a[b]=this[b]);return a},getLinkedImage:function(){return this.body&&this.body.jquery?1===this.body.length&&this.body.is("img")&&this.body:null},getResourceId:function(){return this.attrs["data-linked-resource-id"]||""},getResourceVersion:function(){return this.attrs["data-linked-resource-version"]||""},isToConfluenceEntity:function(){return this.attrs["data-linked-resource-id"]},isToAttachmentOnSamePage:function(a){return"attachment"==this.attrs["data-linked-resource-type"]&&this.attrs["data-linked-resource-container-id"]==
a},isCustomAtlassianContentLink:function(){return this.classes&&this.classes.length?-1!=d.inArray("confluence-link",this.classes):!1},hasAnchor:function(){return this.attrs["data-anchor"]},getResourceType:function(){return this.attrs["data-linked-resource-type"]},getDefaultAlias:function(){return this.attrs["data-linked-resource-default-alias"]},getHref:function(){return this.attrs.href},getAnchor:function(){return this.attrs["data-anchor"]},getHtml:function(){return this.body.html},getShortcut:function(){return this.attrs["data-linked-resource-shortcut"]},
isHrefValid:function(){return this.attrs.href&&"http://"!=this.attrs.href},isImage:function(){return this.body.isImage},isNewLink:function(){return d.isEmptyObject(this.attrs)},isShortcutLink:function(){return"shortcut"===this.getResourceType()},showsBreadcrumbs:function(){return!0}};if(a&&a.attrs){var f={},g=null;d.each(a.attrs,function(a,b){"class"==a?g=b:f[a]=b});a.attrs=f;if(g){var c=g.split(" ");a.classes=a.classes&&a.classes.length?a.classes.concat(c):c}}d.extend(b,a);return b};e.fromData=function(a){return f(a)};
e.fromNode=function(a,b){f({attrs:{},body:{html:b,text:b}});return f({attrs:n(a),body:{html:b,text:b}})};e.fromSelectedAnchor=function(a,b){var e=d(a),g=l(a),c=!g&&k(a.firstChild,a.lastChild);return f({attrs:n(a),body:{isEditable:c,isImage:!!g,html:e.html(),imgName:m(g),text:b}})};e.fromSelection=function(a,b,d,e){b=l(b);var c;if(c=!b)if(a.collapsed)c=!0;else if(c=a.startContainer,c==a.endContainer)c=3===c.nodeType?!0:k(c.childNodes[a.startOffset],c.childNodes[a.endOffset-1]);else{var g=require("tinymce").activeEditor.dom;
c=g.isBlock(a.startContainer)?a.startContainer.childNodes[a.startOffset]:a.startContainer;a=g.isBlock(a.endContainer)?a.endContainer.childNodes[a.endOffset-1]:a.endContainer;a=c&&a&&c.parentNode==a.parentNode?{start:c,end:a}:null;c=!!a&&k(a.start,a.end)}return f({attrs:{},body:{isEditable:c,isImage:!!b,html:d,imgName:m(b),text:e}})};e.fromREST=function(a){var b=f({attrs:{"data-base-url":h.Confluence.getBaseUrl(),"data-linked-resource-id":a.id||a.content&&a.content.id||"","data-linked-resource-type":a.type||
a.content&&a.content.type||"","data-linked-resource-content-type":a.contentType||a.content&&a.content.type||"",href:p.REST.findLink(a.link)||a.url,"data-linked-resource-default-alias":a.title},body:{html:h.escapeHtml(a.title),text:h.escapeHtml(a.title)},classes:["confluence-link"]});"user"===a.type&&(b.attrs["data-linked-resource-type"]="userinfo");return b};e.createLinkToNewPage=function(a,b){return f({attrs:{"data-space-key":b,"data-content-title":a,href:h.contextPath()+"/pages/createpage.action?spaceKey\x3d"+
b+"\x26title\x3d"+a+"\x26atl_token\x3d"+h.Meta.get("atl-token")},body:{html:h.escapeEntities(a),text:a},classes:["createlink","confluence-link"]})};e.makeExternalLink=function(a){return f({attrs:{href:a},body:{html:a,text:a}})};e.isExternalLink=function(a){return a&&(a.match(/^(\/\/|mailto:|file:|http:|https:)/)||0===a.indexOf("\\"))};return e});require("confluence/module-exporter").exportModuleAsGlobal("confluence-link-browser/link-object","Confluence.Link");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-link-browser:link-adapter', location = 'js/link-adapter.js' */
define("confluence-link-browser/link-adapter",["ajs","jquery","confluence-link-browser/link-object"],function(d,e,f){return{setLink:function(a){var b=d.Rte.getEditor(),b=e(b.dom.create("a"),b.getDoc());a.fillNode(b);a=require("tinymce").confluence.NodeUtils.replaceSelection(b);e("#comments-section").length&&d.Rte.fixEditorFocus();return a},getLink:function(){var a,b,c;a=d.Rte.getEditor().selection;var g=a.getNode();if(c=e(g).parents().andSelf().filter("a[href]")[0])return a.select(c),b=a.getContent({format:"text"}),
f.fromSelectedAnchor(c,b);c=a.getRng(!0);b=a.getContent({format:"text"});a=a.getContent();return f.fromSelection(c,g,a,b)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:files-upload-analytics', location = 'js/analytics/files-upload-analytics.js' */
define("conf/confluence-drag-and-drop/analytics/files-upload-analytics",["ajs","underscore","confluence/meta"],function(e,b,f){return{triggerEvent:function(c,a,d,b){a&&a.length&&(a={contentType:f.get("content-type"),multiple:1<a.length,number:a.length,isAllImage:void 0===d?this._isAllImages(a):d,source:b},e.trigger("analyticsEvent",{name:c,data:a}))},_isAllImages:function(c){return b.every(c,function(a){return a.nativeFile&&a.nativeFile.type&&0===a.nativeFile.type.indexOf("image/")})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:file-types-utils-resources', location = 'utils/file-types-utils.js' */
define("confluence-editor/utils/file-types-utils",[],function(){var e={"content-type-attachment-image":"image/gif image/jpeg image/pjpeg image/png image/tiff image/bmp".split(" "),"content-type-attachment-pdf":["application/pdf"],"content-type-attachment-multimedia-video":"audio/mpeg audio/x-wav audio/mp3 audio/mp4 video/mpeg video/quicktime video/mp4 video/x-m4v video/x-flv video/x-ms-wmv video/avi video/webm video/vnd.rn-realvideo".split(" "),"content-type-attachment-code":"text/html text/xml text/javascript application/javascript application/x-javascript text/css text/x-java-source".split(" "),
"content-type-attachment-text":["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],"content-type-attachment-spreadsheet":["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],"content-type-attachment-powerpoint":["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],"content-type-attachment-zip":["application/zip","application/java-archive"]},
b={},c;for(c in e)for(var f=e[c],d=0,g=f.length;d<g;d++)b[f[d]]=c;return{getAUIIconFromMime:function(a){return b[a]||"content-type-attachment-file"},isImage:function(a){return b[a]&&0===a.indexOf("image/")}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/utils/file-types-utils","AJS.Confluence.FileTypesUtils");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:plupload', location = 'includes/js/third-party/plupload.js' */
(function(){function x(){this.returnValue=!1}function y(){this.cancelBubble=!0}var z=0,n=[],u={},v={},t={},w={"\x3c":"lt","\x3e":"gt","\x26":"amp",'"':"quot","'":"#39"},A=/[<>&\"\']/g,p=window.setTimeout,l={},h;(function(a){a=a.split(/,/);var b,d,c;for(b=0;b<a.length;b+=2)for(c=a[b+1].split(/ /),d=0;d<c.length;d++){v[c[d]]=a[b];var g=t[a[b]]||[];g.push(c[d]);t[a[b]]=g}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/java-archive,jar,application/java-archive,war,application/java-archive,ear,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.template,xltx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,audio/mpeg,mpga mpega mp2 mp3,audio/mp3,mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/xml,xml,text/javascript,js,text/css,css,text/rtf,rtf,text/x-java-source,java,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe");
var c={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:v,mineTypeToExtensionsMap:t,ua:function(){var a=navigator,b=a.userAgent,d=a.vendor,c,g;g=(c=/WebKit/.test(b))&&-1!==d.indexOf("Apple");d=window.opera&&window.opera.buildNumber;return{windows:-1!==navigator.platform.indexOf("Win"),
ie:!c&&!d&&/MSIE/gi.test(b)&&/Explorer/gi.test(a.appName),webkit:c,gecko:!c&&/Gecko/.test(b),safari:g,opera:!!d}}(),extend:function(a){c.each(arguments,function(b,d){0<d&&c.each(b,function(b,c){a[c]=b})});return a},getElement:function(a){return a&&1===a.nodeType?a:document.getElementById(a)},cleanName:function(a){var b,c;c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,
"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;n[a]=b;n.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),b;for(b=0;5>b;b++)a+=Math.floor(65535*Math.random()).toString(32);return(c.guidPrefix||"p")+a+(z++).toString(32)},buildUrl:function(a,b){var d="";c.each(b,function(a,b){d+=(d?"\x26":"")+encodeURIComponent(b)+
"\x3d"+encodeURIComponent(a)});d&&(a+=(0<a.indexOf("?")?"\x26":"?")+d);return a},each:function(a,b){var c,e;if(a)if(c=a.length,void 0===c)for(e in a){if(a.hasOwnProperty(e)&&!1===b(a[e],e))break}else for(e=0;e<c&&!1!==b(a[e],e);e++);},formatSize:function(a){return void 0===a||/\D/.test(a)?c.translate("N/A"):1073741824<a?Math.round(a/1073741824,1)+" GB":1048576<a?Math.round(a/1048576,1)+" MB":1024<a?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,c=0;b=0;a&&(b=a.getBoundingClientRect(),
a="CSS1Compat"===h.compatMode?h.documentElement:h.body,c=b.left+a.scrollLeft,b=b.top+a.scrollTop);return{x:c,y:b}}var e=0,g=0,f,h=document;b=b||h.body;if(a&&a.getBoundingClientRect&&0<navigator.userAgent.indexOf("MSIE")&&8!==h.documentMode)return a=c(a),b=c(b),{x:a.x-b.x,y:a.y-b.y};for(f=a;f&&f!=b&&f.nodeType;)e+=f.offsetLeft||0,g+=f.offsetTop||0,f=f.offsetParent;for(f=a.parentNode;f&&f!=b&&f.nodeType;)e-=f.scrollLeft||0,g-=f.scrollTop||0,f=f.parentNode;return{x:e,y:g}},getSize:function(a){return{w:a.offsetWidth||
a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024));return a},xmlEncode:function(a){return a?(""+a).replace(A,function(a){return w[a]?"\x26"+w[a]+";":a}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},addI18n:function(a){return c.extend(u,a)},translate:function(a){return u[a]||
a},isEmptyObj:function(a){if(void 0===a)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){return""==a.className?!1:(new RegExp("(^|\\s+)"+b+"(\\s+|$)")).test(a.className)},addClass:function(a,b){c.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];
if(window.getComputedStyle)return window.getComputedStyle(a,null)[b]},addEvent:function(a,b,d,e){var g;b=b.toLowerCase();void 0===h&&(h="Plupload_"+c.guid());a.addEventListener?(g=d,a.addEventListener(b,g,!1)):a.attachEvent&&(g=function(){var a=window.event;a.target||(a.target=a.srcElement);a.preventDefault=x;a.stopPropagation=y;d(a)},a.attachEvent("on"+b,g));void 0===a[h]&&(a[h]=c.guid());l.hasOwnProperty(a[h])||(l[a[h]]={});a=l[a[h]];a.hasOwnProperty(b)||(a[b]=[]);a[b].push({func:g,orig:d,key:e})},
removeEvent:function(a,b,d){var e,g;"function"==typeof d?e=d:g=d;b=b.toLowerCase();if(a[h]&&l[a[h]]&&l[a[h]][b]){d=l[a[h]][b];for(var f=d.length-1;0<=f;f--)if(d[f].key===g||d[f].orig===e)if(a.detachEvent?a.detachEvent("on"+b,d[f].func):a.removeEventListener&&a.removeEventListener(b,d[f].func,!1),d[f].orig=null,d[f].func=null,d.splice(f,1),void 0!==e)break;d.length||delete l[a[h]][b];if(c.isEmptyObj(l[a[h]])){delete l[a[h]];try{delete a[h]}catch(B){a[h]=void 0}}}},removeAllEvents:function(a,b){void 0!==
a[h]&&a[h]&&c.each(l[a[h]],function(d,e){c.removeEvent(a,e,b)})},Uploader:function(a){function b(){var a,b=0,d;if(this.state==c.STARTED){for(d=0;d<f.length;d++)a||f[d].status!=c.QUEUED?b++:(a=f[d],a.status=c.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));b==f.length&&(this.stop(),this.trigger("UploadComplete",f))}}function d(){var a,b;g.reset();for(a=0;a<f.length;a++)b=f[a],void 0!==b.size?(g.size+=b.size,g.loaded+=b.loaded):g.size=void 0,b.status==c.DONE?g.uploaded++:b.status==
c.FAILED?g.failed++:g.queued++;void 0===g.size?g.percent=0<f.length?Math.ceil(g.uploaded/f.length*100):0:(g.bytesPerSec=Math.ceil(g.loaded/((+new Date-h||1)/1E3)),g.percent=0<g.size?Math.ceil(g.loaded/g.size*100):0)}var e={},g,f=[],h;g=new c.QueueProgress;a=c.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a);c.extend(this,{state:c.STOPPED,runtime:"",features:{},files:f,settings:a,total:g,id:c.guid(),init:function(){function m(){var a=q[l++],b,d,f;if(a){b=a.getFeatures();
if(d=k.settings.required_features)for(d=d.split(","),f=0;f<d.length;f++)if(!b[d[f]]){m();return}a.init(k,function(c){c&&c.success?(k.features=b,k.runtime=a.name,k.trigger("Init",{runtime:a.name}),k.trigger("PostInit"),k.refresh()):m()})}else k.trigger("Error",{code:c.INIT_ERROR,message:c.translate("Init error.")})}var k=this,e,q,l=0,r;"function"==typeof a.preinit?a.preinit(k):c.each(a.preinit,function(a,b){k.bind(b,a)});a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(a.url)||
(a.url=a.page_url+a.url);a.chunk_size=c.parseSize(a.chunk_size);a.max_file_size=c.parseSize(a.max_file_size);k.bind("FilesAdded",function(b,d){b.trigger("Started",d);var g,e,m=0,h;(g=a.filters)&&g.length&&(h=[],c.each(g,function(a){c.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?h.push("\\.*"):h.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$\x26")+"]","g"),"\\$\x26"))})}),h=new RegExp(h.join("|")+"$","i"));for(g=0;g<d.length;g++)e=d[g],e.loaded=0,e.percent=
0,e.status=c.QUEUED,h&&!h.test(e.name)?b.trigger("Error",{code:c.FILE_EXTENSION_ERROR,message:c.translate("File extension error."),file:e}):void 0!==e.size&&e.size>a.max_file_size?b.trigger("Error",{code:c.FILE_SIZE_ERROR,message:c.translate("File size error."),file:e}):(f.push(e),m++);if(m)p(function(){k.trigger("QueueChanged");k.refresh()},1);else return!1});a.unique_names&&k.bind("UploadFile",function(a,b){a=b.name.match(/\.([^.]+)$/);var c="tmp";a&&(c=a[1]);b.target_name=b.id+"."+c});k.bind("UploadProgress",
function(a,b){b.percent=0<b.size?Math.ceil(b.loaded/b.size*100):100;d()});k.bind("StateChanged",function(a){if(a.state==c.STARTED)h=+new Date;else if(a.state==c.STOPPED)for(e=a.files.length-1;0<=e;e--)a.files[e].status==c.UPLOADING&&(a.files[e].status=c.QUEUED,d())});k.bind("QueueChanged",d);k.bind("Error",function(a,e){e.file&&(e.file.status=c.FAILED,d(),a.state==c.STARTED&&(g.queued||p(function(){b.call(k)},1)))});k.bind("FileUploaded",function(a,d){d.status=c.DONE;d.loaded=d.size;a.trigger("UploadProgress",
d);p(function(){b.call(k)},1)});if(a.runtimes)for(q=[],r=a.runtimes.split(/\s?,\s?/),e=0;e<r.length;e++)n[r[e]]&&q.push(n[r[e]]);else q=n;m();"function"==typeof a.init?a.init(k):c.each(a.init,function(a,b){k.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=c.STARTED&&(this.state=c.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=c.STOPPED&&(this.state=c.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},getFile:function(a){var b;
for(b=f.length-1;0<=b;b--)if(f[b].id===a)return f[b]},removeFile:function(a){var b;for(b=f.length-1;0<=b;b--)if(f[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){a=f.splice(void 0===a?0:a,void 0===b?f.length:b);this.trigger("FilesRemoved",a);this.trigger("QueueChanged");a[0].status==c.UPLOADING&&this.state==c.STARTED&&this.trigger("CancelUpload");if(!g.queued){var d=this;p(function(){d.trigger("UploadComplete")})}return a},trigger:function(a){var b=e[a.toLowerCase()],c,d;if(b)for(d=
Array.prototype.slice.call(arguments),d[0]=this,c=0;c<b.length;c++)if(!1===b[c].func.apply(b[c].scope,d))return!1;return!0},hasEventListener:function(a){return!!e[a.toLowerCase()]},bind:function(a,b,c){var d;a=a.toLowerCase();d=e[a]||[];d.push({func:b,scope:c||this});e[a]=d},unbind:function(a,b){a=a.toLowerCase();var c=e[a],d;if(c){if(void 0!==b)for(d=c.length-1;0<=d;d--){if(c[d].func===b){c.splice(d,1);break}}else c=[];c.length||delete e[a]}},unbindAll:function(){var a=this;c.each(e,function(b,c){a.unbind(c)})},
destroy:function(){this.trigger("Destroy");this.unbindAll()}})},File:function(a,b,c){this.id=a;this.name=b;this.size=c;this.status=this.percent=this.loaded=0},Runtime:function(){this.getFeatures=function(){};this.init=function(a,b){}},QueueProgress:function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},runtimes:{}};window.plupload=c})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:plupload', location = 'includes/js/third-party/plupload.html5.js' */
(function(u,m,e,r){function E(e,g){var f;if("FileReader"in u)f=new FileReader,f.readAsDataURL(e),f.onload=function(){g(f.result)};else return g(e.getAsDataURL())}function F(e,g,k,h){var c,a,b,v,q=this;E(x[e.id],function(d){c=m.createElement("canvas");c.style.display="none";m.body.appendChild(c);a=c.getContext("2d");b=new Image;b.onerror=b.onabort=function(){h({success:!1})};b.onload=function(){var f,p,l,n;g.width||(g.width=b.width);g.height||(g.height=b.height);v=Math.min(g.width/b.width,g.height/
b.height);if(1>v||1===v&&"image/jpeg"===k){f=Math.round(b.width*v);p=Math.round(b.height*v);c.width=f;c.height=p;a.drawImage(b,0,0,f,p);if("image/jpeg"===k){if(l=new B(atob(d.substring(d.indexOf("base64,")+7))),l.headers&&l.headers.length&&(n=new G,n.init(l.get("exif")[0])&&(n.setExif("PixelXDimension",f),n.setExif("PixelYDimension",p),l.set("exif",n.getBinary()),q.hasEventListener("ExifData")&&q.trigger("ExifData",e,n.EXIF()),q.hasEventListener("GpsData")&&q.trigger("GpsData",e,n.GPS()))),g.quality)try{d=
c.toDataURL(k,g.quality/100)}catch(t){d=c.toDataURL(k)}}else d=c.toDataURL(k);d=d.substring(d.indexOf("base64,")+7);d=atob(d);l&&l.headers&&l.headers.length&&(d=l.restore(d),l.purge());c.parentNode.removeChild(c);h({success:!0,data:d})}else h({success:!1})};b.src=d})}function C(){function e(c,a){var b=k?0:-8*(a-1),e=0,q;for(q=0;q<a;q++)e|=h.charCodeAt(c+q)<<Math.abs(b+8*q);return e}function g(c,a,b){b=3===arguments.length?b:h.length-a-1;h=h.substr(0,a)+c+h.substr(b+a)}var k=!1,h;return{II:function(c){if(c===
r)return k;k=c},init:function(c){k=!1;h=c},SEGMENT:function(c,a,b){switch(arguments.length){case 1:return h.substr(c,h.length-c-1);case 2:return h.substr(c,a);case 3:g(b,c,a);break;default:return h}},BYTE:function(c){return e(c,1)},SHORT:function(c){return e(c,2)},LONG:function(c,a){if(a===r)return e(c,4);var b="",h=k?0:-24,q;for(q=0;4>q;q++)b+=String.fromCharCode(a>>Math.abs(h+8*q)&255);g(b,c,4)},SLONG:function(c){c=e(c,4);return 2147483647<c?c-4294967296:c},STRING:function(c,a){var b="";for(a+=
c;c<a;c++)b+=String.fromCharCode(e(c,1));return b}}}function B(e){var g={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},f=[],h,c,a=r,b=0;h=new C;h.init(e);if(65496===h.SHORT(0)){c=2;for(e=Math.min(1048576,e.length);c<=e;)if(a=h.SHORT(c),65488<=a&&65495>=a)c+=2;else{if(65498===a||65497===a)break;b=h.SHORT(c+2)+2;g[a]&&h.STRING(c+4,g[a].signature.length)===g[a].signature&&f.push({hex:a,
app:g[a].app.toUpperCase(),name:g[a].name.toUpperCase(),start:c,length:b,segment:h.SEGMENT(c,b)});c+=b}h.init(null);return{headers:f,restore:function(a){h.init(a);var b=new B(a);if(!b.headers)return!1;for(a=b.headers.length;0<a;a--){var d=b.headers[a-1];h.SEGMENT(d.start,d.length,"")}b.purge();c=65504==h.SHORT(2)?4+h.SHORT(4):2;a=0;for(b=f.length;a<b;a++)h.SEGMENT(c,0,f[a].segment),c+=f[a].length;return h.SEGMENT()},get:function(a){for(var b=[],d=0,c=f.length;d<c;d++)f[d].app===a.toUpperCase()&&b.push(f[d].segment);
return b},set:function(a,b){var d=[];"string"===typeof b?d.push(b):d=b;b=ii=0;for(var c=f.length;b<c&&!(f[b].app===a.toUpperCase()&&(f[b].segment=d[ii],f[b].length=d[ii].length,ii++),ii>=d.length);b++);},purge:function(){f=[];h.init(null)}}}}function G(){function e(a,b){var e=g.SHORT(a),f,d,k,p,l,n,m={};for(f=0;f<e;f++)if(l=a+12*f+2,k=b[g.SHORT(l)],k!==r){d=g.SHORT(l+=2);p=g.LONG(l+=2);l+=4;n=[];switch(d){case 1:case 7:4<p&&(l=g.LONG(l)+h.tiffHeader);for(d=0;d<p;d++)n[d]=g.BYTE(l+d);break;case 2:4<
p&&(l=g.LONG(l)+h.tiffHeader);m[k]=g.STRING(l,p-1);continue;case 3:2<p&&(l=g.LONG(l)+h.tiffHeader);for(d=0;d<p;d++)n[d]=g.SHORT(l+2*d);break;case 4:1<p&&(l=g.LONG(l)+h.tiffHeader);for(d=0;d<p;d++)n[d]=g.LONG(l+4*d);break;case 5:l=g.LONG(l)+h.tiffHeader;for(d=0;d<p;d++)n[d]=g.LONG(l+4*d)/g.LONG(l+4*d+4);break;case 9:l=g.LONG(l)+h.tiffHeader;for(d=0;d<p;d++)n[d]=g.SLONG(l+4*d);break;case 10:l=g.LONG(l)+h.tiffHeader;for(d=0;d<p;d++)n[d]=g.SLONG(l+4*d)/g.SLONG(l+4*d+4);break;default:continue}p=1==p?n[0]:
n;c.hasOwnProperty(k)&&"object"!=typeof p?m[k]=c[k][p]:m[k]=p}return m}var g,k,h={},c;g=new C;k={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",
41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",
14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",
16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},
Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(a){h={tiffHeader:10};if(a===r||!a.length)return!1;g.init(a);return 65505===g.SHORT(0)&&"EXIF\x00"===g.STRING(4,5).toUpperCase()?(a=h.tiffHeader,g.II(18761==g.SHORT(a)),42!==g.SHORT(a+=2)?a=!1:(h.IFD0=h.tiffHeader+g.LONG(a+2),
a=e(h.IFD0,k.tiff),h.exifIFD="ExifIFDPointer"in a?h.tiffHeader+a.ExifIFDPointer:r,h.gpsIFD="GPSInfoIFDPointer"in a?h.tiffHeader+a.GPSInfoIFDPointer:r,a=!0),a):!1},EXIF:function(){var a;a=e(h.exifIFD,k.exif);a.ExifVersion&&(a.ExifVersion=String.fromCharCode(a.ExifVersion[0],a.ExifVersion[1],a.ExifVersion[2],a.ExifVersion[3]));return a},GPS:function(){var a;a=e(h.gpsIFD,k.gps);a.GPSVersionID&&(a.GPSVersionID=a.GPSVersionID.join("."));return a},setExif:function(a,b){if("PixelXDimension"!==a&&"PixelYDimension"!==
a)return!1;var c,e,d,f=0;if("string"===typeof a)for(hex in c=k.exif,c)if(c[hex]===a){a=hex;break}c=h.exifIFD;e=g.SHORT(c);for(i=0;i<e;i++)if(d=c+12*i+2,g.SHORT(d)==a){f=d+8;break}f?(g.LONG(f,b),b=!0):b=!1;return b},getBinary:function(){return g.SEGMENT()}}}var x={},D;e.runtimes.Html5=e.addRuntime("html5",{getFeatures:function(){var f,g,k,h,c,a;g=k=c=a=!1;u.XMLHttpRequest&&(f=new XMLHttpRequest,k=!!f.upload,g=!(!f.sendAsBinary&&!f.upload));g&&(h=!!(f.sendAsBinary||u.Uint8Array&&u.ArrayBuffer),c=!(!File||
!File.prototype.getAsDataURL&&!u.FileReader||!h),a=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)));D=e.ua.safari&&e.ua.windows&&navigator.userAgent&&0<navigator.userAgent.indexOf("Version/4");f=g;g=m.createElement("div");return{html5:f,dragdrop:"draggable"in g||"ondragstart"in g&&"ondrop"in g,jpgresize:c,pngresize:c,multipart:c||!!u.FileReader||!!u.FormData,canSendBinary:h,cantSendBlobInFormData:!(!(e.ua.gecko&&u.FormData&&u.FileReader)||FileReader.prototype.readAsArrayBuffer),
progress:k,chunks:a,multi_selection:!(e.ua.safari&&e.ua.windows),triggerDialog:e.ua.gecko&&u.FormData||e.ua.webkit||e.ua.windows}},init:function(f,g){function k(a){var b,c,g=[],d,h={};for(c=0;c<a.length;c++)b=a[c],h[b.name]||(h[b.name]=!0,d=e.guid(),x[d]=b,d=new e.File(d,b.fileName||b.name,b.fileSize||b.size),d.nativeFile=b,g.push(d));g.length&&f.trigger("FilesAdded",g)}var h,c;h=this.getFeatures();h.html5?(f.upload=function(a){k(a)},f.bind("Init",function(a){var b,c,g=[],d,h,p=a.settings.filters,
l,n;d=m.body;var t;b=m.createElement("div");b.id=a.id+"_html5_container";e.extend(b.style,{position:"absolute",background:f.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:f.settings.shim_bgcolor?"":0});b.className="plupload html5";f.settings.container&&(d=m.getElementById(f.settings.container),"static"===e.getStyle(d,"position")&&(d.style.position="relative"));d.appendChild(b);d=0;a:for(;d<p.length;d++)for(l=p[d].extensions.split(/,/),h=0;h<
l.length;h++){if("*"===l[h]){g=[];break a}(n=e.mimeTypes[l[h]])&&g.push(n)}b.innerHTML='\x3cinput id\x3d"'+f.id+'_html5"  style\x3d"font-size:999px" type\x3d"file" accept\x3d"'+g.join(",")+'" '+(f.settings.multi_selection&&f.features.multi_selection?'multiple\x3d"multiple"':"")+" /\x3e";b.scrollTop=100;t=m.getElementById(f.id+"_html5");f.settings.inputFileClazz&&(t.className+=" "+f.settings.inputFileClazz);a.features.triggerDialog?e.extend(t.style,{position:"absolute",width:"100%",height:"100%"}):
e.extend(t.style,{cssFloat:"right",styleFloat:"right"});var u=function(){k(this.files);-1===navigator.appVersion.indexOf("MSIE10")?(t=this.cloneNode(!0),t.onchange=u,this.parentNode.replaceChild(t,this)):this.value=""};t.onchange=u;if(c="string"===typeof a.settings.browse_button?m.getElementById(a.settings.browse_button):a.settings.browse_button){var r=a.settings.browse_button_hover,y=a.settings.browse_button_active;b=a.features.triggerDialog?c:b;r&&(e.addEvent(b,"mouseover",function(){e.addClass(c,
r)},a.id),e.addEvent(b,"mouseout",function(){e.removeClass(c,r)},a.id));y&&(e.addEvent(b,"mousedown",function(){e.addClass(c,y)},a.id),e.addEvent(m.body,"mouseup",function(){e.removeClass(c,y)},a.id));a.features.triggerDialog&&e.addEvent(c,"click",function(b){m.getElementById(a.id+"_html5").click();b.preventDefault()},a.id)}}),f.bind("PostInit",function(){var a=e.getElement(f.settings.drop_element),b,c=!1;a&&(D?(e.addEvent(a,"dragenter",function(b){var d;d=m.getElementById(f.id+"_drop");d||(d=m.createElement("input"),
d.setAttribute("type","file"),d.setAttribute("id",f.id+"_drop"),d.setAttribute("multiple","multiple"),e.addEvent(d,"change",function(){k(this.files);e.removeEvent(d,"change",f.id);d.parentNode.removeChild(d)},f.id),a.appendChild(d),c=!0);e.getPos(a,m.getElementById(f.settings.container));b=e.getSize(a);"static"===e.getStyle(a,"position")&&e.extend(a.style,{position:"relative"});e.extend(d.style,{position:"absolute",display:"block",top:0,left:0,width:b.w+"px",height:b.h+"px",opacity:0})},f.id),e.addEvent(a,
"dragleave",function(a){c||(b&&b.parentElement.removeChild(b),b=null);c=!1})):(e.addEvent(a,"dragover",function(a){a.preventDefault()},f.id),e.addEvent(a,"drop",function(a){if(!$(".disable-attachment-uploader").length){var c=a.dataTransfer;c&&c.files&&k(c.files)}b&&b.parentElement.removeChild(b);b=null;a.preventDefault();f.settings.stop_propagation&&(a.cancelBubble?a.cancelBubble=!0:a.stopPropagation())},f.id)))}),f.bind("Refresh",function(a){var b,c,h;if(b=m.getElementById(f.settings.browse_button))c=
e.getPos(b,m.getElementById(a.settings.container)),h=e.getSize(b),a=m.getElementById(f.id+"_html5_container"),e.extend(a.style,{top:c.y+"px",left:c.x+"px",width:h.w+"px",height:h.h+"px"}),f.features.triggerDialog&&("static"===e.getStyle(b,"position")&&e.extend(b.style,{position:"relative"}),c=parseInt(e.getStyle(b,"z-index"),10),isNaN(c)&&(c=0),e.extend(b.style,{zIndex:c}),e.extend(a.style,{zIndex:c-1}))}),f.bind("CancelUpload",function(){c&&c.abort&&c.abort()}),f.bind("UploadFile",function(a,b){function g(a,
b,c){var d;if(File.prototype.slice)try{return a.slice(),a.slice(b,c)}catch(H){return a.slice(b,c-b)}else return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null}function f(f){function l(){function n(d){var f=0,g="----pluploadboundary"+e.guid(),m,n="";c=new XMLHttpRequest;c.upload&&(c.upload.onprogress=function(c){b.loaded=Math.min(b.size,p+c.loaded-f);a.trigger("UploadProgress",b)});c.onreadystatechange=function(){var f,g;if(4==c.readyState){try{f=c.status}catch(I){f=0}if(400<=
f)a.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:b,status:f,response:c.responseText||""});else{if(r){g={chunk:k,chunks:r,response:c.responseText,status:f};a.trigger("ChunkUploaded",b,g);p+=v;if(g.cancelled){b.status=e.FAILED;return}b.loaded=Math.min(b.size,(k+1)*w)}else b.loaded=b.size;a.trigger("UploadProgress",b);d=q=m=n=null;!r||++k>=r?(b.status=e.DONE,a.trigger("FileUploaded",b,{response:c.responseText,status:f})):l()}}};if(a.settings.multipart&&h.multipart){t.name=
b.target_name||b.name;c.open("post",A,!0);e.each(a.settings.headers,function(a,b){c.setRequestHeader(b,a)});c.setRequestHeader("X-Atlassian-Token","no-check");if("string"!==typeof d&&u.FormData){m=new FormData;e.each(e.extend(t,a.settings.multipart_params),function(a,b){m.append(b,a)});m.append(a.settings.file_data_name,d);c.send(m);return}if("string"===typeof d){c.setRequestHeader("Content-Type","multipart/form-data; boundary\x3d"+g);e.each(e.extend(t,a.settings.multipart_params),function(a,b){n+=
"--"+g+'\r\nContent-Disposition: form-data; name\x3d"'+b+'"\r\n\r\n';n+=unescape(encodeURIComponent(a))+"\r\n"});x=e.mimeTypes[b.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";n+="--"+g+'\r\nContent-Disposition: form-data; name\x3d"'+a.settings.file_data_name+'"; filename\x3d"'+unescape(encodeURIComponent(b.name))+'"\r\nContent-Type: '+x+"\r\n\r\n"+d+"\r\n--"+g+"--\r\n";f=n.length-d.length;d=n;if(c.sendAsBinary)c.sendAsBinary(d);else if(h.canSendBinary){for(var y=new Uint8Array(d.length),
z=0;z<d.length;z++)y[z]=d.charCodeAt(z)&255;c.send(y.buffer)}return}}A=e.buildUrl(a.settings.url,e.extend(t,a.settings.multipart_params));c.open("post",A,!0);c.setRequestHeader("Content-Type","application/octet-stream");c.setRequestHeader("X-Atlassian-Token","no-check");d.encoding&&c.setRequestHeader("Content-Encoding",d.encoding);e.each(a.settings.headers,function(a,b){c.setRequestHeader(b,a)});c.send(d.getData?d.getData():d)}var q,r,t,w,v,x,A=a.settings.url;b.status!=e.DONE&&b.status!=e.FAILED&&
a.state!=e.STOPPED&&(t={name:b.target_name||b.name},d.chunk_size&&b.size>d.chunk_size&&(h.chunks||"string"==typeof f)?(w=d.chunk_size,r=Math.ceil(b.size/w),v=Math.min(w,b.size-k*w),q="string"==typeof f?f.substring(k*w,k*w+v):g(f,k*w,k*w+v),t.chunk=k,t.chunks=r):(v=b.size,q=f),"string"!==typeof q&&m&&h.cantSendBlobInFormData&&h.chunks&&a.settings.chunk_size?(m.onload=function(){n(m.result)},m.readAsBinaryString(q)):n(q))}var k=0,p=0,m="FileReader"in u?new FileReader:null;l()}var d=a.settings,k;k=x[b.id];
h.jpgresize&&a.settings.resize&&/\.(png|jpg|jpeg)$/i.test(b.name)?F.call(a,b,a.settings.resize,/\.png$/i.test(b.name)?"image/png":"image/jpeg",function(a){a.success?(b.size=a.data.length,f(a.data)):f(k)}):f(k)}),f.bind("Destroy",function(a){var b,c,f=m.body,d={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(b in d)(c=m.getElementById(d[b]))&&e.removeAllEvents(c,a.id);e.removeAllEvents(m.body,a.id);a.settings.container&&
(f=m.getElementById(a.settings.container));f.removeChild(m.getElementById(d.inputContainer))}),g({success:!0})):g({success:!1})}})})(window,document,plupload);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:plupload', location = 'includes/js/amd/shim/plupload-amd.js' */
define("plupload",function(){return plupload});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:jsUri', location = 'includes/js/third-party/jsUri.js' */
(function(l){function g(a){a=decodeURIComponent(a);return a=a.replace("+"," ")}function k(a){var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a||""),b={};"source protocol authority userInfo user password host port relative path directory file query anchor".split(" ").forEach(function(a,e){b[a]=c[e]||""});return b}function h(a){var c,b,f,e,
d=[];if("undefined"===typeof a||null===a||""===a)return d;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)b=c[a],f=b.split("\x3d"),e=f[0],b=-1===b.indexOf("\x3d")?null:null===f[1]?"":f[1],d.push([e,b]);return d}function d(a){this.uriParts=k(a);this.queryPairs=h(this.uriParts.query);this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(a,c){for(var b=0,f=this.length;b<f;++b)a.call(c||this,this[b],b,this)});"protocol userInfo host port path anchor".split(" ").forEach(function(a){d.prototype[a]=
function(c){"undefined"!==typeof c&&(this.uriParts[a]=c);return this.uriParts[a]}});d.prototype.hasAuthorityPrefix=function(a){"undefined"!==typeof a&&(this.hasAuthorityPrefixUserPref=a);return null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref};d.prototype.query=function(a){var c="",b;"undefined"!==typeof a&&(this.queryPairs=h(a));for(a=0;a<this.queryPairs.length;a++)b=this.queryPairs[a],0<c.length&&(c+="\x26"),c=null===b[1]?c+b[0]:c+b.join("\x3d");
return 0<c.length?"?"+c:c};d.prototype.getQueryParamValue=function(a){var c,b;for(b=0;b<this.queryPairs.length;b++)if(c=this.queryPairs[b],g(a)===g(c[0]))return c[1]};d.prototype.getQueryParamValues=function(a){var c=[],b,f;for(b=0;b<this.queryPairs.length;b++)f=this.queryPairs[b],g(a)===g(f[0])&&c.push(f[1]);return c};d.prototype.deleteQueryParam=function(a,c){var b=[],f,e,d,h;for(f=0;f<this.queryPairs.length;f++)e=this.queryPairs[f],d=g(e[0])===g(a),h=g(e[1])===g(c),(1===arguments.length&&!d||2===
arguments.length&&!d&&!h)&&b.push(e);this.queryPairs=b;return this};d.prototype.addQueryParam=function(a,c,b){3===arguments.length&&-1!==b?(b=Math.min(b,this.queryPairs.length),this.queryPairs.splice(b,0,[a,c])):0<arguments.length&&this.queryPairs.push([a,c]);return this};d.prototype.replaceQueryParam=function(a,c,b){var d=-1,e,h;if(3===arguments.length){for(e=0;e<this.queryPairs.length;e++)if(h=this.queryPairs[e],g(h[0])===g(a)&&decodeURIComponent(h[1])===g(b)){d=e;break}this.deleteQueryParam(a,
b).addQueryParam(a,c,d)}else{for(e=0;e<this.queryPairs.length;e++)if(h=this.queryPairs[e],g(h[0])===g(a)){d=e;break}this.deleteQueryParam(a);this.addQueryParam(a,c,d)}return this};"protocol hasAuthorityPrefix userInfo host port path query anchor".split(" ").forEach(function(a){var c="set"+a.charAt(0).toUpperCase()+a.slice(1);d.prototype[c]=function(b){this[a](b);return this}});d.prototype.scheme=function(){var a="";this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-
1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//");return a};d.prototype.origin=function(){var a=this.scheme();this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@"));this.host()&&(a+=this.host(),this.port()&&(a+=":"+this.port()));return a};d.prototype.toString=function(){var a=this.origin();this.path()?a+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(a+="/");this.query().toString()&&(0!==this.query().toString().indexOf("?")&&
(a+="?"),a+=this.query().toString());this.anchor()&&(0!==this.anchor().indexOf("#")&&(a+="#"),a+=this.anchor());return a};d.prototype.clone=function(){return new d(this.toString())};define("confluence/jsUri",function(){return d})})(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item.soy' */
// This file was automatically generated from file-item.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.fileDialogListItem = function(opt_data, opt_ignored) {
  return '<li class="attached-file loading" data-attachment-id="' + soy.$$escapeHtml(opt_data.file.id) + '" data-owner-id="' + soy.$$escapeHtml(opt_data.file.ownerId) + '" data-file-name="' + soy.$$escapeHtml(opt_data.file.fileName) + '"><div class="file-container" title="' + soy.$$escapeHtml(opt_data.tooltip) + '">' + ((opt_data.file.isImage) ? '<img class="thumbnail hidden" src="' + soy.$$escapeHtml(opt_data.file.nonceUrl) + '" ><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : (opt_data.file.isPreviewable) ? '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom">Zoom</a><p class="hidden image-preview-throbber">&nbsp;</p>' : '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>') + '<i class="abs-icon select">Select</i></div><span class="caption filename" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + soy.$$filterNoAutoescape(opt_data.highlightedImageNameContent) + '</span>' + ((opt_data.highlightedParentTitleContent) ? '<span class="caption owner-title" title="' + soy.$$escapeHtml(opt_data.file.parentTitle) + '">' + soy.$$filterNoAutoescape(opt_data.highlightedParentTitleContent) + '</span>' : '') + '</li>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.fileDialogListItem.soyTemplateName = 'Confluence.Templates.File.fileDialogListItem';
}


Confluence.Templates.File.fileDialogListItemPlaceHolder = function(opt_data, opt_ignored) {
  return '<li class="attached-file loading" data-attachment-id="' + soy.$$escapeHtml(opt_data.file.id) + '" data-file-name="' + soy.$$escapeHtml(opt_data.file.fileName) + '"><div class="file-container" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + ((opt_data.file.isImage && opt_data.file.url) ? '<img class="thumbnail" src="' + soy.$$escapeHtml(opt_data.file.url) + '">' : '<span class="thumbnail"><i class="aui-icon size-48 svg-icon ' + soy.$$escapeHtml(opt_data.file.iconAUIClass) + '">File</i></span>') + '<div id="docs-progress-bar-' + soy.$$escapeHtml(opt_data.file.fileId) + '" class="aui-progress-indicator"><span class="aui-progress-indicator-value"></span></div><div class="overlay"></div><i class="aui-icon aui-icon-small aui-iconfont-close-dialog abs-icon cancel">Cancel</i></div><span class="caption filename" title="' + soy.$$escapeHtml(opt_data.file.fileName) + '">' + soy.$$escapeHtml(opt_data.file.fileName) + '</span><span class="caption owner-title hidden" title=""></span></li>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.fileDialogListItemPlaceHolder.soyTemplateName = 'Confluence.Templates.File.fileDialogListItemPlaceHolder';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-model.js' */
define("confluence-editor/files/file-item/file-item-model","backbone ajs underscore plupload confluence-editor/utils/file-types-utils confluence-rest/confluence-rest confluence/api/constants".split(" "),function(e,f,g,c,h,i,d){return e.Model.extend({defaults:{id:-1,ownerId:-1,fileName:"",nonceUrl:"",isImage:false,isFilePlaceHolder:false,isSelect:false,thumbnailUrl:"",downloadUrl:""},initialize:function(){var a=this;this._findDownloadUrl();this._findThumbnailUrl();this.set("fileName",this.getFileName());
this.set("nonceUrl",this.getNonceUrl());this.set("isImage",this.isImage());this.set("isPreviewable",this.isPreviewable());this.get("attachmentId")&&this.set("id",this.get("attachmentId"));this.get("isFilePlaceHolder")&&this.set("id",this.get("fileId"));this.listenTo(this,"change:link",function(){a.set("nonceUrl",a.getNonceUrl());a._findDownloadUrl()});this.set("iconAUIClass",this._parseFileNameToAuiIconClass(this.get("fileName")))},isImage:function(){return this.get("isImage")?true:!!this.get("thumbnailUrl")},
isPreviewable:function(){return(this.get("niceType")||"").toLocaleLowerCase()==="pdf document"||this.isImage()},getFileName:function(){return this.get("fileName")||this.get("name")||""},getDestinationUrl:function(){return i.REST.wikiLink(this.attributes).destination},getNonceUrl:function(){var a=this.get("thumbnailUrl");if(a.indexOf("modificationDate")>=0)return a;var b=this.get("lastModifiedDate"),b=b?b.date:+new Date,b=encodeURIComponent(b);if(a){b=(a.indexOf("?")+1?"&":"?")+"nonce="+b;a=a+b}return a},
getRelativeUrl:function(a){if(!a)return a;if(a.indexOf(d.BASE_URL)===0){a=a.replace(d.BASE_URL,"");a=f.contextPath()+a}return a},_findThumbnailUrl:function(){!this.get("thumbnailUrl")&&this.get("thumbnailLink")&&this.set("thumbnailUrl",this.getRelativeUrl(this.get("thumbnailLink").href))},_findDownloadUrl:function(){var a=this.get("link");if(!this.get("downloadUrl")&&a){a=g.findWhere(a,{rel:"download"}).href;this.set("downloadUrl",this.getRelativeUrl(a))}},_getFileExtension:function(a){return a.substr(a.lastIndexOf(".")+
1)},_parseFileNameToAuiIconClass:function(a){a=typeof c!=="undefined"?c.mimeTypes[this._getFileExtension(a)]:"";return h.getAUIIconFromMime(a)}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-item-model","Confluence.Editor.FileDialog.FileItemModel");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-item-view.js' */
define("confluence-editor/files/file-item/file-item-view","backbone confluence/templates confluence/highlighter raphael underscore wrm jquery".split(" "),function(f,g,h,i,e,j,d){return f.View.extend({template:g.File.fileDialogListItem,model:null,initialize:function(a){var b=this;this.eventListener=a.eventListener;this.model=a.model;this.showContainerInfo=a.showContainerInfo;this.highlighter=a.highlighter;this.listenTo(this.model,"change:isSelect",function(){b.$el.toggleClass("selected",b.model.get("isSelect"))})},
render:function(){var a=this.highlighter||new h,b=this.model.get("space"),c=this.model.getFileName(),a={file:this.model.attributes,tooltip:this.showContainerInfo&&b?c+" ("+b.name+")":c,highlightedImageNameContent:a.highlight(c),highlightedParentTitleContent:this.showContainerInfo?a.highlight(this.model.attributes.parentTitle):null};this.$el=d(this.template(a));this.el=this.$el[0];this.delegateEvents();this.$el.find(".file-container").tooltip({aria:true});this.$el.attr("data-destination",this.model.getDestinationUrl());
this.model.get("isImage")?this._renderLoadingSpinner():this.$el.removeClass("loading");this.model.get("isPreviewable")&&this._renderPreviewButton();return this},_renderPreviewButton:function(){this.$(".zoom").on("click",e.bind(function(a){a.preventDefault();a={src:this.model.get("downloadUrl"),thumbnail:this.model.get("nonceUrl")||this.model.get("downloadUrl"),type:this.model.get("contentType"),rank:0,title:this.model.getFileName(),id:this.model.get("id"),ownerId:this.model.get("ownerId"),version:this.model.get("version")};
this._setupAndShowPreviewer(a)},this))},_setupAndShowPreviewer:function(a){var b={viewMode:"simple",openPreviewCallback:function(){d("#insert-image-dialog").hide();d(".aui-blanket").hide()},closePreviewCallback:function(){d("#insert-image-dialog").show();d(".aui-blanket").show()}},c=e.bind(function(a,b){this.loader=require("cp/confluence/file-preview-loader");var c=this.loader.setupPreviewForSingleFile([a],b);c.on("fv.open",b.openPreviewCallback);c.on("fv.close",b.closePreviewCallback);c.open();c.showFileWhere()},
this);this.dfd?this.dfd.done(e.partial(c,a,b)):this.dfd=j.require("wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-resources",e.partial(c,a,b))},_renderLoadingSpinner:function(){var a=this,b=this.$el.find(".image-preview-throbber").removeClass("hidden"),c=i.spinner(b[0],8,"#666"),d=this.$el.find("img").load(function(){c();b.remove();d.removeClass("hidden");a.$el.removeClass("loading")})}})});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-item-view","Confluence.Editor.FileDialog.FileItemView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-item/file-placeholder-view.js' */
define("confluence-editor/files/file-item/file-placeholder-view",["backbone","confluence/templates","underscore","ajs","jquery"],function(b,d,e,f,g){return b.View.extend({model:null,template:d.File.fileDialogListItemPlaceHolder,initialize:function(a){this.model=a.model;this.eventListener=a.eventListener;this.eventListener.on("file.placeholder.process",e.bind(this._setUploadInProgress,this))},events:{"click .cancel":"_cancelUpload"},render:function(){this.$el=g(this.template({file:this.model.attributes}));
this.el=this.$el[0];this.delegateEvents();return this},_setUploadInProgress:function(a,b){var c=this.$el.find("#docs-progress-bar-"+b||"");c.length&&(1===a&&this.$(".cancel").hide(),c.show(),f.progressBars.update(c,a))},_cancelUpload:function(){this.eventListener.trigger("uploadingfile.cancelled",this.model.get("fileId"))}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-item/file-placeholder-view","Confluence.Editor.FileDialog.FilePlaceHolderView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-collection.js' */
define("confluence-editor/files/file-list/file-list-collection",["backbone","confluence-editor/files/file-item/file-item-model","underscore"],function(c,d,e){return c.Collection.extend({model:d,clearSelection:function(){this.each(function(a){a.get("isSelect")&&a.set("isSelect",!1)});this.trigger("clear.selection")},getAllSelectItems:function(){return this.filter(function(a){return a.get("isSelect")})},setSelection:function(a){e.each(a,function(a){return a.set("isSelect",!0)})},resetFiles:function(a){this.reset();
for(var b=0;b<a.length;b++)this.addFile(a[b])},addFile:function(a){a=this.add(a);this.trigger("add-file",a.at(a.length-1))},removeFile:function(a){this.remove(a);this.trigger("remove-file",a)},replaceFile:function(a,b){this.remove(a);this.add(b);this.trigger("replace-file",a,b)}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-list/file-list-collection","Confluence.Editor.FileDialog.FileListCollection");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-list/file-list-view.js' */
define("confluence-editor/files/file-list/file-list-view","backbone confluence-editor/files/file-item/file-item-view confluence-editor/files/file-item/file-item-model confluence-editor/files/file-item/file-placeholder-view ajs jquery".split(" "),function(f,g,h,i,j,c){return f.View.extend({eventListener:null,events:{click:"_clearSelection","click li.attached-file":"_clickItem","dblclick li.attached-file":"_doubleClickItem"},initialize:function(a){var b=this;this.collection=a.collection;if(a.eventListener){this.eventListener=
a.eventListener;this.listenTo(this.eventListener,"uploadingfile.completed",this._addUploadedFile);this.listenTo(this.eventListener,"uploadingfile.cancelled",this._cancelUploadingFile)}this.listenTo(this.collection,"reset",this._clearFileList);this.listenTo(this.collection,"add-file",this._renderNewItem);this.listenTo(this.collection,"remove-file",this._removeItem);this.listenTo(this.collection,"replace-file",this._replaceItem);this.listenTo(this.collection,"change:isSelect",function(){this.context.setSelectItems(this.collection.getAllSelectItems())});
this.listenTo(this.collection,"change:link",function(a){b.collection.removeFile(a);b.collection.addFile(a)});this.updateDialogContext(a.context);this.updatePanelContext(a.panelContext)},_addUploadedFile:function(a,b){var d=this,e=j.contextPath()+"/rest/prototype/1/attachment/"+b+".json";c.get(e).done(function(b){var b=new h(b),c=d.collection.get(a);c||(c=d.collection.findWhere({fileName:b.get("fileName")}));c?d.collection.replaceFile(c,b):d.collection.addFile(b)})},_cancelUploadingFile:function(a){(a=
this.collection.get(a))&&(a.get("previousUploadedFile")?this.collection.replaceFile(a,a.get("previousUploadedFile")):this.collection.removeFile(a))},render:function(){return this},resetFileList:function(a,b){b=b||{};this.$el.find(".loading-message").addClass("hidden");this.$el.find(".no-files").remove();this.collection.resetFiles(a);this.collection.length===0&&this.$fileList.before(c("<p></p>").addClass("no-files").text(this.noFileMessage));b.shouldClearSelection&&this.collection.clearSelection();
this._checkError(b.errors);this.$el.sizeToFit()},_getViewFromModel:function(a){return a.get("isFilePlaceHolder")?(new i({model:a,eventListener:this.eventListener})).render():(new g({model:a,showContainerInfo:this.showContainerInfo,highlighter:this.highlighter,eventListener:this.eventListener})).render()},_renderNewItem:function(a){if(this.$fileList&&this.$fileList.length){var b=this._getViewFromModel(a);this.$fileList.prepend(b.el);a.get("isFilePlaceHolder")||a.set("isSelect",true)}},_removeItem:function(a){if(this.$fileList&&
this.$fileList.length)(a=this._getDomElementByFileName(a.get("fileName")))&&a.remove()},_replaceItem:function(a,b){if(this.$fileList&&this.$fileList.length){var c=this._getViewFromModel(b),e=this._getDomElementByFileName(a.get("fileName"));e&&e.length?e.replaceWith(c.el):this.$fileList.prepend(c.el);b.set("isSelect",true)}},_getDomElementByFileName:function(a){var b=null;this.$fileList.find("li").each(function(){var d=c(this);d.attr("data-file-name")===a&&(b=d)});return b},updatePanelContext:function(a){if(a){this.panelContext=
a;this.errors=this.panelContext.errors||[];this.$el=this.fileContainer=this.panelContext.fileContainer;this.el=this.$el[0];this.$fileList=this.$el.find(".file-list");this.delegateEvents();this.noFileMessage=this.panelContext.noFileMessage;this.showContainerInfo=this.panelContext.showContainerInfo;this.highlighter=this.panelContext.highlighter;this.displayErrors=this.panelContext.displayErrors}},updateDialogContext:function(a){if(a){this.context=a;this.contextOptions=this.context.options}},_checkError:function(a){(a=
a||[])&&a.length&&this.displayErrors(a)},_clearSelection:function(a){a=a&&c(a.target);if(!a||!a.hasClass("close-tip")){this.collection.clearSelection();this.$el.find(".current").removeClass("current")}},_clearFileList:function(){this.$fileList&&this.$fileList.empty()},_clickItem:function(a){a.stopPropagation();a.preventDefault();var b=c(a.target);if(!b.closest(".zoom").length){a.isTrigger||this.$fileList.find(".current").removeClass("current");a=b.closest("li").attr("data-attachment-id");(a=this.collection.get(a))&&
!a.get("isFilePlaceHolder")&&a.set("isSelect",!a.get("isSelect"))}},_doubleClickItem:function(a){var a=c(a.target).closest("li"),b=a.attr("data-attachment-id");if((b=this.collection.get(b))&&!b.get("isFilePlaceHolder")){a.click();this.context.insert()}}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-list/file-list-view","Confluence.Editor.FileDialog.FileListView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/base-panel/base-panel-view.js' */
define("confluence-editor/files/base-panel/base-panel-view",["backbone","ajs","jquery"],function(b,a,c){return b.View.extend({context:null,cssContainer:"",cssPanel:"",textErrorSearch:"Error searching for attachments from Confluence. The server may be unavailable.",textErrorRetrieving:"Error retrieving attachments from Confluence. The server may be unavailable.",textDefaultErrorMessage:"Could not upload the file to Confluence. The server may be unavailable.",textUploading:"Image uploading...",initialize:function(){},createPanel:function(d){this.context=
d;this.render();var a=this;if(d=this.context.getPanel(this.panelId))d.onselect=function(){a.context.clearSelection();a.focus&&a.focus()}},render:function(){return this},getPanelElement:function(){return c(this.cssPanel,this.context.baseElement)},getContainer:function(){return c(this.cssContainer)},getForm:function(){return c("form",this.getPanelElement())},clearContainer:function(){var a=this.getContainer();a.find(".loading-message").removeClass("hidden");a.find(".warning").addClass("hidden")},clearErrors:function(){this.messenger.clearMessages()},
displayErrors:function(a){this.uploader.displayErrors(a);this.getContainer().sizeToFit()},getNoFileContainer:function(){return this.getPanelElement().find(".no-files")},getFileListContainer:function(){return this.getPanelElement().find("ul.file-list")}})});
require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/base-panel/base-panel-view","Confluence.Editor.FileDialog.BasePanel",function(){var b=require("underscore"),a=require("backbone");Confluence.Editor.FileDialog.eventListener=b.extend({},a.Events)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel.soy' */
// This file was automatically generated from attachments-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.uploadFileForm = function(opt_data, opt_ignored) {
  return '' + ((opt_data.hasAttachPermission) ? '<div id="upload-attachment">' + ((opt_data.isNonSupportDragDrop) ? '<form action="' + soy.$$escapeHtml("/wiki") + '/pages/attachfile.action" method="post" enctype="multipart/form-data">' : '<form>') + '<label id="upload-files-button" class="aui-button upload-files"><span class="file-upload-icon">' + soy.$$escapeHtml('Upload files') + '</span>&nbsp;&nbsp;' + soy.$$escapeHtml('Upload files') + ((opt_data.isNonSupportDragDrop) ? '<input name="file_0" type="file" class="upfile invisible">' : '') + '</label>' + ((opt_data.isNonSupportDragDrop) ? '<input type="hidden" name="minorEdit_0" value="true" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" />' : '') + '</form>' + ((opt_data.isNonSupportDragDrop) ? '<div class="upload-in-progress hidden">' + soy.$$escapeHtml('Image uploading...') + '</div>' : '') + '</div>' : '') + ((opt_data.hasAttachPermission) ? '<div class="divider"></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.File.uploadFileForm.soyTemplateName = 'Confluence.Templates.File.uploadFileForm';
}


Confluence.Templates.File.attachedFilesPanel = function(opt_data, opt_ignored) {
  return '<div id="attached-files" class="scroll-wrapper">' + aui.message.warning({title: '', closeable: 'true', content: ''}) + '<div class="loading-message hidden">' + soy.$$escapeHtml('Loading\u2026') + '</div><ul class="file-list"></ul></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.attachedFilesPanel.soyTemplateName = 'Confluence.Templates.File.attachedFilesPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/attachments-panel/attachments-panel-view.js' */
define("confluence-editor/files/attachments-panel/attachments-panel-view","confluence-editor/files/file-list/file-list-view confluence-editor/files/file-item/file-item-model confluence-editor/files/file-list/file-list-collection confluence-editor/files/base-panel/base-panel-view confluence/templates ajs confluence/meta underscore window jquery confluence/attachment-uploader confluence-editor/utils/file-types-utils confluence-rest/confluence-rest".split(" "),function(m,i,n,j,k,f,h,l,e,g,o,p,q){return j.extend({id:"attachments",
panelId:"",cssPanel:".attachments-panel",cssContainer:"#attached-files",textNoFileMessage:"There are no files attached to this page.",textPanelTitle:"Attached to this page",initialize:function(a){j.prototype.initialize.call(this);this.eventListener=a.eventListener;this.context=null;this.collection=new n;this.fileListView=new m({collection:this.collection,eventListener:this.eventListener});this.xhrCount=0},render:function(){var a=this;this.eventListener.trigger("AttachmentsPanelView.render",
this);this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"attachments-panel");this.el=this.getPanelElement();this.$el=g(this.el);this.delegateEvents();this.fileListView.updatePanelContext({fileContainer:this.getContainer(),noFileMessage:this.textNoFileMessage,showContainerInfo:false,errors:[],displayErrors:function(b){a.uploader.clearErrors();a.uploader.displayErrors(b)}});this.uploader=this.getUploaderController(this.context);
this.messenger=this.uploader.getMessageHandler();this.collection.reset();this._canAttachFiles()?this.refresh({shouldClearSelection:true}):this.refresh({errors:["You\'ll need to ask permission to insert files here."],shouldClearSelection:true});return this},getPanel:function(){return k.File.uploadFileForm({isNonSupportDragDrop:!this._hasXhrSupport(),atlToken:h.get("atl-token"),hasAttachPermission:this._canAttachFiles()})+k.File.attachedFilesPanel()},_overideUploaderClientForNonDragDropSupport:function(){var a=
this;return{onUploadSuccess:function(b){for(var d=0;d<b.length;d++){var c=b[d].id,e=a.collection.get(c);e&&a.collection.removeFile(e);c=f.contextPath()+"/rest/prototype/1/attachment/"+c+".json";g.get(c).done(function(b){b=new i(b);a.collection.addFile(b)})}},pack:function(){a.getContainer().sizeToFit()},getDefaultErrorMessage:function(){return a.textDefaultErrorMessage},getDefaultUploadingMessage:function(){return a.textUploading},displayErrors:function(b){this.getMessageHandler().displayMessages(b);
a._showErrorIconInMessageBox();this.pack()}}},getUploaderController:function(){return o({baseElement:this.getPanelElement()},l.bind(this._overideUploaderClientForNonDragDropSupport,this))},refresh:function(a){var b=this,d=a.shouldClearSelection?this.getPanelElement().find(".loading-message"):false,c=this.xhrCount=this.xhrCount+1;f.getJSONWrap({url:this._getUrlREST(),messageHandler:this.messenger,loadingElement:d,errorMessage:this.textErrorRetrieving,successCallback:function(d){if(c===b.xhrCount){a.data=
d;b._onSuccessLoadFiles(a)}},errorCallback:l.bind(this._onErrorLoadFiles,this)})},_onSuccessLoadFiles:function(a){this.fileListView.resetFileList(a.data.attachment?a.data.attachment:a.data.images,a)},_onErrorLoadFiles:function(){this._showErrorIconInMessageBox()},_showErrorIconInMessageBox:function(){var a=this.messenger.getMessageContainer().find("ul");a.toggleClass("one-message",a.find("li").length===1);a.closest(".aui-message").append("<span class='aui-icon icon-warning'></span>")},setUploadInProgress:function(a,
b){this.eventListener.trigger("file.placeholder.process",a,b)},attachmentUploaded:function(a,b){this.eventListener.trigger("uploadingfile.completed",a,b)},attachmentUploadingCancelled:function(a){this.eventListener.trigger("uploadingfile.cancelled",a)},_hasXhrSupport:function(){var a,b;try{a=new XMLHttpRequest;b=!(!a.sendAsBinary&&!a.upload)&&!(g.browser.mozilla&&g.browser.version.indexOf("1.9.1")>-1)}catch(d){b=false}return b},addPreviewImage:function(a){var b=require("tinymce");if(e.File&&e.FileReader&&
e.FileList&&e.Blob){var d=this,b=b.isIE?1048576:5242880;a.isImage=a.nativeFile&&a.nativeFile.type&&this._isImageType(a.nativeFile.type);if(a.isImage&&a.nativeFile.size<b){var c=new FileReader;c.onload=function(){d._addFilePlaceHolderToCollection(a,c.result)};c.readAsDataURL(a.nativeFile)}else this._addFilePlaceHolderToCollection(a,null)}},_addFilePlaceHolderToCollection:function(a,b){var d=null,c=this.collection.findWhere({fileName:a.name});if(c){this.collection.removeFile(c);c.get("isFilePlaceHolder")?
c.get("previousUploadedFile")&&(d=c.get("previousUploadedFile")):d=c}d=new i({isFilePlaceHolder:true,fileName:a.name,fileId:a.id,fileNative:a.nativeFile,url:b?b:"",isImage:a.isImage,niceType:a.isImage?"Image":"",fileType:a.nativeFile.type,thumbnailUrl:b?b:"",previousUploadedFile:d});this.collection.addFile(d)},_isImageType:function(a){return p.isImage(a)},_canAttachFiles:function(){return h.getBoolean("can-attach-files")},_getUrlREST:function(){var a=parseInt(h.get("attachment-source-content-id"),
10);return q.REST.makeUrl("content/"+a+"/attachments.json")},focus:function(){this.collection.clearSelection()}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/attachments-panel/attachments-panel-view","Confluence.Editor.FileDialog.AttachmentsPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel.soy' */
// This file was automatically generated from external-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.webPanel = function(opt_data, opt_ignored) {
  return '<div class="insert-web-image"><form id="insert-web-image-form" action="#" class="aui"><fieldset class="inline"><div class="web-image-input"><label for="insert-web-image-image-url" id="insert-web-image-image-url-label">' + soy.$$escapeHtml('Image URL:') + '</label><input type="text" class="text image-url" id="insert-web-image-image-url" name="insert-web-image-image-url"></div><input type="submit" class="image-preview aui-button" value="' + soy.$$escapeHtml('Preview') + '"></fieldset></form><p class="faraway image-preview-area"></p><p class="hidden image-preview-error">' + soy.$$escapeHtml('This image couldn\x27t be loaded for preview. Please check the URL.') + '</p><p class="hidden image-preview-throbber">&nbsp;</p></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.webPanel.soyTemplateName = 'Confluence.Templates.File.webPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/external-panel/external-panel-view.js' */
define("confluence-editor/files/external-panel/external-panel-view",["confluence-editor/files/base-panel/base-panel-view","confluence/templates","jquery","raphael","ajs"],function(c,e,d,f,g){return c.extend({id:"external",panelId:"",cssPanel:".web-image-panel",cssContainer:".insert-web-image",textPanelTitle:"Images from the web",template:e.File.searchPanel,events:{"submit form":"_submit","keyup input.image-url":"_checkAllowInsert","click input.image-url":"_checkAllowInsert",
"blur input.image-url":"_checkAllowInsert"},initialize:function(){c.prototype.initialize.call(this);this.context=null;this.token=0},render:function(){this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"web-image-panel");this.container=this.getContainer();this.preview=this.container.find(".image-preview-area");this.throbber=this.container.find(".image-preview-throbber");this.killSpinner=null;this.error=this.container.find(".image-preview-error")},focus:function(){this._getImageInput().focus();
this._checkAllowInsert()},getPanel:function(){this.$el=d(e.File.webPanel());this.el=this.$el[0];this.delegateEvents();return this.el},_getImageInput:function(){return d("input.image-url",this.context.baseElement)},_submit:function(b){b.preventDefault();b.stopPropagation();var a=this,b=this._getImageInput().val();if("http://"===b)return!1;this.token++;var c=this.token;this.preview.addClass("faraway").html("");this.throbber.removeClass("hidden");this.killSpinner||(this.killSpinner=f.spinner(this.throbber[0],
60,"#666"));this.error.addClass("hidden");d("<img>").load(function(){if(c===a.token){a.killSpinner();a.killSpinner=null;a.throbber.addClass("hidden");a.preview.removeClass("faraway");a._checkAllowInsert()}}).error(function(){if(c===a.token){a.killSpinner();a.killSpinner=null;a.throbber.addClass("hidden");a.error.removeClass("hidden");a._checkAllowInsert()}}).appendTo(this.preview).attr("src",b)},_checkAllowInsert:function(){var b=this.$el.find("input.image-url").val();this.context.setSelectItems(""!==
b&&"http://"!==b?b:[])}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/external-panel/external-panel-view","Confluence.Editor.FileDialog.ExternalPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel.soy' */
// This file was automatically generated from search-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.searchPanel = function(opt_data, opt_ignored) {
  return '<div class="search-panel-wrapper"><div id="search-image"><form class="aui search-form" id="search-image-form" action="#"><fieldset class="inline"><div class="search-input"><label for="search-image" class="assistive">' + soy.$$escapeHtml('Search') + '</label><input autofocus type="text" class="text search-image-text" size="50" autocomplete="off"></div><select class="search-space select" id="search-image-space-select"><option value="">' + soy.$$escapeHtml('All Spaces') + '</option><option value="' + soy.$$escapeHtml(opt_data.spaceKey) + '">' + soy.$$escapeHtml(opt_data.spaceName) + '</option></select><button type="submit" class="aui-button search-button">' + soy.$$escapeHtml('Search') + '</button></fieldset></form></div><div id="searched-images" class="scroll-wrapper"><div class="loading-message hidden">' + soy.$$escapeHtml('Searching\u2026') + '</div><ul class="file-list"></ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.searchPanel.soyTemplateName = 'Confluence.Templates.File.searchPanel';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/search-panel/search-panel-view.js' */
define("confluence-editor/files/search-panel/search-panel-view","confluence-editor/files/file-item/file-item-model confluence-editor/files/file-list/file-list-view confluence-editor/files/file-list/file-list-collection confluence-editor/files/base-panel/base-panel-view confluence/templates confluence/meta confluence/defaults confluence/highlighter underscore ajs jquery confluence-rest/confluence-rest confluence/api/event".split(" "),function(n,g,h,e,i,c,j,k,f,d,b,l,m){return e.extend({id:"search",
panelId:"",cssPanel:".search-panel",cssContainer:"#searched-images",template:i.File.searchPanel,events:{"submit form":"_submit"},initialize:function(){e.prototype.initialize.call(this);this.context=null;this.collection=new h;this.fileListView=new g({collection:this.collection})},getPanel:function(){this.$el=b(this.template({spaceKey:c.get("space-key"),spaceName:c.get("space-name")}));this.el=this.$el[0];this.delegateEvents();return this.el},render:function(){this.fileListView.updateDialogContext(this.context);
this.panelId=this.context.addPanel("Search on other pages",this.getPanel(),"search-panel");this.fileListView.updatePanelContext({fileContainer:this.getContainer(),noFileMessage:"No search results found.",showContainerInfo:true})},_submit:function(a){a.preventDefault();a.stopPropagation();if(this._getQuery()){m.trigger("analyticsEvent",{name:"confluence.insert-files-dialog.search",data:{contentType:c.get("content-type")}});this.clearContainer();this.collection.reset();
this._loadImages().then(f.bind(this._onSuccessLoadFiles,this),f.bind(this._onErrorLoadFiles,this))}},_loadImages:function(){return b.ajax({type:"GET",dataType:"json",url:d.contextPath()+l.REST.getBaseUrl()+"search.json",data:{spaceKey:this.getForm().find(".search-space").val(),query:this._getQuery(),search:"name",type:"attachment",attachmentType:[],groupResults:true,maxResultsPerGroup:50,searchParentName:true,pageSize:j.maxResults}})},_onSuccessLoadFiles:function(a){var b={result:[]};a.result&&a.result.length>
0?b=a:a.group&&a.group[0]&&(b=a.group[0]);this.fileListView.highlighter=new k(this._getQuery().split(" "));this.fileListView.resetFileList(b.result,{shouldClearSelection:true})},_onErrorLoadFiles:function(){var a=this.getContainer();a.find(".loading-message").addClass("hidden");a.append(b("<p class='warning'>"+b(this.textErrorSearch).text()+"</p>"))},_getSearchText:function(){return b("input.search-image-text",this.getForm())},_getQuery:function(){return this._getSearchText().val()||""},focus:function(){this.collection.clearSelection();
this._getSearchText().focus()}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/search-panel/search-panel-view","Confluence.Editor.FileDialog.SearchPanelView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog.soy' */
// This file was automatically generated from file-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.File.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.helpLink = function(opt_data, opt_ignored) {
  return '<div class="dialog-help-link"><a href="' + soy.$$escapeHtml("https://confluence.atlassian.com/display/ConfCloud/Display+Files+and+Images") + '" target="_blank">' + soy.$$escapeHtml('Help') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.File.helpLink.soyTemplateName = 'Confluence.Templates.File.helpLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'files/file-dialog/file-dialog-view.js' */
define("confluence-editor/files/file-dialog/file-dialog-view","backbone ajs confluence/templates underscore jquery document window".split(" "),function(j,d,l,f,e,i,m){return j.View.extend({dialogId:"insert-image-dialog",ESC_KEY_CODE:27,width:840,height:530,initialize:function(a){this.urlExternalImg="";this.selectItems=[];this.submitCallback=a.submitCallback;this.cancelCallback=a.cancelCallback;this.beforeShowListeners=a.beforeShowListeners;this.panelComponents=a.panelComponents},render:function(){this._createDialog();
this.clearSelection();e(i).on("keydown.insert-image",f.bind(this._onNavigationByKey,this));return this},_createDialog:function(){var a=new d.Dialog(this.width,this.height,this.dialogId),n="Insert files and images",b="Insert";this.dialog=a;a.addHeader(n);a.addButton(b,f.bind(this._submitDialog,this),"insert");a.addCancel("Close",f.bind(this._killDialog,this));this.el=a.popup.element;this.$el=e(this.el);this.baseElement=this.el;
this.$el.attr("data-tab-default","0");this.$insertButton=this.$el.find(".dialog-button-panel .insert");e("#"+this.dialogId+" .dialog-components .dialog-title").prepend(l.File.helpLink());this.$el.find(".dialog-button-panel").append(e("<div></div>").addClass("dialog-tip").html("Hint: type \"\u003cstrong\u003e!\u003c/strong\u003e\" in the Editor to insert attached images on the page."));this._createPanels();e(i).on("hideLayer",f.bind(function(c,b,d){if(b==="popup"&&d===a.popup){d.remove();this.teardown();typeof this.cancelCallback==="function"&&this.cancelCallback()}},
this));d.bind("remove.dialog",f.bind(function(a,b){b.dialog.id===this.dialog.id&&this.teardown()},this));a.show();return a},_createPanels:function(){var a=this;e.each(this.panelComponents,function(){this&&typeof this.createPanel==="function"&&this.createPanel(a)});d.debug(this.beforeShowListeners.length+" beforeShow listeners registered.");e.each(this.beforeShowListeners,function(){typeof this==="function"&&this()})},teardown:function(){e(i).unbind(".insert-image");e(".tipsy").remove();this.undelegateEvents()},
_killDialog:function(){this.dialog.remove();this.clearSelection();typeof this.cancelCallback==="function"&&this.cancelCallback()},_submitDialog:function(){var a={url:this.urlExternalImg,contentId:d.Meta.get("attachment-source-content-id"),selectItems:this.selectItems};this.dialog.remove();typeof this.submitCallback==="function"&&this.submitCallback(a)},setSelectItems:function(a){if(typeof a==="string"){this.urlExternalImg=a;this.selectItems=[]}else{this.urlExternalImg="";this.selectItems=a}a=this.selectItems.length>
0||this.urlExternalImg;if(this.$insertButton){this.$insertButton.prop("disabled",!a);this.$insertButton.attr("aria-disabled",!a)}},clearSelection:function(){this.setSelectItems([])},insert:function(){this.$insertButton&&(!this.$insertButton.is(":disabled")||!this.$insertButton.attr("aria-disabled"))&&this.$insertButton.click()},addPanel:function(a,d,b,c){var e=this.dialog.getPage(0).panel.length;this.dialog.addPanel(a,d,b,c);return e},getPanel:function(a){return this.dialog.getPanel(a)},_onNavigationByKey:function(a){if(!e("#"+
this.dialog.id).is(":hidden")){var f=this.dialog.getCurrentPanel().body,b=f.find(".attached-file");if(!(b.length===0||e(i.activeElement).is("input[type=text], select, button"))){var c=m.tinymce.VK;switch(a.which){case c.LEFT:case c.UP:case c.RIGHT:case c.DOWN:var k=a.which,g;g=b.filter(".current");g.length||(g=b.filter(".selected"));if(g.length){g=b.index(g);var j=b.length,h={};h[c.LEFT]=-1;h[c.RIGHT]=1;h[c.UP]=-4;h[c.DOWN]=4;c=g+(h[k]?h[k]:0);b=b.eq(c<0||c>=j?g:c)}else b=b.first();b.parent().find("li.attached-file.current").removeClass("current");
b.addClass("current");b.length&&f.find(".scroll-wrapper").simpleScrollTo(b);return d.stopEvent(a);case c.SPACEBAR:f.find("li.attached-file.current").click();return d.stopEvent(a);case c.ENTER:this.insert();return d.stopEvent(a)}}}}})});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/files/file-dialog/file-dialog-view","Confluence.Editor.FileDialog.FileDialogView");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = 'includes/js/page-loading-indicator.js' */
define("confluence/page-loading-indicator",["jquery","ajs"],function(b,a){return function(c){function e(){return b(".confluence-page-loading-blanket",c)}function f(){return b(".confluence-loading-indicator",c)}return{show:function(){0===e().length&&b(c).append('\x3cdiv class\x3d"confluence-page-loading-errors"\x3e\x3c/div\x3e\x3cdiv class\x3d"confluence-page-loading-blanket aui-blanket" aria-hidden\x3d"false"\x3e\x3cdiv class\x3d"confluence-loading-indicator"\x3e\x3c/div\x3e\x3c/div\x3e');e().show();
f().spin({lines:12,length:8,width:4,radius:10,trail:60,speed:1.5,color:"#F0F0F0"})},hide:function(){f().stop();e().hide()},showUntilResolved:function(b,d){this.show();b.always(this.hide.bind(this));d&&b.fail(function(){a.messages.error(".confluence-page-loading-errors",{body:d})})},showUntilDialogVisible:function(c,d){var g=this,e=d||"An error has occurred connecting to the server. Please try again.";d=b(".aui-dialog:visible");var f=b(".aui-dialog2:visible");d.length||f.length||g.show();c.always(g.hide).fail(function(){a.messages.error(".confluence-page-loading-errors",
{body:e})});a.bind("show.dialog",function h(){a.unbind("show.dialog",h);g.hide()});if(null!=a.dialog2&&void 0!=a.dialog2)a.dialog2.on("show",function k(){a.dialog2.off("show",k);g.hide()})},destroy:function(){c.remove(".confluence-page-loading-blanket")}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence/page-loading-indicator","Confluence.PageLoadingIndicator");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = 'includes/soy/page-loading-indicator.soy' */
// This file was automatically generated from page-loading-indicator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }


Confluence.Templates.pageLoadingIndicator = function(opt_data, opt_ignored) {
  return '<div class="confluence-page-loading-errors"></div><div class="confluence-page-loading-blanket aui-blanket" aria-hidden="false"><div class="confluence-loading-indicator"></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.pageLoadingIndicator.soyTemplateName = 'Confluence.Templates.pageLoadingIndicator';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-trigger', location = 'src/js/aui/trigger.js' */
("undefined"===typeof window?global:window).__e7267b1c1152eac7940fef452c812cf8=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(a.isEnabled()){var c=document.getElementById(a.getAttribute("aria-controls"));c&&c.message&&c.message(b)}}"use strict";var g=e(__fb409c432b53d81bad1e174061f6886c),h=e(__1f10abc98a3cd10182350043fad370a4),f=e(__925085afe37c9c6789b788cc0b7c856e);(0,f.default)("data-aui-trigger",{type:f.default.type.ATTRIBUTE,events:{click:function(a,b){var c=
b.target,c=(0,g.default)(c).closest("a[href]",a);c.length&&c[0]!==a||(d(a,b),b.preventDefault())},mouseenter:function(a,b){d(a,b)},mouseleave:function(a,b){d(a,b)},focus:function(a,b){d(a,b)},blur:function(a,b){d(a,b)}},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")}}});(0,h.default)("aui/trigger");return{}}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-attributes', location = 'src/js/aui/internal/attributes.js' */
("undefined"===typeof window?global:window).__f8c6097d83140042571006b68a7d7daf=function(){function d(a){return null!==a}function e(a,b,c){c?a.setAttribute(b,""):a.removeAttribute(b)}function f(a,b){var c=function(a){return a.toLowerCase()===b.toLowerCase()},d=null===b,e=!d&&!a.values.filter(c).length;return d?a.hasOwnProperty("missingDefault")?a.missingDefault:null:e?a.hasOwnProperty("invalidDefault")?a.invalidDefault:a.hasOwnProperty("missingDefault")?a.missingDefault:null:a.values.length?a.values.filter(c)[0]:
null}function g(a,b,c){a.setAttribute(b.attribute,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.computeBooleanValue=d;b.setBooleanAttribute=e;b.computeEnumValue=f;b.setEnumAttribute=g;b.default={computeBooleanValue:d,setBooleanAttribute:e,computeEnumValue:f,setEnumAttribute:g};return b}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-internal-enforcer', location = 'src/js/aui/internal/enforcer.js' */
("undefined"===typeof window?global:window).__09b85388a8d04b37e92fac1a13b12753=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;var a=__56f99f629e22233a92f5a2b763037a87;if(a&&a.__esModule)d=a;else{var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;d=b}c.default=function(a){function c(b){return e(function(){return a.hasAttribute(b)},b+" wasn't defined")}function b(d){if(!c(d,a))return!1;var f=a.getAttribute(d);
return e(function(){return document.getElementById(f)},'an element with id set to "'+f+'" was not found')}function e(b,c){return!b()?(a?d.error(c,a):d.error(c),!1):!0}return{attributeExists:c,refersTo:b,satisfiesRules:e,ariaControls:function(){return b("aria-controls")},ariaOwns:function(){return b("aria-owns")}}};return c=c["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-inline-dialog2', location = 'src/js/aui/inline-dialog2.js' */
("undefined"===typeof window?global:window).__643ebe1ba212f0b2d6ce9da7aaa4b45f=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function l(a,b){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&b(d)}function n(a){a=a.target;(0,e.default)(a).set("mouse-inside",!0);a.message({type:"mouseenter"})}function o(a){a=a.target;(0,e.default)(a).set("mouse-inside",!1);a.message({type:"mouseleave"})}function m(a){(0,e.default)(a).set("mouse-inside",void 0);a.removeEventListener("mouseenter",
n);a.removeEventListener("mouseleave",o);"hover"===a.respondsTo&&((0,e.default)(a).set("mouse-inside",!1),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",o))}function j(a){var b=!a.hasAttribute("aria-hidden"),d=a.hasAttribute("open");if(b||a.open!==d)d?((0,e.default)(a).set("is-processing-show",!0),(0,f.default)(a).show(),(0,f.default)(a).isVisible()?l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.enable();b.setAttribute("aria-expanded","true")}):
a.open=!1,(0,e.default)(a).set("is-processing-show",!1)):((0,f.default)(a).hide(),(0,f.default)(a).isVisible()?a.open=!0:l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.disable();b.setAttribute("aria-expanded","false")}))}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var q=c(__fb409c432b53d81bad1e174061f6886c),p=c(__4b53fb5f345fea6af9595e80aa5a1cd2),r=c(__1f10abc98a3cd10182350043fad370a4),g=c(__f8c6097d83140042571006b68a7d7daf),s=c(__09b85388a8d04b37e92fac1a13b12753),
t=c(__a96071e28d103a38ba4dff141c560d4f),f=c(__f0d4aa95850a2ae4149235bd35e6184a),h=c(__925085afe37c9c6789b788cc0b7c856e),e=c(__ee92283b2d8dd277390f5838ef14fc90),u={click:function(a){if(a.open){if(!(0,f.default)(a).isPersistent())a.open=!1}else a.open=!0},mouseenter:function(a){a.open||(a.open=!0);a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout()},mouseleave:function(a){if(!(0,f.default)(a).isPersistent()&&a.open){a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout();var b=setTimeout(function(){if(!(0,
e.default)(a).get("mouse-inside"))a.open=!1},1E3);a._clearMouseleaveTimeout=function(){clearTimeout(b);a._clearMouseleaveTimeout=null}}},focus:function(a){a.open||(a.open=!0)},blur:function(a){if(!(0,f.default)(a).isPersistent()&&a.open)a.open=!1}},i={attribute:"responds-to",values:["toggle","hover"],missingDefault:"toggle",invalidDefault:"toggle"},h=(0,h.default)("aui-inline-dialog",{prototype:{get open(){return(0,f.default)(this).isVisible()},set open(a){g.default.setBooleanAttribute(this,"open",
a);j(this)},get persistent(){return this.hasAttribute("persistent")},set persistent(a){g.default.setBooleanAttribute(this,"persistent",a)},get respondsTo(){return g.default.computeEnumValue(i,this.getAttribute(i.attribute))},set respondsTo(a){var b=this.respondsTo;g.default.setEnumAttribute(this,i,a);b!==this.respondsTo&&m(this)},message:function(a){var b={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]}[this.respondsTo];if(b&&-1<b.indexOf(a.type))u[a.type](this,a);return this}},
created:function(a){(0,e.default)(a).set("is-processing-show",!1);l(a,function(b){b.setAttribute("aria-expanded",a.open);b.setAttribute("aria-haspopup","true")})},attributes:{"aria-hidden":function(a,b){if("true"===b.newValue){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&d.setAttribute("aria-expanded","false")}g.default.setBooleanAttribute(a,"open","false"===b.newValue)},open:function(a){document.body.contains(a)&&j(a)},"responds-to":function(a,b){var d=g.default.computeEnumValue(i,
b.oldValue),c=g.default.computeEnumValue(i,b.newValue);d!==c&&m(a)}},attached:function(a){(0,s.default)(a).attributeExists("id");a.hasAttribute("open")?(0,e.default)(a).get("is-processing-show")||j(a):j(a);m(a)},detached:function(a){a._auiAlignment&&a._auiAlignment.destroy()},template:function(a){var b=(0,q.default)('<div class="aui-inline-dialog-contents"></div>').append(a.childNodes);(0,q.default)(a).addClass("aui-layer").html(b)}});(0,r.default)("aui/inline-dialog2",h);(0,t.default)("InlineDialog2",
h);k.default=h;return k=k["default"]}.call(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'src/soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.inlineDialog2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.alignment) ? ' alignment="' + soy.$$escapeHtml(opt_data.alignment) + '"' : '') + ((opt_data.open) ? ' open' : '') + ((opt_data.persistent) ? ' persistent' : '') + ((opt_data.respondsTo) ? ' responds-to="' + soy.$$escapeHtml(opt_data.respondsTo) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  aui.inlineDialog2.inlineDialog2.soyTemplateName = 'aui.inlineDialog2.inlineDialog2';
}


aui.inlineDialog2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}));
};
if (goog.DEBUG) {
  aui.inlineDialog2.trigger.soyTemplateName = 'aui.inlineDialog2.trigger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview-support.js' */
define("cp/confluence/preview-support",["ajs"],function(b){var g=function(j){j.bridgeId=""+a(window);var h=window.location;var i=h.origin;if(!i){i=h.protocol+"//"+h.hostname+(h.port?":"+h.port:"")}window.parent.postMessage(j,i)};var d=function(i){var j=i.frameElement&&i.frameElement.getAttribute("name");var h=i.frameElement&&i.frameElement.getAttribute("data-is-fallback-mode-iframe")==="true";return j&&j==="fallback-mode-iframe"||h};var a=function(h){return h.frameElement&&h.frameElement.getAttribute("data-bridge-id")};var f=function(){var h=c.SELECTOR_STRINGS.IMAGE+", "+c.SELECTOR_STRINGS.LINK_IMAGE+", "+c.SELECTOR_STRINGS.EXTERNAL_IMAGE;if(c.isPDFSupported()){h+=", "+c.SELECTOR_STRINGS.PDF+", "+c.SELECTOR_STRINGS.LINK_PDF}return h};var e=function(){return c.SELECTOR_STRINGS.IMAGE+", "+c.SELECTOR_STRINGS.EXTERNAL_IMAGE+", "+c.SELECTOR_STRINGS.FILE+", "+c.SELECTOR_STRINGS.LINK_FILE+", "+c.SELECTOR_STRINGS.ATTACHMENT_MACRO};var c={SELECTOR_STRINGS:{IMAGE:"img.confluence-embedded-image[data-linked-resource-id]",EXTERNAL_IMAGE:"img.confluence-embedded-image.confluence-external-resource",PDF:"a.confluence-embedded-file[data-nice-type='PDF Document']",LINK_IMAGE:"a[data-linked-resource-type='attachment'][data-nice-type='Image']",LINK_PDF:"a[data-linked-resource-type='attachment'][data-nice-type='PDF Document']",FILE:"a.confluence-embedded-file",LINK_FILE:"a[data-linked-resource-type='attachment']",FILE_OVERLAY:"span.confluence-embedded-file-wrapper .file-type-desc-overlay, span.confluence-embedded-file-wrapper .comment-count-overlay",ATTACHMENT_MACRO:".plugin_attachments_container a.previewAttachmentLink"},VIEW_MODE:{FULL:"full",COMMENT:"comment",SIMPLE:"simple",EDIT:"edit"},isPDFSupported:function(){return b.DarkFeatures.isEnabled("pdf-preview")},areFilesSafe:function(h){var i=true;h.forEach(function(j){Object.keys(j).forEach(function(l){var k=typeof j[l];if(!(k==="string"||k==="number"||k==="boolean")){i=false}})});return i},getFileSelectorString:function(){if(b.DarkFeatures.isEnabled("previews.trigger-all-file-types")){return e()}else{return f()}},sendPreviewerToParent:function(j,i,h,k){var l=c.areFilesSafe(j||[]);g({type:"openPreviewOnParent",files:l?j:[],viewMode:i,fileQuery:h,analyticsSource:k})},autoShowAnnotationsOnParent:function(){g({type:"autoShowAnnotationsOnParent"})},isFallbackModeIframe:window.top!==window.self&&d(window)};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/preview.js' */
define("cp/confluence/preview",["underscore","jquery","cp/confluence/preview-support","ajs","confluence/jsUri"],function(m,g,h,k,d){var l,n,b=false;var c=g("#confluence-ui").length>0;g(document).ready(i);function i(){var q=g(h.getFileSelectorString());q.off("click.fb");var r=g(document.body);r.off("click.filePreviews");r.on("click.filePreviews",h.getFileSelectorString(),p);r.on("click.filePreviews",h.SELECTOR_STRINGS.FILE_OVERLAY,j);g(window).on("popstate",function(){if(!n&&k.DarkFeatures.isEnabled("previews.sharing.pushstate")){a()}});if(!c){a()}}function p(q){if(!q.altKey&&!q.ctrlKey&&!q.metaKey&&!g(this).parent().closest("a, #draft-changes-dialog, #cp-annotations").length){q.preventDefault();o(this,g(q.currentTarget).data("preview-view-mode"))}}function j(r){r.preventDefault();var q=g(r.target);var s=q.closest("span.confluence-embedded-file-wrapper");o(s.find(h.SELECTOR_STRINGS.IMAGE+","+h.SELECTOR_STRINGS.FILE),undefined,undefined,q.closest(".comment-count-overlay").length>0)}function o(s,t,q,z){if(!n){var u="confluence-previews-css";var r="media-viewer";WRM.require("wr!com.atlassian.confluence.plugins.confluence-previews:"+u);var A=g.Deferred(),w=A.promise();var v=setInterval(function(){for(var D=0;D<document.styleSheets.length;D++){var E=document.styleSheets[D];if(E.href&&(E.href.indexOf(u)!==-1||E.href.indexOf(r)!==-1)){y();return}}},100);var y=function(){A.resolve();clearInterval(v)};var C=k.Meta.get("static-resource-url-prefix");var B="com.atlassian.confluence.plugins.confluence-previews:mediaviewer-chunks";var x=C+"/download/resources/"+B+"/";n=g.when(WRM.require(["wr!com.atlassian.confluence.plugins.confluence-previews:confluence-previews-js","wrc!media-viewer"]),w);n.done(function(){l=require("cp/confluence/file-preview-loader");if(!c||s&&!b){b=true;f(s,t,q,z)}k.bind("reset-file-list.filePreviews",l.resetPreviewFileList)});if(!h.isFallbackModeIframe){Confluence.PageLoadingIndicator(g("body")).showUntilResolved(n,"We were unable to load the file previewer")}}else{n.done(m.partial(f,s,t,q,z))}return n}var f=function(u,v,q,x){var s=g("#content");var r=g(u).closest(".comment,.comment-content,.cq-content,.ic-content");if(!v){var y=k.Meta.get("content-type");var t=s.hasClass("page")||y==="page";var w=s.hasClass("blogpost")||y==="blogpost";var z=g(".files-tab-identifier").length;if(!t&&!w&&!z){v=h.VIEW_MODE.SIMPLE}else{if(r.length){v=h.VIEW_MODE.COMMENT}}}if(v===h.VIEW_MODE.COMMENT){l.showPreviewerForComment(u,r,v,x)}else{if(v===h.VIEW_MODE.SIMPLE){l.showPreviewerForSingleFile(u,v,q)}else{if(v===h.VIEW_MODE.EDIT){l.fetchAndShowPreviewerForSingleFile(u,h.VIEW_MODE.SIMPLE,q)}else{v=h.VIEW_MODE.FULL;l.showPreviewer(undefined,u,v,x)}}}};function a(){if(e()){var u=new d(window.location.href);var s=window.history.pushState&&k.DarkFeatures.isEnabled("previews.sharing.pushstate");var r=window.history.replaceState;var t=u.getQueryParamValue("preview");if(t&&!s){var v="#!/preview"+t;var q=decodeURIComponent(u.deleteQueryParam("preview").setAnchor(v).toString());if(r){r({},"",q)}else{window.location=q}}else{if(u.anchor().indexOf("!/preview")===0&&s){var q;if(t){q=u.setAnchor("")}else{q=u.addQueryParam("preview",u.anchor().substr("!/preview".length,u.anchor().length)).setAnchor("")}r({},"",q)}}o()}}function e(){var q=new d(window.location.href);return k.DarkFeatures.isEnabled("previews.sharing")&&(q.getQueryParamValue("preview")||(q.anchor()&&q.anchor().indexOf("!/preview")===0))}return{loadConfluencePreviews:o}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-previews:confluence-previews-jquery', location = '/js/confluence/jquery-previewer.js' */
require(["cp/confluence/preview","jquery"],function(b,a){a.fn.previewer=function(c){if(!a(this).length){return this}var d=a.extend({},c);return this.each(function(){var f=a(this);var e=f.closest("li");var g=d.src||f.attr("data-image-src")||f.attr("src");if(g){f.click(function(j){var i={src:g,type:d.type,thumbnail:g,title:d.title||e.attr("data-file-name")||g,id:e.attr("data-attachment-id"),ownerId:e.attr("data-owner-id")};var h=b.loadConfluencePreviews([i],d.viewMode||"simple",d.from||"custom");d.zindex&&h.done(function(){a(".cp-container").css({"z-index":d.zindex})})})}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor.js' */
define("confluence-editor/editor/page-editor","ajs jquery document window confluence/meta confluence/api/constants confluence-editor/editor/page-editor-message confluence/analytics-support confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/get-content-id confluence/api/event confluence/dark-features".split(" "),function(d,b,k,p,e,w,j,R,c,x,g){function y(){return e.get("content-type")==="page"||e.get("content-type")==="blogpost"}function z(a){b("#editpageform").find("input[name='atl_token']").val(a);
e.set("atl-token",a);e.set("atlassian-token",a);b("#atlassian-token").attr("content",a)}function L(a){if(!y()&&a){z(a.atlToken);g.trigger("rte.heartbeat",a)}else if(!a||!a.atlToken){if(a.status==="unauthorised")if(options.movedBy){j.closeMessages(["heartbeat-error"]);j.handleMessage("heartbeat-error",{type:"error",title:"Page permissions have changed",message:"You can\'t publish due to a page move or change in restrictions. You will be redirected in 10 seconds."})}else{j.closeMessages(["heartbeat-error"]);
j.handleMessage("heartbeat-error",{type:"error",title:"No access to this page",message:"This content has been moved, restricted, or deleted. You will be redirected in 10 seconds."})}g.trigger("rte.heartbeat-error","Invalid server response");d.logError("Unexpected server response for heartbeat:");d.log(a);setTimeout(function(){var a=e.get("base-url")+"/pages/viewpage.action?pageId="+e.get("content-id");p.location=a},1E4)}else{e.set("contributors-hash",a.contributorsHash);z(a.atlToken);
c.heartbeatType.normal();g.trigger("rte.heartbeat",a);b(k).trigger("resize.resizeplugin");g.trigger("editor-heartbeat",a)}}function M(a,b,f){(a.status>=500||a.status===0)&&c.heartbeatType.recovery();if(a.status===403||a.status===401)d.logError("Heartbeat error: Unauthorized");else{d.logError("Server error on heartbeat request:");d.log(f)}g.trigger("rte.heartbeat-error",a)}var n=[],m=[],l=[],A=false,o,B=function(a){c.UI.setButtonState(a,c.UI.saveButton);c.UI.setButtonState(a,c.UI.previewButton);c.UI.setButtonState(a,
c.UI.cancelButton)},q=function(a){var a=a||{},b=a.messageKey||"editor-error-message",c=a.message||"Something went wrong with the editor. Copy your unsaved changes and refresh the page to keep editing.";j.handleMessage(b,{title:a.title,type:"error",message:c},function(){a.disablePublish&&B(false)})},C=function(){g.trigger("analytics",{name:"confluence.editor.update",data:{contentId:e.get("content-id"),notifiedWatchers:b("#notifyWatchers").is(":checked"),addedVersionComment:b("#versionComment").val()!=null&&b("#versionComment").val().length>0,contentType:e.get("content-type"),
isTitleChanged:e.get("latest-published-page-title")!==b("#content-title").val(),spaceKey:e.get("space-key"),isNeverPublished:e.get("page-id")==="0"}})},O=function(a){var b=true;j.closeMessages(["offline-before-save-error"]);for(var c=0;c<m.length;c++){m[c](a)===false&&(b=false);if(a.isImmediatePropagationStopped())break}if(!b||a.isDefaultPrevented()||a.isPropagationStopped())return false;a.preventDefault();D(a).done(function(a){a=E(a);if(a==null){d.warn("Expected deferred object not returned by save handler");
C()}else a.done(C)}).fail(N)},N=function(a){var b=a||{};q({messageKey:b.messageKey||"offline-before-save-error",message:b.disablePublish?"Something went wrong with the editor. Copy your unsaved changes and refresh the page to keep editing.":"Unable to communicate with server. Saving is not possible at the moment.",disablePublish:b.disablePublish});a&&g.trigger("analytics",{name:"editor.save.error."+a.origin+"."+a.cause});c.UI.toggleSavebarBusy(false);c.Drafts.bindUnloadMessage()},D=function(a){var i=b.Deferred();i.resolve(a);return i.promise()},E=function(){b(c.getCurrentForm()).submit()};
g.bind("rte-ready",function(){c.UI.saveButton.bind("click",O)});g.bind("editor.error.message",function(a,b){q(b)});g.bind("dismiss.editor.error.message",function(a,b){j.closeMessages([b.messageKey]);b.enablePublish&&B(true)});var P=function(){var a;for(a=0;a<n.length;a++)c.UI.cancelButton.click(n[a]);var i=b(c.getCurrentForm());for(a=0;a<l.length;a++)i.submit(l[a]);b.unbind("init.rte",this)},F=function(a,c,f,e){e.push(f);if(d.Rte&&d.Rte.BootstrapManager&&d.Rte.BootstrapManager.isInitComplete())a.bind(c,
f);else if(!A){A=true;b.bind("init.rte",P)}},s=function(a,b,c){var e=null;d.Rte&&(d.Rte.BootstrapManager&&d.Rte.BootstrapManager.isInitComplete())&&(e=function(a,b,c){a.unbind(b,c)});for(var g=c.pop();g;){e&&e(a,b,g);g=c.pop()}},G=function(a){if(h!==a){h&&h.clear();a.start(c.heartbeat);h=a}},h,H=e.getNumber("heartbeat-interval")||6E4,t,I;t={start:function(a){d.debug("Changing heartbeat to the normal scheduler");I=setInterval(a,H)},clear:function(){clearInterval(I)}};var J,K=Math.max(H/5,5E3),u,v;
J={start:function(a){d.debug("Changing heartbeat to the recovery scheduler");v=0;var b=function(){a();var c=K*Math.pow(2,v);u=setTimeout(b,Math.min(c,3E5));v++};u=setTimeout(b,K)},clear:function(){clearTimeout(u)}};return{bookmark:"",MODE_RICHTEXT:"richtext",MODE_SOURCE:"source",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:null,contentHasChangedSinceLastSave:false,sourceInitialValue:false,isSubmitting:false,isCancelling:false,overrideBeforeSave:function(a){D=a},overrideSave:function(a){E=
a},addCancelHandler:function(a){F(c.UI.cancelButton,"click",a,n)},addSaveHandler:function(a){m.push(a)},addSubmitHandler:function(a){F(b(c.getCurrentForm()),"submit",a,l)},removeAllCancelHandlers:function(){s(c.UI.cancelButton,"click",n)},removeAllSaveHandlers:function(){s(c.UI.saveButton,"click",m)},removeAllSubmitHandlers:function(){s(b(c.getCurrentForm()),"submit",l)},hasContentChanged:function(){return!this.inRichTextMode()&&!this.contentHasChangedSinceLastSave?false:this.editorHasContentChanged()},
editorHasContentChanged:function(){if(d.Rte.getEditor()==null){d.debug("Editor: editorHasContentChanged - No active editor present. Returning false.");return false}return d.Rte.Content.editorHasContentChanged()},isEmpty:function(){var a=b(d.Rte.getEditor().getContent()).text();return!b.trim(a)},getCurrentTitle:function(){return b("#content-title")&&b("#content-title").val()},contentFormSubmit:function(){b(".editable-title #content-title").prop("disabled",true);return true},metadataSyncRequired:y,
heartbeat:function(a){var a=a||{},c={dataType:"json",contentId:e.get("content-id"),draftType:e.get("content-type"),collabService:"synchrony",editorVersion:"v1"};o=b.ajax({url:w.CONTEXT_PATH+"/api/v2/editor/heartbeat/start",type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},async:a.synchronousHeartbeat!==true}).done(L.bind(this)).fail(M.bind(this))},heartbeatType:{normal:function(){G(t)},recovery:function(){G(J)},reset:function(){h&&
h.clear();h=t;h.start(c.heartbeat)},cleanup:function(){if(h){h.clear();h=null}o&&o.abort&&o.abort()}},disableFrame:function(a){b("form",a).each(function(){b(this).unbind();this.onsubmit=function(){return false}});b("a",a).each(function(){b(this).attr("target","_top").unbind()});b("input, img",a).each(function(){b(this).unbind()})},previewFrameOnload:function(a,i){var f=require("tinymce");c.setMode(c.MODE_PREVIEW);f.activeEditor.setProgressState(false);c.disableFrame(a);var g=b("#main",a)[0];if(e.get("content-type")!==
"comment"&&b(g).find("#main-header").length===0){var h=b("#title-heading"),j=h.attr("class");b(g).prepend('<div id="preview-header"><div id="title-heading" class="'+j+'">'+h.html()+"</div></div>")}if(b(d.Rte.getEditor().getBody()).hasClass("resizable")){var r=b(i||"#previewArea iframe"),n=0,m=0,l,o=r.height();g&&function Q(){var a=b(g).outerHeight(true);if(n!==a){a!==r.height()&&r.height(0).height(Math.max(a,o));n=a;m=0}else m++;m<500&&(l=setTimeout(Q,500))}();b(k).one("mode-changed.resize-editor",
function(a,b){b!==c.MODE_PREVIEW&&l&&clearTimeout(l)})}else if(f.isIE||f.isOpera){f=b(p).height();h=b("#header-precursor").height()+b("#header").height()+b("#editor-precursor").height();j=b("#savebar-container").height();b("#preview iframe").height(f-h-j-4);b("#content.edit").height("auto")}},showRichText:function(a){var i=require("tinymce");d.setVisible("#wysiwyg",a);b(".toolbar-group-edit").toggleClass("assistive",a);b(".toolbar-group-preview").toggleClass("assistive",!a);b("#main").toggleClass("active-richtext",
a);i.isGecko&&a&&d.Rte.fixEditorFocus(c.bookmark)},showPreview:function(a){if(e.get("content-type")!=="comment"){var c=b("#content-title");if(c.hasClass("placeholded")){b("#preview-title-text").text("");b("#title-text").text("")}else{b("#preview-title-text").text(c.val());b("#title-text").text(c.val())}}d.setVisible("#preview",a);b(".toolbar-group-preview").toggleClass("assistive",a);b(".toolbar-group-edit").toggleClass("assistive",!a);b("#main, .editor-container").toggleClass("active-preview",a);
e.get("content-type")!=="comment"&&b("#full-height-container").length&&b("#full-height-container").toggleClass("active-preview",a)},showSource:function(a){a?this.showSourceArea():this.hideSourceArea();b("#main")[a?"addClass":"removeClass"]("active-source")},setMode:function(a){d.debug("Set mode: "+a);if(a===c.MODE_RICHTEXT){this.showRichText(true);this.showPreview(false);this.showSource(false)}else if(a===c.MODE_SOURCE){this.showSource(true);this.showRichText(false);this.showPreview(false)}else if(a===
c.MODE_PREVIEW){this.showPreview(true);this.showRichText(false);this.showSource(false);c.UI.spinner.removeClass("aui-icon-wait")}setTimeout(function(){var a=b(".toolbar-group-preview");a.height(0);a.height();a.height("auto");a.height("")},1);this.currentEditMode=a;b(k).trigger("mode-changed",[a])},getContentId:function(){return x()},addErrorMessage:function(a,c,f){var e=b("#"+a),f=f?"#all-messages":"#editor-messages";e.length?e.empty():e=b("<div></div>").attr("id",a).appendTo(f);d.messages.error(e,
{closeable:true,body:c})},changeMode:function(a,i){var f=require("tinymce");d.debug("Change mode: "+a);i=i||{};if(this.inRichTextMode()&&!d.Rte.BootstrapManager.isInitComplete()||this.currentEditMode===a)return false;var h=this.currentEditMode;g.trigger("rte-changeMode",a);if(a===c.MODE_PREVIEW){var m=d.Rte.getEditor();h===c.MODE_SOURCE&&c.transferSourceToEditor();if(f.isGecko&&h===c.MODE_RICHTEXT&&!c.bookmark)c.bookmark=f.activeEditor.selection.getBookmark();this.currentEditMode=a;f=function(a){typeof a!==
"object"&&(a={draftId:x()});a={contentId:a.draftId,contentType:e.get("content-type"),spaceKey:e.get("space-key"),xHtml:m.getContent(),outputType:c.PREVIEW_OUTPUT_TYPE};d.safe.ajax({type:"POST",url:w.CONTEXT_PATH+"/pages/rendercontent.action",data:a,success:c.replysetPreviewArea,timeout:2E4,error:function(){g.trigger("rte.preview.error",{status:0});j.closeMessages(["server-offline"]);q({messageKey:"server-offline",message:"Can\'t reach the server. Check you\'re connected to the internet and Confluence is up and running.",disablePublish:false});c.currentEditMode=
h;i.errorCallback&&i.errorCallback()}})};e.get("content-type")==="comment"?f():c.Drafts.save({forceSave:true,onSuccessHandler:f,onErrorHandler:f})}else this.setMode(a);a===c.MODE_RICHTEXT&&b(k).trigger("resize.resizeplugin");if(h===c.MODE_PREVIEW)if(f=k.getElementById("editor-preview-iframe")){var l=f.contentDocument||f.contentWindow.document;l.removeChild(l.documentElement);b(f).remove()}return false},replysetPreviewArea:function(a){var c=require("tinymce");b("#preview-error").remove();c.activeEditor.setProgressState(true);
var c=b("#previewArea"),d=b('<iframe id="editor-preview-iframe" src="about:blank" scrolling="yes" frameborder="0"></iframe>');c.html(d);c=d[0].contentDocument||d[0].contentWindow.document;c.open();c.write(a);c.close()},inRichTextMode:function(){return this.currentEditMode===c.MODE_RICHTEXT},isNewPage:function(){return b("#createpageform, #createpagetemplate").length>0},onInit:function(){var a=require("tinymce");c.setMode(c.MODE_RICHTEXT);a.activeEditor.onClick.add(function(){var a=c.UI.postingDatePicker;
a&&a.hide()})},contentChangeHandler:function(){this.contentHasChangedSinceLastSave=true},getCurrentForm:function(){return require("tinymce").activeEditor.formElement},transferSourceToEditor:function(){var a=c;if(a.sourceInitialValue){var b=a.getSourceAreaVal();if(b!==a.sourceInitialValue){var d=require("tinymce").activeEditor;d.setContent(b);d.setDirty(b)}}a.sourceInitialValue=false},hideSourceArea:function(){b("#editor-html-source-container").addClass("hidden");this.setToolBarInactive(false);this.transferSourceToEditor();
b("#rte-button-source-mode").removeClass("active");b("#rte-button-publish").unbind("click.source-save")},showSourceArea:function(){var a=require("tinymce");b("#editor-html-source-container").removeClass("hidden");this.setSourceAreaHeight();this.setToolBarInactive(true);this.sourceInitialValue=a.activeEditor.getContent();this.setSourceAreaVal(this.sourceInitialValue);b("#rte-button-source-mode").addClass("active");b("#rte-button-publish").bind("click.source-save",c.transferSourceToEditor)},getSourceAreaVal:function(){return b("#editor-html-source").val()},
setSourceAreaVal:function(a){b("#editor-html-source").val(a)},setSourceAreaHeight:function(){var a=d.Rte.getTinyMceEditorMinHeight();d.debug("HTML source height= "+a);var c=b("#editor-html-source")[0].scrollHeight;if(c>a){a=c;d.debug("ACTUAL HEIGHT "+c)}b("#editor-html-source-container").height(a+"px")},setToolBarInactive:function(a){b("#rte-toolbar").toggleClass("disabled",a)},isVisible:function(){return b("#wysiwyg:visible").length>0||b("#editor-html-source-container:visible").length>0||b("#preview:visible").length>
0}}});require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor",function(d){var b=require("jquery"),k=require("ajs"),p=require("confluence/api/event");k.Editor=k.Editor||{};Confluence.Editor=b.extend(Confluence.Editor||{},k.Editor,d);k.toInit(function(){p.bind("init.rte",Confluence.Editor.onInit)});k.Editor=Confluence.Editor});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor-ui.js' */
define("confluence-editor/editor/page-editor-ui","jquery confluence/templates ajs confluence/meta window moment document confluence/api/constants confluence-editor/editor/page-editor-message confluence-editor/editor/page-editor-quit-dialog confluence/analytics-support confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/editor-notifications confluence/api/event".split(" "),function(b,f,e,d,k,r,g,v,w,n,s,c,t,u){return function(){var a={},j=function(b,c){for(var c=c||a.buttons,d=0;d<c.length;d++)o(b,
c[d])},o=function(a,b){if(b)if(a){b.removeAttr("aria-disabled");b.removeAttr("disabled");b.removeClass("disabled")}else{b.attr("aria-disabled","true");b.attr("disabled","disabled");b.addClass("disabled")}},p=function(a){return a.length&&a.attr("aria-disabled")!=="true"},h=function(){return d.get("new-page")},q=function(){var a="";h()||(a="Edit"+" - ");return a};a.spinner=b("#rte-spinner");var l;l=f.Editor.Page.saveButton({contentType:d.get("content-type"),isNewPage:h()});b("#rte-button-publish").replaceWith(l);
l=b("#rte-button-publish");a.saveButton=l;a.editButton=b("#rte-button-edit");a.previewButton=b("#rte-button-preview");a.cancelButton=b("#rte-button-cancel");a.versionCommentInput=b("#versionComment");a.watchPageCheckbox=b("#watchPage");a.watchPageToolbarGroup=b(".toolbar-group-watch-page");a.buttons=[a.saveButton,a.editButton,a.cancelButton,a.previewButton];e.bind("editor-shared-drafts-published",function(){var b=/\(.+\)/g.exec(a.saveButton.data("tooltip"))[0];a.saveButton.text(f.Editor.Page.saveButtonText({contentType:d.get("content-type"),
isNewPage:h()})).attr("title",f.Editor.Page.saveButtonTitle({contentType:d.get("content-type"),isNewPage:h()})+b).tooltip({gravity:"s"})});a.setButtonsState=j;a.setButtonState=o;a.isButtonEnabled=p;a.registerFormButton=function(b,c){a[b]=c;a.buttons.push(c)};a.postingDatePicker=null;a.isFormEnabled=function(){for(var b=0;b<a.buttons.length;b++)if(p(a.buttons[b]))return true;return false};a.toggleSavebarBusy=function(b){if(b){if(!a.isFormEnabled())return false;a.spinner.addClass("aui-icon-wait");j(false)}else{a.spinner.removeClass("aui-icon-wait");
j(true)}return true};a.init=function(){function f(){b("#rte-ellipsis-menu").is(":visible")&&b("#rte-button-ellipsis").trigger("aui-button-invoke")}n.init();c.addSaveHandler(function(b){if(a.isButtonEnabled(a.saveButton)){a.toggleSavebarBusy(true);e.trigger("confluence.editor.on.save")}else{b.stopImmediatePropagation();b.preventDefault()}});e.trigger("rte.init.ui");c.isNewPage()&&b("#content-title").focus().select();c.addCancelHandler(function(a){n.process(a)});d.get("content-type")==="comment"&&c.addSaveHandler(function(){if(e.Rte.Content.isEmpty()){t.notify("warning",
"Comment text is empty. Cannot create empty comments.");a.toggleSavebarBusy(false);return false}});(d.get("content-type")==="comment"||d.get("content-type")==="template")&&c.addCancelHandler(function(b){if(a.isFormEnabled()&&c.hasContentChanged()&&!c.isEmpty()){var m=d.get("content-type")==="comment"?"Your comment will be lost.":"Your unsaved template changes will be lost.";if(!k.confirm(m)){b.stopImmediatePropagation();return false}}});a.versionCommentInput.on("keypress",function(a){a.keyCode===13&&n.process(a).done(function(){u.trigger("analytics",
{name:"confluence.editor.update",data:{contentId:d.get("content-id"),notifiedWatchers:b("#notifyWatchers").is(":checked"),addedVersionComment:b("#versionComment").val()!=null&&b("#versionComment").val().length>0,contentType:d.get("content-type"),isTitleChanged:d.get("latest-published-page-title")!==b("#content-title").val(),spaceKey:d.get("space-key"),isNeverPublished:d.get("page-id")==="0"}})})});c.addSubmitHandler(function(a){return c.contentFormSubmit(a)});this.currentEditMode=this.MODE_RICHTEXT;
a.editButton.click(function(b){var d=require("tinymce");if(a.isFormEnabled()){c.changeMode(c.MODE_RICHTEXT);setTimeout(function(){e.Rte.getEditor().focus();d.isGecko&&c.bookmark&&e.Rte.getEditor().selection.moveToBookmark(c.bookmark)},0);a.cancelButton.enable()}b.preventDefault()});a.previewButton.click(function(d){var m=require("tinymce");if(a.isFormEnabled()&&c.currentEditMode!==c.MODE_PREVIEW){f();j(false);a.spinner.addClass("aui-icon-wait");if(m.isGecko&&!c.bookmark)c.bookmark=m.activeEditor.selection.getBookmark();
c.changeMode(c.MODE_PREVIEW,{errorCallback:function(){j(true);a.spinner.removeClass("aui-icon-wait")}});a.cancelButton.disable();s.publish("confluence.editor.preview",{contentId:e.params.contentId,pageVersion:e.params.pageVersion||"null"});b(k).trigger("preview.tinymce",{pageVersion:e.params.pageVersion||"null"})}d.preventDefault()});b("#editor-html-source").change(c.setSourceAreaHeight).keyup(c.setSourceAreaHeight);b("#rte-button-labels").bind("updateLabel",function(){var a=+d.get("num-labels")||
0,c="Labels";a===1?c=e.format("{0} Label",a):a>1&&(c=e.format("{0} Labels",a));b("#rte-button-labels").attr("data-tooltip",c)});var i=b("#PostingDate");if(i.length){i.attr("max",r().format("YYYY-MM-DD"));a.postingDatePicker=i.datePicker({overrideBrowserDefault:true});a.postingDatePicker.hide()}b("#wysiwygTextarea_parent .mceProgress, #wysiwygTextarea_parent .mceBlocker").on("click",function(){e.Rte.getEditor().focus()});b(k).bind("render-content-loaded",
function(d,e){var f=b("#previewArea iframe");if(f.contents().find("body")[0]==e){c.previewFrameOnload(e,f);[a.saveButton,a.editButton,a.previewButton].forEach(function(a){o(true,a)});f.focus();k.focus();b(g).trigger("iframeAppended",f)}});if(d.get("heartbeat")){c.heartbeat();c.heartbeatType.normal();e.bind("rte-destroyed",c.heartbeatType.cleanup)}e.bind("watchpage.pageoperation",function(){a.toggleWatchPage(false)});e.bind("unwatchpage.pageoperation",function(){a.toggleWatchPage(true)});var h=g.title,
i=require("tinymce");if(!i||i.majorVersion<4){if(d.get("new-page")&&d.get("form-name")==="inlinecommentform"){g.title="Edit"+g.title;h=g.title}if(d.get("new-page")&&b.trim(b("input#content-title").val()))g.title=q()+b("input#content-title").val()+" - "+d.get("space-name")+" - "+d.get("site-title")}b("input#content-title").on("change input",function(){if(d.get("content-type")!=="template"){var a=q();g.title=b.trim(this.value)?a+this.value+" - "+d.get("space-name")+" - "+d.get("site-title"):
h}});b("body",b("#wysiwygTextarea_ifr").contents()).click(f);e.trigger("init.rte-control")};a.toggleWatchPage=function(b){if(b&&d.get("content-type")==="comment"){a.watchPageToolbarGroup.show();if(a.watchPageCheckbox.length)a.watchPageCheckbox[0].checked=false}else a.watchPageToolbarGroup.hide()};return a}});require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor-ui",function(b){require("ajs").bind("init.rte",function(){var f=b();Confluence.Editor.UI=f;f.init()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'tinymce3/plugins/insertwiki/insert-wiki-markup.soy' */
// This file was automatically generated from insert-wiki-markup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.InsertWiki.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.InsertWiki == 'undefined') { Confluence.Templates.InsertWiki = {}; }


Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog = function(opt_data, opt_ignored) {
  return '<form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><textarea class=\'monospaceInput textarea originalDefault\' id=\'insert-wiki-textarea\' name=\'wikitext\'></textarea></form>';
};
if (goog.DEBUG) {
  Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog.soyTemplateName = 'Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog';
}


Confluence.Templates.InsertWiki.previewWikiIframeContent = function(opt_data, opt_ignored) {
  return '<!DOCTYPE html><html class="insert-wiki-markup-dialog"><head></head><body class="wiki-content previewWiki"></body></html>';
};
if (goog.DEBUG) {
  Confluence.Templates.InsertWiki.previewWikiIframeContent.soyTemplateName = 'Confluence.Templates.InsertWiki.previewWikiIframeContent';
}


Confluence.Templates.InsertWiki.wikiMarkupDialog = function(opt_data, opt_ignored) {
  return '<p id="insert-wiki-info-title">' + soy.$$escapeHtml('Enter wiki markup or markdown below. Confluence will convert your content to editor format and insert it into your page.') + '</p><form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><h3 class="wiki-title"><span id="insert-wiki-insert-title">' + soy.$$escapeHtml('Insert') + '</span><span id="insert-wiki-preview-title">' + soy.$$escapeHtml('Preview') + '</span></h3><textarea class=\'monospaceInput textarea\' id=\'insert-wiki-textarea\' name=\'wikitext\'></textarea><!-- --><div class=\'example-container\' id=\'insert-wiki-textarea-preview\'></div></form>';
};
if (goog.DEBUG) {
  Confluence.Templates.InsertWiki.wikiMarkupDialog.soyTemplateName = 'Confluence.Templates.InsertWiki.wikiMarkupDialog';
}


Confluence.Templates.InsertWiki.wikiErrorSubDialog = function(opt_data, opt_ignored) {
  return '<p class=\'warning\'>' + soy.$$escapeHtml(opt_data.warningMessage) + '</p><p class=\'exception-report\'><span class=\'exceptionMessage\'>' + soy.$$escapeHtml(opt_data.exceptionMessage) + '</span></p>';
};
if (goog.DEBUG) {
  Confluence.Templates.InsertWiki.wikiErrorSubDialog.soyTemplateName = 'Confluence.Templates.InsertWiki.wikiErrorSubDialog';
}


Confluence.Templates.InsertWiki.wikiParserSelector = function(opt_data, opt_ignored) {
  var output = '<span class="wiki-parser-selector"><form action="#" method="post" id="d" class="aui"><select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector"><option value="' + soy.$$escapeHtml(opt_data.DEFAULT.val) + '">' + soy.$$escapeHtml(opt_data.DEFAULT.label) + '</option>';
  var wikiLangList26 = soy.$$getMapKeys(opt_data.WIKI);
  var wikiLangListLen26 = wikiLangList26.length;
  for (var wikiLangIndex26 = 0; wikiLangIndex26 < wikiLangListLen26; wikiLangIndex26++) {
    var wikiLangData26 = wikiLangList26[wikiLangIndex26];
    output += (opt_data.WIKI[wikiLangData26].val != opt_data.DEFAULT.val) ? '<option value="' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].val) + '">' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].label) + '</option>' : '';
  }
  output += '</select></form></span>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.InsertWiki.wikiParserSelector.soyTemplateName = 'Confluence.Templates.InsertWiki.wikiParserSelector';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor.soy' */
// This file was automatically generated from page-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.Editor.Page.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.Page == 'undefined') { Confluence.Templates.Editor.Page = {}; }


Confluence.Templates.Editor.Page.saveButton = function(opt_data, opt_ignored) {
  return '<button id="rte-button-publish" data-test-id="tiny-publish-button" class="aui-button aui-button-primary default-submit" type="submit" name="confirm" value="Save" title="' + Confluence.Templates.Editor.Page.saveButtonTitle(opt_data) + '" tabindex="101">' + Confluence.Templates.Editor.Page.saveButtonText(opt_data) + '</button>';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButton.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButton';
}


Confluence.Templates.Editor.Page.saveButtonTitle = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Publish your blog post') : (opt_data.contentType == 'page') ? (opt_data.isNewPage) ? soy.$$escapeHtml('Publish changes') : soy.$$escapeHtml('Update the published page') : soy.$$escapeHtml('Save'));
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButtonTitle.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButtonTitle';
}


Confluence.Templates.Editor.Page.previewButton = function(opt_data, opt_ignored) {
  return '<button class="aui-button toolbar-item aui-button-light" id="rte-button-preview" data-test-id="tiny-preview-button" title="' + soy.$$escapeHtml('Preview') + '" type="button"><span class="trigger-text">' + soy.$$escapeHtml('Preview') + '</span></button>';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.previewButton.soyTemplateName = 'Confluence.Templates.Editor.Page.previewButton';
}


Confluence.Templates.Editor.Page.saveButtonText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'blogpost' || opt_data.contentType == 'page') ? soy.$$escapeHtml('Publish') : (opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Publish') : soy.$$escapeHtml('Save'));
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.saveButtonText.soyTemplateName = 'Confluence.Templates.Editor.Page.saveButtonText';
}


Confluence.Templates.Editor.Page.cancelButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.contentType == 'page' || opt_data.contentType == 'blogpost') ? '<ul class="aui-buttons rte-toolbar-group-done close"><button class="aui-button shared-drafts" type="submit" id="rte-button-cancel" data-test-id="tiny-cancel-button" name="cancel" value="cancel"><span class="icon aui-icon aui-icon-small aui-iconfont-close-dialog"></span></button></ul>' : '<button class="toolbar-item-link aui-button aui-button-link" type="submit" id="rte-button-cancel" data-test-id="tiny-cancel-button" name="cancel" value="cancel"><span class="trigger-text">' + ((opt_data.contentType == 'page' || opt_data.contentType == 'blogpost') ? soy.$$escapeHtml('Close') : soy.$$escapeHtml('Cancel')) + '</span></button>');
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.cancelButton.soyTemplateName = 'Confluence.Templates.Editor.Page.cancelButton';
}


Confluence.Templates.Editor.Page.quitDialogHeader = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.dialogType) {
    case 'delete':
    case 'revert':
      output += (opt_data.newPage) ? (opt_data.contentType == 'blogpost') ? '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete unpublished blog post?') + '</h2>' : '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete unpublished page?') + '</h2>' : '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Revert to last published version?') + '</h2>';
      break;
    case 'publish':
    case 'update':
      output += '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Publish the page?') + '</h2>';
      break;
    case 'diff':
      output += '<h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Unpublished changes') + '</h2>';
      break;
  }
  output += '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.quitDialogHeader.soyTemplateName = 'Confluence.Templates.Editor.Page.quitDialogHeader';
}


Confluence.Templates.Editor.Page.quitDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.dialogType) {
    case 'revert':
      output += (opt_data.contributors.length == 0) ? ((opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('This will permanently delete all the changes you made since this blog post was last published') : soy.$$filterNoAutoescape('This will permanently delete all the changes you made since this page was last published.')) + '<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Show changes') + '</a></div>' : soy.$$filterNoAutoescape('This will permanently delete all the changes that the following people have made, since this page was last published.') + '<div class="aui-dialog2-footer-hint"><a id="qed-show-diff-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Show changes') + '</a></div>' + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'delete':
      output += (opt_data.contributors.length == 0) ? (opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('Once you delete an unpublished blog post, it\x27s gone for good.') : soy.$$filterNoAutoescape('If you delete an unpublished page, it\x27s gone for good.') : ((opt_data.contentType == 'blogpost') ? soy.$$filterNoAutoescape('This will permanently delete this blog post, which you and these other people have worked on.') : soy.$$filterNoAutoescape('This will permanently delete this page, which you and these other people have worked on.')) + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'publish':
    case 'update':
      output += soy.$$filterNoAutoescape('You\x27ll also be publishing changes made by these people:') + Confluence.Templates.Editor.Page.contributorList(opt_data);
      break;
    case 'diff':
      output += '<div><div class="legend"><span class="legend-title">' + soy.$$escapeHtml('Key') + ': </span><span class="diff-html-added">' + soy.$$escapeHtml('This line was added.') + '</span><span class="diff-html-removed">' + soy.$$escapeHtml('This line was removed.') + '</span><span class="diff-html-changed">' + soy.$$escapeHtml('Formatting was changed.') + '</span></div>' + ((! opt_data.newDialog) ? '<a class="aui-button aui-button-link" id="qed-hide-diff-button">' + soy.$$escapeHtml('Show contributors') + '</a>' : '') + '<hr/><div class="wiki-content"></div><span class="aui-icon aui-icon-wait diff-spinner"></span></div>';
      break;
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.quitDialogContent.soyTemplateName = 'Confluence.Templates.Editor.Page.quitDialogContent';
}


Confluence.Templates.Editor.Page.hiddenInputCancel = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="cancel" value="cancel">';
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.hiddenInputCancel.soyTemplateName = 'Confluence.Templates.Editor.Page.hiddenInputCancel';
}


Confluence.Templates.Editor.Page.contributorList = function(opt_data, opt_ignored) {
  var output = '<ul class="contributor-list">';
  var contributorList147 = opt_data.contributors;
  var contributorListLen147 = contributorList147.length;
  for (var contributorIndex147 = 0; contributorIndex147 < contributorListLen147; contributorIndex147++) {
    var contributorData147 = contributorList147[contributorIndex147];
    output += '<li data-username="' + soy.$$escapeHtml(contributorData147.name) + '" data-account-id="' + soy.$$escapeHtml(contributorData147.accountId) + '"><div class="contributor-avatar ' + ((contributorData147.active) ? 'active' : '') + '"><img src="' + soy.$$escapeHtml(contributorData147.avatarURL) + '"></div><div class="contributor-detail"><p class="contributor-detail-name"><span>' + soy.$$escapeHtml(contributorData147.fullname) + '</span></p><p class="contributor-detail-last-modification"><span>' + soy.$$escapeHtml('Last edited') + ' ' + soy.$$escapeHtml(contributorData147.formattedLastModification) + '</span></p></div></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.Templates.Editor.Page.contributorList.soyTemplateName = 'Confluence.Templates.Editor.Page.contributorList';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'insert-image-dialog/insert-image-dialog.js' */
define("confluence-editor/insert-image-dialog/insert-image-dialog","jquery ajs underscore confluence-link-browser/link-object confluence-link-browser/link-adapter confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/meta".split(" "),function(b,f,k,h,l,g,m){var e={beforeShowListeners:[],panelComponent:[],sizeToFit:function(){this.each(function(){var a=this,c=b(this).parent(),d=c.height();c.children().each(function(){this!==a&&b(this).is(":visible")&&(d=d-b(this).outerHeight())});c=b(this).outerHeight()-
b(this).height();b(this).css("height",Math.max(0,d-c)+"px")});return this},defaultInsertImageDialog:function(){f.Rte.BookmarkManager.storeBookmark();e.insertImageDialog(function(a){var c=require("tinymce");f.Rte.BookmarkManager.restoreBookmark();var d={},i=null,g=true;if(a.url){d={url:a.url,filename:a.url,contentId:a.contentId};i="fromWeb";c.confluence.ImageUtils.insertFromProperties(d)}else{var h=a.selectItems.length>1;k.each(a.selectItems,function(a,b){var j=a.get("ownerId");b===0&&(i=j===m.get("content-id")?
"thisPage":"otherPage");if(a.isImage()){d={filename:a.getFileName(),contentId:j};c.confluence.ImageUtils.insertFromProperties(d,h)}else{g=false;f.MacroBrowser.getMacroMetadata("view-file")?e._insertFilePlaceholderToEditor(a):e._insertLinkToEditor(a)}})}require(["conf/confluence-drag-and-drop/analytics/files-upload-analytics"],function(c){c.triggerEvent("confluence.insert-files-dialog.insert",a.selectItems,g,i)});b("#comments-section").length&&f.Rte.fixEditorFocus()},function(){f.Rte.BookmarkManager.restoreBookmark()})},
findPanelComponentById:function(a){for(var c=g.ImageDialog.panelComponent,d=0,b=c.length;d<b;d++)if(c[d].id==a)return c[d]},insertImageDialog:function(a,c){var b=new g.FileDialog.FileDialogView({submitCallback:a,cancelCallback:c,beforeShowListeners:e.beforeShowListeners,panelComponents:e.panelComponent});b.render();return b},_insertLinkToEditor:function(a){var b=h.fromREST(a.attributes);b.attrs["data-linked-resource-container-id"]=a.get("ownerId");b.attrs.href=a.get("downloadUrl");l.setLink(b)},_insertFilePlaceholderToEditor:function(a){var b=
{name:a.get("fileName"),page:a.get("parentTitle"),space:a.get("space")?a.get("space").key:"",date:a.get("datePath"),ownerId:a.get("ownerId")};require(["confluence-editor/utils/attachments-insert-utils"],function(a){a.insertFilePlaceholder(b)})}};return e});
require("confluence/module-exporter").safeRequire("confluence-editor/insert-image-dialog/insert-image-dialog",function(b){require("jquery").fn.sizeToFit=b.sizeToFit;Confluence.Editor.ImageDialog=b;Confluence.Editor.defaultInsertImageDialog=b.defaultInsertImageDialog;Confluence.Editor.ImageDialog.findPanelComponentById=b.findPanelComponentById;Confluence.Editor.insertImageDialog=b.insertImageDialog;Confluence.Editor.ImageDialog._insertLinkToEditor=b._insertLinkToEditor;Confluence.Editor.ImageDialog._insertFilePlaceholderToEditor=
b._insertFilePlaceholderToEditor});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'panel-components/panel-components-init.js' */
define("confluence-editor/panel-components/panel-components-init",["confluence/legacy-editor-global-AVOID-IF-POSSIBLE","ajs"],function(a,d){return function(){if(a&&a.ImageDialog&&a.ImageDialog.panelComponent){var b=a.FileDialog.eventListener,e=a.FileDialog.ExternalPanelView,f=a.FileDialog.SearchPanelView,g=a.FileDialog.AttachmentsPanelView,c=a.ImageDialog.panelComponent;"template"!==d.Meta.get("content-type")&&(b=new g({eventListener:b}),c.push(b));c.push(new e);c.push(new f)}}});
require("confluence/module-exporter").safeRequire("confluence-editor/panel-components/panel-components-init",function(a){require("ajs").toInit(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'drafts/page-editor-drafts.js' */
define("confluence-editor/page-editor-drafts","jquery ajs confluence/meta confluence/api/constants confluence-editor/editor/page-editor-message confluence/analytics-support confluence/legacy-editor-global-AVOID-IF-POSSIBLE confluence/api/event confluence/dark-features confluence/api/ajax confluence-editor/loader/collaborative-helper".split(" "),function(b,f,e,s,v,n,c,o,k,w,l){function r(){var a=p();if(g!==a){g=a;return true}return false}function p(){var a=b("#content-title");return a.hasClass("placeholded")?
"":a.val()}var q=false,m=false,g="",t=e.get("remote-user")!=="",u=k.isEnabled("editor.ajax.save")&&!k.isEnabled("editor.ajax.save.disable");o.bind("editor-shared-drafts-published editor-shared-drafts-discarded",function(){m=q=false});o.bind("rte-ready",function(){g=p()});return{isDraftSaved:function(){return q},isDraftManuallySaved:function(){return m},isDraftBlank:function(){return f.Rte.Content.isEmpty()&&!b.trim(c.getCurrentTitle())},isNewContent:function(){return f.Rte.getEditor()&&e.getBoolean("new-page")===
true},isDraftDirty:function(){return c.hasContentChanged()||c.Drafts.isDraftSaved()&&!c.Drafts.isDraftManuallySaved()},unloadMessage:function(a){if(a&&(a.srcElement&&a.srcElement.activeElement instanceof HTMLIFrameElement)&&(e.get("content-type")==="page"||e.get("content-type")==="blogpost"))n.publish("confluence.editor.close",{source:"closeWindow",contentId:e.get("content-id"),currentVersion:e.get("page-version")||"null"});a=function(a,b){c.Drafts.save({skipErrorHandler:true,forceSave:a,manualSave:b,
async:false})};if(typeof seleniumAlert!=="undefined")a();else{a(r());if(l.isCollaborativeEditingAvailable()&&l.hasUnsavedChanges())return "We haven\'t finished saving your changes. If you leave before seeing the \'Draft saved\' message, you might lose your changes."}},bindUnloadMessage:function(){b(window).bind("beforeunload",c.Drafts.unloadMessage)},unBindUnloadMessage:function(){b(window).unbind("beforeunload")},save:function(a){a=a||{};if(c.isSubmitting||!c.hasContentChanged()&&!r()&&!a.forceSave)f.debug("skipping draft save");else{f.debug("preparing to save editor draft");
var h=b("#newSpaceKey"),g=b("#originalVersion"),k=c.inRichTextMode(),n=a.async===void 0?true:a.async,h={draftId:e.get("draft-id"),pageId:e.get("page-id"),type:f.params.draftType,title:p(),spaceKey:h.length?h.val():encodeURIComponent(e.get("space-key"))};b.extend(h,l.getEditorContent());if(g.length)h.pageVersion=parseInt(g.val(),10);b.ajax({type:"POST",url:s.CONTEXT_PATH+"/rest/tinymce/1/drafts",data:JSON.stringify(h),contentType:"application/json",dataType:"text json",success:function(j){if(j!=null&&
(!(t&&j.draftId===0)||!u)){c.contentHasChangedSinceLastSave=false;k&&f.Rte.Content.editorResetContentChanged();q=true;m=!!a.manualSave;e.set("draft-id",j.draftId+"");b("#draftId",c.getCurrentForm()).val(j.draftId);b("#draft-error").remove();if(!l.isCollaborativeEditingAvailable()){var g=b("#draft-status"),d;if(!(d=j.time)){var i=new Date;d=i.getHours();var i=i.getMinutes(),h=d>11?"PM":"AM";d=d%12;d=(d==0?"12":d)+":"+(i<10?"0":"")+i+" "+h}i=m?f.format("Draft saved at {0}",d):f.format("Draft autosaved at {0}",
d);g.attr("data-tooltip",i);g.html(i)}if(b.isFunction(a.onSuccessHandler))a.onSuccessHandler(j);c.Drafts.lastSaveTime=d;o.trigger("rte-draft-saved",{draftId:j.draftId})}},error:function(b,c){if(!a.skipErrorHandler&&typeof a!=="undefined"&&typeof a.onErrorHandler==="function")a.onErrorHandler(c)},timeout:3E4,async:n})}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-editor/page-editor-drafts","Confluence.Editor.Drafts");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'editor/page-editor-permissions.js' */
define("confluence-editor/editor/page-editor-permissions",["ajs","jquery"],function(b,d){var c={updateEditPageRestrictions:function(c,a,e,g){var f=d("#rte-button-restrictions"),i=f.find(".icon"),h="";c||a?(i.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass(c?"aui-iconfont-locked icon-red":"aui-iconfont-unlocked icon-red"),h="Restrictions apply"):(i.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass("aui-iconfont-unlocked"),h=e?
"Restrictions apply":"Unrestricted");f.attr("data-tooltip",h);f.data("explicit-restrictions",c);f.data("inherited-restrictions",a);f.data("restrictionsHash",g)},handleHeartbeat:function(j,a){if("undefined"!==typeof a.restrictionsHash){var e=d("#rte-button-restrictions");if(e.data("restrictionsHash")!==a.restrictionsHash)if(d("#update-page-restrictions-dialog").is(":visible")&&b.PagePermissions.updateRestrictionsDialog)b.PagePermissions.updateRestrictionsDialog(),
e.data("restrictionsHash",a.restrictionsHash);else{var g=""!==a.restrictionsHash,f=a.hasViewRestrictions,e=!!e.data("inherited-restrictions");c.updateEditPageRestrictions(f,e,g,a.restrictionsHash)}}},init:function(){b.bind("editor-heartbeat",c.handleHeartbeat);b.bind("edit-page-restrictions-updated",function(b,a){c.updateEditPageRestrictions(a.hasExplicitRestrictions,a.hasInheritedRestrictions,a.hasAnyExplicitRestrictions,a.restrictionsHash)})}};return c});
require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor-permissions",function(b){var d=require("ajs"),c=require("jquery");d.PagePermissions=d.PagePermissions||{};c.extend(d.PagePermissions,{updateEditPageRestrictions:b.updateEditPageRestrictions});d.toInit(b.init)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-editor', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.JiraRoadmapMacro.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.JiraRoadmapMacro == 'undefined') { Confluence.Templates.JiraRoadmapMacro = {}; }


Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel = function(opt_data, opt_ignored) {
  return '<section id="confluence-jira-roadmap-dialog" class="jiraroadmap jiraroadmap-dialog" class="aui-dialog2 aui-dialog2-xlarge aui-layer" role="dialog" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Jira timeline') + '</h2></header><div class="aui-dialog2-content"><div class="dialog-content"><form action="" onsubmit="return false" class="aui"><div class="field-group select-tenant"><div class="field-label">' + soy.$$escapeHtml('Paste a Jira instance URL') + '</div><input id="tenant-url" type="text" class="text" /></div><div class="field-group select-project"><div class="field-label">' + soy.$$escapeHtml('Project') + '</div><input id="project-select" /></div><div class="field-group select-board"><div class="field-label">' + soy.$$escapeHtml('Board') + '</div><input id="board-select" /></div></form><div class="field-error" id="field-error"></div><div tabindex="-1" id="roadmap-preview" class="jiraroadmap-iframe-container"></div></div></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><form onsubmit="return false" class="aui"><a tabindex="0" id="insert-jira-roadmap-dialog" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Save') + '</a><a tabindex="0" class="close-jira-roadmap-dialog aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</a></form></div></footer></section>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel';
}


Confluence.Templates.JiraRoadmapMacro.roadmapError = function(opt_data, opt_ignored) {
  return '<div class="error-screen"><div class="message" id="preview-error-message">' + ((opt_data.type == 'permission') ? '<h2>' + soy.$$escapeHtml('You don\x27t have permission to view this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check the project settings in Jira.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/adminjiracloud/managing-project-permissions-776636362.html" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>' : (opt_data.type == 'validation' || opt_data.type == 'not-available') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/jirasoftwarecloud/roadmap-957979308.html#Roadmap-TroubleshootyourRoadmap" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>' : (opt_data.type == 'invalid-url') ? '<h2>' + soy.$$escapeHtml('This doesn\x27t look like a URL of Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/>' : (opt_data.type == 'inconsistent-env') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('This Jira timeline is in a different environment.') + '</p>' : (opt_data.type == 'project-type') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('This macro only supports next-gen Jira Software projects.') + '</p>' : (opt_data.type == 'service-unavailable') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Try again later, or contact Atlassian Support if this keeps happening.') + '</p><br/><a href="https://support.atlassian.com/contact/#/" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Atlassian Support') + '</a>' : '<h2>' + soy.$$escapeHtml('This Jira timeline is not currently active.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/jirasoftwarecloud/roadmap-957979308.html" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapError.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapError';
}


Confluence.Templates.JiraRoadmapMacro.roadmapIframe = function(opt_data, opt_ignored) {
  return '<iframe id="roadmap-iframe" src="' + soy.$$escapeHtml(opt_data.iframeSrc) + '" width="100%" frameBorder="0" ></iframe>' + ((opt_data.roadmapUrl != '') ? '<div class="preview-footer"><a class="aui-button aui-button-link" target="_blank" href="' + soy.$$escapeHtml(opt_data.roadmapUrl) + '">' + soy.$$escapeHtml('View in Jira') + '</a></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapIframe.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapIframe';
}


Confluence.Templates.JiraRoadmapMacro.roadmapLoading = function(opt_data, opt_ignored) {
  return '<div class="jiraroadmap-loading"><div class="spinner-container"><div class="spinner"><svg focusable="false" size="50" height="50" width="50" viewBox="0 0 50 50"><circle cx="25" cy="25" r="22.5"></circle></svg></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapLoading.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapLoading';
}


Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage = function(opt_data, opt_ignored) {
  return '<div class="error-screen"><div class="message" id="preview-error-message"><p>' + soy.$$escapeHtml(opt_data.message) + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a>' + ((opt_data.docUrl != '' && opt_data.buttonText != '') ? '<a href="' + soy.$$escapeHtml(opt_data.docUrl) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml(opt_data.buttonText) + '</a>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-editor', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/jiraroadmap-helper.js' */
define("confluence-advanced-macros/jiraroadmap-helper",["jquery","confluence/templates","confluence/legacy-message-queue"],function(h,i,k){var d={getIsTinyMce:function(){try{return 0<document.querySelectorAll('[data-testid="TinyMCEClientRendererTestId"]').length||0<document.querySelectorAll('[data-test-id="tinymce-editor-loaded"]').length}catch(c){return!0}},makeGetRequest:function(c,b){var a=new XMLHttpRequest;a.open("GET",c);a.withCredentials=!0;a.onload=function(){if(200===a.status){var c=JSON.parse(a.responseText);
b({data:c,status:a.status})}else try{b({data:null,error:JSON.parse(a.responseText),status:a.status})}catch(d){b({data:null,error:null,status:a.status})}};a.onerror=function(){b({data:null,error:null,status:a.status})};a.send()},convertParamsToFragmentUrl:function(c,b,a){var d=/[\w][\w]+/g.exec(b);return d&&d[0]?c+"/rest/greenhopper/1.0/roadmap/fragment/confluenceMacro/"+b+"?fragmentHost="+window.location.protocol+"//"+window.location.hostname+(a?"&boardId="+a:""):null},convertParamsToRoadmapUrl:function(c,
b,a,d){return d?c+"/jira/software/c/projects/"+b+"/boards/"+a+"/timeline":c+"/jira/software/projects/"+b+"/boards/"+a+"/timeline"},convertRoadmapUrlToParams:function(c){var b=document.createElement("a");b.href=-1<c.indexOf("://")?c:"https://"+c;var a=/(?:\?|&)projectKey=([\w][\w]+)(?:&rapidView=(\d+))?/g,d=/(?:.+)\/jira\/software\/?c?\/projects\/([\w][\w]+)\/boards\/(\d+|null|undefined)\/(roadmap|timeline)/g,a=-1<b.href.indexOf("Roadmap.jspa")?a.exec(b.search):d.exec(b.href);return{tenant:"https://"+
b.hostname,project:a&&a[1]?a[1]:null,boardId:a&&a[2]&&"undefined"!==a[2]&&"null"!==a[2]?a[2]:null,isClassic:-1<c.indexOf("software/c/projects")}},matchHostEnvironment:function(c){var b=["jira-dev.com","localhost","atl-test.space"],a=window.location.hostname,d=b.filter(function(a){return-1<c.indexOf(a)}),b=b.filter(function(b){return-1<a.indexOf(b)});return 0<d.length===0<b.length},showCustomErrorScreen:function(c,b,a){c=i.JiraRoadmapMacro.roadmapErrorWithCustomMessage({link:c,buttonText:a.buttonText||
"",docUrl:a.docUrl||"",message:a.message});b.empty();h(c).appendTo(b);k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"showed",actionSubject:"jiraRoadmapMacroError",attributes:{errorType:"custom",isTinyMce:d.getIsTinyMce()}}})},showGenericErrorScreen:function(c,b,a){c=i.JiraRoadmapMacro.roadmapError({link:c,type:a});b.empty();h(c).appendTo(b);k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"showed",actionSubject:"jiraRoadmapMacroError",
attributes:{errorType:a,isTinyMce:d.getIsTinyMce()}}})},showLoadingScreen:function(c){c.empty();var b=i.JiraRoadmapMacro.roadmapLoading();h(b).appendTo(c)},renderPreview:function(c,b,a,l,f,g){d.makeGetRequest(b+"/rest/greenhopper/1.0/roadmap/fragment/configuration/?projectKey="+a+"&fragmentHost="+(window.location.protocol+"//"+window.location.hostname)+(l?"&boardId="+l:""),function(e){f.empty();if(e&&e.data&&e.data.hasActiveJiraSoftwareLicense)if(e.data.isValidRoadmap&&e.data.isRoadmapEnabled&&!e.data.isCrossProject){var j=
l||e.data.boardId,m=d.convertParamsToFragmentUrl(b,a,j),j=d.convertParamsToRoadmapUrl(b,a,j,e.data.isClassic),m=i.JiraRoadmapMacro.roadmapIframe({iframeSrc:m+"&hideHeader="+!c,roadmapUrl:j});h(m).appendTo(f);g&&g({success:!0,boardId:e.data.boardId,isClassic:e.data.isClassic});k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"validated",actionSubject:"jiraRoadmapMacro",attributes:{isTinyMce:d.getIsTinyMce(),isEditPreview:!c}}})}else e.data.isRoadmapEnabled?d.showGenericErrorScreen(b+
"/projects/"+a+"/settings",f,"validation"):d.showGenericErrorScreen(b,f,"not-available"),g&&g({success:!1,boardId:e.data.boardId,isClassic:e.data.isClassic});else{if(e.error&&null!==e.error.message)d.showCustomErrorScreen(b,f,e.error);else if(503===e.status)d.showGenericErrorScreen(b,f,"service-unavailable");else if(e.error&&e.error.errorMessages)switch(0<e.error.errorMessages.length?e.error.errorMessages[0]:""){case "You must have the browse project permission to view this project.":d.showGenericErrorScreen(b,
f,"permission");break;default:d.showGenericErrorScreen(b,f,"not-available")}else d.showGenericErrorScreen(b,f,"not-available");g&&g({success:!1,boardId:null,isClassic:!1})}})}};return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-editor', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/jiraroadmap-editor.js' */
define("confluence-advanced-macros/jiraroadmap-editor","jquery ajs aui/dialog2 confluence/templates confluence/macro-js-overrides confluence-macro-browser/macro-browser-facade confluence-advanced-macros/jiraroadmap-helper".split(" "),function(c,m,r,z,s,A,h){return{overrideOpener:function(i){function o(a){var b="";switch(a){case "invalid-url":b="This doesn\'t look like a URL of Jira timeline.";break;case "inconsistent-env":b="This Jira timeline is in a different environment.";
break;case "service-unavailable":b="Try again later, or contact Atlassian Support if this keeps happening.";break;default:b=""}n.html(b)}function v(a){var b=/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g;if(a&&a.url&&a.url!==""&&a.url.match(b)!==null)if((b=h.convertRoadmapUrlToParams(a.url))&&b.tenant){var d=h.convertParamsToFragmentUrl(b.tenant,b.project,b.boardId);return{url:a.url,iframeUrl:d,tenant:b.tenant,project:b.project,boardId:b.boardId,isClassic:b.isClassic}}return null}
var t=z.JiraRoadmapMacro.roadmapPopupPanel(),s=window.location.protocol+"//"+window.location.hostname,a,u,g,p,k,f,l,n,y=function(e,b,d){g.attr("disabled",true);h.makeGetRequest(e+"/rest/greenhopper/1.0/roadmap/fragment/cloudId?fragmentHost="+s,function(e){if(e&&e.data&&e.data.cloudId){u=e.data.cloudId;var q="/gateway/api/ex/jira/"+u;n.html("");w(k,"query",q+"/rest/api/3/project/search?typeKey=software",function(a){return a.values?{results:a.values.map(function(a){return{id:a.key,text:a.name+" ("+
a.key+")"}})}:{results:[]}},function(b){a.project=b;if(a.tenant&&b){n.html("");x(q,b,null)}});if(a.tenant&&b){k.val(b).auiSelect2("data",{id:b,text:b});x(q,b,d)}else j(f)}else{j(k);j(f);l.empty();e.status===503?o("service-unavailable"):o("invalid-url")}})},w=function(a,b,d,f,q){a.val(null);a.auiSelect2("destroy");a.prop("disabled",false);a.unbind().change(function(){q(a.auiSelect2("val"))});a.auiSelect2({minimumResultsForSearch:b?0:-1,minimumInputLength:0,multiple:false,placeholder:"Select",
ajax:{data:function(a){var e={};b&&(e[b]=a);return e},dataType:"json",url:d,results:f,params:{xhrFields:{withCredentials:true},error:function(){var a=c(".select2-drop-active > .select2-results"),b="No result found.";a.html('<li class="select2-no-results">'+b+"</li>")}},cache:true,quietMillis:300},dropdownCssClass:"jiraroadmap-macro-dropdown"})},j=function(a){a.val(null);a.auiSelect2("destroy");a.auiSelect2({data:[],placeholder:"Select"});
a.prop("disabled",true)},x=function(e,b,d){var e=e+"/rest/agile/1.0/board?negateLocationFiltering=false&orderBy=name&projectLocation="+b,c=function(b){f.prop("disabled",true);a.boardId=b;if(a.tenant&&a.boardId){h.showLoadingScreen(l);n.html("");h.renderPreview(false,a.tenant,a.project,a.boardId,l,function(b){f.prop("disabled",false);if(b){a.boardId=b.boardId;a.isClassic=b.isClassic;b.success?g.removeAttr("disabled"):g.attr("disabled",true)}})}};l.empty();g.attr("disabled",true);w(f,null,e,function(a){return a.values?
{results:a.values.map(function(a){return{id:a.id,text:a.name}})}:{results:[]}},c);if(b&&d){f.val(d).auiSelect2("data",{id:d,text:d});h.makeGetRequest("/gateway/api/ex/jira/"+u+"/rest/agile/1.0/board/"+d,function(a){if(a&&a.data){f.auiSelect2("data",{id:d,text:a.data.name});k.auiSelect2("data",{id:b,text:a.data.location.displayName})}});c(d)}else{f.auiSelect2("data",null);g.prop("disabled",true)}};c("#confluence-jira-roadmap-dialog").length>0&&c("#confluence-jira-roadmap-dialog").remove();a=v(i.params);
i=c(t).appendTo(c("body"));r("#confluence-jira-roadmap-dialog").show();g=c("#insert-jira-roadmap-dialog",i);t=c(".close-jira-roadmap-dialog",i);p=c("#tenant-url",i);k=c("#project-select",i);f=c("#board-select",i);l=c("#roadmap-preview",i);n=c("#field-error",i);g.unbind().click(function(){if(a&&a.tenant&&a.project){A.insert({name:"jiraroadmap",params:{url:h.convertParamsToRoadmapUrl(a.tenant,a.project,a.boardId,a.isClassic)}});r("#confluence-jira-roadmap-dialog").hide()}});t.unbind().click(function(){r("#confluence-jira-roadmap-dialog").hide()});
p.unbind().keyup(function(a,b){var d;return function(){var c=this,f=arguments;if(d){clearTimeout(d);d=void 0}d=setTimeout(function(){a.apply(c,f);d=void 0},b)}}(function(){n.html("");var e=c(this).val(),b=v({url:e});if(!b||e===""||!b.tenant){b&&b.tenant&&!h.matchHostEnvironment(b.tenant)?o("inconsistent-env"):e!==""&&o("invalid-url");l.empty();j(k);j(f);g.attr("disabled",true);a=null}else if(!a||b.tenant!==a.tenant||b.project!==a.project||b.boardId!==a.boardId){a={tenant:b.tenant,project:b.project,
boardId:b.boardId};l.empty();y(a.tenant,a.project,a.boardId);p.val(a.tenant)}},500));if(a&&a.url&&a.tenant){p.val(a.tenant);if(h.matchHostEnvironment(a.tenant))y(a.tenant,a.project,a.boardId);else{o("inconsistent-env");j(k);j(f);g.attr("disabled",true);a=null}}else{g.removeAttr("disabled");p.focus();(!a||!a.project)&&j(k);(!a||!a.boardId)&&j(f)}},init:function(){s.put("jiraroadmap",{opener:this.overrideOpener})}}});
require("confluence/module-exporter").safeRequire("confluence-advanced-macros/jiraroadmap-editor",function(c){require("ajs").toInit(function(){c.init()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-preview', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.JiraRoadmapMacro.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.JiraRoadmapMacro == 'undefined') { Confluence.Templates.JiraRoadmapMacro = {}; }


Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel = function(opt_data, opt_ignored) {
  return '<section id="confluence-jira-roadmap-dialog" class="jiraroadmap jiraroadmap-dialog" class="aui-dialog2 aui-dialog2-xlarge aui-layer" role="dialog" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Jira timeline') + '</h2></header><div class="aui-dialog2-content"><div class="dialog-content"><form action="" onsubmit="return false" class="aui"><div class="field-group select-tenant"><div class="field-label">' + soy.$$escapeHtml('Paste a Jira instance URL') + '</div><input id="tenant-url" type="text" class="text" /></div><div class="field-group select-project"><div class="field-label">' + soy.$$escapeHtml('Project') + '</div><input id="project-select" /></div><div class="field-group select-board"><div class="field-label">' + soy.$$escapeHtml('Board') + '</div><input id="board-select" /></div></form><div class="field-error" id="field-error"></div><div tabindex="-1" id="roadmap-preview" class="jiraroadmap-iframe-container"></div></div></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><form onsubmit="return false" class="aui"><a tabindex="0" id="insert-jira-roadmap-dialog" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Save') + '</a><a tabindex="0" class="close-jira-roadmap-dialog aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</a></form></div></footer></section>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapPopupPanel';
}


Confluence.Templates.JiraRoadmapMacro.roadmapError = function(opt_data, opt_ignored) {
  return '<div class="error-screen"><div class="message" id="preview-error-message">' + ((opt_data.type == 'permission') ? '<h2>' + soy.$$escapeHtml('You don\x27t have permission to view this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check the project settings in Jira.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/adminjiracloud/managing-project-permissions-776636362.html" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>' : (opt_data.type == 'validation' || opt_data.type == 'not-available') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/jirasoftwarecloud/roadmap-957979308.html#Roadmap-TroubleshootyourRoadmap" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>' : (opt_data.type == 'invalid-url') ? '<h2>' + soy.$$escapeHtml('This doesn\x27t look like a URL of Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/>' : (opt_data.type == 'inconsistent-env') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('This Jira timeline is in a different environment.') + '</p>' : (opt_data.type == 'project-type') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('This macro only supports next-gen Jira Software projects.') + '</p>' : (opt_data.type == 'service-unavailable') ? '<h2>' + soy.$$escapeHtml('We can\x27t display this Jira timeline.') + '</h2><p>' + soy.$$escapeHtml('Try again later, or contact Atlassian Support if this keeps happening.') + '</p><br/><a href="https://support.atlassian.com/contact/#/" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Atlassian Support') + '</a>' : '<h2>' + soy.$$escapeHtml('This Jira timeline is not currently active.') + '</h2><p>' + soy.$$escapeHtml('Please check with your system administrator.') + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a><a href="https://confluence.atlassian.com/jirasoftwarecloud/roadmap-957979308.html" target="_blank" tabindex="0" class="aui-button aui-button-link">' + soy.$$escapeHtml('Learn more') + '</a>') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapError.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapError';
}


Confluence.Templates.JiraRoadmapMacro.roadmapIframe = function(opt_data, opt_ignored) {
  return '<iframe id="roadmap-iframe" src="' + soy.$$escapeHtml(opt_data.iframeSrc) + '" width="100%" frameBorder="0" ></iframe>' + ((opt_data.roadmapUrl != '') ? '<div class="preview-footer"><a class="aui-button aui-button-link" target="_blank" href="' + soy.$$escapeHtml(opt_data.roadmapUrl) + '">' + soy.$$escapeHtml('View in Jira') + '</a></div>' : '');
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapIframe.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapIframe';
}


Confluence.Templates.JiraRoadmapMacro.roadmapLoading = function(opt_data, opt_ignored) {
  return '<div class="jiraroadmap-loading"><div class="spinner-container"><div class="spinner"><svg focusable="false" size="50" height="50" width="50" viewBox="0 0 50 50"><circle cx="25" cy="25" r="22.5"></circle></svg></div></div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapLoading.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapLoading';
}


Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage = function(opt_data, opt_ignored) {
  return '<div class="error-screen"><div class="message" id="preview-error-message"><p>' + soy.$$escapeHtml(opt_data.message) + '</p><br/><a href="' + soy.$$escapeHtml(opt_data.link) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Go to Jira') + '</a>' + ((opt_data.docUrl != '' && opt_data.buttonText != '') ? '<a href="' + soy.$$escapeHtml(opt_data.docUrl) + '" target="_blank" tabindex="0" class="aui-button aui-button-primary">' + soy.$$escapeHtml(opt_data.buttonText) + '</a>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage.soyTemplateName = 'Confluence.Templates.JiraRoadmapMacro.roadmapErrorWithCustomMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-preview', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/jiraroadmap-helper.js' */
define("confluence-advanced-macros/jiraroadmap-helper",["jquery","confluence/templates","confluence/legacy-message-queue"],function(h,i,k){var d={getIsTinyMce:function(){try{return 0<document.querySelectorAll('[data-testid="TinyMCEClientRendererTestId"]').length||0<document.querySelectorAll('[data-test-id="tinymce-editor-loaded"]').length}catch(c){return!0}},makeGetRequest:function(c,b){var a=new XMLHttpRequest;a.open("GET",c);a.withCredentials=!0;a.onload=function(){if(200===a.status){var c=JSON.parse(a.responseText);
b({data:c,status:a.status})}else try{b({data:null,error:JSON.parse(a.responseText),status:a.status})}catch(d){b({data:null,error:null,status:a.status})}};a.onerror=function(){b({data:null,error:null,status:a.status})};a.send()},convertParamsToFragmentUrl:function(c,b,a){var d=/[\w][\w]+/g.exec(b);return d&&d[0]?c+"/rest/greenhopper/1.0/roadmap/fragment/confluenceMacro/"+b+"?fragmentHost="+window.location.protocol+"//"+window.location.hostname+(a?"&boardId="+a:""):null},convertParamsToRoadmapUrl:function(c,
b,a,d){return d?c+"/jira/software/c/projects/"+b+"/boards/"+a+"/timeline":c+"/jira/software/projects/"+b+"/boards/"+a+"/timeline"},convertRoadmapUrlToParams:function(c){var b=document.createElement("a");b.href=-1<c.indexOf("://")?c:"https://"+c;var a=/(?:\?|&)projectKey=([\w][\w]+)(?:&rapidView=(\d+))?/g,d=/(?:.+)\/jira\/software\/?c?\/projects\/([\w][\w]+)\/boards\/(\d+|null|undefined)\/(roadmap|timeline)/g,a=-1<b.href.indexOf("Roadmap.jspa")?a.exec(b.search):d.exec(b.href);return{tenant:"https://"+
b.hostname,project:a&&a[1]?a[1]:null,boardId:a&&a[2]&&"undefined"!==a[2]&&"null"!==a[2]?a[2]:null,isClassic:-1<c.indexOf("software/c/projects")}},matchHostEnvironment:function(c){var b=["jira-dev.com","localhost","atl-test.space"],a=window.location.hostname,d=b.filter(function(a){return-1<c.indexOf(a)}),b=b.filter(function(b){return-1<a.indexOf(b)});return 0<d.length===0<b.length},showCustomErrorScreen:function(c,b,a){c=i.JiraRoadmapMacro.roadmapErrorWithCustomMessage({link:c,buttonText:a.buttonText||
"",docUrl:a.docUrl||"",message:a.message});b.empty();h(c).appendTo(b);k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"showed",actionSubject:"jiraRoadmapMacroError",attributes:{errorType:"custom",isTinyMce:d.getIsTinyMce()}}})},showGenericErrorScreen:function(c,b,a){c=i.JiraRoadmapMacro.roadmapError({link:c,type:a});b.empty();h(c).appendTo(b);k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"showed",actionSubject:"jiraRoadmapMacroError",
attributes:{errorType:a,isTinyMce:d.getIsTinyMce()}}})},showLoadingScreen:function(c){c.empty();var b=i.JiraRoadmapMacro.roadmapLoading();h(b).appendTo(c)},renderPreview:function(c,b,a,l,f,g){d.makeGetRequest(b+"/rest/greenhopper/1.0/roadmap/fragment/configuration/?projectKey="+a+"&fragmentHost="+(window.location.protocol+"//"+window.location.hostname)+(l?"&boardId="+l:""),function(e){f.empty();if(e&&e.data&&e.data.hasActiveJiraSoftwareLicense)if(e.data.isValidRoadmap&&e.data.isRoadmapEnabled&&!e.data.isCrossProject){var j=
l||e.data.boardId,m=d.convertParamsToFragmentUrl(b,a,j),j=d.convertParamsToRoadmapUrl(b,a,j,e.data.isClassic),m=i.JiraRoadmapMacro.roadmapIframe({iframeSrc:m+"&hideHeader="+!c,roadmapUrl:j});h(m).appendTo(f);g&&g({success:!0,boardId:e.data.boardId,isClassic:e.data.isClassic});k.push({type:"ATLASSIAN_CONFLUENCE_ANALYTICS_NEXT_TRACK",payload:{source:"macro",action:"validated",actionSubject:"jiraRoadmapMacro",attributes:{isTinyMce:d.getIsTinyMce(),isEditPreview:!c}}})}else e.data.isRoadmapEnabled?d.showGenericErrorScreen(b+
"/projects/"+a+"/settings",f,"validation"):d.showGenericErrorScreen(b,f,"not-available"),g&&g({success:!1,boardId:e.data.boardId,isClassic:e.data.isClassic});else{if(e.error&&null!==e.error.message)d.showCustomErrorScreen(b,f,e.error);else if(503===e.status)d.showGenericErrorScreen(b,f,"service-unavailable");else if(e.error&&e.error.errorMessages)switch(0<e.error.errorMessages.length?e.error.errorMessages[0]:""){case "You must have the browse project permission to view this project.":d.showGenericErrorScreen(b,
f,"permission");break;default:d.showGenericErrorScreen(b,f,"not-available")}else d.showGenericErrorScreen(b,f,"not-available");g&&g({success:!1,boardId:null,isClassic:!1})}})}};return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:jiraroadmap-preview', location = 'com/atlassian/confluence/plugins/macros/advanced/jiraroadmap/jiraroadmap-preview.js' */
define("confluence-advanced-macros/jiraroadmap-preview",["jquery","skate","confluence-advanced-macros/jiraroadmap-helper"],function(b,c,d){return{init:function(){(!window.__skate||!window.__skate.registry||!window.__skate.registry["jiraroadmap-preview"])&&c("jiraroadmap-preview",{type:c.types.CLASS,attached:function(e){var a=b(e).attr("data-src");if((a=d.convertRoadmapUrlToParams(a))&&a.tenant){var c=d.matchHostEnvironment(a.tenant);a.project&&c?d.renderPreview(!0,a.tenant,a.project,a.boardId,b("#roadmap-preview",
e)):c?d.showGenericErrorScreen(a.tenant,b("#roadmap-preview",e),"invalid-url"):d.showGenericErrorScreen(a.tenant,b("#roadmap-preview",e),"inconsistent-env")}}})}}});require("confluence/module-exporter").safeRequire("confluence-advanced-macros/jiraroadmap-preview",function(b){b.init()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:portfolioforjiraplan-editor', location = 'com/atlassian/confluence/plugins/macros/advanced/portfolioforjiraplan/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.Templates.JPOS.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.JPOS == 'undefined') { Confluence.Templates.JPOS = {}; }


Confluence.Templates.JPOS.jposMacroDialog = function(opt_data, opt_ignored) {
  return '<section class="jpos__macro-dialog aui-dialog2 aui-dialog2-xlarge aui-layer" role="dialog" aria-hidden="true" data-aui-remove-on-hide="true"><header class="jpos__macro-dialog-header aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Insert an Advanced Roadmaps for Jira plan') + '</h2></header><div class="jpos__macro-dialog-content aui-dialog2-content"><form action="" onsubmit="return false" class="aui jpos__form">' + soy.$$escapeHtml('This macro currently supports Advanced Roadmaps for Jira plan sharing.') + '<div class="jpos__form-fields"><div class="jpos__field-group jpos__field-group--url"><label for="url" class="jpos__field-label">' + soy.$$escapeHtml('URL') + '</label><div class="jpos__field-group jpos__field-group--flex"><input id="url" type="text" class="jpos__url-input text" /><button tabindex="0" class="jpos__preview-btn aui-button aui-button-primary">' + soy.$$escapeHtml('Preview') + '</button></div><div class="jpos__field-label jpos__field-label--inline">' + soy.$$escapeHtml('Paste the link copied from the Confluence sharing option in Advanced Roadmaps for Jira') + '<a class="jpos__learn-more" href="https://support.atlassian.com/jira-software-cloud/docs/embed-your-advanced-roadmap-plan-in-a-confluence-page/" target="_blank" rel="noopener noreferrer">' + soy.$$escapeHtml('Learn More') + '</a></div><div class="jpos__field-error jpos__field-error--url"><span class="aui-icon aui-icon-small aui-iconfont-error"></span>' + soy.$$escapeHtml('It looks like you\x27ve entered an invalid URL. Check the Confluence sharing link in Advanced Roadmaps for Jira, then try again') + '</div></div><div class="jpos__field-group jpos__field-group--height"><label for="height" class="jpos__field-label">' + soy.$$escapeHtml('Height') + '</label><div class="jpos__field-group jpos__field-group--flex"><div class="aui-buttons"><button tabindex="0" class="jpos__button-base aui-button" title="small"><div class="jpos__size-button" data-value="700"></div></button><button tabindex="0" class="jpos__button-base aui-button" title="medium"><div class="jpos__size-button jpos__size-button--medium" data-value="900"></div></button><button tabindex="0" class="jpos__button-base aui-button" title="large"><div class="jpos__size-button jpos__size-button--large" data-value="1100"></div></button></div><input id="height" type="number" step="10" min="300" class="jpos__height-input text" /><span class="jpos__height-unit">px</span></div><div class="jpos__field-label">' + soy.$$escapeHtml('Choose the height to display on your page') + '</div><div class="jpos__field-error jpos__field-error--height">' + soy.$$escapeHtml('Height must be at least 300px') + '</div></div></div></form><div tabindex="-1" class="jpos__preview-container"></div></div><footer class="jpos__macro-dialog-footer aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><form onsubmit="return false" class="aui"><button tabindex="0" class="jpos__close-dialog aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button><button tabindex="0" class="jpos__insert-macro aui-button aui-button-primary">' + soy.$$escapeHtml('Insert') + '</button></form></div></footer></section>';
};
if (goog.DEBUG) {
  Confluence.Templates.JPOS.jposMacroDialog.soyTemplateName = 'Confluence.Templates.JPOS.jposMacroDialog';
}


Confluence.Templates.JPOS.jposMacroIframe = function(opt_data, opt_ignored) {
  return '<div class="jpos__iframe-container"><iframe class="jpos__iframe" frameborder="none" src="' + soy.$$escapeHtml(opt_data.url) + '" width="100%" height="' + soy.$$escapeHtml(opt_data.height) + '"></iframe></div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JPOS.jposMacroIframe.soyTemplateName = 'Confluence.Templates.JPOS.jposMacroIframe';
}


Confluence.Templates.JPOS.jposIframeTimeout = function(opt_data, opt_ignored) {
  return '<div class="jpos__iframe-load-timeout"><span class="aui-icon aui-icon-small aui-iconfont-error"></span>' + soy.$$escapeHtml('Your preview couldn\x27t be rendered. Please check the url and try again') + '</div>';
};
if (goog.DEBUG) {
  Confluence.Templates.JPOS.jposIframeTimeout.soyTemplateName = 'Confluence.Templates.JPOS.jposIframeTimeout';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:portfolioforjiraplan-editor', location = 'com/atlassian/confluence/plugins/macros/advanced/portfolioforjiraplan/editor.js' */
define("confluence-advanced-macros/portfolioforjiraplan-editor","jquery ajs confluence/api/constants aui/dialog2 confluence/meta confluence/templates confluence/macro-js-overrides confluence-macro-browser/macro-browser-facade".split(" "),function(e,f,j,k,l,g,m,n){return{_validateUrl:function(a){return a.match(RegExp(/^https?:\/\/.+\/secure\/PortfolioRoadmapConfluence\.jspa\?r=[a-zA-Z0-9]{0,30}$/))},_validateHeight:function(a){return a.length>0&&parseInt(a,10)>=300},_renderPreview:function(){var a=
this,c=a.previewContainer.offsetHeight,d=j.CONTEXT_PATH+"/rest/tinymce/1/macro/preview",c={contentId:l.get("page-id"),macro:{name:a.macro.name,params:{url:a.urlInput.value,planHeight:c}}};a._disablePreviewBtn.call(a,"Loading...");a._clearPreview.call(a);e.ajax({url:d,type:"POST",contentType:"application/json",data:JSON.stringify(c)}).done(function(b){a.previewContainer.innerHTML=g.JPOS.jposMacroIframe({height:a.heightInput.value});var c=document.querySelector(".jpos__iframe"),d=c.contentWindow.document;
if(c){a.iframeLoadTimeout=setTimeout(a._iframeLoadTimeout.bind(a),2E4);c.addEventListener("load",function(){clearTimeout(a.iframeLoadTimeout);a._enablePreviewBtn.call(a);d.querySelector("#main").setAttribute("style","padding: 0px; overflow: hidden");d.querySelector("body").style.overflow="hidden"})}b=b.replace("window.onload","var preventPreviewOnloadFnTrigger");b=b.replace("2px solid #efefef","none");d.open();d.write(b);d.close()})},_iframeLoadTimeout:function(){this.previewContainer.innerHTML=g.JPOS.jposIframeTimeout();
this._enablePreviewBtn.call(this)},_clearPreview:function(){this.previewContainer.innerHTML="";clearTimeout(this.iframeLoadTimeout)},_enablePreviewBtn:function(){this.previewBtn.innerHTML="Preview";this.previewBtn.removeAttribute("disabled")},_disablePreviewBtn:function(a){this.previewBtn.innerHTML=f.I18n.getText(a);this.previewBtn.setAttribute("disabled",true)},_addListeners:function(){function a(a){b.heightInput.value=a.target.dataset.value;h.style.display="none";b._validateUrl(b.urlInput.value)&&
b.insertBtn.removeAttribute("disabled")}function c(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(d,e)},b)}}function d(){b.urlInput.value=b.urlInput.value.replace(/(%20|\s)/g,"")}for(var b=this,e=document.querySelectorAll(".jpos__size-button"),g=document.querySelector(".jpos__close-dialog"),f=document.querySelector(".jpos__field-error--url"),h=document.querySelector(".jpos__field-error--height"),i=0;i<e.length;i++)e[i].addEventListener("click",
a);b.previewBtn.addEventListener("click",function(){d();b._renderPreview()});g.addEventListener("click",function(){b.dialog.hide()});b.insertBtn.addEventListener("click",function(){d();n.insert({name:b.macro.name,params:{url:b.urlInput.value,planHeight:b.heightInput.value}});b.dialog.hide()});b.urlInput.addEventListener("keydown",function(a){a.key===" "&&a.preventDefault()});b.urlInput.addEventListener("input",c(function(){d();b._clearPreview();if(!b._validateUrl(this.value)){f.style.display="block";
b._disablePreviewBtn.call(b,"Preview");b.insertBtn.setAttribute("disabled",true);return false}f.style.display="none";b._enablePreviewBtn.call(b);b._validateHeight(b.heightInput.value)&&b.insertBtn.removeAttribute("disabled")},500));b.heightInput.addEventListener("input",c(function(a){if(!b._validateHeight(a.target.value)){h.style.display="block";b.insertBtn.setAttribute("disabled",true);return false}h.style.display="none";b._validateUrl(b.urlInput.value)&&b.insertBtn.removeAttribute("disabled")},
500))},init:function(){var a=this;m.put("portfolioforjiraplan",{opener:function(c){var d=document.createElement("div");d.innerHTML=g.JPOS.jposMacroDialog();document.body.appendChild(d.firstChild);a.macro=c;a.dialog=k(".jpos__macro-dialog");a.dialog.show();a.urlInput=document.querySelector(".jpos__url-input");a.heightInput=document.querySelector(".jpos__height-input");a.insertBtn=document.querySelector(".jpos__insert-macro");a.previewBtn=document.querySelector(".jpos__preview-btn");a.previewContainer=
document.querySelector(".jpos__preview-container");a._addListeners();if(c.params){a.urlInput.value=c.params.url;a.heightInput.value=c.params.planHeight||"700";a.previewBtn.focus()}else{a.heightInput.value="700";a._disablePreviewBtn.call(a,"Preview");a.insertBtn.setAttribute("disabled",true);a.urlInput.focus()}}})}}});require("confluence/module-exporter").safeRequire("confluence-advanced-macros/portfolioforjiraplan-editor",function(e){require("ajs").toInit(function(){e.init()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'confluence.macros.advanced:excerpt-include-macro-browser-resources', location = 'com/atlassian/confluence/plugins/macros/advanced/js/excerpt-include-macro-fields.js' */
AJS.toInit(function(d){function f(){return AJS.DarkFeatures.isEnabled("frontend.modernize.excerpt-include.macro")}function h(a,c){var b=d("<option disabled selected hidden></option>").text(c);a.append(b)}function o(a,c,b,g,e){if(c){f()&&(h(a,"Searching page for excerpts..."),a.prop("disabled",!0),d("#macro-param-div-name").spin("small"));var k=AJS.Meta.get("space-key"),i=c.split(":");1<i.length&&(k=i[0],c=i.slice(1).join(":"));p=c;AJS.safeAjax({url:AJS.contextPath()+
"/rest/api/content?expand=body.atlas_doc_format&limit=1&title="+encodeURIComponent(c)+"&spaceKey="+encodeURIComponent(k),type:"GET",data:{},success:function(k){if(p===c){var j=[],i=null;_.each(k.results,function(a){i=a.id;var a=JSON.parse(a.body.atlas_doc_format.value),b=function(a){a.type==="bodiedExtension"&&a.attrs.extensionKey==="excerpt"&&(a.attrs.parameters.macroParams.name?j.push(a.attrs.parameters.macroParams.name.value):j.push(""));a.content&&_.each(a.content,b)};b(a)});j.sort(function(a,
b){return b===""?-1:a===""?1:a.localeCompare(b)});a.empty();a.prop("disabled",false);if(f()){if(j.length===0){h(a,"No excerpts found");a.prop("disabled",true)}d("#macro-param-div-name").spinStop()}else h(a,"Select excerpt by name...");var l=false,m=false,n={};_.each(j,function(b){var c,e=!!n[b];if(e){c="<option disabled></option>";b===""?l=true:m=true}else{c="<option></option>";n[b]=true}var f=
b===""?"Untitled excerpt":b;c=d(c).text(f);e||c.val(b);a.append(c)});b!==void 0&&n[b]&&a.val(b);d(e).find(".link").attr("href","/wiki/pages/resumedraft.action?draftId="+i);m&&l?d(e).find(".title").text("You have untitled/duplicate excerpts"):m?d(e).find(".title").text("You have duplicate excerpt names"):l&&d(e).find(".title").text("You have multiple untitled excerpts");
m||l?d(e).removeClass("hidden"):d(e).addClass("hidden");g&&b&&g()}}})}else f()&&(a.empty(),h(a,"Select excerpt by name"),a.prop("disabled",!0))}var p=null;AJS.MacroBrowser.setMacroJsOverride("excerpt-include",{fields:{"confluence-content":{"":function(a,c){c=c||{};f()&&(c.truncateTitle=!1);var b=AJS.MacroBrowser.ParameterFields["confluence-content"](a,c),g=b.input.val(),e=function(){var a=b.input.val();if(a!==g&&AJS.MacroBrowser.fields.name)try{o(AJS.MacroBrowser.fields.name.input,
a,void 0,function(){AJS.MacroBrowser.paramChanged();AJS.MacroBrowser.previewMacro(AJS.MacroBrowser.dialog.activeMetadata)},d(AJS.MacroBrowser.fields.name.paramDiv).find(".error-field"))}catch(c){}g=a};b.input.bind("selected.autocomplete-content",e);b.input.blur(e);f()&&(b.input.attr("placeholder"," "),b.input.after(d("<div class='macro-param-page-placeholder'></div>").append('<span class="aui-icon aui-icon-small aui-iconfont-search" role="img" /> ').append("Search and select page with excerpt")));
return b}},string:{name:function(a,c){var b=AJS.MacroBrowser.ParameterFields["enum"](a,c),g=d(['<div class="error-field hidden"><div style="display: flex; background: var(--ds-background-warning, #FFF7D6); padding: 8px; border: 1px solid var(--ds-border-warning, #E2B203); border-radius: 4px; margin-top: 8px;"><div style="margin-right: 8px; font-family: emoji">\u26a0\ufe0f</div><div><p class="title" style="font-weight: bold"></p>',"<p>"+"To select the excerpt you want, give it a unique name on the source page."+
"</p>",'<p><a class="link" href="#">'+"Go to source page"+"</a></p>","</div></div></div>"].join(""));b.paramDiv.append(g);b.input.empty();f()?h(b.input,"Select excerpt by name"):h(b.input,"Select excerpt by name...");b.input.prop("disabled",!0);return b}},"boolean":{nopanel:function(a,c){if(f())return a.displayName="Remove title and frame",
AJS.MacroBrowser.ParameterFields["boolean"](a,c)},inline:function(a,c){var b=AJS.MacroBrowser.ParameterFields["boolean"](a,c);AJS.MacroBrowser.isInFabricEditor()||b.hide();return b}}},beforeParamsSet:function(a){var c=d("#macro-param-name");if(!a[""])return a;try{o(c,a[""],a.name||"",function(){AJS.MacroBrowser.paramChanged();AJS.MacroBrowser.previewMacro(AJS.MacroBrowser.dialog.activeMetadata)},d("#macro-param-div-name .error-field"))}catch(b){}return a},beforeDialogShow:function(a){f()&&(AJS.MacroBrowser.UI.updateButtonText(""),
AJS.MacroBrowser.dialog.gotoPage(1).addHeader(a))}})});
}catch(e){WRMCB(e)};